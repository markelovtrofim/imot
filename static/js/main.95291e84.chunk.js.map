{"version":3,"sources":["store/auth/auth.types.ts","components/common/BlockBox.tsx","assets/images/logo.svg","localizations/index.ts","store/api.ts","store/auth/auth.slice.ts","hooks/redux.ts","store/calls/calls.slice.ts","store/search/search.slice.ts","store/dicts/dicts.slice.ts","store/lang/lang.slice.ts","store/users/users.slice.ts","components/common/Selects/ContainedSelect.tsx","components/common/Header.tsx","components/common/Input.tsx","components/common/ModalWindowBox.tsx","store/search/template.slice.ts","components/common/Snackbar.tsx","components/common/Search/CreateNameTemplateModalWindow.tsx","components/common/Search/DeleteTemplateModalWindow.tsx","components/common/Selects/TextSelect/TextSelect.jss.tsx","components/common/Selects/TextSelect/TextSelect.svg.tsx","components/common/Selects/TextSelect/TextSelect.tsx","utils/optionsCreator.ts","components/common/Checkbox.tsx","store/reports/reports.slice.ts","components/common/Search/SearchSelect.tsx","components/common/Criterias/CriteriaItem.tsx","components/common/Criterias/CriteriasList.tsx","components/common/Selects/CustomControlSelect.tsx","components/common/Criterias/SaveCriterias.tsx","components/common/Criterias/CriteriaTemplate.tsx","components/common/Search/index.tsx","components/common/ButtonGroup.tsx","components/common/DateRangePickerWrapper.tsx","components/common/СontrolBlock.tsx","components/common/Tag.tsx","components/common/IconButton.tsx","components/common/Buttons/Reboot.tsx","components/common/Buttons/Download.tsx","components/common/Buttons/Back.tsx","components/common/AudioPlayer.tsx","pages/Calls/Body/TextMobileStepper.tsx","pages/Calls/Body/DictionaryStep.tsx","pages/Calls/Body/DialogItem.tsx","components/common/Buttons/History.tsx","assets/images/logo.png","assets/images/yandex_PNG20.png","pages/Calls/Body/CallBody.tsx","pages/Calls/Call.tsx","pages/Calls/CallsHeader.tsx","pages/Calls/Calls.tsx","assets/images/Auth/dashboard.png","assets/images/Auth/sound.png","pages/Auth/ForgotPasswordModalWindow.tsx","pages/Auth/SignUpModalWindow.tsx","pages/Auth/Auth.tsx","assets/images/Auth/phone.png","components/common/Buttons/Plus.tsx","pages/Reports/Reports.jss.ts","pages/Reports/Reports.svg.tsx","components/common/Charts/ChartBar.tsx","components/common/Charts/ChartRadar.tsx","components/common/Charts/ChartPie.tsx","components/common/Charts/ChartArea.tsx","components/common/Charts/ChartsBlock.tsx","pages/Reports/Reports.tsx","store/error/error.slice.ts","store/tags/tags.slice.ts","components/MarkupRules/Groups/Group.tsx","components/MarkupRules/Groups/Groups.tsx","components/MarkupRules/Items/Item.tsx","components/MarkupRules/Items/Items.tsx","components/common/Switch.tsx","components/common/FIeld.tsx","assets/images/no-results.png","assets/loading.svg","pages/MarkupRules/Dicts/DictsDetail.tsx","pages/MarkupRules/Dicts/Dicts.tsx","pages/MarkupRules/Tags/TagDetails/TagDetails.jss.ts","components/common/Alert/Alert.svg.tsx","components/common/Alert/Alert.tsx","components/common/Selects/CustomSelect/CustomSelect.jss.tsx","components/common/Selects/CustomSelect/CustomSelect.components.tsx","components/common/Selects/CustomSelect/CustomSelect.tsx","pages/MarkupRules/Tags/TagDetails/TagDetails.svg.tsx","pages/MarkupRules/Tags/TagDetails/TagDetails.tsx","pages/MarkupRules/Tags/TagPage.jss.ts","pages/MarkupRules/Tags/TagGroups/TagGroup/TagGroup.jss.tsx","pages/MarkupRules/Tags/TagGroups/TagGroup/TagGroup.svg.tsx","pages/MarkupRules/Tags/TagGroups/TagGroup/TagGroup.tsx","pages/MarkupRules/Tags/TagGroups/TagGroups.tsx","pages/MarkupRules/Tags/TagItems/TagItem/TagItem.jss.ts","pages/MarkupRules/Tags/TagItems/TagItem/TagItem.tsx","pages/MarkupRules/Tags/TagItems/TagItems.tsx","pages/MarkupRules/Tags/TagDetails/PostModalWindow.tsx","pages/MarkupRules/Tags/TagPage.tsx","pages/MarkupRules/Checklists/ChecklistsDetail.tsx","pages/MarkupRules/Checklists/Checklists.tsx","pages/MarkupRules/MarkupRules.tsx","pages/LoadCall/LoadCall.tsx","pages/Settings/Settings.tsx","pages/Calls/CallPage.tsx","App.tsx","theme.tsx","store/store.ts","index.tsx"],"names":["AuthResponseErrors","BlockBox","bcColor","margin","width","padding","border","borderRadius","height","minHeight","boxShadow","children","classes","makeStyles","boxWrapper","backgroundColor","useStyles","className","translate","key","language","langData","en","ru","instance","axios","create","baseURL","registerNewUser","createAsyncThunk","authData","a","name","email","phoneNumber","setUserData","fullname","phone_number","url_base","window","location","protocol","host","post","JSON","stringify","headers","response","console","log","status","approveUserToken","token","tokenData","fetchAuthToken","thunkAPI","bodyFormData","FormData","append","username","password","localStorage","setItem","data","access_token","mainToken","dispatch","authSlice","actions","setAuth","Number","message","substr","FieldsRequired","setError","IncorrectData","removeAuthToken","_","removeItem","initialState","error","isAuth","isLoading","createSlice","reducers","state","action","payload","authReset","useAppSelector","useSelector","convertDataForRequest","defaultCriterias","activeCriterias","requestArray","i","length","values","push","convertDate","date","yyyy","getFullYear","mm","getMonth","strMm","dd","getDate","strDd","getCallPublicToken","id","parse","getItem","get","getAndSetCallStt","bundleIndex","getCallStt","callSttData","callStt","callsSlice","setStt","stt","index","getAllUserDicts","getAllWordInDictionary","updateDict","sendData","phrases","put","dictId","getAndSetCallAudio","getCallAudio","audioLinkData","audioLink","setAudio","audio","responseType","blob","Blob","type","blobUrl","URL","createObjectURL","getBaseCallsData","getState","startDate","search","endDate","requestParameters","calls","skip","limit","sort","requestData","incrementSkip","setBaseCallsData","getCallsInfo","setEmptyState","leaveBundles","localCalls","getCallInfo","callInfoData","callInfo","info","setCallsInfo","getAndSetCallInfo","infoData","setInfo","getCallsInfoById","callAction","deleteCall","delete","callsAction","getActionFiles","taskId","res","contentType","downloadUrl","document","createElement","href","download","body","appendChild","click","getTask","bundleLength","total","found","callIds","lengthEmptyArray","output","createInitialCalls","selectedCalls","isSelectAllCalls","currentCall","callPageSearchParams","popupVisible","popupPosition","top","left","allUserDicts","setCallPageSearchParams","pushSelectedCall","removeSelectedCall","currentSelectedCalls","current","callId","find","selectedCall","callIdIndex","indexOf","splice","removeSelectedCalls","setSelectAllCalls","setSort","setDictionaryPopupParams","currentCalls","cloneDeep","call","item","callIndex","setCalls","setAllUserDicts","call_ids","slice","map","removeAudio","zeroingSkip","callsReset","setCurrentCall","getAllSearchCriterias","searchSlice","setAllCriterias","getDefaultCriterias","setDefaultCriterias","getSearchHash","hashKey","searchParams","Date","now","allCriterias","activeCriteriasReports","activeCriteriasColumn","setSearchParams","setDate","setDefaultCriteriaValues","obj","setClearDefaultCriteriasValues","setActiveCriterias","setActiveCriteriaValues","removeActiveCriteria","removeAllActiveCriterias","removeAllState","setActiveCriteriasReports","setActiveCriteriaReportsValues","removeActiveCriteriaReports","removeAllActiveCriteriasReports","setActiveCriteriaReportsColumn","setActiveCriteriaReportsColumnValues","removeActiveCriteriaColumnReports","removeAllActiveCriteriasColumnReports","searchReset","getGroups","dictsSlice","setGroups","getDicts","url","filter","group","setDicts","getDict","setCurrentDict","postDict","Error","deleteDict","dictActions","createNullArray","count","result","activePage","activeId","groups","currentGroup","dicts","currentDict","setActivePage","setSearch","setCurrentGroup","setEmptyDicts","dictsReset","getLang","langSlice","setLang","loading","snackbar","text","value","time","setDefaultLang","setLoading","setSnackbar","langReset","getMe","usersSlice","setCurrentUser","getChildUsers","setUsers","getUserToken","getChildUser","setCurrentChildUser","currentUser","childUsers","currentChildUser","OnTopArrow","props","viewBox","fill","xmlns","fillRule","clipRule","d","OnBottomArrow","ContainedSelect","justify","marginRight","onSelectChange","options","customStyles","container","provided","menu","overflow","overflowY","zIndex","outline","background","option","cursor","fontFamily","fontSize","color","control","borderColor","menuIsOpen","minWidth","placeholder","indicatorsContainer","singleValue","selectBox","display","justifyContent","alignItems","selectMenuListInput","position","selectMenuListInputIcon","selectOption","selectArrow","selectArrowOnArrow","marginBottom","selectCheckBox","selectSelectBox","selectPlaceholder","Arrow","memo","cn","Option","useState","setMenuIsOpen","useEffect","addEventListener","removeEventListener","openMenuOnFocus","components","IndicatorsContainer","IndicatorSeparator","Control","onClick","style","onChange","event","isClearable","closeMenuOnSelect","styles","isSearchable","hideSelectedOptions","headerWrapper","headerInner","maxWidth","headerLeftBlock","headerIconWrapper","headerIcon","headerItemText","transition","opacity","textTransform","headerRightBlock","langHandler","langHandlerItem","headerLogout","LogoutSvg","Header","lang","useDispatch","users","path","history","useHistory","historyPathArray","split","pagePath","pathname","currentLang","target","replace","React","alignment","setAlignment","listen","pathArray","languageParam","userData","user","join","getUserData","then","auth","handleUserChange","e","label","reload","convertedOptions","login","optionsConverter","convertedValue","src","LogoImg","alt","ToggleButtonGroup","exclusive","newAlignment","ToggleButton","disabled","accessRights","includes","Select","MenuProps","disableScrollLock","variant","Button","startIcon","Input","inputRoot","TextField","handleChange","autoComplete","Transition","forwardRef","ref","Slide","direction","ModalWindow","isMWOpen","handleMWClose","mwWrapper","mwTitle","mwTitleText","fontWeight","Dialog","open","onClose","TransitionComponent","Typography","getAllTemplates","templateSlice","setAllTemplates","getTemplate","setCurrentTemplate","createTemplate","updateTemplate","deleteTemplate","title","allTemplates","currentTemplate","templateReset","InfoSvg","WarningSvg","ErrorSvg","cx","cy","r","SuccessSvg","CustomSnackbar","bg","testAlign","icon","CircularProgress","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","sx","paddingTop","mwIconButton","mwText","mwHelp","mwButtonBox","marginTop","textAlign","CreateNameTemplateModalWindow","isOpen","handleClose","method","setDisabled","formik","useFormik","initialValues","validate","onSubmit","localDefaultCriterias","items","ModalWindowBox","handleSubmit","LoadingButton","template","useMuiTextSelectStyles","theme","arrowColor","selectArrowOnTopBox","PlusSvg","MinusSvg","CrossSvgWithBg","TextSelect","handleValueChange","iconPosition","customControl","notClose","menuPosition","ifArrowColor","customSelectStyles","right","menuList","createTextSelectStyles","isMenuOpen","CustomMenuList","selectProps","handleSelectClick","setIsMenuOpen","marginLeft","MenuList","optionsCreatorVEL","local","BpIcon","styled","BpCheckedIcon","backgroundImage","content","CustomCheckbox","Checkbox","bgcolor","disableRipple","checkedIcon","inputProps","convertCriterias","convertColumn","parameters","activeReport","groupByName","cols_group_by","group_by","local2","search_items","convertColsGroupBy","select","tagsVal","searchItemsArr","y","callFilters","activeValues","col_name","nameColumn","tagsNameList","convertCallSearch","callSearchArr","arr","call_search_items","getAllReports","reportsSlice","setReports","requestCriterias","requestSearchItemsColumn","requestFilters","reports","requestColsGroupBy","activeParameters","getReport","setActiveReport","getCallReport","setCallReport","deleteReport","getSelectors","getSelectorsValues","selectors","tags","tagNames","getTagNames","setTagNames","allReports","currentSavedReport","callReport","report","cols","rows","total_calls","row_group_header","any","calls_count","calls_minutes","percent_count_from_total","percent_calls_count_from_total","row_info","row_sum_calls_count","row_sum_calls_minutes","row_percent_count_from_total","row_total_processed_calls_count","diff_report","report_parameters_hash","report_name","report_type","period","rows_group_by","cols_groupings","groupings_by_time","report_types","rows_groupings","tableRows","tableColumns","showCharts","setCurrentSavedReport","setInitialSavedReport","setPeriod","setNameReport","setTypeReport","setActiveRowsGroupBy","setDefaultColsGroupBy","setDefaultColsTagGroupBy","setDefaultColsTagsValue","setDefaultColsTitleGroupBy","convertSearchItems","setDefaultColTagsName","setActiveParameters","massiv","op","opTags","setParameterSelectFieldValue","arrayIndex","setParameterTagstFieldValue","setNameColumnFieldValue","setFilterFieldValue","setFilterFieldTags","setActiveCriteriaColumn","criteria","setOptionsCriterias","setActiveColTagsName","setActiveCriteriaValuesColumn","removeActiveCriteriaColumn","removeParameterField","removeAllActiveParameters","removeAll","setTableRows","setTableColumns","removeTableColumnsRows","setShowCharts","removeShowChart","resetReportParameters","CrossWithoutBg","SearchSelect","criteriaFull","criteriaCurrent","isDefaultCriteria","block","array","valueList","handlerOnChange","dropdownIndicator","multiValue","multiValueRemove","valueContainer","paddingRight","selectItem","selectTag","CustomMultiValueLabel","MultiValueLabel","CustomMultiValueRemove","MultiValueRemove","CustomInd","CustomOption","checked","Boolean","selectSearch","useRef","selectType","focus","onInputChange","inputValue","onMenuInputFocus","autoCorrect","spellCheck","currentTarget","onMouseDown","stopPropagation","onTouchEnd","onFocus","handleSelectChange","eventConverter","eventConverterResult","converter","converterCurrentResult","converterFullResult","isMulti","createOptionPosition","formatCreateLabel","str","tabIndex","isValidNewOption","DropdownIndicator","ValueContainer","hasValue","CHIPS_LIMIT","chips","overflowCounter","displayChips","searchText","whiteSpace","CriteriaItem","searchItems","flexWrap","searchItem","searchItemBlock_1","gridRowStart","gridRowEnd","searchItemBlock_2","searchItemBlock_3","searchItemBlock_4","searchItemBlock_noWide","searchItemBlock_Wide","CriteriasList","switchSearchItemCLassName","classSwitcher","compResult","v","criteriaWide","wide","VerticalDotsSvg","HorizontalDotsSvg","PenSvg","TrashSvg","CloneSvg","CustomControlSelect","svg","optionsPosition","customDotsStyles","base","bottom","flexDirection","isDisabled","menuPlacement","SingleValue","searchTitleRight","searchDeleteAllButton","searchDeleteAllButtonText","searchButton","textDecoration","searchButtonIcon","FolderPlusSvg","CrossSvg","SaveCriterias","removeAllCriteriasHandler","handleCreateNewTemplateButtonClick","criteriaTemplateTitle","borderLeft","paddingLeft","criteriaTemplateText","lineHeight","criteriaTemplateTextNumber","CriteriaTemplate","searchTitle","searchTitleLeft","searchTitleLeftText","searchTitleLeftStick","tagsBox","searchSearchButton","Search","pageName","searchRequest","bastCallDataResponse","bastCallData","search_filter_hash","newSearchParams","searchParamsObj","queryString","hash","searchHash","searchHashRequestData","searchHashRequestError","searchHashRequestPayload","convertUrlHash","convertedTemplate","optionsCreator","isOpenRenameWindow","setIsOpenRenameWindow","isOpenRenameMethod","setIsOpenRenameMethod","isOpenDeleteWindow","setIsOpenDeleteWindow","setOp","handleMoreSelectClick","forEach","fullCriteriaLocal","activeCriteriasLocal","some","loadingPosition","parseInt","DeleteTemplateModalWindow","cbDateItems","controlBlockDateItem","calendar","calendarInput","WebkitTextFillColor","controlBlockButtonBox","controlBlockButton","periods","today","yesterday","week","month","year","allTime","getPeriod","getNamePeriod","Object","keys","ButtonGroup","unitsOfTime","unitOfTime","toString","CalendarSvg","dateRangePickerInputs","outlined","dateRangePanel","borderTop","DateRangePickerWrapper","DateRangePicker","menuClassName","ranges","startOfDay","endOfDay","closeOverlay","subDays","subMonths","addYears","caretAs","isoWeek","appearance","format","onClean","controlBlockWrapper","controlBlockDate","controlBlockDownload","cbButtonWithIcon","ControlBlock","element","getElementById","classList","remove","dateSearch","dateReports","periodReports","errorSnackbar","setErrorSnackbar","disabledCalendar","setDisabledCalendar","disabledCalendarReport","setDisabledCalendarReport","switchEntity","TwoTags","general","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","Chip","BaseTag","Fragment","matchData","tooltip","arrow","Tooltip","disableInteractive","placement","IconButton","tooltipTitle","tooltipPlacement","button","useButtonStyles","Fab","RebootSvg","Reboot","DownloadSvg","DownloadHref","DownloadOnClick","BackSvg","Back","audioPlayer","AudioPlayer","callAudio","onListen","audioPlayerRef","setIsPlaying","controls","listenInterval","onSeeked","TextareaComponent","changeValue","AllUserDictsComponent","handleNext","getAllUserDictsFunc","choosedDictIdFunc","chooseOneDict","AllPhraseInDictComponent","phrasesValue","updatePhrasesValue","choosedDictId","getAllPhraseInDict","TextMobileStepper","selectedText","changeSelectedText","setChoosedDictId","useTheme","activeStep","setActiveStep","setPhrasesValue","setPhrases","newPhrases","setNewPhrases","getPhrasesForTextarea","massive","prevActiveStep","handleBack","userDicts","newValue","addPhrase","steps","description","addPhraseFunc","maxSteps","Box","flexGrow","Paper","square","elevation","pl","p","size","sendPhrases","BootstrapDialog","spacing","DictionaryStep","selectionText","closeDictionaryFunc","setOpen","setSelectedText","DialogItem","prevFragment","fragment","fragmentIndex","diItem","diBodyInner","diBodyText","dateTypography","diTagsBlock","diFragment","typographyTitle","titleCustomer","titleEmployee","setSelectionText","isUserSelectText","setIsUserSelectText","setCursorPosition","condition","timeConverter","begin","onMouseUp","getSelection","bounds","getBoundingClientRect","clientY","x","clientX","pageX","pageY","XX","innerWidth","YY","innerHeight","trim","words","word","j","audioEl","play","currentTime","HistorySvg","History","CallSvg","CallBody","fragments","expanded","audioRef","onFragmentClick","setIsCallBodyData","prevActiveFragment","activeFragmentRef","callBodyWrapper","cbDialogWrapper","cbDialogInner","cbDialogItems","audioPlayerBox","isActive","activeFragment","prevIndex","undefined","currentIndex","getIndices","necessaryElements","indices","handleMWOpen","MWButtonLoading","setMWButtonLoading","engine","keepFragments","sttForm","setSttForm","publicTokenData","publicToken","origin","publicUrl","navigator","clipboard","writeText","keep_fragments","newCallInfoData","newCallSttData","sttAction","eventCurrentTime","currentTimeLocal","currentFragments","phrase","end","currentFragmentsIndices","currentWords","currentWordsIndices","findWordIndexes","activeWord","add","removeElement","fBegin","fEnd","formPublicToken","allowedActions","rebootAction","unshift","callActionSelectConverter","operatorPhone","clientPhone","callTimeReadable","Logo","Yandex","Accordion","disableGutters","TransitionProps","unmountOnExit","timeout","palette","divider","borderBottom","AccordionSummary","expandIcon","mode","transform","AccordionDetails","MuiAccordionDetails","CallStubMiddleware","handleExpandedChange","solo","setLastElement","accordion","slave","callInner","employee","employeeText","callDateBox","callDate","callTime","callDurationBox","callDuration","callMNumberBox","callMNumber","callTagsTitle","accordionDetails","Call","Grid","xs","Skeleton","s","hoursIsDisplay","pad","n","secs","mins","areEqual","prevProps","nextProps","accordionSummary","userSelect","callEmAndCl","tagsAndFragmentsBlock","setIndex","isCallBodyData","tagsAndFragmentsArray","tagsAndFragmentsSeparator","scroll","setTimeout","topValue","pageYOffset","scrollTo","behavior","onResize","offsetHeight","removeFragment","activePhraseHtmlEl","activePhrase","allPhrases","scrollIntoView","toUpperCase","duration","Stack","tag","callsHeader","callsTitle","callsCols","callsTitleText","ClockSvg","ArrowsSvg","CallsHeader","switchTitleFound","foundUseApp","totalUseApp","sortParams","sortArray","selectedCallsConverter","superMegaUltraHardFunction","setMWOpen","taskIdData","taskPayload","task_id","deleteAction","callsLocal","sttSubmit","swapChannelsAction","downloadAction","excelAction","Calls","setCallsLocal","hasMore","setHasMore","setExpanded","pushNewCalls","dataLength","next","loader","callsArrays","ForgotPasswordModalWindow","submitButtonDisabled","setSubmitButtonDisabled","test","alert","mwNumberInput","SignUpModalWindow","isUserRegistered","setIsUserRegistered","closeThisModalWindow","me","render","setFieldValue","defaultCountry","authWrapper","authBothSides","authGreetSide","flex","authText","authWelcome","authTo","authHelp","authPhoneIcon","authDashboardIcon","authSoundIcon","authFormSide","authFormInner","authInputBox","authInput","authLogoBox","authPasswordInputIcon","authLoginInputIcon","authForgotButton","authButton","LoginSvg","PasswordSvg","Auth","authToken","URLSearchParams","buttonClick","setButtonClick","isUserApprove","setIsUserApprove","openChangePasswordWindow","setOpenChangePasswordWindow","openSignUpWindow","setOpenSignUpWindow","meData","approveTokenData","isApprove","approveAuthToken","DashboardPng","SoundPng","endIcon","severity","Plus","handleClick","reportsStyles","reportItemInfo","reportTitle","reportFindNumber","reportButtonsGroup","reportButtonsGroupLeft","reportOptionsButton","reportOptionsButtonActive","getReportsButton","criteriaList","filtersBlock","filterBlockFlex","filterBlockWrapper","filterBlockControl","filterBlockTitle","parameterBlock","flexCenter","parameterItemTitle","parameterSelect","reportInput","checkboxDiff","checkboxDiffValues","checkboxDiffLabel","reportName","errorInput","errorTitle","notFoundCalls","deleteModal","table","overflowX","backgroundСolor","flexCenterMb","tableHeaderTitle","tableHeaderSubTitle","paddingBottom","tableHeaderSubSubTitle","centerMessage","centerMessageTitle","green","orange","orange2","red","blue","purple","darkYellow","cyan","magenta","getRandomColor","Math","floor","random","ChartBar","dataKey","ResponsiveContainer","BarChart","XAxis","YAxis","Legend","ReferenceLine","stroke","Bar","stackId","ChartRadar","RadarChart","outerRadius","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","fillOpacity","ChartPie","PieChart","Pie","ChartArea","LineChart","Line","strokeWidth","ChartsBlock","chartTypeValue","dataChart","handleCheckChart","checkChart","FormGroup","FormControl","FormLabel","RadioGroup","defaultValue","FormControlLabel","Radio","Reports","savedReportsOptions","optionsCreatorWithName","totalCalls","foundCalls","setFoundCalls","callsSwitch","setCallSwitch","panel","allCriteriasColumn","visibleParameters","setVisibleParameters","funcForTag","func","funcForCriterias","selectNames","tag_name_list","tag_value_list","operator_phone","client_phone","stt_engine","hour","day","chartTypeOptions","setChartTypeValue","handleOptionsReportsSelect","selectTitle","handleOptionsReportsSelectObj","allCriteriasArr","groupByColumns","selectorsValues","typeReportOptions","typeReport","typeReportValue","groupByRowsReportOptions","groupByRows","groupByRowsValue","timeColumnsReportOptions","timeColumnsReportValue","setTimeColumnsReportValue","tagNamesOptions","tagNamesValue","tagNamesColOptions","tagNameColFrom","tagNamesColValue","tagNameListValue","opCriteriasColumn","setOpCriteriasColumn","opAddCriterias","setOpAddCriterias","groupByColumnsReportOptions","groupByColumnsValue","callSearchItems","handleArray","handleArrayItem","activeSearchItems","colsGroupDefault","reportNameColumnDefault","checkboxValue","setCheckBoxValue","checkboxCalls","setCheckboxCalls","checkboxMinutes","setCheckboxMinutes","checkboxPercent","setCheckboxPercent","checkboxShowChart","setCheckChart","rowGroupHeaderTitle","columnsTable","columnsArray","field","headerName","editable","headerAlign","align","headerClassName","cellClassName","renderHeader","columns","resultIds","itemRow","indexRow","itemCol","indexCol","diffValue","diffAdd","diffValueMinutes","diffAddMinutes","diffValuePercent","diffAddPercent","diffValueCount","diffAddCount","rowsTable","setDataChart","getDataChartFunc","zeroParameters","getCallParameters","hideVisibleParameters","groupColumnsItem","activeColsCriterias","formReport","validateInputItem","setValidateInputItem","saveReportAsync","deleteReportAsync","getCalls","setIsOpen","heightTable","setHeightTable","gridWrapperRef","gridDiv","gridEl","querySelector","gridElHeader","gridElHeaderInner","clientHeight","maxHeight","allOptions","activeCriteriasArr","onAllCriteriasColumnSelectValueChangeTEST","visibility","alignSelf","DataGrid","autoHeight","pagination","pageSize","rowsPerPageOptions","disableColumnMenu","onCellClick","params","row","callsArrayIndex","errorSlice","textError","counterError","showError","setTextError","incrementCounterError","setShowError","getTagGroups","tagsSlice","setTagGroups","getTags","generateEndUrlPart","setTags","getTag","setCurrentTag","setActiveGlobalFilterCriterias","globalFilter","removeFragments","fragmentRules","setFragment","removeSetTags","setSetTag","updateTag","postTag","deleteTag","getAllGlobalTagFilters","setAllGlobalFilterCriterias","tagsActions","tagId","activeTagId","searchInput","tagGroups","currentTagGroup","currentTag","allGlobalFilterCriterias","defaultGlobalFilterCriterias","activeGlobalFilterCriterias","activeFragments","activeSetTags","DirectionOptions","fragmentsArray","phrasesAndDicts","fromStart","silentBefore","silentAfter","interruptTime","setCurrentTagGroup","setSearchInput","fullCriteria","setActiveGlobalFilterCriteria","removeActiveGlobalFilterCriteria","currentActiveCriterias","currentActiveCriteria","criteriaIndex","setActiveGlobalFilterCriteriaValues","activeCriteria","activeCriteriaIndex","fragmentRulesItemLocal","visible","dictsArray","converted","setFragmentFieldValue","fieldIndex","setFragmentField","removeFragmentField","setSetTagFieldValue","tagIndex","fieldKey","removeSetTag","tagsReset","PurpleCircleSvg","Group","groupItem","groupTopBlock","groupTopBlockText","groupBottomBlock","groupBottomBlockText","groupBottomBlockRight","groupBottomBlockSvg","userIdData","userId","onGroupClick","dictsData","dataDict","dict","extract","Groups","dictGroups","Item","itemBox","borderRight","rule","usedRules","Items","currentItem","grey","Root","switchUnstyledClasses","track","thumb","focusVisible","input","CustomSwitch","onChecked","SwitchUnstyled","component","componentsProps","Field","bgColor","labelBrother","fieldBox","fieldText","fieldLabel","ddTextarea","resize","switchText","rulesText","DictDetails","groupName","setSubmitLoading","phrasesParseToObject","phrasesArray","phrasesArrayNew","groupsData","setRender","submitLoading","deleteLoading","setDeleteLoading","deleteDictMWIsOpen","setDeleteDictMWIsOpen","dictHandleDelete","dataDicts","enabled","setChecked","checkedDisable","setCheckedDisable","InputBase","Switch","createSelectOptions","DictDetailsStubMiddleware","Preloader","noResultsPng","createQueryString","queryObj","DictsPage","dpContainer","dpLeftBlock","dpLeftBlockGroups","dpLeftBlockDicts","dpBothBox","dpRightBlock","MWTitle","MWTitleText","MWButtons","MWInput","useDictsStyles","searchStringParserInObj","initialString","searchStringArray","query","queryByParameters","searchParamsObject","currentGroupLocal","getStartDictsData","newSearch","currentSearch","oldSearchConverted","dictHandleAddSubmit","setAddButtonLoading","dictName","owner","sttAutoReplace","allowedUsers","newDictIdData","newDictId","setSuccessSnackbarOpen","setAddDictMWIsOpen","addDictMWIsOpen","addButtonLoading","isErrorSnackbarOpen","setErrorSnackbarOpen","isSuccessSnackbarOpen","searchObj","useTagDetailsStyles","tdWrapper","tdNameAdnPriority","tdTagNameInput","tdPriorityInput","typographyTitleMini","typographyTitleMiniTwo","typographyTitleMiniThree","CustomAlert","iconType","alertObject","useMuiCustomSelectStyles","selectCustomStylesCreator","LimitedChipsContainer","CustomSelect","valueHandler","isDefaultField","deleteIcon","removeSelectHandler","AddButton","TagDetails","globalFilterOptions","localCriterias","defAcCriterias","handleGlobalFilterSelectClick","globalFilterValueHandler","isDefault","selectConverter","defaultValues","addRuleSelectConverter","priority","calculatedRulePriority","globalFiltersForRequest","fragmentsForRequest","ii","iii","rulePriority","deleteMWIsOpen","setDeleteMWIsOpen","buttonLoading","setButtonLoading","handleDeleteMWClose","currentCriteria","removeGlobalFilterField","displayFragment","fragmentField","fragmentFieldIndex","setTagIndex","tagsData","tagsDicts","useTagsStyles","tagsContainer","useTagGroupStyles","TagGroup","onTagGroupClick","dataTag","TagGroups","useTagItemStyles","TagItem","TagItems","PostModalWindow","MWTextTitle","allDicts","convertedDicts","dictsConverter","howSaid","postTagData","TagPage","getStartTagsData","ChecklistsDetail","ChecklistsPage","checklistsContainer","checklistsLeftBlock","checklistsRightBlock","SearchInput","searchTagsParams","searchDictsParams","isDtOrTg","searchInHistory","newSearchDictsParams","newSearchTagsParams","searchInputBox","searchInputInputBox","searchInputSvgBox","MarkupRulesButtons","buttonsBox","page","SearchSvg","InfoCircleActive","InfoCircle","MarkupRules","pathActivePage","appClasses","Dicts","Checklists","LoadCall","loadCallInner","loadCallTitle","loadCallSelectLabel","loadCallButton","employeeSelectTestOptions","employeeSelectTestValues","setEmployeeSelectTestValues","metaSelectTestOptions","metaSelectTestValues","setMetaSelectTestValues","snackbarIsOpen","setSnackbarIsOpen","MenuItem","menuItem","menuItemText","useMenuItemStyles","Settings","settingsBox","settingsMenu","settingsMenuTitle","settingsBodyInner","useSettingsStyles","settingsPageChanger","setSettingsPageChanger","CallPage","callPageBox","callAudioData","fetchCallInfoData","to","wrapper","App","searchCallParams","exact","createTheme","typography","body1","allVariants","primary","main","contrastText","secondary","rootReducer","combineReducers","reducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","__store__","ReactDOM","StrictMode","StylesProvider","injectFirst","ThemeProvider"],"mappings":"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","file":"static/js/main.95291e84.chunk.js","sourcesContent":["export enum AuthResponseErrors {\r\n  FieldsRequired = 422,\r\n  IncorrectData = 401\r\n}","import React, {FC} from 'react';\r\nimport {makeStyles} from '@mui/styles';\r\n\r\ntype BoxPropsType = {\r\n  width?: string,\r\n  padding?: string,\r\n  borderRadius?: string,\r\n  border?: string,\r\n  height?: string,\r\n  minHeight?: string,\r\n  margin?: string,\r\n  bcColor?: string,\r\n  boxShadow?: string,\r\n};\r\n\r\nconst BlockBox: FC<BoxPropsType> = ({bcColor, margin, width, padding = '0', border,\r\n                                     borderRadius = '10px', height = '100%', minHeight, boxShadow, children\r\n                                   }) => {\r\n  const useStyles = makeStyles(({\r\n    boxWrapper: {\r\n      backgroundColor: bcColor ? bcColor : '#FFFFFF',\r\n      margin: margin ? margin : '0px',\r\n      width,\r\n      height,\r\n      minHeight,\r\n      padding,\r\n      border,\r\n      borderRadius,\r\n      boxShadow,\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return <div className={classes.boxWrapper}>\r\n    {children}\r\n  </div>\r\n};\r\n\r\nexport default BlockBox;","export default __webpack_public_path__ + \"static/media/logo.db689cef.svg\";","import en from './en.json';\r\nimport ru from './ru.json';\r\nimport { LangType } from \"../store/lang/lang.slice\";\r\n\r\nexport const translate = (key: string, language: string): string => {\r\n  let langData: { [key: string]: string } = {};\r\n  if (language === 'en') {\r\n    langData = en;\r\n  } else if (language === 'ru') {\r\n    langData = ru;\r\n  }\r\n  return langData[key];\r\n}","import axios from 'axios';\r\n\r\nconst API_URL = 'https://imot-api.pyzzle.ru';\r\n\r\nexport const instance = axios.create({\r\n  baseURL: API_URL\r\n});\r\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { AuthResponseErrors } from \"./auth.types\";\r\nimport { instance } from \"../api\";\r\n\r\ntype AuthType = {\r\n  access_token: \"string\",\r\n  token_type: \"string\"\r\n};\r\n\r\nexport const registerNewUser = createAsyncThunk(\r\n  'auth/registerNewUser',\r\n  async (authData: { name: string, email: string, phoneNumber: string }) => {\r\n    const { name, email, phoneNumber } = authData;\r\n    const setUserData = {\r\n      fullname: name,\r\n      email: email,\r\n      phone_number: phoneNumber,\r\n      url_base: `${window.location.protocol}//${window.location.host}`,\r\n    };\r\n    const response = await instance.post<string>('/user/register', JSON.stringify(setUserData), {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'accept': 'application/json',\r\n      }\r\n    });\r\n    console.log(response);\r\n    return response.status;\r\n  }\r\n);\r\n\r\nexport const approveUserToken = createAsyncThunk(\r\n  'auth/approveToken',\r\n  async (token: any) => {\r\n    const tokenData = {\r\n      token: token\r\n    }\r\n    const response = await instance.post<string>('/user/approve', JSON.stringify(tokenData), {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'accept': 'application/json'\r\n      }\r\n    });\r\n    console.log(response);\r\n    return response.status;\r\n  }\r\n)\r\n\r\nexport const fetchAuthToken = createAsyncThunk(\r\n  'auth/fetchAuthToken',\r\n  async (authData: { username: string, password: string }, thunkAPI) => {\r\n    try {\r\n      let bodyFormData = new FormData();\r\n      bodyFormData.append('username', authData.username);\r\n      bodyFormData.append('password', authData.password);\r\n      const response = await instance.post<AuthType>('token', bodyFormData, {\r\n        headers: {\r\n          'Content-Security-Policy': 'block-all-mixed-content'\r\n        }\r\n      });\r\n      localStorage.setItem('token', JSON.stringify({\r\n        token: response.data.access_token\r\n      }));\r\n      localStorage.setItem('mainToken', JSON.stringify({\r\n        mainToken: response.data.access_token\r\n      }));\r\n      thunkAPI.dispatch(authSlice.actions.setAuth(true));\r\n      return response.data;\r\n    } catch (error) {\r\n      // @ts-ignore\r\n      const status = Number(error.message.substr(-3, 3));\r\n      if (status === AuthResponseErrors.FieldsRequired) {\r\n        thunkAPI.dispatch(authSlice.actions.setError('Поля обязательны для ввода'));\r\n      } else if (status === AuthResponseErrors.IncorrectData) {\r\n        thunkAPI.dispatch(authSlice.actions.setError('Неверный логин или пароль'));\r\n      } else {\r\n        thunkAPI.dispatch(authSlice.actions.setError('Непредвиденная ошибка. Перезагрузите приложение.'));\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeAuthToken = createAsyncThunk(\r\n  'auth/removeAuthToken',\r\n  async (_, { dispatch }) => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('path');\r\n    dispatch(authSlice.actions.setAuth(false));\r\n  }\r\n);\r\n\r\ntype InitialStateType = {\r\n  error: null | string,\r\n  isAuth: boolean,\r\n  isLoading: boolean\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  error: null,\r\n  isAuth: false,\r\n  isLoading: false\r\n};\r\n\r\nexport const authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    setAuth(state, action: PayloadAction<boolean>) {\r\n      state.isAuth = action.payload;\r\n    },\r\n    setError(state, action: PayloadAction<string | null>) {\r\n      state.error = action.payload;\r\n    },\r\n\r\n    authReset: () => initialState\r\n  }\r\n});\r\n","import {TypedUseSelectorHook, useSelector} from \"react-redux\";\r\nimport {RootState} from \"../store/store\";\r\n\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import {createAsyncThunk, createSlice, current, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {CallActionDataType, CallInfoType, CallsActionDataType, CallType} from \"./calls.types\";\r\nimport {RootState} from \"../store\";\r\nimport {instance} from \"../api\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\n// get all calls\r\ntype ResponseBaseCallsDataType = {\r\n  total: number,\r\n  found: number,\r\n  skip: number,\r\n  limit: number,\r\n  call_ids: string[]\r\n};\r\n\r\ntype DictionaryPopupType = {\r\n  popupVisible: boolean,\r\n  popupPosition: {\r\n    top: number,\r\n    left: number,\r\n  }\r\n};\r\n\r\nconst convertDataForRequest = (defaultCriterias: any, activeCriterias: any) => {\r\n  let requestArray = [];\r\n  for (let i = 0; i < defaultCriterias.length; i++) {\r\n    if (defaultCriterias[i].values.length > 0) {\r\n      requestArray.push({ key: defaultCriterias[i].key, values: defaultCriterias[i].values })\r\n    }\r\n  }\r\n  for (let i = 0; i < activeCriterias.length; i++) {\r\n    if (activeCriterias[i].values.length > 0) {\r\n      requestArray.push({ key: activeCriterias[i].key, values: activeCriterias[i].values });\r\n    }\r\n  }\r\n  return requestArray;\r\n};\r\n\r\nconst convertDate = (date: Date | null) => {\r\n  if (date) {\r\n    const yyyy = date.getFullYear();\r\n    const mm = date.getMonth() + 1; // Months start at 0!\r\n    let strMm = `${mm}`;\r\n\r\n    const dd = date.getDate();\r\n    let strDd = `${dd}`;\r\n\r\n    if (mm < 10) strMm = `0${mm}`;\r\n    if (dd < 10) strDd = `0${dd}`;\r\n    return `${yyyy}-${strMm}-${strDd}`;\r\n  }\r\n  return date;\r\n};\r\n\r\n// публичный токен - токен, который создается для доступа к конкретному звонку даже для не авторизованных пользователей.\r\nexport const getCallPublicToken = createAsyncThunk(\r\n  'calls/getCallPublicToken',\r\n  async (id: string, thunkAPI) => {\r\n    const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const { data } = await instance.get(`call/${id}/public_token`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getAndSetCallStt = createAsyncThunk(\r\n  'calls/getCallStt',\r\n  async (payload: { id: string, bundleIndex: number | null }, thunkAPI) => {\r\n    if (payload.bundleIndex || payload.bundleIndex === 0) {\r\n      const callSttData = await thunkAPI.dispatch(getCallStt({id: payload.id}));\r\n      // @ts-ignore\r\n      const callStt = callSttData.payload;\r\n      thunkAPI.dispatch(callsSlice.actions.setStt({stt: callStt, id: payload.id, index: payload.bundleIndex}));\r\n    }\r\n  }\r\n);\r\n\r\nexport const getCallStt = createAsyncThunk(\r\n  'calls/getCallStt',\r\n  async (payload: { id: string | any, token?: string | any }, thunkAPI) => {\r\n    const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const { data } = await instance.get(`call/${payload.id}/stt`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${payload.token ? payload.token : token}`\r\n      }\r\n    });\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getAllUserDicts = createAsyncThunk(\r\n  'dicts/getAllUserDicts',\r\n  async (thunkAPI) => {\r\n    const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n\r\n    const { data } = await instance.get(`/dicts/?show_disabled=false&only_local=false`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'accept': `application/json`,\r\n      }\r\n    });\r\n\r\n    // @ts-ignore\r\n    // await thunkAPI.dispatch(callsSlice.actions.setAllUserDicts({allUserDicts: data}));\r\n\r\n    console.log(\"DICTS\", data);\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getAllWordInDictionary = createAsyncThunk(\r\n  'dicts/getAllWordInDictionary',\r\n  async (payload: { id: string }) => {\r\n    const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n\r\n    const { data } = await instance.get(`/dict/${payload.id}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'accept': `application/json`,\r\n      }\r\n    });\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const updateDict = createAsyncThunk(\r\n  'dicts/updateDictPhrases',\r\n  async (payload: { dictId: string, phrases: any[] }) => {\r\n    try {\r\n      const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n      console.log(payload);\r\n      const sendData = {\r\n        phrases: payload.phrases\r\n      }\r\n      // @ts-ignore\r\n      const response = await instance.put<string>(`/dict/${payload.dictId}`, JSON.stringify(sendData), {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'accept': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        }\r\n      });\r\n\r\n      console.log(response);\r\n      console.log(payload);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n  }\r\n)\r\n\r\nexport const getAndSetCallAudio = createAsyncThunk(\r\n  'calls/getAndSetCallAudio',\r\n  async (payload: { id: string, bundleIndex: number }, thunkAPI) => {\r\n    const audioLinkData = await thunkAPI.dispatch(getCallAudio({ id: payload.id }));\r\n    // @ts-ignore\r\n    const audioLink = audioLinkData.payload;\r\n    thunkAPI.dispatch(callsSlice.actions.setAudio({ audio: audioLink, id: payload.id, index: payload.bundleIndex }))\r\n  }\r\n);\r\n\r\nexport const getCallAudio = createAsyncThunk(\r\n  'calls/getCallAudio',\r\n  async (payload: { id: string | any, token?: string | any }, thunkAPI) => {\r\n    const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const { data } = await instance.get(`call/${payload.id}/audio`, {\r\n      responseType: 'arraybuffer',\r\n      headers: {\r\n        'Authorization': `Bearer ${payload.token ? payload.token : token}`,\r\n        'Content-Type': 'audio/wav'\r\n      }\r\n    });\r\n    const blob = new Blob([data], {\r\n      type: 'audio/wav'\r\n    });\r\n    // ниже штука, которая в теории может помочь загружать аудио постепенно, а не дожедаться его полостью.\r\n    // const source = new MediaSource();\r\n    const blobUrl = URL.createObjectURL(blob);\r\n    return blobUrl;\r\n  }\r\n);\r\n\r\nexport const getBaseCallsData = createAsyncThunk(\r\n  'calls/getBaseCallsData',\r\n  async (payload: { sort?: string }, thunkAPI) => {\r\n    try {\r\n      const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n\r\n      // @ts-ignore;\r\n      const state: RootState = thunkAPI.getState();\r\n\r\n      let startDate = convertDate(state.search.date[0]);\r\n      let endDate = convertDate(state.search.date[1]);\r\n\r\n      let requestParameters =\r\n        `skip=${state.calls.skip}&limit=${state.calls.limit}` +\r\n        `&start_date=${startDate}` +\r\n        `&end_date=${endDate}` +\r\n        `&sort=${payload.sort ? (payload.sort !== \"date\" ? payload.sort : \"\") : \"\"}`;\r\n\r\n      if (!startDate && !endDate) {\r\n        requestParameters =\r\n          `skip=${state.calls.skip}&limit=${state.calls.limit}`\r\n      }\r\n      const requestData = convertDataForRequest(state.search.defaultCriterias, state.search.activeCriterias);\r\n      const {data} = await instance.post<ResponseBaseCallsDataType>(\r\n        `search_calls/?` +\r\n        requestParameters,\r\n        requestData,\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      thunkAPI.dispatch(callsSlice.actions.incrementSkip(null));\r\n      // @ts-ignore\r\n      thunkAPI.dispatch(callsSlice.actions.setBaseCallsData({...data, skip: thunkAPI.getState().calls.skip}));\r\n      // @ts-ignore\r\n      await thunkAPI.dispatch(getCallsInfo(thunkAPI.getState().calls.calls[thunkAPI.getState().calls.calls.length - 1]));\r\n      return data;\r\n    } catch (error) {\r\n      thunkAPI.dispatch(callsSlice.actions.setEmptyState({ leaveBundles: 0 }));\r\n    }\r\n  }\r\n);\r\n\r\nexport const getCallsInfo = createAsyncThunk(\r\n  'calls/getCallsInfo',\r\n  async (payload: CallType[], thunkAPI) => {\r\n    try {\r\n      let localCalls = [];\r\n      for (let i = 0; i < payload.length; i++) {\r\n        const callInfoData = await thunkAPI.dispatch(getCallInfo({ id: payload[i].id }));\r\n        const callInfo = callInfoData.payload;\r\n        localCalls.push({\r\n          id: payload[i].id,\r\n          info: callInfo,\r\n          stt: null,\r\n          audio: null\r\n        });\r\n      }\r\n      await thunkAPI.dispatch(callsSlice.actions.setCallsInfo(localCalls));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getCallInfo = createAsyncThunk(\r\n  'calls/getCallInfo',\r\n  async (payload: { id: string | any, token?: string | any }, thunkAPI) => {\r\n    try {\r\n      const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.get(`call/${payload.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${payload.token ? payload.token : token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getAndSetCallInfo = createAsyncThunk(\r\n  'calls/getAndSetCallInfo',\r\n  async (payload: { id: string, bundleIndex: number | null }, thunkAPI) => {\r\n    if (payload.bundleIndex || payload.bundleIndex === 0) {\r\n      const infoData = await thunkAPI.dispatch(getCallInfo({id: payload.id}));\r\n      // @ts-ignore\r\n      const info = infoData.payload;\r\n      thunkAPI.dispatch(callsSlice.actions.setInfo({info: info, id: payload.id, index: payload.bundleIndex}));\r\n    }\r\n  }\r\n);\r\n\r\nexport const getCallsInfoById = createAsyncThunk(\r\n  'calls/getCallsInfoById',\r\n  async (payload: any[], thunkAPI) => {\r\n    try {\r\n      let localCalls = [];\r\n      const { token } = JSON.parse(localStorage.getItem('token') || '{}');\r\n      for (let i = 0; i < payload.length; i++) {\r\n        const response = await instance.get(`call/${payload[i]}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n        localCalls.push({\r\n          id: payload[i],\r\n          info: response.data,\r\n          stt: null,\r\n          audio: null\r\n        })\r\n      }\r\n      thunkAPI.dispatch(callsSlice.actions.setCallsInfo(localCalls));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const callAction = createAsyncThunk(\r\n  'calls/callAction',\r\n  async (payload: { id: string, data: CallActionDataType }, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.post(`call/${payload.id}/action`, payload.data, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteCall = createAsyncThunk(\r\n  'calls/deleteCall',\r\n  async (id: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.delete(`call/${id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const callsAction = createAsyncThunk(\r\n  'calls/callsAction',\r\n  async (payload: CallsActionDataType, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.post(`calls/action`, payload, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getActionFiles = createAsyncThunk(\r\n  'calls/getActionFiles',\r\n  async (payload: { taskId: string, action: string }, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const res = await instance.get(`/task/${payload.taskId}/attachment`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n        responseType: 'arraybuffer'\r\n      });\r\n      const contentType = (payload.action === \"audio_archive\" && 'application/zip') || (payload.action === \"stt_export\" && \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") || \"\";\r\n      let blob = new Blob([res.data], {type: contentType});\r\n      const downloadUrl = URL.createObjectURL(blob)\r\n      let a = document.createElement(\"a\");\r\n      a.href = downloadUrl;\r\n      debugger\r\n      a.download = \"whileJustFile\";\r\n      document.body.appendChild(a);\r\n      a.click();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n)\r\n\r\n\r\nexport const getTask = createAsyncThunk(\r\n  'calls/getTask',\r\n  async (taskId: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.get(`/task/${taskId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n      });\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n)\r\n\r\nexport type SelectedCallType = {\r\n  callId: string,\r\n  bundleIndex: number | null\r\n}\r\n\r\ntype InitialStateType = {\r\n  bundleLength: number,\r\n  total: number | null,\r\n  found: number | null,\r\n  skip: number,\r\n  limit: number,\r\n  sort: string,\r\n  callIds: null,\r\n  calls: CallType[][] | [],\r\n  selectedCalls: SelectedCallType[],\r\n  isSelectAllCalls: boolean,\r\n  currentCall: CallType | null | false,\r\n  callPageSearchParams: string,\r\n  popupVisible: boolean,\r\n  popupPosition: {\r\n    top: number,\r\n    left: number,\r\n  },\r\n  allUserDicts: any,\r\n}\r\n\r\nconst createInitialCalls = (lengthEmptyArray: number = 10) => {\r\n  let output = [];\r\n  for (let i = 0; i < lengthEmptyArray; i++) {\r\n    output.push({\r\n      id: null,\r\n      info: null,\r\n      stt: null,\r\n      audio: null\r\n    });\r\n  }\r\n  return [output];\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  bundleLength: 10,\r\n  total: null,\r\n  found: null,\r\n  sort: \"date\",\r\n  skip: 0,\r\n  limit: 10,\r\n  callIds: null,\r\n  calls: createInitialCalls(),\r\n  selectedCalls: [],\r\n  isSelectAllCalls: false,\r\n\r\n  currentCall: null,\r\n  callPageSearchParams: \"\",\r\n  popupVisible: false,\r\n  popupPosition: {\r\n    top: 0,\r\n    left: 0,\r\n  },\r\n  allUserDicts: [],\r\n};\r\n\r\nexport const callsSlice = createSlice({\r\n  reducers: {\r\n    setCallPageSearchParams(state, action: PayloadAction<string>) {\r\n      state.callPageSearchParams = action.payload;\r\n    },\r\n\r\n    // selected calls actions\r\n    pushSelectedCall(state, action: PayloadAction<SelectedCallType>) {\r\n      state.selectedCalls.push(action.payload);\r\n    },\r\n    removeSelectedCall(state, action: PayloadAction<SelectedCallType>) {\r\n      let currentSelectedCalls = [...current(state.selectedCalls)]\r\n      const callId = currentSelectedCalls.find(selectedCall => selectedCall.callId === action.payload.callId);\r\n      if (callId) {\r\n        const callIdIndex = currentSelectedCalls.indexOf(callId);\r\n        currentSelectedCalls.splice(callIdIndex, 1);\r\n      }\r\n      state.selectedCalls = currentSelectedCalls;\r\n    },\r\n    removeSelectedCalls(state, action: PayloadAction<null>) {\r\n      state.selectedCalls.length = 0;\r\n    },\r\n    setSelectAllCalls(state, action: PayloadAction<boolean>) {\r\n      state.isSelectAllCalls = action.payload;\r\n    },\r\n\r\n    setSort(state, action: PayloadAction<string>) {\r\n      state.sort = action.payload;\r\n    },\r\n\r\n    setDictionaryPopupParams(state, action: PayloadAction<DictionaryPopupType>) {\r\n      state.popupVisible = action.payload.popupVisible;\r\n      state.popupPosition = action.payload.popupPosition;\r\n    },\r\n\r\n    deleteCall(state, action: PayloadAction<{id: string, bundleIndex: number | null}>) {\r\n      if (action.payload.bundleIndex || action.payload.bundleIndex === 0) {\r\n        let currentCalls = cloneDeep(current(state.calls[action.payload.bundleIndex]));\r\n        const call = currentCalls.find(item => {\r\n          if (item.info) {\r\n            return item.info.id === action.payload.id;\r\n          }\r\n        })\r\n        let callIndex = -1;\r\n        if (call) {\r\n          callIndex = currentCalls.indexOf(call);\r\n        }\r\n        if (callIndex != -1) {\r\n          currentCalls.splice(callIndex, 1);\r\n        }\r\n        state.calls[action.payload.bundleIndex] = currentCalls\r\n      }\r\n    },\r\n    setCalls(state, action: PayloadAction<CallType[][]>) {\r\n      state.calls = action.payload;\r\n    },\r\n\r\n    setAllUserDicts(state, action: any) {\r\n      state.allUserDicts = action.payload.allUserDicts;\r\n    },\r\n\r\n    setBaseCallsData(state, action: PayloadAction<ResponseBaseCallsDataType>) {\r\n      let calls = [];\r\n      let selectedCalls: SelectedCallType[] = []\r\n      for (let i = 0; i < action.payload.call_ids.length; i++) {\r\n        calls.push({\r\n          id: action.payload.call_ids[i],\r\n          info: null,\r\n          stt: null,\r\n          audio: null\r\n        });\r\n        selectedCalls.push({callId: action.payload.call_ids[i], bundleIndex: state.calls.length - 1});\r\n      }\r\n      state.found = action.payload.found;\r\n      state.skip = action.payload.skip;\r\n      state.limit = action.payload.limit;\r\n\r\n      if (!state.total) {\r\n        state.total = action.payload.total;\r\n        state.calls = [calls]\r\n      } else {\r\n        state.total = action.payload.total;\r\n        state.calls.slice(state.bundleLength);\r\n        // @ts-ignore\r\n        state.calls.push(calls);\r\n      }\r\n      state.selectedCalls = [...state.selectedCalls, ...selectedCalls];\r\n    },\r\n    setCallsInfo(state, action: PayloadAction<any[]>) {\r\n      if (action.payload.length < 1) {\r\n        state.calls = []\r\n      } else {\r\n        state.calls[state.calls.length - 1] = action.payload;\r\n      }\r\n    },\r\n    setEmptyState(state, action: PayloadAction<{ leaveBundles: number }>) {\r\n      if (action.payload.leaveBundles === 0) {\r\n        state.calls = [];\r\n      } else {\r\n        const currentCalls = current(state.calls);\r\n        state.calls = currentCalls.slice(0, action.payload.leaveBundles);\r\n        state.skip = 10;\r\n      }\r\n    },\r\n    setInfo(state, action: PayloadAction<{ info: CallInfoType | null, id: string, index: number | null }>) {\r\n      if (action.payload.index || action.payload.index === 0) {\r\n        state.calls[action.payload.index].map((item) => {\r\n          if (item.info && (item.info.id === action.payload.id)) {\r\n            item.info = action.payload.info;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    setAudio(state, action: PayloadAction<any>) {\r\n      state.calls[action.payload.index].map((item) => {\r\n        if (item.info && (item.info.id === action.payload.id)) {\r\n          item.audio = action.payload.audio\r\n        }\r\n      });\r\n    },\r\n    setStt(state, action: PayloadAction<{ stt: any, id: string, index: number | null }>) {\r\n      if (action.payload.index || action.payload.index === 0) {\r\n        state.calls[action.payload.index].map(i => {\r\n          if (i.info && (i.info.id === action.payload.id)) {\r\n            i.stt = action.payload.stt\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    removeAudio(state, action: PayloadAction<{ id: string, bundleIndex: number }>) {\r\n      if (state.calls[0]) {\r\n        state.calls[action.payload.bundleIndex].map(i => {\r\n          if (i.info && (i.info.id === action.payload.id)) {\r\n            i.audio = null;\r\n          }\r\n        })\r\n      }\r\n    },\r\n    zeroingSkip(state, action: PayloadAction<null>) {\r\n      state.skip = 0;\r\n    },\r\n    incrementSkip(state, action: PayloadAction<null>) {\r\n      state.skip += state.limit;\r\n    },\r\n\r\n    callsReset: () => initialState,\r\n\r\n    // current call\r\n    setCurrentCall(state, action: PayloadAction<CallType | null | false>) {\r\n      state.currentCall = action.payload;\r\n    }\r\n  },\r\n  name: 'calls',\r\n  initialState\r\n});","import {createAsyncThunk, createSlice, current, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {CriteriasType, RequestDataType} from \"./search.types\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport {instance} from \"../api\";\r\n\r\nexport const getAllSearchCriterias = createAsyncThunk(\r\n  'search/getBaseSearchCriterias',\r\n  async (payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n\r\n    const response = await instance.get(`search_criterias/`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(searchSlice.actions.setAllCriterias(response.data));\r\n  }\r\n);\r\n\r\nexport const getDefaultCriterias = createAsyncThunk(\r\n  'search/getBaseSearchCriterias',\r\n  async (payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get(`search_criterias/default_keys`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(searchSlice.actions.setDefaultCriterias(response.data));\r\n  }\r\n)\r\n\r\nexport const getSearchHash = createAsyncThunk(\r\n  'search/getSearchHash',\r\n  async (hashKey: string, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    return instance.get(`/search_filter_hash/${hashKey}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n  }\r\n)\r\n\r\ntype InitialStateType = {\r\n  searchParams: string,\r\n\r\n  date: Date[] | null[],\r\n  allCriterias: CriteriasType[] | null,\r\n  defaultCriterias: RequestDataType[],\r\n  activeCriterias: CriteriasType[],\r\n  activeCriteriasReports: CriteriasType[],\r\n  activeCriteriasColumn: CriteriasType[],\r\n}\r\n\r\nconst initialState: InitialStateType = {\r\n  searchParams: \"\",\r\n\r\n  date: [new Date(Date.now() - 8760 * 60 * 60 * 1000), new Date(Date.now())],\r\n  allCriterias: null,\r\n  defaultCriterias: [],\r\n  activeCriterias: [],\r\n  activeCriteriasReports: [],\r\n  activeCriteriasColumn: [],\r\n};\r\n\r\nexport const searchSlice = createSlice({\r\n  name: 'search',\r\n  initialState,\r\n  reducers: {\r\n    setSearchParams(state, action: PayloadAction<string>) {\r\n      state.searchParams = action.payload;\r\n    },\r\n\r\n    setDate(state, action: PayloadAction<typeof initialState.date | null[]>) {\r\n      state.date = action.payload;\r\n    },\r\n\r\n    setDefaultCriterias(state, action: PayloadAction<string[] | null>) {\r\n      if (!action.payload) {\r\n        state.defaultCriterias.length = 0;\r\n      } else {\r\n        for (let i = 0; i < action.payload.length; i++) {\r\n          state.defaultCriterias.push({key: action.payload[i], values: []});\r\n        }\r\n      }\r\n    },\r\n    setDefaultCriteriaValues(state, action: PayloadAction<RequestDataType>) {\r\n      const obj = current(state.defaultCriterias).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      if (obj) {\r\n        const index = current(state.defaultCriterias).indexOf(obj);\r\n        state.defaultCriterias[index].values = action.payload.values;\r\n      }\r\n    },\r\n    setClearDefaultCriteriasValues(state, action: PayloadAction<null>) {\r\n      for (let i = 0; i < state.defaultCriterias.length; i++) {\r\n        state.defaultCriterias[i] = {...state.defaultCriterias[i], values: []};\r\n      }\r\n    },\r\n    setAllCriterias(state, action: PayloadAction<CriteriasType[]>) {\r\n      state.allCriterias = action.payload;\r\n    },\r\n    setActiveCriterias(state, action: PayloadAction<CriteriasType[]>) {\r\n      state.activeCriterias = action.payload;\r\n    },\r\n    setActiveCriteriaValues(state, action: PayloadAction<RequestDataType>) {\r\n      const obj = current(state.activeCriterias).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriterias).indexOf(obj);\r\n      state.activeCriterias[index].values = action.payload.values;\r\n    },\r\n    removeActiveCriteria(state, action: PayloadAction<CriteriasType>) {\r\n      let activeCriterias = cloneDeep(current(state.activeCriterias));\r\n      const obj = current(state.activeCriterias).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriterias).indexOf(obj);\r\n      activeCriterias.splice(index, 1);\r\n      state.activeCriterias = activeCriterias;\r\n    },\r\n    removeAllActiveCriterias(state, action: PayloadAction<null>) {\r\n      state.activeCriterias = [];\r\n    },\r\n    removeAllState(state, action: PayloadAction<null>) {\r\n      state.date = [new Date(), new Date()];\r\n      state.allCriterias = null;\r\n      state.defaultCriterias = [];\r\n      state.activeCriterias = [];\r\n    },\r\n\r\n\r\n    // for reports\r\n    setActiveCriteriasReports(state, action: PayloadAction<CriteriasType[]>) {\r\n      state.activeCriteriasReports = action.payload;\r\n    },\r\n    setActiveCriteriaReportsValues(state, action: any) {\r\n      const obj = current(state.activeCriteriasReports).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriteriasReports).indexOf(obj);\r\n      debugger\r\n      state.activeCriteriasReports[index].values = action.payload.values;\r\n    },\r\n    removeActiveCriteriaReports(state, action: PayloadAction<CriteriasType>) {\r\n      let activeCriteriasReports = cloneDeep(current(state.activeCriteriasReports));\r\n      const obj = current(state.activeCriteriasReports).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriteriasReports).indexOf(obj);\r\n      activeCriteriasReports.splice(index, 1);\r\n      state.activeCriteriasReports = activeCriteriasReports;\r\n    },\r\n    removeAllActiveCriteriasReports(state, action: PayloadAction<null>) {\r\n      state.activeCriteriasReports = [];\r\n    },\r\n\r\n    //for column in report\r\n    setActiveCriteriaReportsColumn(state, action: PayloadAction<CriteriasType[]>) {\r\n      state.activeCriteriasColumn = action.payload;\r\n    },\r\n    setActiveCriteriaReportsColumnValues(state, action: PayloadAction<RequestDataType>) {\r\n      const obj = current(state.activeCriteriasColumn).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriteriasColumn).indexOf(obj);\r\n      state.activeCriteriasColumn[index].values = action.payload.values;\r\n    },\r\n\r\n\r\n    removeActiveCriteriaColumnReports(state, action: PayloadAction<CriteriasType>) {\r\n      let activeCriteriasColumn = cloneDeep(current(state.activeCriteriasColumn));\r\n      const obj = current(state.activeCriteriasColumn).find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeCriteriasColumn).indexOf(obj);\r\n      activeCriteriasColumn.splice(index, 1);\r\n      state.activeCriteriasColumn = activeCriteriasColumn;\r\n    },\r\n    removeAllActiveCriteriasColumnReports(state, action: PayloadAction<null>) {\r\n      state.activeCriteriasColumn = [];\r\n    },\r\n\r\n    searchReset: () => initialState\r\n\r\n  }\r\n})","import  {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {DictActionType, DictType, DictTypeDetailed, GroupType, MarkupRulesPagesType} from \"./dicts.types\";\r\nimport {instance} from \"../api\";\r\n\r\nexport const getGroups = createAsyncThunk(\r\n  'dicts/getGroups',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.get<GroupType[]>(`dict_groups/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      await thunkAPI.dispatch(dictsSlice.actions.setGroups(data));\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getDicts = createAsyncThunk(\r\n  'dicts/getDicts',\r\n  async (payload: { activeDictIndex?: number, filter?: string, group?: string }, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const url = `dicts/` +\r\n        `?show_disabled=true` +\r\n        `${payload.filter ? `&filter=${payload.filter}` : ''}` +\r\n        `${payload.group ? `&group=${payload.group}` : ''}`\r\n      const {data} = await instance.get(url, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      await thunkAPI.dispatch(dictsSlice.actions.setDicts(data));\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getDict = createAsyncThunk(\r\n  'dict/getDict',\r\n  async (payload: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.get(`dict/${payload}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      await thunkAPI.dispatch(dictsSlice.actions.setCurrentDict(data));\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const postDict = createAsyncThunk(\r\n  'dicts/postDict',\r\n  async (payload: DictTypeDetailed, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.post(`dict/`, payload,{\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return data;\r\n    } catch(e) {\r\n      debugger\r\n      thunkAPI.dispatch(dictsSlice.actions.setError('Этот словарь нельзя удалить.'))\r\n      return Error;\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteDict = createAsyncThunk(\r\n  'dicts/deleteDict',\r\n  async (payload: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.delete(`dict/${payload}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return data;\r\n    } catch(e) {\r\n      thunkAPI.dispatch(dictsSlice.actions.setError('Этот словарь нельзя удалить.'))\r\n      return Error;\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateDict = createAsyncThunk(\r\n  'dicts/updateDict',\r\n  async (payload: DictTypeDetailed, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.put(`dict/${payload.id}`, payload, {\r\n        headers: {\r\n          'accept': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      console.log(data);\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\n\r\nexport const dictActions = createAsyncThunk(\r\n  'dicts/dictActions',\r\n  async (payload: {dictId: string, action: DictActionType}, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.post(`dict/${payload.dictId}/action`, {action: payload.action}, {\r\n        headers: {\r\n          'accept': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      debugger\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n)\r\n\r\n\r\ntype InitialStateType = {\r\n  activePage: string,\r\n  search: string,\r\n\r\n  activeId: string | null,\r\n\r\n  groups: GroupType[] | null[],\r\n  currentGroup: GroupType | null,\r\n\r\n  dicts: DictType[] | null[] | null,\r\n  currentDict: DictTypeDetailed | null | false | undefined,\r\n\r\n  error: string | null\r\n};\r\n\r\nconst createNullArray = (count: number) => {\r\n  let result = [];\r\n  for (let i = 0; i < count; i++) {\r\n    result.push(null);\r\n  }\r\n  return result;\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  activePage: '',\r\n  search: '',\r\n\r\n\r\n\r\n\r\n  activeId: null,\r\n\r\n  groups: createNullArray(4),\r\n  currentGroup: null,\r\n\r\n  dicts: createNullArray(15),\r\n  currentDict: null,\r\n\r\n  error: null,\r\n};\r\n\r\nexport const dictsSlice = createSlice({\r\n  name: 'dicts',\r\n  initialState,\r\n  reducers: {\r\n    // Error\r\n    setError(state, action: PayloadAction<string | null>) {\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // Active page\r\n    setActivePage(state, action: PayloadAction<string>) {\r\n      state.activePage = action.payload;\r\n    },\r\n\r\n    // Search params\r\n    setSearch(state, action: PayloadAction<string>) {\r\n      state.search = action.payload;\r\n    },\r\n\r\n    // Groups\r\n    setGroups(state, action: PayloadAction<GroupType[]>) {\r\n      state.groups = action.payload;\r\n    },\r\n    setCurrentGroup(state, action: PayloadAction<GroupType | null>) {\r\n      state.currentGroup = action.payload;\r\n    },\r\n\r\n    // Dicts\r\n    setDicts(state, action: PayloadAction<DictType[] | null>) {\r\n      state.dicts = action.payload;\r\n    },\r\n    setEmptyDicts(state, action) {\r\n      state.dicts = createNullArray(15);\r\n    },\r\n    setCurrentDict(state, action: PayloadAction<DictTypeDetailed | null | false | undefined>) {\r\n      state.currentDict = action.payload;\r\n    },\r\n\r\n    dictsReset: () => initialState\r\n  }\r\n});\r\n","import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {instance} from \"../api\";\r\nimport {SnackbarType} from \"../../components/common/Snackbar\";\r\n\r\nexport type LangType = 'ru' | 'en';\r\n\r\nexport const getLang = createAsyncThunk(\r\n  'search/getBaseSearchCriterias',\r\n  async (payload: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      await instance.get(`set_language?language=${payload}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(langSlice.actions.setLang(payload))\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n);\r\n\r\n\r\ntype InitialStateType = {\r\n  language: string,\r\n  loading: boolean,\r\n  snackbar: SnackbarType\r\n}\r\n\r\nconst initialState: InitialStateType = {\r\n  language: 'ru',\r\n  loading: false,\r\n  snackbar: {\r\n    type: 'success',\r\n    text: '',\r\n    value: false,\r\n    time: null\r\n  }\r\n};\r\n\r\nexport const langSlice = createSlice({\r\n  name: 'language',\r\n  initialState,\r\n  reducers: {\r\n    setLang(state, action: PayloadAction<string>) {\r\n      state.language = action.payload;\r\n    },\r\n\r\n    setDefaultLang(state, action: PayloadAction<null>) {\r\n      state.language = \"ru\";\r\n    },\r\n\r\n    setLoading(state, action: PayloadAction<boolean>) {\r\n      state.loading = action.payload;\r\n    },\r\n\r\n    setSnackbar(state, action: PayloadAction<SnackbarType>) {\r\n      state.snackbar = action.payload;\r\n    },\r\n\r\n    langReset: () => initialState\r\n  }\r\n})","import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport {ChildUserType, UserType} from \"./users.types\";\r\nimport {langSlice} from '../lang/lang.slice';\r\nimport {instance} from \"../api\";\r\nimport {removeAuthToken} from \"../auth/auth.slice\";\r\n\r\nexport const getMe = createAsyncThunk(\r\n  'users/getMe',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.get<UserType>(`user/me`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(usersSlice.actions.setCurrentUser(response.data));\r\n      thunkAPI.dispatch(langSlice.actions.setLang(response.data.language));\r\n      return response.data;\r\n    } catch (e) {\r\n      console.log('error me')\r\n      thunkAPI.dispatch(removeAuthToken());\r\n    }\r\n  }\r\n);\r\n\r\nexport const getChildUsers = createAsyncThunk(\r\n  'users/getChildUsers',\r\n  async(payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get<ChildUserType[]>(`users/?with_childs=false`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(usersSlice.actions.setUsers(response.data));\r\n  }\r\n);\r\n\r\nexport const getUserToken = createAsyncThunk(\r\n  'users/getChildUsers',\r\n  async(payload: string, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    debugger\r\n    const response = await instance.get(`set_filter_user?user_id=${payload ? payload : ''}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    localStorage.setItem('token', JSON.stringify({\r\n      token: response.data.access_token\r\n    }));\r\n    debugger\r\n  }\r\n);\r\n\r\nexport const getChildUser = createAsyncThunk(\r\n  'users/getChildUser',\r\n  async(payload: string | void, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get(`user/filter`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${payload ? payload : token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(usersSlice.actions.setCurrentChildUser(response.data));\r\n  }\r\n);\r\n\r\ntype InitialStateType = {\r\n  currentUser: UserType | null,\r\n  childUsers: ChildUserType[] | null,\r\n  currentChildUser: ChildUserType | null\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  currentUser: null,\r\n  childUsers: null,\r\n  currentChildUser: null\r\n};\r\n\r\nexport const usersSlice = createSlice({\r\n  name: 'users',\r\n  initialState,\r\n  reducers: {\r\n    setCurrentUser(state, action: PayloadAction<UserType>) {\r\n      state.currentUser = action.payload;\r\n    },\r\n    setUsers(state, action: PayloadAction<ChildUserType[]>) {\r\n      state.childUsers = action.payload;\r\n    },\r\n    setCurrentChildUser(state, action: PayloadAction<ChildUserType>) {\r\n      state.currentChildUser = action.payload;\r\n    }\r\n  }\r\n});\r\n","import * as React from 'react';\r\nimport {FC, memo, useEffect, useState} from \"react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport Select, {components} from \"react-select\";\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport cn from 'classnames';\r\nimport {templateSlice} from \"../../../store/search/template.slice\";\r\nimport {searchSlice} from \"../../../store/search/search.slice\";\r\n\r\nexport const OnTopArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M7.39101 4.59994C7.17176 4.83662 6.81636 4.83662 6.59711 4.59994L3.9999 1.79621L1.40271 4.59994C1.18347 4.83662 0.828006 4.83662 0.608766 4.59994C0.389526 4.36325 0.389526 3.97957 0.608766 3.74288L3.60295 0.510518C3.8222 0.273838 4.1776 0.273838 4.39685 0.510518L7.39101 3.74288C7.61026 3.97957 7.61026 4.36325 7.39101 4.59994Z\"\r\n            fill=\"#1B202B\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const OnBottomArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M7.39101 0.400166C7.61026 0.636846 7.61026 1.02059 7.39101 1.25725L4.39685 4.48958C4.1776 4.72627 3.8222 4.72627 3.60295 4.48958L0.608766 1.25725C0.389526 1.02059 0.389526 0.636846 0.608766 0.400166C0.828006 0.163486 1.18347 0.163486 1.40271 0.400166L3.9999 3.20392L6.59711 0.400166C6.81636 0.163486 7.17176 0.163486 7.39101 0.400166Z\"\r\n            fill=\"#738094\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\n// TYPE BLOCK\r\ntype ContainedSelectPropsType = {\r\n  width: string,\r\n  height?: string,\r\n  justify?: string,\r\n  marginRight?: string,\r\n\r\n  onSelectChange: (event: any) => void,\r\n  options: { value: any, label: string }[],\r\n  value: any\r\n}\r\n\r\n\r\nconst ContainedSelect: FC<ContainedSelectPropsType> = (\r\n  {\r\n    width,\r\n    height,\r\n    justify,\r\n    marginRight,\r\n\r\n    onSelectChange,\r\n    options,\r\n    value\r\n  }\r\n) => {\r\n  // STYLES BLOCK\r\n  const useStyles = makeStyles(({\r\n    selectBox: {\r\n      display: 'flex !important',\r\n      justifyContent: justify ? justify : 'left',\r\n      alignItems: 'center',\r\n      width: '100% !important',\r\n      marginRight: marginRight ? marginRight : '25px'\r\n    },\r\n    selectMenuListInput: {\r\n      width: \"228px\",\r\n      margin: '16px 24px',\r\n      outline: 'none',\r\n      backgroundColor: '#F8FAFC',\r\n      border: '1px solid #E3E8EF',\r\n      borderRadius: '5px',\r\n      padding: '10px 30px 10px 12px',\r\n      color: '#738094',\r\n      fontSize: '14px',\r\n      position: 'relative'\r\n    },\r\n    selectMenuListInputIcon: {\r\n      position: 'absolute',\r\n      left: '262px',\r\n      top: '23px',\r\n      color: '#738094',\r\n      width: '11px'\r\n    },\r\n    selectOption: {\r\n      cursor: 'pointer',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      padding: '5px 24px'\r\n    },\r\n    selectArrow: {\r\n      marginRight: '10px'\r\n    },\r\n    selectArrowOnArrow: {\r\n      marginBottom: '5px'\r\n    },\r\n    selectCheckBox: {\r\n      '&.MuiCheckbox-root': {\r\n        backgroundColor: '#E3E8EF !important'\r\n      }\r\n    },\r\n    selectSelectBox: {\r\n      position: 'relative'\r\n    },\r\n    selectPlaceholder: {\r\n      // @ts-ignore\r\n      position: 'absolute !important',\r\n      left: '11px !important',\r\n      top: '9px !important'\r\n    }\r\n  }))\r\n  const customStyles = {\r\n    container: (provided: any) => ({\r\n      ...provided,\r\n      width: width,\r\n    }),\r\n    menu: (provided: any) => ({\r\n      ...provided,\r\n      overflow: 'hidden',\r\n      overflowY: 'auto',\r\n      zIndex: '1000',\r\n      '&::-webkit-scrollbar': {\r\n        width: '4px',\r\n        backgroundColor: '#f1f1f1',\r\n        outline: 'none',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n        borderRadius: '10px'\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#9298A1'\r\n      }\r\n    }),\r\n    option: (provided: any, state: any) => ({\r\n      cursor: 'pointer',\r\n      padding: '10px 24px 10px 10px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      \"&:hover\": {\r\n        backgroundColor: '#F8FAFC',\r\n        color: '#722ED1'\r\n      }\r\n    }),\r\n    control: (provided: any, state: any) => ({\r\n      ...provided,\r\n      cursor: 'pointer',\r\n      width: '100%',\r\n      minHeight: '32px',\r\n      height: height ? height : '32px',\r\n      border: '1px solid #E3E8EF',\r\n      boxShadow: 'none',\r\n      borderColor: menuIsOpen ? '#722ED1 !important' : '#E3E8EF !important',\r\n      \"&:hover\": {\r\n        borderColor: '#E3E8EF'\r\n      },\r\n      minWidth: '70px',\r\n      borderRadius: '5px',\r\n      backgroundColor: '#F8FAFC'\r\n    }),\r\n    placeholder: (provided: any) => ({\r\n      ...provided,\r\n      fontSize: '14px',\r\n      color: '#738094',\r\n      fontFamily: 'Inter, sans-serif'\r\n    }),\r\n    indicatorsContainer: (provided: any) => ({\r\n      ...provided,\r\n      '& svg path:hover': {\r\n        fill: 'hsl(0, 0%, 80%)'\r\n      },\r\n      padding: '0'\r\n    }),\r\n    singleValue: (provided: any) => ({\r\n      ...provided,\r\n      cursor: 'pointer',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '13px',\r\n      color: `#738094`\r\n    })\r\n  }\r\n  const classes = useStyles();\r\n\r\n\r\n  // COMPONENTS BLOCK\r\n  const Arrow = memo((props: any) => {\r\n    if (menuIsOpen) {\r\n      return <div className={cn(classes.selectArrowOnArrow, classes.selectArrow)}><OnTopArrow/></div>\r\n    }\r\n    return <OnBottomArrow className={classes.selectArrow}/>\r\n  });\r\n  const Option = memo((props: any) => {\r\n    return <div>\r\n      <components.Option {...props} className={classes.selectOption}>\r\n        {props.children}\r\n      </components.Option>\r\n    </div>\r\n  });\r\n  const Control: FC<any> = ({children, ...props}) => (\r\n    <div onClick={() => setMenuIsOpen(true)}\r\n         style={{display: 'flex', alignItems: 'center', cursor: 'pointer', width: '100%'}}>\r\n      <components.Control {...props}>\r\n        {children}\r\n      </components.Control>\r\n    </div>\r\n  );\r\n\r\n  // LOGIC BLOCK\r\n  // открыте и закрытие менюшки.\r\n  const [menuIsOpen, setMenuIsOpen] = useState<boolean>(false);\r\n\r\n  // выполняется когда меняется значение.\r\n  const handleSelectChange = (event: any) => {\r\n    onSelectChange(event);\r\n    setMenuIsOpen(false);\r\n  };\r\n\r\n\r\n  // костылечек для загрытия селектов\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.selectBox}>\r\n      <Select\r\n        openMenuOnFocus={true}\r\n        menuIsOpen={menuIsOpen}\r\n        name=\"color\"\r\n        placeholder={''}\r\n        components={{\r\n          Option: Option,\r\n          IndicatorsContainer: () => (<Arrow/>),\r\n          IndicatorSeparator: () => null,\r\n          Control: Control,\r\n        }}\r\n        onChange={handleSelectChange}\r\n        isClearable={true}\r\n        closeMenuOnSelect={false}\r\n        styles={customStyles}\r\n        isSearchable={false}\r\n        value={value}\r\n        options={options}\r\n        hideSelectedOptions={false}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContainedSelect;\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Button, LinearProgress, SelectChangeEvent, Typography} from '@mui/material';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {useHistory} from 'react-router-dom';\r\nimport LogoImg from '../../assets/images/logo.svg';\r\nimport {RootState} from '../../store/store';\r\nimport {translate} from '../../localizations';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Select from '@mui/material/Select';\r\nimport {removeAuthToken} from \"../../store/auth/auth.slice\";\r\nimport {useAppSelector} from \"../../hooks/redux\";\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {callsSlice} from \"../../store/calls/calls.slice\";\r\nimport {searchSlice} from \"../../store/search/search.slice\";\r\nimport {getGroups} from \"../../store/dicts/dicts.slice\";\r\nimport {getChildUser, getChildUsers, getMe, getUserToken} from \"../../store/users/users.slice\";\r\nimport ContainedSelect from \"./Selects/ContainedSelect\";\r\nimport {getLang, langSlice} from \"../../store/lang/lang.slice\";\r\n\r\nconst useStyles = makeStyles(({\r\n  headerWrapper: {\r\n    backgroundColor: '#FFFFFF',\r\n  },\r\n  headerInner: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    maxWidth: '1920px',\r\n    height: '100%',\r\n    width: '100%',\r\n    margin: '0 auto'\r\n  },\r\n  headerLeftBlock: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  headerIconWrapper: {\r\n    maxWidth: '73px',\r\n    width: '73px',\r\n    margin: '0 24px 4px 24px'\r\n  },\r\n  headerIcon: {\r\n    display: 'block',\r\n    maxWidth: '100%',\r\n    width: '100%',\r\n    height: 'auto',\r\n  },\r\n  headerItemText: {\r\n    color: '#738094 !important',\r\n    transition: '0.4s !important',\r\n    opacity: '0.7',\r\n    padding: '13px 20px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    '&.Mui-selected, &:active': {\r\n      backgroundColor: '#E3E8EF !important',\r\n      color: '#000 !important'\r\n    },\r\n    border: 'none !important',\r\n    outline: 'none !important',\r\n    backgroundColor: '#ffffff !important',\r\n  },\r\n  headerRightBlock: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    height: '53px !important'\r\n  },\r\n  langHandler: {\r\n    '& .MuiInput-input:focus': {\r\n      backgroundColor: '#fff',\r\n    },\r\n    border: 'none',\r\n    outline: 'none',\r\n    '&::before': {\r\n      border: 'none !important'\r\n    },\r\n    '&::after': {\r\n      border: 'none !important'\r\n    }\r\n  },\r\n  langHandlerItem: {\r\n    '&.MuiMenuItem-root': {\r\n      backgroundColor: '#fff !important'\r\n    }\r\n  },\r\n  headerLogout: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: '0 17px 0 26px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    color: '#738094 !important',\r\n    '&:hover': {\r\n      backgroundColor: '#fff !important'\r\n    },\r\n    '& .MuiButton-startIcon': {\r\n      marginRight: '10px',\r\n    },\r\n    '& .MuiButton-startIcon svg': {\r\n      fill: '#738094',\r\n    },\r\n  },\r\n}));\r\n\r\nexport const LogoutSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M5.5 10.6663C5.5 10.3902 5.72387 10.1663 6 10.1663H10C10.0921 10.1663 10.1667 10.0917 10.1667 9.99967V1.99967C10.1667 1.90763 10.0921 1.83301 10 1.83301H6C5.72387 1.83301 5.5 1.60915 5.5 1.33301C5.5 1.05687 5.72387 0.833008 6 0.833008H10C10.6443 0.833008 11.1667 1.35534 11.1667 1.99967V9.99967C11.1667 10.644 10.6443 11.1663 10 11.1663H6C5.72387 11.1663 5.5 10.9425 5.5 10.6663Z\"/>\r\n      <path\r\n        d=\"M0.333984 6.74307C0.333984 7.11127 0.632458 7.40974 1.00065 7.40974H4.23798C4.25327 7.64667 4.2724 7.88347 4.29538 8.11994L4.31516 8.3234C4.34731 8.65427 4.69865 8.85233 4.99838 8.70873C6.21699 8.12467 7.32019 7.32554 8.25485 6.3496L8.27485 6.32874C8.45292 6.1428 8.45292 5.84967 8.27485 5.66374L8.25485 5.64287C7.32019 4.66694 6.21699 3.86778 4.99838 3.28377C4.69865 3.14011 4.34731 3.33824 4.31516 3.66907L4.29538 3.87253C4.2724 4.10902 4.25327 4.34579 4.23798 4.58273L1.00065 4.58274C0.632464 4.58274 0.333984 4.8812 0.333984 5.2494V6.74307Z\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst Header: React.FC = () => {\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const currentUser = useAppSelector(state => state.users.currentUser);\r\n\r\n  const {path} = JSON.parse(localStorage.getItem('path') || '{}');\r\n\r\n  const history = useHistory();\r\n  let historyPathArray: any = [];\r\n  if (path) {\r\n    historyPathArray = path.split('/');\r\n  }\r\n  const pagePath = history.location.pathname.split('/')[3];\r\n  const activePage = useAppSelector(state => state.dicts.activePage);\r\n\r\n  async function handleLangChange(event: SelectChangeEvent) {\r\n    const historyLocal = history.location.pathname;\r\n    const currentLang = event.target.value;\r\n    await dispatch(getLang(currentLang));\r\n\r\n    history.location.pathname = '/'\r\n    history.replace(`${currentLang}/${currentUser ? currentUser.id : \"_\"}/${pagePath}`);\r\n  }\r\n\r\n  const childUsers = useAppSelector(state => state.users.childUsers);\r\n  const currentChildUser = useAppSelector(state => state.users.currentChildUser);\r\n\r\n  const [alignment, setAlignment] = React.useState(\"\");\r\n\r\n  useEffect(() => {\r\n    history.listen((location) => {\r\n      const pathArray = location.pathname.split('/');\r\n      setAlignment(pathArray[3]);\r\n    })\r\n  }, [history]);\r\n\r\n  useEffect(() => {\r\n    const pathArray = history.location.pathname.split('/');\r\n    setAlignment(pathArray[3]);\r\n  }, [history]);\r\n\r\n  const handleRouteChange = (\r\n    event: React.MouseEvent<HTMLElement>,\r\n    newAlignment: string,\r\n  ) => {\r\n    setAlignment(newAlignment);\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   dispatch(getChildUser());\r\n  //   dispatch(getMe());\r\n  //   dispatch(getChildUsers());\r\n  // }, []);\r\n\r\n  const languageParam = historyPathArray[1];\r\n  // lang changer\r\n  useEffect(() => {\r\n    history.listen(async (location) => {\r\n      let pathArray: any = [];\r\n      if (location.pathname) {\r\n        pathArray = location.pathname.split(\"/\");\r\n      }\r\n      const languageParam = pathArray[1];\r\n      pathArray = location.pathname.split(\"/\");\r\n      pathArray.splice(0, 2);\r\n\r\n      if (languageParam === \"ru\" || languageParam === \"en\") {\r\n        dispatch(langSlice.actions.setLoading(true));\r\n        await dispatch(getLang(languageParam));\r\n        dispatch(langSlice.actions.setLoading(false));\r\n      } else if (!languageParam || (languageParam !== \"ru\" && languageParam !== \"en\")) {\r\n        dispatch(langSlice.actions.setDefaultLang(null));\r\n        if (pathArray.length === 1) {\r\n          history.location.pathname = `/`;\r\n          history.replace(`ru/${pathArray.join(\"/\")}`);\r\n        } else {\r\n          history.location.pathname = `/`;\r\n          history.replace(`ru/${currentUser ? currentUser.id : \"_\"}/calls`);\r\n        }\r\n      }\r\n    });\r\n  }, [languageParam, currentUser]);\r\n  async function getUserData() {\r\n    const userData = await dispatch(getMe());\r\n    // @ts-ignore\r\n    const user = userData.payload;\r\n    await dispatch(getChildUser());\r\n    await dispatch(getChildUsers());\r\n    history.location.pathname = `/`;\r\n    history.replace(`${languageParam}/${user ? user.id : \"_\"}/${historyPathArray[3]}`);\r\n  }\r\n  useEffect(() => {\r\n    if (!currentUser) getUserData().then();\r\n  }, [history]);\r\n\r\n  const logout = () => {\r\n    dispatch(removeAuthToken());\r\n    dispatch(callsSlice.actions.setEmptyState({leaveBundles: 0}));\r\n    dispatch(searchSlice.actions.removeAllState(null));\r\n    history.location.pathname = \"/\";\r\n    history.push(`/${language}/auth`);\r\n  };\r\n\r\n  function login() {\r\n    history.location.pathname = \"/\";\r\n    history.push(`/${language}/auth`)\r\n  }\r\n\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n\r\n  // users changer\r\n  const handleUserChange = async (e: any) => {\r\n    if (e.label === 'Все пользователи') {\r\n      const {mainToken} = JSON.parse(localStorage.getItem('mainToken') || '{}');\r\n      localStorage.setItem('token', JSON.stringify({\r\n        token: mainToken\r\n      }));\r\n    } else {\r\n      await dispatch(getUserToken(e.value));\r\n    }\r\n    window.location.reload();\r\n  };\r\n  const optionsConverter = () => {\r\n    let result = [{value: '', label: 'Все пользователи'}]\r\n    if (childUsers) {\r\n      for (let i = 0; i < childUsers.length; i++) {\r\n        result.push({value: childUsers[i].id, label: childUsers[i].name ? childUsers[i].name : childUsers[i].login});\r\n      }\r\n      return result;\r\n    }\r\n    return []\r\n  };\r\n  const convertedOptions = optionsConverter();\r\n  const convertedValue = convertedOptions.filter((item) => {\r\n    if (currentChildUser) {\r\n      return item.value === currentChildUser.id\r\n    }\r\n  })[0] || {value: '', label: 'Все пользователи'};\r\n\r\n\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.language) {\r\n      dispatch(langSlice.actions.setLang(currentUser.language));\r\n    }\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <div className={classes.headerWrapper}>\r\n      {/*{loading && <LinearProgress color=\"primary\"/>}*/}\r\n      <div className={classes.headerInner}>\r\n        <div className={classes.headerLeftBlock}>\r\n          {/* Логотип */}\r\n          <div className={classes.headerIconWrapper}>\r\n            <img className={classes.headerIcon} height={55} src={LogoImg} alt=\"Imot.io\"/>\r\n          </div>\r\n          {/* Навигация */}\r\n          {isAuth && (\r\n            <ToggleButtonGroup\r\n              value={alignment}\r\n              exclusive\r\n              onChange={handleRouteChange}\r\n              style={{cursor: 'pointer'}}\r\n            >\r\n              {/* Calls */}\r\n              <ToggleButton\r\n                key={0}\r\n                disabled={'calls' === alignment}\r\n                value={'calls'}\r\n                onClick={() => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/calls`);\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('calls', language)}\r\n              </ToggleButton>\r\n\r\n              {/* Reports */}\r\n              <ToggleButton\r\n                key={1}\r\n                disabled={'reports' === alignment}\r\n                value={'reports'}\r\n                onClick={() => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/reports`);\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('reports', language)}\r\n              </ToggleButton>\r\n\r\n              {/* Markuprules */}\r\n              <ToggleButton\r\n                key={2}\r\n                disabled={pagePath === 'markuprules' && pagePath === alignment}\r\n                value={'markuprules'}\r\n                onClick={async () => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/markuprules/${activePage}`);\r\n                  await dispatch(getGroups());\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('markupRules', language)}\r\n              </ToggleButton>\r\n\r\n              {/* Upload */}\r\n              <ToggleButton\r\n                key={3}\r\n                disabled={'upload' === alignment}\r\n                value={'upload'}\r\n                onClick={() => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/upload`);\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('loadCall', language)}\r\n              </ToggleButton>\r\n\r\n              {/* Alert */}\r\n              <ToggleButton\r\n                key={4}\r\n                disabled={'alert' === alignment}\r\n                value={'alert'}\r\n                style={{cursor: 'default !important'}}\r\n                onClick={() => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/alert`);\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('alert', language)}\r\n              </ToggleButton>\r\n\r\n              {/* Settings */}\r\n              <ToggleButton\r\n                key={5}\r\n                disabled={'settings' === alignment}\r\n                value={'settings'}\r\n                onClick={() => {\r\n                  dispatch(langSlice.actions.setLoading(true));\r\n                  history.location.pathname = '/'\r\n                  history.replace(`${language}/${currentUser ? currentUser.id : \"_\"}/settings`);\r\n                }}\r\n                className={classes.headerItemText}\r\n              >\r\n                {translate('settings', language)}\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          )}\r\n        </div>\r\n\r\n\r\n        <div className={classes.headerRightBlock}>\r\n          <div style={{display: 'flex', marginRight: '30px'}}>\r\n            {currentChildUser && currentUser && currentUser.accessRights.includes('admin') && (\r\n              <ContainedSelect\r\n                width={'220px'}\r\n                onSelectChange={handleUserChange}\r\n                options={convertedOptions}\r\n                value={convertedValue}\r\n              />\r\n            )}\r\n            {/* Смена языка */}\r\n            <Select\r\n              MenuProps={{\r\n                disableScrollLock: true\r\n              }}\r\n              className={classes.langHandler}\r\n              variant='standard'\r\n              value={language}\r\n              onChange={handleLangChange}\r\n            >\r\n              <MenuItem className={classes.langHandlerItem} value={'ru'}>RU</MenuItem>\r\n              <MenuItem className={classes.langHandlerItem} value={'en'}>EN</MenuItem>\r\n            </Select>\r\n          </div>\r\n\r\n          {isAuth ? (\r\n            <>\r\n              {/* Выход из аккаунта */}\r\n              <Button className={classes.headerLogout} startIcon={<LogoutSvg/>} onClick={logout}>\r\n                {translate('logout', language)}\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* Выход из аккаунта */}\r\n              <Button className={classes.headerLogout} startIcon={<LogoutSvg/>} onClick={login}>\r\n                Войти\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;","import React, {FC} from 'react';\r\nimport {TextField} from \"@mui/material\";\r\nimport {makeStyles} from \"@mui/styles\";\r\n\r\ntype InputPropsType = {\r\n  name: string,\r\n  type: string,\r\n  bcColor: string,\r\n  label: string,\r\n\r\n  autoComplete?: 'on' | 'off',\r\n  handleChange?: (e: React.ChangeEvent<any>) => void,\r\n  value?: string,\r\n  border?: string,\r\n  height?: string\r\n};\r\n\r\nconst Input: FC<InputPropsType> = (props) => {\r\n  const useStyles = makeStyles(({\r\n    inputRoot: {\r\n      backgroundColor: props.bcColor,\r\n      height: `${props.height ? props.height : '33px'} !important`,\r\n      borderRadius: '5px',\r\n      width: '100%',\r\n      border: props.border ?`${props.border} !important` : 'none !important',\r\n      '& .MuiInputLabel-root': {\r\n        cursor: 'text !important',\r\n        color: '#738094 !important',\r\n        fontSize: '14px !important',\r\n        left: '-5px',\r\n        top: '-10px'\r\n      },\r\n      '& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline': {\r\n        border: 'none',\r\n      },\r\n      '& .MuiOutlinedInput-root .MuiOutlinedInput-input': {\r\n        padding: '8px 28px 8px 10px !important',\r\n        color: '#738094'\r\n      }\r\n    },\r\n  }));\r\n  const classes = useStyles();\r\n  return <TextField\r\n    className={classes.inputRoot}\r\n    name={props.name}\r\n    type={props.type}\r\n    onChange={props.handleChange}\r\n    autoComplete={props.autoComplete}\r\n    value={props.value} label={props.label}\r\n  />\r\n};\r\n\r\nexport default Input;\r\n","import React, {useState} from 'react';\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport Slide from '@mui/material/Slide';\r\nimport {TransitionProps} from '@mui/material/transitions';\r\nimport BlockBox from \"./BlockBox\";\r\nimport {IconButton, Typography} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport {LoadingButton} from \"@mui/lab\";\r\nimport {translate} from \"../../localizations\";\r\nimport {useAppSelector} from \"../../hooks/redux\";\r\n\r\nconst Transition = React.forwardRef((\r\n    props: TransitionProps & {\r\n      children: React.ReactElement<any, any>;\r\n    },\r\n    ref: React.Ref<unknown>,\r\n  ) => <Slide direction=\"up\" ref={ref} {...props}/>\r\n);\r\n\r\ntype AuthModalWindowPropsType = {\r\n  isMWOpen: boolean,\r\n  handleMWClose: () => void,\r\n  text: string,\r\n\r\n  width?: string,\r\n  height?: string\r\n}\r\n\r\nexport const ModalWindow: React.FC<AuthModalWindowPropsType> = (\r\n  {\r\n    isMWOpen,\r\n    handleMWClose,\r\n\r\n    text,\r\n    children,\r\n\r\n    width,\r\n    height\r\n  }\r\n) => {\r\n  const useStyles = makeStyles(({\r\n    mwWrapper: {\r\n      height: '100% !important',\r\n      '& .MuiPaper-root': {\r\n        overflow: 'hidden',\r\n        borderRadius: '10px !important',\r\n        height: height ? `${height} !important` : 'auto',\r\n        width: width ? `${width} !important` : '400px',\r\n        margin: '0'\r\n      }\r\n    },\r\n    mwTitle: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n    },\r\n    mwTitleText: {\r\n      fontWeight: '700 !important'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Dialog disableScrollLock={true}\r\n            className={classes.mwWrapper}\r\n            open={isMWOpen} onClose={handleMWClose}\r\n            TransitionComponent={Transition}\r\n    >\r\n      <BlockBox padding=\"24px\">\r\n\r\n        {/* Шапка */}\r\n        <div className={classes.mwTitle}>\r\n          <Typography className={classes.mwTitleText}>{text}</Typography>\r\n          <IconButton onClick={handleMWClose}>\r\n            <CloseIcon style={{color: '#000000', width: '15px', height: '15px'}}/>\r\n          </IconButton>\r\n        </div>\r\n\r\n        <div>\r\n          {children}\r\n        </div>\r\n      </BlockBox>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ModalWindow;\r\n","import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {TemplateType} from \"./template.types\";\r\nimport {instance} from \"../api\";\r\n\r\nexport const getAllTemplates = createAsyncThunk(\r\n  'template/getAllTemplates',\r\n  async (payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get(`search_filters/`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(templateSlice.actions.setAllTemplates(response.data));\r\n  }\r\n);\r\n\r\nexport const getTemplate = createAsyncThunk(\r\n  'template/getTemplate',\r\n  async (payload: string, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get(`search_filter/${payload}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(templateSlice.actions.setCurrentTemplate(response.data));\r\n  }\r\n);\r\n\r\nexport const createTemplate = createAsyncThunk(\r\n  'template/createTemplate',\r\n  async (payload: { title: string, items: any[] }, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.post(`search_filter`, payload, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    await thunkAPI.dispatch(getTemplate(response.data));\r\n    thunkAPI.dispatch(getAllTemplates());\r\n  }\r\n);\r\n\r\nexport const updateTemplate = createAsyncThunk(\r\n  'template/updateTemplate',\r\n  async (payload: TemplateType, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.put(`search_filter/${payload.id}`, payload, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    await thunkAPI.dispatch(getTemplate(response.data));\r\n    thunkAPI.dispatch(getAllTemplates());\r\n  }\r\n);\r\n\r\nexport const deleteTemplate = createAsyncThunk(\r\n  'template/updateTemplate',\r\n  async (payload: string, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.delete(`search_filter/${payload}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(getAllTemplates());\r\n    return response.data.title;\r\n  }\r\n);\r\n\r\ntype InitialStateType = {\r\n  allTemplates: TemplateType[],\r\n  currentTemplate: TemplateType | null\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  allTemplates: [],\r\n  currentTemplate: null\r\n};\r\n\r\nexport const templateSlice = createSlice({\r\n  name: 'template',\r\n  initialState,\r\n  reducers: {\r\n    setAllTemplates(state, action: PayloadAction<TemplateType[]>) {\r\n      state.allTemplates = action.payload;\r\n    },\r\n    setCurrentTemplate(state, action: PayloadAction<TemplateType | null>) {\r\n      state.currentTemplate = action.payload;\r\n    },\r\n\r\n    templateReset: () => initialState\r\n  }\r\n});\r\n","import React, {FC, memo} from 'react';\r\nimport {Alert, CircularProgress, Snackbar} from \"@mui/material\";\r\nimport {makeStyles} from \"@mui/styles\";\r\n\r\nconst InfoSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM8.91429 4.34286C8.91429 4.8478 8.50496 5.25714 8 5.25714C7.49504 5.25714 7.08571 4.8478 7.08571 4.34286C7.08571 3.83792 7.49504 3.42857 8 3.42857C8.50496 3.42857 8.91429 3.83792 8.91429 4.34286ZM8 6.85714C8.3787 6.85714 8.68571 7.16416 8.68571 7.54286V12.1143C8.68571 12.493 8.3787 12.8 8 12.8C7.6213 12.8 7.31429 12.493 7.31429 12.1143V7.54286C7.31429 7.16416 7.6213 6.85714 8 6.85714Z\" fill=\"#722ED1\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst WarningSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M8 1C4.13438 1 1 4.13438 1 8C1 11.8656 4.13438 15 8 15C11.8656 15 15 11.8656 15 8C15 4.13438 11.8656 1 8 1ZM7.5 4.625C7.5 4.55625 7.55625 4.5 7.625 4.5H8.375C8.44375 4.5 8.5 4.55625 8.5 4.625V8.875C8.5 8.94375 8.44375 9 8.375 9H7.625C7.55625 9 7.5 8.94375 7.5 8.875V4.625ZM8 11.5C7.80374 11.496 7.61687 11.4152 7.47948 11.275C7.3421 11.1348 7.26515 10.9463 7.26515 10.75C7.26515 10.5537 7.3421 10.3652 7.47948 10.225C7.61687 10.0848 7.80374 10.004 8 10C8.19626 10.004 8.38313 10.0848 8.52052 10.225C8.6579 10.3652 8.73485 10.5537 8.73485 10.75C8.73485 10.9463 8.6579 11.1348 8.52052 11.275C8.38313 11.4152 8.19626 11.496 8 11.5Z\" fill=\"#FAAD14\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst ErrorSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#FF4D4F\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M11.1618 4.83688C11.3896 5.06469 11.3896 5.43406 11.1618 5.66187L5.66187 11.1618C5.43406 11.3896 5.06469 11.3896 4.83688 11.1618C4.60906 10.934 4.60906 10.5646 4.83688 10.3368L10.3368 4.83688C10.5646 4.60906 10.934 4.60906 11.1618 4.83688Z\" fill=\"white\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M4.83688 4.83688C5.06469 4.60906 5.43406 4.60906 5.66187 4.83688L11.1618 10.3368C11.3896 10.5646 11.3896 10.934 11.1618 11.1618C10.934 11.3896 10.5646 11.3896 10.3368 11.1618L4.83688 5.66187C4.60906 5.43406 4.60906 5.06469 4.83688 4.83688Z\" fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst SuccessSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#73D13D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M12.0209 5.31295C12.2161 5.50821 12.2161 5.8248 12.0209 6.02006L7.35418 10.6867C7.15892 10.882 6.84238 10.882 6.6471 10.6867L3.98043 8.02004C3.78517 7.82477 3.78517 7.50824 3.98043 7.31297C4.17569 7.1177 4.49228 7.1177 4.68754 7.31297L7.00065 9.62604L11.3138 5.31295C11.5091 5.11769 11.8256 5.11769 12.0209 5.31295Z\" fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport type SnackbarType = {\r\n  type: string,\r\n  text: string,\r\n  value: boolean,\r\n  time: number | null\r\n}\r\n\r\n\r\ntype SnackbarPropsType = {\r\n  type: string,\r\n  open: boolean,\r\n  onClose: (event: any) => void,\r\n  text: string,\r\n  time: number | null,\r\n  bg?: string\r\n};\r\n\r\nconst CustomSnackbar: FC<SnackbarPropsType> = memo(({type, open, onClose, text, time, bg}) => {\r\n  const useStyles = makeStyles(({\r\n    snackbar: {\r\n      testAlign: 'center !important'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n\r\n  const getIcon = () => {\r\n    if (type === 'info') {\r\n      return <InfoSvg/>\r\n    } else if (type === 'warning') {\r\n      return <WarningSvg/>\r\n    } else if (type === 'error') {\r\n      return <ErrorSvg/>\r\n    } else if (type === 'loading') {\r\n      return <CircularProgress style={{width: '16px', height: '16px'}}/>\r\n    } else {\r\n      return <SuccessSvg/>\r\n    }\r\n  };\r\n  const icon = getIcon();\r\n  return (\r\n      <Snackbar\r\n        anchorOrigin={{vertical: 'top', horizontal: 'center'}}\r\n        open={open}\r\n        onClose={onClose}\r\n        autoHideDuration={time}\r\n        className={classes.snackbar}\r\n      >\r\n        <Alert\r\n          icon={icon}\r\n          sx={{\r\n            padding: '15px 40px',\r\n            fontSize: '15px',\r\n            backgroundColor: bg ? bg : '#fff',\r\n            boxShadow: '0px 9px 28px 8px rgba(0, 0, 0, 0.15), 0px 6px 16px rgba(0, 0, 0, 0.18), 0px 3px 6px -4px rgba(0, 0, 0, 0.22)',\r\n            '& .MuiAlert-icon': {\r\n              paddingTop: '10px !important'\r\n            }\r\n          }}\r\n        >\r\n          {text}\r\n        </Alert>\r\n      </Snackbar>\r\n  );\r\n});\r\n\r\nexport default CustomSnackbar;","import React, {FC, useEffect, useState} from 'react';\r\nimport {IconButton, Typography} from \"@mui/material\";\r\nimport {ModalWindowBox} from \"../index\";\r\nimport cn from \"classnames\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport Input from \"../Input\";\r\nimport {LoadingButton} from \"@mui/lab\";\r\nimport {useFormik} from \"formik\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\nimport {createTemplate, updateTemplate} from \"../../../store/search/template.slice\";\r\nimport {TemplateType} from \"../../../store/search/template.types\";\r\nimport Snackbar from \"../Snackbar\";\r\nimport {translate} from \"../../../localizations\";\r\n\r\nconst useStyles = makeStyles(({\r\n  mwTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '20px',\r\n  },\r\n  mwTitleText: {\r\n    fontWeight: '700 !important',\r\n  },\r\n  mwIconButton: {},\r\n  mwText: {\r\n    color: \"#738094 !important\",\r\n  },\r\n  mwHelp: {\r\n    marginBottom: '35px !important'\r\n  },\r\n  mwButtonBox: {\r\n    marginTop: '25px',\r\n    textAlign: 'right',\r\n    '& .MuiButton-contained': {\r\n      textTransform: 'none !important'\r\n    },\r\n    '& .MuiButton-contained.Mui-disabled': {\r\n      backgroundColor: 'rgba(114, 46, 209, 0.3)',\r\n      color: '#fff !important'\r\n    }\r\n  }\r\n}));\r\n\r\ntype CreateNameTemplateMWPropsType = {\r\n  isOpen: boolean,\r\n  handleClose: () => void,\r\n  method: 'post' | 'put' | null,\r\n  currentTemplate: TemplateType | null\r\n};\r\n\r\nconst CreateNameTemplateModalWindow: FC<CreateNameTemplateMWPropsType> = ({\r\n                                                                            isOpen, handleClose,\r\n                                                                            method,\r\n                                                                            currentTemplate\r\n                                                                          }) => {\r\n\r\n  const activeCriterias = useAppSelector(state => state.search.activeCriterias);\r\n  const defaultCriterias = useAppSelector(state => state.search.defaultCriterias);\r\n  const dispatch = useDispatch();\r\n\r\n  const [disabled, setDisabled] = useState<boolean>(true);\r\n\r\n  const validate = (values: { name: string }) => {\r\n    if (values.name.length < 1) {\r\n      setDisabled(true);\r\n    } else {\r\n      setDisabled(false);\r\n    }\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: ''\r\n    },\r\n    validate,\r\n    onSubmit: async (values) => {\r\n      setLoading(true);\r\n      if (method === 'put' && currentTemplate) {\r\n        await dispatch(updateTemplate({...currentTemplate, title: values.name}));\r\n        handleClose();\r\n        values.name = '';\r\n      }\r\n      if (method === 'post') {\r\n        const localDefaultCriterias = [];\r\n        for (let i = 0; i < defaultCriterias.length; i++) {\r\n          if (defaultCriterias[i].values.length > 0) {\r\n            localDefaultCriterias.push(defaultCriterias[i])\r\n          }\r\n        }\r\n        await dispatch(createTemplate({\r\n          title: values.name,\r\n          items: [...localDefaultCriterias, ...activeCriterias]\r\n        }));\r\n        handleClose();\r\n        values.name = '';\r\n      }\r\n      setSnackbar(true);\r\n      setLoading(false);\r\n      setDisabled(true);\r\n    },\r\n  });\r\n  const classes = useStyles();\r\n\r\n  const {language} = useAppSelector(state => state.lang);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [snackbar, setSnackbar] = useState<boolean>(false);\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        type={'success'}\r\n        open={snackbar}\r\n        onClose={() => {\r\n          setSnackbar(false);\r\n        }}\r\n        text={method === 'put' ? 'Имя шаблона изменено' : 'Новый шаблон создан'}\r\n        time={2000}\r\n      />\r\n\r\n      <ModalWindowBox\r\n        isMWOpen={isOpen}\r\n        handleMWClose={handleClose}\r\n\r\n        text={\"Введите имя шаблона\"}\r\n      >\r\n        <form onSubmit={formik.handleSubmit}>\r\n          <Input\r\n            name={\"name\"}\r\n            type={\"text\"}\r\n            handleChange={formik.handleChange}\r\n            value={formik.values.name}\r\n            bcColor={\"#EEF2F6\"}\r\n            label={\"Название\"}\r\n            autoComplete=\"off\"\r\n          />\r\n\r\n          {/* Кнопоньки */}\r\n          <LoadingButton\r\n            loading={loading}\r\n            style={{marginRight: '15px'}}\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n            color={\"primary\"}\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n\r\n        </form>\r\n      </ModalWindowBox>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateNameTemplateModalWindow;","import React, {FC, useEffect, useState} from 'react';\r\nimport {IconButton, Typography} from \"@mui/material\";\r\nimport {ModalWindowBox} from \"../index\";\r\nimport cn from \"classnames\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport {LoadingButton} from \"@mui/lab\";\r\nimport {useFormik} from \"formik\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\nimport {deleteTemplate, templateSlice} from \"../../../store/search/template.slice\";\r\nimport {searchSlice} from \"../../../store/search/search.slice\";\r\nimport {TemplateType} from \"../../../store/search/template.types\";\r\nimport Snackbar from \"../Snackbar\";\r\nimport {translate} from \"../../../localizations\";\r\n\r\nconst useStyles = makeStyles(({\r\n  mwTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '15px'\r\n  },\r\n  mwTitleText: {\r\n    fontWeight: '700 !important'\r\n  },\r\n  mwIconButton: {},\r\n  mwText: {\r\n    color: \"#738094 !important\",\r\n  },\r\n  mwHelp: {\r\n    marginBottom: '35px !important'\r\n  },\r\n  mwButtonBox: {\r\n    marginTop: '25px',\r\n    textAlign: 'right'\r\n  }\r\n}));\r\n\r\ntype CreateNameTemplateMWPropsType = {\r\n  isOpen: boolean,\r\n  handleClose: () => void,\r\n  currentTemplate: TemplateType | null\r\n};\r\n\r\nconst CreateNameTemplateModalWindow: FC<CreateNameTemplateMWPropsType> = (\r\n  {\r\n    isOpen,\r\n    handleClose,\r\n    currentTemplate\r\n  }\r\n) => {\r\n  const allTemplates = useAppSelector(state => state.template.allTemplates);\r\n  const dispatch = useDispatch();\r\n  const getTemplate = () => {\r\n    if (allTemplates && currentTemplate) {\r\n      return allTemplates.find((item) => {\r\n        return item.title === currentTemplate.title;\r\n      });\r\n    }\r\n  };\r\n\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [snackbar, setSnackbar] = useState<boolean>(false);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: '',\r\n    },\r\n    onSubmit: async (values) => {\r\n      const template = getTemplate();\r\n      if (template) {\r\n        setLoading(true);\r\n        await dispatch(deleteTemplate(template.id));\r\n        dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n        dispatch(searchSlice.actions.setClearDefaultCriteriasValues(null));\r\n        dispatch(searchSlice.actions.removeAllActiveCriterias(null));\r\n        handleClose();\r\n        setLoading(false);\r\n        setSnackbar(true);\r\n      }\r\n    },\r\n  });\r\n  const classes = useStyles();\r\n  const {language} = useAppSelector(state => state.lang);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setSnackbar(false);\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        type={'success'}\r\n        open={snackbar}\r\n        onClose={() => {\r\n          setSnackbar(false);\r\n        }}\r\n        text={'Шаблон удален'}\r\n        time={2000}\r\n      />\r\n\r\n      <ModalWindowBox\r\n        isMWOpen={isOpen}\r\n        handleMWClose={handleClose}\r\n        text={\"Вы уверены, что хотите удалить шаблон?\"}\r\n      >\r\n        <form onSubmit={formik.handleSubmit}>\r\n          <div className={classes.mwButtonBox}>\r\n            <LoadingButton\r\n              loading={loading}\r\n              type=\"submit\"\r\n              style={{marginRight: '15px'}}\r\n              variant=\"contained\"\r\n              color=\"error\"\r\n            >\r\n              {translate(\"deleteButton\", language)}\r\n            </LoadingButton>\r\n            <LoadingButton\r\n              onClick={handleClose}\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n            >\r\n              {translate(\"cancelButtonMW\", language)}\r\n            </LoadingButton>\r\n          </div>\r\n        </form>\r\n      </ModalWindowBox>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateNameTemplateModalWindow;\r\n","import {makeStyles} from \"@mui/styles\";\r\nimport {Theme} from \"@mui/material\";\r\n\r\ntype TextSelectStylesType = {\r\n  arrowColor?: string\r\n}\r\n\r\nexport const useMuiTextSelectStyles = makeStyles<Theme, TextSelectStylesType>((theme: Theme) => ({\r\n  selectBox: {\r\n    position: 'relative'\r\n  },\r\n  selectArrow: {\r\n    fill: props => props.arrowColor ? props.arrowColor : '#000',\r\n    margin: '0 7px'\r\n  },\r\n  selectArrowOnTopBox: {\r\n    marginBottom: '5px'\r\n  },\r\n}));\r\n\r\ntype createCustomTextSelectStylesParamsType = {\r\n  width?: string,\r\n  menuPosition: 'right' | 'left',\r\n}\r\n\r\nexport function createTextSelectStyles({width, menuPosition}: createCustomTextSelectStylesParamsType) {\r\n  return {\r\n    menu: (provided: any, state: any) => ({\r\n      ...provided,\r\n      width: width ? width : '322px',\r\n      right: menuPosition === 'right' && '0',\r\n      overflow: 'hidden',\r\n      overflowY: 'auto',\r\n      zIndex: '1000',\r\n      margin: '0',\r\n      '&::-webkit-scrollbar': {\r\n        width: '4px',\r\n        backgroundColor: '#f1f1f1',\r\n        outline: 'none',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n        borderRadius: '10px'\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#9298A1'\r\n      }\r\n    }),\r\n    menuList: (provided: any, state: any) => ({\r\n      ...provided,\r\n    }),\r\n    option: (provided: any, state: any) => ({\r\n      cursor: 'pointer',\r\n      padding: '10px 24px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      \"&:hover\": {\r\n        backgroundColor: '#F8FAFC',\r\n        color: '#722ED1'\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n//control: (provided: any, state: any) => ({\r\n//       ...provided,\r\n//       display: 'flex',\r\n//       flexDirection: iconPosition === 'left' ? 'row-reverse' : 'row',\r\n//       border: 'none',\r\n//       minHeight: '24px',\r\n//       cursor: 'pointer',\r\n//       boxShadow: 'none',\r\n//       borderRadius: '0px',\r\n//       \"&:hover\": {\r\n//         borderColor: 'none'\r\n//       },\r\n//       fontFamily: 'Inter, sans-serif',\r\n//       minWidth: '100px',\r\n//       backgroundColor: 'none'\r\n//     })","import React from \"react\";\r\n\r\nexport const OnTopArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M7.39101 4.59994C7.17176 4.83662 6.81636 4.83662 6.59711 4.59994L3.9999 1.79621L1.40271 4.59994C1.18347 4.83662 0.828006 4.83662 0.608766 4.59994C0.389526 4.36325 0.389526 3.97957 0.608766 3.74288L3.60295 0.510518C3.8222 0.273838 4.1776 0.273838 4.39685 0.510518L7.39101 3.74288C7.61026 3.97957 7.61026 4.36325 7.39101 4.59994Z\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const OnBottomArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M7.39101 0.400166C7.61026 0.636846 7.61026 1.02059 7.39101 1.25725L4.39685 4.48958C4.1776 4.72627 3.8222 4.72627 3.60295 4.48958L0.608766 1.25725C0.389526 1.02059 0.389526 0.636846 0.608766 0.400166C0.828006 0.163486 1.18347 0.163486 1.40271 0.400166L3.9999 3.20392L6.59711 0.400166C6.81636 0.163486 7.17176 0.163486 7.39101 0.400166Z\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const PlusSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M5.99941 0C6.43163 0 6.78201 0.350386 6.78201 0.782609V11.2174C6.78201 11.6496 6.43163 12 5.99941 12C5.56718 12 5.2168 11.6496 5.2168 11.2174V0.782609C5.2168 0.350386 5.56718 0 5.99941 0Z\"\r\n            fill=\"#73D13D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M0 6.00038C0 5.56816 0.350386 5.21777 0.782609 5.21777H11.2174C11.6496 5.21777 12 5.56816 12 6.00038C12 6.4326 11.6496 6.78299 11.2174 6.78299H0.782609C0.350386 6.78299 0 6.4326 0 6.00038Z\"\r\n            fill=\"#73D13D\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const MinusSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M0 6.00038C0 5.56816 0.350386 5.21777 0.782609 5.21777H11.2174C11.6496 5.21777 12 5.56816 12 6.00038C12 6.4326 11.6496 6.78299 11.2174 6.78299H0.782609C0.350386 6.78299 0 6.4326 0 6.00038Z\"\r\n            fill=\"#597EF7\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const CrossSvgWithBg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M11.1618 4.83785C11.3896 5.06567 11.3896 5.43503 11.1618 5.66285L5.66187 11.1628C5.43406 11.3906 5.06469 11.3906 4.83688 11.1628C4.60906 10.935 4.60906 10.5656 4.83688 10.3378L10.3368 4.83785C10.5646 4.61004 10.934 4.61004 11.1618 4.83785Z\"\r\n            fill=\"white\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M4.83688 4.83785C5.06469 4.61004 5.43406 4.61004 5.66187 4.83785L11.1618 10.3378C11.3896 10.5656 11.3896 10.935 11.1618 11.1628C10.934 11.3906 10.5646 11.3906 10.3368 11.1628L4.83688 5.66285C4.60906 5.43503 4.60906 5.06567 4.83688 4.83785Z\"\r\n            fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};\r\n","import React, {FC, useEffect, useState, memo} from 'react';\r\nimport Select, {components} from \"react-select\";\r\nimport {useMuiTextSelectStyles} from \"./TextSelect.jss\";\r\nimport {createTextSelectStyles} from './TextSelect.jss';\r\nimport {CrossSvgWithBg, OnBottomArrow, OnTopArrow, PlusSvg, MinusSvg} from \"./TextSelect.svg\";\r\nimport {templateSlice} from \"../../../../store/search/template.slice\";\r\nimport {searchSlice} from \"../../../../store/search/search.slice\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\n// TYPES BLOCK\r\ntype SelectValueFormat = {\r\n  value: any | null, label: string | null\r\n};\r\n\r\ntype TextSelectPropsType = {\r\n  value: SelectValueFormat | null,\r\n  handleValueChange: (event: any) => void,\r\n  options: SelectValueFormat[],\r\n\r\n  iconPosition?: 'left' | 'right',\r\n  icon?: any,\r\n\r\n  customControl: any,\r\n\r\n  notClose?: boolean,\r\n  menuPosition: 'left' | 'right',\r\n\r\n  width?: string,\r\n  height?: string,\r\n  ifArrowColor?: string,\r\n\r\n  name: string\r\n};\r\n\r\n\r\nconst TextSelect: FC<TextSelectPropsType> = (\r\n  {\r\n    value,\r\n    handleValueChange,\r\n    options,\r\n    icon,\r\n    iconPosition,\r\n    customControl,\r\n    notClose,\r\n    menuPosition,\r\n    width,\r\n    height,\r\n    ifArrowColor,\r\n\r\n    name\r\n  }\r\n) => {\r\n  const customSelectStyles = createTextSelectStyles({width, menuPosition});\r\n  const classes = useMuiTextSelectStyles({arrowColor: ifArrowColor});\r\n  const dispatch = useDispatch();\r\n\r\n  // COMPONENTS BLOCK\r\n  const Arrow = memo(() => {\r\n    if (isMenuOpen) {\r\n      return <div className={classes.selectArrowOnTopBox}>\r\n        <OnTopArrow className={classes.selectArrow}/>\r\n      </div>\r\n    }\r\n    return <OnBottomArrow className={classes.selectArrow}/>\r\n  });\r\n  const Control: FC<any> = ({children, ...props}) => (\r\n    <div style={{display: 'flex', alignItems: 'center', cursor: 'pointer', margin: '2px'}}>\r\n      <div style={{display: 'flex', alignItems: 'center'}} onClick={handleSelectClick}>\r\n        {iconPosition === 'left' ? icon ? icon : <Arrow/> : null}\r\n        {customControl}\r\n        {iconPosition === 'right' ? icon ? icon : <Arrow/> : null}\r\n      </div>\r\n      {name === 'templatesSelect' && value &&\r\n      <CrossSvgWithBg\r\n        style={{fill: '#722ED1', cursor: 'pointer', marginLeft: '15px'}}\r\n        onClick={() => {\r\n          dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n          dispatch(searchSlice.actions.setClearDefaultCriteriasValues(null));\r\n          dispatch(searchSlice.actions.removeAllActiveCriterias(null));\r\n        }}\r\n      />\r\n      }\r\n    </div>\r\n  );\r\n  const CustomMenuList = memo(({selectProps, ...props}: any) => {\r\n    return (\r\n      <div style={{height: `${height ? height : 'auto'}`}}>\r\n        {props.children}\r\n      </div>\r\n    );\r\n  });\r\n  const CustomOption: FC<any> = ({children, ...props}) => {\r\n    return (\r\n      <components.Option {...props}>\r\n        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer'}}>\r\n          {children}\r\n          {props.data.icon === 'plus' ? <PlusSvg/> : <MinusSvg/>}\r\n        </div>          \r\n      </components.Option>\r\n    );\r\n  };\r\n\r\n  // LOGIC BLOCK\r\n\r\n  // выполняется когда меняется значение.\r\n  const handleSelectChange = (event: any) => {\r\n    if (notClose) {\r\n      handleValueChange(event);\r\n    } else {\r\n      handleValueChange(event);\r\n      setIsMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  // выполняется клике на селекта.\r\n  const handleSelectClick = () => {\r\n    setIsMenuOpen(true);\r\n  };\r\n\r\n  // открыте и закрытие менюшки.\r\n  const [isMenuOpen, setIsMenuOpen] = useState<boolean>(false);\r\n\r\n  // костылечек для загрытия менюшки.\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", () => setIsMenuOpen(false));\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", () => setIsMenuOpen(false));\r\n    };\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className={classes.selectBox}>\r\n      <Select\r\n        styles={customSelectStyles}\r\n        options={options}\r\n        value={value}\r\n        openMenuOnFocus={true}\r\n        menuIsOpen={isMenuOpen}\r\n        isClearable={true}\r\n        closeMenuOnSelect={false}\r\n        isSearchable={false}\r\n        hideSelectedOptions={false}\r\n        onChange={handleSelectChange}\r\n        components={{\r\n          IndicatorsContainer: () => null,\r\n          Control: Control,\r\n          MenuList: CustomMenuList,\r\n          Option: CustomOption,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextSelect;\r\n","export function optionsCreator(state: any | null) {\r\n  if (state) {\r\n    let local: { value: any, label: string }[] = [];\r\n    for (let i = 0; i < state.length; i++) {\r\n      local.push({value: state[i], label: state[i].title});\r\n    }\r\n    return local\r\n  }\r\n  return [];\r\n};\r\n\r\n\r\n// VEL - value equal label\r\nexport function optionsCreatorVEL(state: any) {\r\n  if (state) {\r\n    let local: { value: any, label: string }[] = [];\r\n    for (let i = 0; i < state.length; i++) {\r\n      local.push({value: state[i], label: state[i]});\r\n    }\r\n    // debugger\r\n    return local\r\n  }\r\n  return [];\r\n}\r\n\r\nexport function optionsCreatorWithName(state: any | null) {\r\n  if (state) {\r\n    let local: { value: any, label: string }[] = [];\r\n    for (let i = 0; i < state.length; i++) {\r\n      local.push({value: state[i].id, label: state[i].name});\r\n    }\r\n    return local\r\n  }\r\n  return [];\r\n};\r\n\r\nexport function optionsCreatorWithKey(state: any) {\r\n  if (state) {\r\n    let local: {value: any, label: string}[] = [];\r\n    for (let i = 0; i < state.length; i++) {\r\n      local.push({value: state[i].key, label: state[i].title});\r\n    }\r\n    return local;\r\n  }\r\n  return [];\r\n}","import {styled} from \"@mui/styles\";\r\nimport {Checkbox, CheckboxProps} from \"@mui/material\";\r\nimport * as React from \"react\";\r\n\r\nconst BpIcon = styled('span')(({theme}: any) => ({\r\n  borderRadius: 5,\r\n  border: '1px solid #A3AEBE',\r\n  width: 16,\r\n  height: 16,\r\n  backgroundColor: '#E3E8EF',\r\n}));\r\n\r\nconst BpCheckedIcon = styled(BpIcon)({\r\n  backgroundColor: '#722ED1',\r\n  borderColor: '#722ED1',\r\n  '&:before': {\r\n    display: 'block',\r\n    width: 16,\r\n    height: 16,\r\n    backgroundImage:\r\n      \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath\" +\r\n      \" fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 \" +\r\n      \"1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\\\")\",\r\n    content: '\"\"',\r\n  },\r\n  'input:hover ~ &': {\r\n    backgroundColor: '#5116A1',\r\n  },\r\n});\r\n\r\nconst CustomCheckbox = (props: CheckboxProps) => {\r\n  return (\r\n    <Checkbox\r\n      sx={{\r\n        '&:hover': {bgcolor: 'transparent'},\r\n        padding: '0'\r\n      }}\r\n      disableRipple\r\n      color=\"default\"\r\n      checkedIcon={<BpCheckedIcon/>}\r\n      icon={<BpIcon/>}\r\n      inputProps={{'aria-label': 'Checkbox demo'}}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport default CustomCheckbox;\r\n","import { createAsyncThunk, createSlice, PayloadAction, current } from \"@reduxjs/toolkit\";\r\n\r\nimport {\r\n  ReportsType,\r\n  CallReportType,\r\n  ReportParametersType,\r\n  SelectorsValuesParametersType,\r\n  defaultParamType\r\n} from \"./reports.types\";\r\nimport { instance } from \"../api\";\r\nimport { RootState } from \"../store\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\nconst convertDate = (date: Date | null) => {\r\n  if (date) {\r\n    const yyyy = date.getFullYear();\r\n    const mm = date.getMonth() + 1; // Months start at 0!\r\n    let strMm = `${mm}`;\r\n\r\n    const dd = date.getDate();\r\n    let strDd = `${dd}`;\r\n\r\n    if (mm < 10) strMm = `0${mm}`;\r\n    if (dd < 10) strDd = `0${dd}`;\r\n    return `${yyyy}-${strMm}-${strDd}`;\r\n  }\r\n  return date;\r\n};\r\n\r\nconst convertCriterias = (activeCriterias: any) => {\r\n  let requestArray = [];\r\n  for (let i = 0; i < activeCriterias.length; i++) {\r\n    if (activeCriterias[i].values.length > 0) {\r\n      requestArray.push({key: activeCriterias[i].key, values: activeCriterias[i].values});\r\n    }\r\n  }\r\n  return requestArray;\r\n};\r\n\r\nconst convertColumn = (obj: any, parameters: any) => {\r\n  let activeReport = cloneDeep(obj);\r\n  let local = [ ...parameters];\r\n  let groupByName = activeReport.cols_group_by[0].group_by;\r\n  if(groupByName === 'tag') return activeReport;\r\n  else if (groupByName === 'search_items') {\r\n    let local2 = {...activeReport.cols_group_by[0].value, search_items: local};\r\n    activeReport.cols_group_by[0].value = local2;\r\n    return activeReport;\r\n  } else if (groupByName === 'tag_name_list') {\r\n    return activeReport;\r\n  } else {\r\n    activeReport.cols_group_by[0] = {group_by: groupByName}\r\n    return activeReport\r\n  }\r\n}\r\nconst convertColsGroupBy = (obj: any, parameters: any) => {\r\n  let activeReport = {...obj};\r\n  let local: any = [];\r\n\r\n  for (let i = 0; i < parameters.length; i++) {\r\n    if (!parameters[i][0].select.value) {\r\n      return\r\n    }\r\n    else {\r\n      if (parameters[i][0].select.value.type === 'boolean') {\r\n        local.push({group_by: parameters[i][0].select.value.value})\r\n      }\r\n      if (parameters[i][0].select.value.type === 'select-tag') {\r\n\r\n        local.push({group_by: parameters[i][0].select.value.value, value: parameters[i][0].tagsVal.value.value});\r\n      }\r\n      if (parameters[i][0].select.value.type === 'title') {\r\n        let searchItemsArr = [];\r\n        for(let y = 0; y < parameters[i][0].callFilters.activeValues.length; y++) {\r\n          searchItemsArr.push({\r\n            key: parameters[i][0].callFilters.activeValues[y].key,\r\n            values: parameters[i][0].callFilters.activeValues[y].values,\r\n          })\r\n        }\r\n        // @ts-ignores\r\n        local.push({\r\n          group_by: parameters[i][0].select.value.value,\r\n          value: {\r\n            // @ts-ignore\r\n            col_name: parameters[i][0].nameColumn.value,\r\n            search_items: searchItemsArr,\r\n          }\r\n        })\r\n      }\r\n      if (parameters[i][0].select.value.type === 'input') {\r\n        local.push({group_by: parameters[i][0].select.value.value, value: parameters[i][0].tagsNameList.value});\r\n      }\r\n    }\r\n  }\r\n  let test = activeReport.cols_group_by[0];\r\n  let local2 = [...[test], ...local];\r\n  //here\r\n  activeReport.cols_group_by = local2;\r\n  return activeReport;\r\n}\r\nconst convertCallSearch = (callSearchArr: any, arr: any) => {\r\n  const local = {...arr};\r\n  local.call_search_items = callSearchArr;\r\n  return local\r\n}\r\n\r\nexport const getAllReports = createAsyncThunk(\r\n  'reports/getAllReports',\r\n  async (payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const response = await instance.get(`reports`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(reportsSlice.actions.setReports(response.data));\r\n  }\r\n);\r\n\r\nexport const setReports = createAsyncThunk(\r\n  'reports/setReports',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      // @ts-ignore;\r\n      const state: RootState = thunkAPI.getState();\r\n      const requestCriterias = convertCriterias(state.search.activeCriteriasReports);\r\n      const requestSearchItemsColumn = convertCriterias(state.search.activeCriteriasColumn);\r\n      const requestFilters = convertColumn(state.reports.activeReport, requestSearchItemsColumn);\r\n      const requestColsGroupBy = convertColsGroupBy(requestFilters, state.reports.activeParameters);\r\n      const requestData = convertCallSearch(requestCriterias, requestColsGroupBy);\r\n      console.log(requestData);\r\n\r\n      const response = await instance.post(`reports`, requestData, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch(error) {\r\n      console.log(error);\r\n      thunkAPI.dispatch(reportsSlice.actions.setError('Проблема с сохранением отчета'))\r\n    }\r\n  }\r\n);\r\n\r\n\r\nexport const getReport = createAsyncThunk(\r\n  'reports/getReport',\r\n  async (payload: string, thunkAPI) => {\r\n    try{\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.get(`reports/${payload}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      console.log(response.data)\r\n      thunkAPI.dispatch(reportsSlice.actions.setActiveReport(response.data));\r\n      return\r\n    } catch(error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n)\r\n\r\nexport const getCallReport = createAsyncThunk(\r\n  'make_report/calls/getCallReport',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      // @ts-ignore;\r\n      const state: RootState = thunkAPI.getState();\r\n      // @ts-ignore;\r\n      let startDate = convertDate(state.reports.date[0]);\r\n      // @ts-ignore;\r\n      let endDate = convertDate(state.reports.date[1]);\r\n\r\n      const requestCriterias = convertCriterias(state.search.activeCriteriasReports);\r\n      const requestSearchItemsColumn = convertCriterias(state.search.activeCriteriasColumn);\r\n      const requestFilters = convertColumn(state.reports.activeReport, requestSearchItemsColumn);\r\n      const requestColsGroupBy = convertColsGroupBy(requestFilters, state.reports.activeParameters);\r\n      const requestData = convertCallSearch(requestCriterias, requestColsGroupBy);\r\n      console.log(requestData)\r\n      let requestParameters = `reports/make/calls/?start_date=${startDate}&end_date=${endDate}`;\r\n      if (!startDate && !endDate) {\r\n        requestParameters = `reports/make/calls`\r\n      }\r\n\r\n      const response = await instance.post(requestParameters, requestData, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      console.log(response.data)\r\n      thunkAPI.dispatch(reportsSlice.actions.setCallReport(response.data))\r\n      return response.data\r\n    } catch(error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n)\r\n\r\nexport const deleteReport = createAsyncThunk(\r\n  'reports/deleteReport',\r\n  async (payload: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.delete(`reports/${payload}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(getAllReports())\r\n    } catch(error) {\r\n      thunkAPI.dispatch(reportsSlice.actions.setError('Проблема с удалением отчета'))\r\n      console.log(error)\r\n    }\r\n  }\r\n)\r\n\r\nexport const getSelectors = createAsyncThunk(\r\n  'reports/getSelectors',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      // @ts-ignore;\r\n      const state: RootState = thunkAPI.getState();\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.get(`reports/selectors`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      console.log(response.data)\r\n      thunkAPI.dispatch(reportsSlice.actions.getSelectorsValues({selectors: response.data, tags: state.reports.tagNames}));\r\n    } catch(error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n)\r\n\r\nexport const getTagNames = createAsyncThunk(\r\n  'users/getTagNames',\r\n  async(payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const response = await instance.get(`tag_names?only_with_values=true`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(reportsSlice.actions.setTagNames(response.data));\r\n      return response.data;\r\n    } catch(error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n);\r\n\r\ntype InitialStateType = {\r\n  allReports: ReportsType[],\r\n  currentSavedReport: {value: '', label: ''},\r\n  callReport: CallReportType,\r\n  date: Date[] | null[],\r\n  activeReport: ReportParametersType,\r\n  selectors: SelectorsValuesParametersType,\r\n  activeParameters: defaultParamType[][],\r\n  tagNames: [],\r\n  tableRows: [],\r\n  tableColumns: [],\r\n  error: string | null,\r\n  showCharts: boolean,\r\n}\r\n\r\nconst initialState: InitialStateType = {\r\n  allReports: [],\r\n  currentSavedReport: {value: '', label: ''},\r\n\r\n  //\r\n  callReport: {\r\n    report: {\r\n      cols: [],\r\n      rows: [],\r\n      total_calls: 0,\r\n      row_group_header: '',\r\n      values: {\r\n        any: {\r\n          cols: {\r\n            any: {\r\n              calls_count: 0,\r\n              calls_minutes: 0,\r\n              percent_count_from_total: 0,\r\n              percent_calls_count_from_total: 0,\r\n              call_ids: []\r\n            }\r\n          },\r\n          row_info: {\r\n            row_sum_calls_count: 0,\r\n            row_sum_calls_minutes: 0,\r\n            row_percent_count_from_total: 0,\r\n            row_total_processed_calls_count: 0,\r\n          }\r\n        },\r\n      }\r\n    },\r\n    diff_report: {\r\n      any: {\r\n        cols: {\r\n          any: {\r\n            calls_count: 0,\r\n            calls_minutes: 0,\r\n            percent_count_from_total: 0,\r\n            percent_calls_count_from_total: 0,\r\n            call_ids: []\r\n          }\r\n        },\r\n        row_info: {\r\n          row_sum_calls_count: 0,\r\n          row_sum_calls_minutes: 0,\r\n          row_percent_count_from_total: 0,\r\n          row_total_processed_calls_count: 0,\r\n        }\r\n      },\r\n    },\r\n    report_parameters_hash: '',\r\n  },\r\n\r\n  date: [new Date(Date.now() -  24  * 60 * 60 * 1000), new Date(Date.now())],\r\n  activeReport: {\r\n    report_name: '',\r\n    report_type: '',\r\n    period: null,\r\n    rows_group_by: {},\r\n    cols_group_by: [{\r\n      group_by: '',\r\n    }],\r\n    call_search_items: []\r\n  },\r\n  selectors: {\r\n    cols_groupings : [],\r\n    groupings_by_time: [],\r\n    report_types: [],\r\n    rows_groupings: [],\r\n  },\r\n  activeParameters: [],\r\n  tagNames: [],\r\n\r\n  tableRows: [],\r\n  tableColumns: [],\r\n\r\n  error: null,\r\n  showCharts: false,\r\n}\r\n\r\nexport const reportsSlice = createSlice({\r\n  name: 'reports',\r\n  initialState,\r\n  reducers: {\r\n    setError(state, action: PayloadAction<string | null>) {\r\n      state.error = action.payload;\r\n    },\r\n\r\n    setReports(state, action: PayloadAction<[]>) {\r\n      state.allReports = action.payload;\r\n    },\r\n    setActiveReport(state, action: any) {\r\n      state.activeReport = action.payload;\r\n    },\r\n    setCurrentSavedReport(state, action: any) {\r\n      state.currentSavedReport = action.payload;\r\n    },\r\n    setInitialSavedReport(state, action: any) {\r\n      state.currentSavedReport = initialState.currentSavedReport;\r\n    },\r\n\r\n    setCallReport(state, action: any) {\r\n      state.callReport = action.payload;\r\n      state.callReport.report = action.payload.report;\r\n      state.callReport.diff_report = action.payload.diff_report;\r\n      state.callReport.report_parameters_hash = action.payload.report_parameters_hash;\r\n    },\r\n    setDate(state, action: PayloadAction<typeof initialState.date | null[]>) {\r\n      state.date = action.payload;\r\n    },\r\n    setPeriod(state, action: any) {\r\n      state.activeReport.period = action.payload;\r\n    },\r\n\r\n    setTagNames(state, action: PayloadAction<[]>) {\r\n      state.tagNames = action.payload;\r\n    },\r\n\r\n    getSelectorsValues(state, action: any) {\r\n      state.selectors = action.payload.selectors;\r\n      state.activeReport.report_type = action.payload.selectors.report_types[0];\r\n      state.activeReport.rows_group_by = action.payload.selectors.rows_groupings[0];\r\n      if (action.payload.selectors.cols_groupings[0] === 'tag') {\r\n        state.activeReport.cols_group_by = [{group_by: action.payload.selectors.cols_groupings[0], value: action.payload.tags[0]}];\r\n      }\r\n      if (action.payload.selectors.rows_groupings[0] === 'time') {\r\n        state.activeReport.rows_group_by = {group_by: action.payload.selectors.rows_groupings[0], value: action.payload.selectors.groupings_by_time[0]};\r\n      }\r\n    },\r\n\r\n    // установление всех параметров отчета\r\n    setNameReport(state, action: any) {\r\n      state.activeReport.report_name = action.payload;\r\n    },\r\n    setTypeReport(state, action: any) {\r\n      state.activeReport.report_type = action.payload;\r\n    },\r\n    setActiveRowsGroupBy(state, action: any) {\r\n      state.activeReport.rows_group_by = action.payload;\r\n    },\r\n\r\n    // первая дефолтная группировка по столбцам\r\n    setDefaultColsGroupBy(state, action: any) {\r\n      if (action.payload.group_by === 'tag_name_list') {\r\n        state.activeReport.cols_group_by[0] = {group_by: action.payload.group_by, value: [] };\r\n      } else {\r\n        state.activeReport.cols_group_by[0] = { group_by: action.payload.group_by.value };\r\n      }\r\n    },\r\n    // по тегу\r\n    setDefaultColsTagGroupBy(state, action: any) {\r\n      if (action.payload.value) {\r\n        state.activeReport.cols_group_by[0] = {group_by: 'tag', value: action.payload.value.value};\r\n      }\r\n    },\r\n\r\n    setDefaultColsTagsValue(state, action: any) {\r\n      state.activeReport.cols_group_by[0].value = action.payload.value.value;\r\n    },\r\n\r\n    // по search items\r\n    setDefaultColsTitleGroupBy(state, action: any) {\r\n      state.activeReport.cols_group_by[0] = {\r\n        group_by: 'search_items',\r\n        // @ts-ignore\r\n        value: {\r\n          col_name: action.payload.col_name,\r\n        }\r\n      }\r\n    },\r\n\r\n    convertSearchItems(state, action: any) {\r\n      let requestArray: any = [];\r\n      for (let i = 0; i < action.payload.length; i++) {\r\n        if (action.payload[i].values.length > 0) {\r\n          requestArray.push({key: action.payload[i].key, values: action.payload[i].values});\r\n          // @ts-ignore\r\n          state.activeReport.cols_group_by[0].value.search_items.push({key: action.payload[i].key, values: action.payload[i].values})\r\n        }\r\n      }\r\n    },\r\n\r\n    setDefaultColTagsName(state, action: any) {\r\n      state.activeReport.cols_group_by[0].value = action.payload;\r\n    },\r\n\r\n    // доп группировки по столбцам\r\n    setActiveParameters(state, action: any) {\r\n      let local: any  = [];\r\n      if (!action.payload) local = {};\r\n      else local = action.payload;\r\n      let massiv = [];\r\n      for (let i = 0; i < local.length; i++) {\r\n        massiv.push({\r\n          select: {\r\n            options: local[i].select.options,\r\n            value: local[i].select.value,\r\n          },\r\n          tagsVal: {\r\n            options: local[i].tagsVal.options,\r\n            value: local[i].tagsVal.value,\r\n          },\r\n          op: {\r\n            options: local[i].op.options,\r\n            value: local[i].op.value,\r\n          },\r\n          opTags: {\r\n            values: []\r\n          },\r\n          nameColumn: {\r\n            value: '',\r\n          },\r\n          tagsNameList: {\r\n            options: local[i].tagsNameList.options,\r\n            value: local[i].tagsNameList.value,\r\n          },\r\n\r\n          callFilters: {\r\n            //вид для селекта\r\n            options: local[i].callFilters.options,\r\n            // все в изнач виде\r\n            values: local[i].callFilters.values,\r\n            //активные\r\n            activeValues: local[i].callFilters.activeValues,\r\n          }\r\n        })\r\n      }\r\n      // @ts-ignore\r\n      state.activeParameters.push(massiv);\r\n    },\r\n    // выбор селекта\r\n    setParameterSelectFieldValue(state, action: PayloadAction<{arrayIndex: number, value: { value: any, label: string, type: string}}>) {\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].select.value = action.payload.value;\r\n    },\r\n    //выбор тега\r\n    setParameterTagstFieldValue(state, action: PayloadAction<{arrayIndex: number,  value: { value: any, label: string}}>) {\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].tagsVal.value = action.payload.value;\r\n    },\r\n\r\n    //  названия столбца\r\n    setNameColumnFieldValue(state, action: PayloadAction<{arrayIndex: number, value: string}>) {\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].nameColumn.value = action.payload.value;\r\n    },\r\n\r\n    // выбор фильтра тега\r\n    setFilterFieldValue(state, action: PayloadAction<{arrayIndex: number, value: { value: any, label: string, type: string}}> ) {\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].op.value = action.payload.value;\r\n    },\r\n    // выбор тегов по фильтру\r\n    setFilterFieldTags(state, action: PayloadAction<{arrayIndex: number,  value: [string]}> ) {\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].opTags.values = action.payload.value;\r\n    },\r\n\r\n    setActiveCriteriaColumn(state,action: PayloadAction<{arrayIndex: number, criteria: any}>) {\r\n      //@ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues = action.payload.criteria;\r\n    },\r\n    setOptionsCriterias(state, action: PayloadAction<{arrayIndex: number, criteria: any}>){\r\n      //@ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].callFilters.options = action.payload.criteria;\r\n    },\r\n\r\n    //\r\n    setActiveColTagsName(state, action: any) {\r\n      state.activeParameters[action.payload.arrayIndex][0].tagsNameList.value = action.payload.value;\r\n    },\r\n\r\n    setActiveCriteriaValuesColumn(state,action: PayloadAction<{arrayIndex: number,  criteria: any}>) {\r\n      // @ts-ignore\r\n      const obj = current(state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues).find((item: any)=> {\r\n        return item.key === action.payload.criteria.key;\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues).indexOf(obj);\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues[index].values = action.payload.criteria.values;\r\n    },\r\n\r\n    removeActiveCriteriaColumn(state, action: PayloadAction<{arrayIndex: number, criteria: any}>) {\r\n      // @ts-ignore\r\n      let activeCriteriasColumn = cloneDeep(current(state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues));\r\n      // @ts-ignore\r\n      const obj = current(state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues).find((item: any) => {\r\n        return item.key === action.payload.criteria.key\r\n      });\r\n      // @ts-ignore\r\n      const index = current(state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues).indexOf(obj);\r\n      activeCriteriasColumn.splice(index, 1);\r\n      // @ts-ignore\r\n      state.activeParameters[action.payload.arrayIndex][0].callFilters.activeValues = activeCriteriasColumn;\r\n    },\r\n\r\n    // удаление активного доп критерия\r\n    removeParameterField(state, action: PayloadAction<{arrayIndex: number}>) {\r\n      state.activeParameters.splice(action.payload.arrayIndex, 1);\r\n    },\r\n\r\n    removeAllActiveParameters(state, action: PayloadAction<null>) {\r\n      state.activeParameters = [];\r\n    },\r\n\r\n    removeAll(state, action: any) {\r\n      state.callReport = initialState.callReport\r\n    },\r\n\r\n    setTableRows(state, action: any) {\r\n      state.tableRows = action.payload;\r\n    },\r\n    setTableColumns(state, action: any) {\r\n      state.tableColumns = action.payload;\r\n    },\r\n\r\n    removeTableColumnsRows(state, action: any) {\r\n      state.tableRows = initialState.tableRows;\r\n      state.tableColumns = initialState.tableColumns;\r\n    },\r\n\r\n    setShowCharts(state, action: any) {\r\n      state.showCharts = action.payload;\r\n    },\r\n\r\n    removeShowChart(state, action: any) {\r\n      state.showCharts = initialState.showCharts;\r\n    },\r\n\r\n    resetReportParameters: () => initialState\r\n  }\r\n})","import * as React from 'react';\r\n\r\nimport CreatableSelect from 'react-select/creatable';\r\nimport { FC, memo, useEffect, useRef, useState } from \"react\";\r\nimport { CriteriasType, RequestDataType } from \"../../../store/search/search.types\";\r\nimport { searchSlice } from \"../../../store/search/search.slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Typography } from \"@mui/material\";\r\nimport Select, { components } from \"react-select\";\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport cn from 'classnames';\r\nimport Checkbox from \"../Checkbox\";\r\nimport { templateSlice } from \"../../../store/search/template.slice\";\r\nimport useOnClickOutside from \"use-onclickoutside\";\r\nimport { useAppSelector } from \"../../../hooks/redux\";\r\nimport { translate } from '../../../localizations';\r\nimport { RootState } from \"../../../store/store\";\r\nimport { reportsSlice } from '../../../store/reports/reports.slice';\r\nimport { optionsCreatorVEL } from '../../../utils/optionsCreator'\r\n\r\nconst CrossSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#738094\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M11.1618 4.83785C11.3896 5.06567 11.3896 5.43503 11.1618 5.66285L5.66187 11.1628C5.43406 11.3906 5.06469 11.3906 4.83688 11.1628C4.60906 10.935 4.60906 10.5656 4.83688 10.3378L10.3368 4.83785C10.5646 4.61004 10.934 4.61004 11.1618 4.83785Z\"\r\n        fill=\"white\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.83688 4.83785C5.06469 4.61004 5.43406 4.61004 5.66187 4.83785L11.1618 10.3378C11.3896 10.5656 11.3896 10.935 11.1618 11.1628C10.934 11.3906 10.5646 11.3906 10.3368 11.1628L4.83688 5.66285C4.60906 5.43503 4.60906 5.06567 4.83688 4.83785Z\"\r\n        fill=\"white\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const OnTopArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M7.39101 4.59994C7.17176 4.83662 6.81636 4.83662 6.59711 4.59994L3.9999 1.79621L1.40271 4.59994C1.18347 4.83662 0.828006 4.83662 0.608766 4.59994C0.389526 4.36325 0.389526 3.97957 0.608766 3.74288L3.60295 0.510518C3.8222 0.273838 4.1776 0.273838 4.39685 0.510518L7.39101 3.74288C7.61026 3.97957 7.61026 4.36325 7.39101 4.59994Z\"\r\n        fill=\"#1B202B\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const OnBottomArrow = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M7.39101 0.400166C7.61026 0.636846 7.61026 1.02059 7.39101 1.25725L4.39685 4.48958C4.1776 4.72627 3.8222 4.72627 3.60295 4.48958L0.608766 1.25725C0.389526 1.02059 0.389526 0.636846 0.608766 0.400166C0.828006 0.163486 1.18347 0.163486 1.40271 0.400166L3.9999 3.20392L6.59711 0.400166C6.81636 0.163486 7.17176 0.163486 7.39101 0.400166Z\"\r\n        fill=\"#738094\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const CrossWithoutBg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M11.1618 4.83785C11.3896 5.06567 11.3896 5.43503 11.1618 5.66285L5.66187 11.1628C5.43406 11.3906 5.06469 11.3906 4.83688 11.1628C4.60906 10.935 4.60906 10.5656 4.83688 10.3378L10.3368 4.83785C10.5646 4.61004 10.934 4.61004 11.1618 4.83785Z\"\r\n        fill=\"#237804\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.83688 4.83785C5.06469 4.61004 5.43406 4.61004 5.66187 4.83785L11.1618 10.3378C11.3896 10.5656 11.3896 10.935 11.1618 11.1628C10.934 11.3906 10.5646 11.3906 10.3368 11.1628L4.83688 5.66285C4.60906 5.43503 4.60906 5.06567 4.83688 4.83785Z\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\n// TYPES BLOCK\r\ntype SelectPropsType = {\r\n  criteriaFull: CriteriasType | null,\r\n  criteriaCurrent: CriteriasType | RequestDataType | null,\r\n  isDefaultCriteria: boolean,\r\n  block?: string,\r\n  index?: {arrayIndex: number},\r\n  array?: { value: string, label: string }[],\r\n  valueList?: [],\r\n  handlerOnChange?: (e: any) => void\r\n};\r\n\r\nconst SearchSelect: FC<SelectPropsType> = memo(({\r\n    criteriaFull,\r\n    criteriaCurrent,\r\n    isDefaultCriteria,\r\n    block,\r\n    index,\r\n    array,\r\n    valueList,\r\n    handlerOnChange,\r\n  }) => {\r\n\r\n  // STYLES BLOCK\r\n  const useStyles = makeStyles(({\r\n    selectBox: {\r\n      display: 'flex !important',\r\n      alignItems: 'center',\r\n      cursor: 'pointer',\r\n      width: '75%'\r\n    },\r\n    selectItem: {},\r\n    selectMenuListInput: {\r\n      width: \"228px\",\r\n      margin: '16px 24px',\r\n      outline: 'none',\r\n      backgroundColor: '#F8FAFC',\r\n      border: '1px solid #E3E8EF',\r\n      borderRadius: '5px',\r\n      padding: '10px 30px 10px 12px',\r\n      color: '#738094',\r\n      fontSize: '14px',\r\n      position: 'relative'\r\n    },\r\n    selectMenuListInputIcon: {\r\n      position: 'absolute',\r\n      left: '262px',\r\n      top: '23px',\r\n      color: '#738094',\r\n      width: '11px'\r\n    },\r\n    selectOption: {\r\n      cursor: 'pointer',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      padding: '5px 24px'\r\n    },\r\n    selectArrow: {\r\n      marginRight: '10px'\r\n    },\r\n    selectArrowOnArrow: {\r\n      marginBottom: '5px'\r\n    },\r\n    selectCheckBox: {\r\n      '&.MuiCheckbox-root': {\r\n        backgroundColor: '#E3E8EF !important'\r\n      }\r\n    },\r\n    selectTag: {\r\n      height: '22px !important',\r\n      cursor: 'pointer !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      border: '2px solid #E9ECEF !important',\r\n      borderRadius: '5px !important',\r\n      margin: '2.5px !important',\r\n      padding: '0 5px',\r\n      backgroundColor: '#E9ECEF !important',\r\n      color: `#000000 !important`,\r\n      fontSize: '12px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    selectSelectBox: {\r\n      position: 'relative',\r\n      width: '100%'\r\n    },\r\n    selectPlaceholder: {\r\n      // @ts-ignore\r\n      position: 'absolute !important',\r\n      left: '11px !important',\r\n      top: '9px !important'\r\n    }\r\n  }));\r\n  const customStyles = {\r\n    menu: (provided: any) => ({\r\n      ...provided,\r\n      width: '322px',\r\n      height: '400px !important',\r\n      overflow: 'hidden',\r\n      overflowY: 'auto',\r\n      zIndex: '1000',\r\n      '&::-webkit-scrollbar': {\r\n        width: '4px',\r\n        backgroundColor: '#f1f1f1',\r\n        outline: 'none',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n        borderRadius: '10px'\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#9298A1'\r\n      }\r\n    }),\r\n    option: (provided: any, state: any) => ({\r\n      cursor: 'pointer',\r\n      padding: '10px 24px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      \"&:hover\": {\r\n        backgroundColor: '#F8FAFC',\r\n        color: '#722ED1'\r\n      }\r\n    }),\r\n    control: (provided: any, state: any) => ({\r\n      ...provided,\r\n      cursor: 'pointer',\r\n      minHeight: '38px',\r\n      border: '1px solid #E3E8EF',\r\n      boxShadow: 'none',\r\n      borderColor: menuIsOpen ? '#722ED1 !important' : '#E3E8EF !important',\r\n      \"&:hover\": {\r\n        borderColor: '#E3E8EF'\r\n      },\r\n      minWidth: '70px',\r\n      borderRadius: '5px',\r\n      backgroundColor: '#F8FAFC'\r\n    }),\r\n    dropdownIndicator: (provided: any) => ({\r\n      ...provided,\r\n      color: '#738094',\r\n      '&:hover': {\r\n        color: '#738094'\r\n      }\r\n    }),\r\n    placeholder: (provided: any) => ({\r\n      ...provided,\r\n      fontSize: '14px',\r\n      color: '#738094',\r\n      fontFamily: 'Inter, sans-serif'\r\n    }),\r\n    indicatorsContainer: (provided: any) => ({\r\n      ...provided,\r\n      '& svg path:hover': {\r\n        fill: 'hsl(0, 0%, 80%)'\r\n      },\r\n      padding: '0'\r\n    }),\r\n    multiValue: (provided: any) => ({\r\n      ...provided,\r\n      height: '24px !important',\r\n      cursor: 'pointer !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      border: '2px solid #E9ECEF !important',\r\n      borderRadius: '5px !important',\r\n      margin: '2.5px !important',\r\n      backgroundColor: '#E9ECEF !important',\r\n      color: `#000000 !important`,\r\n    }),\r\n    multiValueRemove: (provided: any) => ({\r\n      ...provided,\r\n      backgroundColor: '#E9ECEF !important',\r\n    }),\r\n    valueContainer: (provided: any) => ({\r\n      ...provided,\r\n      display: 'flex',\r\n      paddingRight: '20px',\r\n\r\n    })\r\n  }\r\n  const classes = useStyles();\r\n\r\n\r\n  // COMPONENTS BLOCK\r\n  const CustomMultiValueLabel = memo((props: any) => {\r\n    return (\r\n      <components.MultiValueLabel {...props} />\r\n    )\r\n  });\r\n  const CustomMultiValueRemove = memo((props: any) => {\r\n    return (\r\n      <components.MultiValueRemove {...props}>\r\n        <CrossWithoutBg fill={'000'} />\r\n      </components.MultiValueRemove>\r\n    )\r\n  });\r\n  const LimitedChipsContainer = ({ children, hasValue, ...props }: any) => {\r\n    if (!hasValue) {\r\n      return (\r\n        <components.ValueContainer {...props}>\r\n          {children}\r\n        </components.ValueContainer>\r\n      );\r\n    }\r\n    let CHIPS_LIMIT = 6;\r\n    const [chips, otherChildren] = children;\r\n    if (chips.length > CHIPS_LIMIT) {\r\n      CHIPS_LIMIT = 6;\r\n    }\r\n    const overflowCounter = chips.slice(CHIPS_LIMIT).length;\r\n    const displayChips = chips.slice(overflowCounter, overflowCounter + CHIPS_LIMIT);\r\n    return (\r\n      <components.ValueContainer {...props}>\r\n        {displayChips}\r\n        {overflowCounter > 0 &&\r\n          <div className={classes.selectTag}>\r\n            +{overflowCounter}\r\n          </div>}\r\n      </components.ValueContainer>\r\n    );\r\n  };\r\n  const CustomInd = memo((props: any) => {\r\n    if (menuIsOpen) {\r\n      return <div className={cn(classes.selectArrowOnArrow, classes.selectArrow)}><OnTopArrow /></div>\r\n    }\r\n    return <OnBottomArrow className={classes.selectArrow} />\r\n  });\r\n  const CustomOption = memo((props: any) => {\r\n    if (props.children.length > 0) {\r\n      return <div>\r\n        <components.Option {...props} className={classes.selectOption}>\r\n          {props.children}\r\n          {criteriaCurrent ? \r\n            <Checkbox\r\n              disableRipple\r\n              checked={criteriaCurrent.values.indexOf(props.children) >= 0}\r\n            />\r\n          :\r\n            <Checkbox\r\n              disableRipple\r\n               //@ts-ignore\r\n              checked={Boolean(valueList.find((item) => item === props.children))}\r\n            />          \r\n          }\r\n        </components.Option>\r\n      </div>\r\n    }\r\n    return null;\r\n  })\r\n\r\n  const CustomMenuList = memo(({ selectProps, ...props }: any) => {\r\n    const selectSearch = useRef<HTMLInputElement | null>(null);\r\n\r\n    useEffect(() => {\r\n      if (criteriaFull) {\r\n        if (selectSearch.current && criteriaFull.selectType !== 'multiString') {\r\n          selectSearch.current.focus();\r\n        }\r\n      }\r\n    }, [setMenuIsOpen])\r\n\r\n    const { onInputChange, inputValue, onMenuInputFocus } = selectProps;\r\n    return (\r\n      <div>\r\n        <div>\r\n          <input\r\n            ref={selectSearch}\r\n            className={classes.selectMenuListInput}\r\n            autoCorrect=\"off\"\r\n            autoComplete=\"off\"\r\n            spellCheck=\"false\"\r\n            type=\"text\"\r\n            value={inputValue}\r\n            onChange={(e) =>\r\n              onInputChange(e.currentTarget.value, {\r\n                action: \"input-change\"\r\n              })\r\n            }\r\n            onMouseDown={(e) => {\r\n              e.stopPropagation();\r\n              // @ts-ignore\r\n              e.target.focus();\r\n            }}\r\n            onTouchEnd={(e) => {\r\n              e.stopPropagation();\r\n              // @ts-ignore\r\n              e.target.focus();\r\n            }}\r\n            onFocus={onMenuInputFocus}\r\n            placeholder={translate('searchTag', language)}\r\n          />\r\n          <SearchIcon className={classes.selectMenuListInputIcon} />\r\n        </div>\r\n        <div style={{ height: '400px !important' }}>\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  // LOGIC BLOCK\r\n  // диспатч\r\n  const dispatch = useDispatch();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  // открыте и закрытие менюшки.\r\n  const [menuIsOpen, setMenuIsOpen] = useState<boolean>(false);\r\n\r\n  // удаление критерии.\r\n  // const removeCriteria = () => {\r\n  //   dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n  //   if (criteriaFull) {\r\n  //     dispatch(searchSlice.actions.removeActiveCriteria(criteriaFull));\r\n  //   }\r\n  // };\r\n\r\n  // выполняется когда меняется значение.\r\n  const handleSelectChange = (event: any) => {\r\n    const eventConverter = () => {\r\n      let result = [];\r\n      for (let i = 0; i < event.length; i++) {\r\n        result.push(event[i].value);\r\n      }\r\n      return result;\r\n    };\r\n\r\n    if (array) {\r\n      const eventConverterResult = eventConverter();\r\n      //@ts-ignore\r\n      handlerOnChange([...eventConverterResult])\r\n\r\n    } else {\r\n      dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n      const eventConverterResult = eventConverter();\r\n      if (block === 'reports' && criteriaFull) {\r\n        dispatch(searchSlice.actions.setActiveCriteriaReportsValues({key: criteriaFull.key, values: [...eventConverterResult]}));\r\n      }  else if (block === 'reports-column' && criteriaFull) {\r\n        dispatch(searchSlice.actions.setActiveCriteriaReportsColumnValues({key: criteriaFull.key, values: [...eventConverterResult]}));\r\n      }  else if (index && criteriaFull) {\r\n        dispatch(reportsSlice.actions.setActiveCriteriaValuesColumn({arrayIndex: index.arrayIndex,  criteria: {key: criteriaFull.key, values: [...eventConverterResult]}}))\r\n      }  else {\r\n        if (isDefaultCriteria && criteriaFull) {\r\n          dispatch(searchSlice.actions.setDefaultCriteriaValues({key: criteriaFull.key, values: [...eventConverterResult]}));\r\n        } else if (criteriaFull) {\r\n          dispatch(searchSlice.actions.setActiveCriteriaValues({key: criteriaFull.key, values: [...eventConverterResult]}));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const converter = (state: any) => {\r\n    let local: { value: string, label: string }[] = [];\r\n    if (state) {\r\n      for (let i = 0; i < state.values.length; i++) {\r\n        local.push({ value: state.values[i], label: state.values[i] });\r\n      }\r\n    }\r\n    return local\r\n  };\r\n  const converterCurrentResult = converter(criteriaCurrent);\r\n  const converterFullResult = converter(criteriaFull);\r\n\r\n  // костылечек для загрытия селектов\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n    {array && array.length > 0 ?\r\n      <div className={classes.selectSelectBox} onClick={() => setMenuIsOpen(true)}>\r\n        <CreatableSelect\r\n          closeMenuOnSelect={false}\r\n          isMulti\r\n          createOptionPosition={'first'}\r\n          styles={customStyles}\r\n          formatCreateLabel={(str) => str}\r\n          value={optionsCreatorVEL(valueList)}\r\n          onChange={handleSelectChange}\r\n\r\n          tabIndex={0}\r\n          isValidNewOption={(str) => true}\r\n          options={array}\r\n          hideSelectedOptions={false}\r\n          components={{\r\n            MenuList: CustomMenuList,\r\n            Option: CustomOption,\r\n            DropdownIndicator: CustomInd,\r\n            IndicatorSeparator: () => null,\r\n            MultiValueLabel: CustomMultiValueLabel,\r\n            MultiValueRemove: CustomMultiValueRemove,\r\n          }}\r\n          placeholder={translate('allTags', language)}\r\n          menuIsOpen={menuIsOpen}\r\n        />\r\n      </div>\r\n      :\r\n      <div className={classes.selectBox}>\r\n        {criteriaFull && criteriaFull.selectType === \"multiString\" ?\r\n          <div className={classes.selectSelectBox} onClick={() => setMenuIsOpen(true)}>\r\n            <CreatableSelect\r\n              closeMenuOnSelect={false}\r\n              isMulti\r\n              createOptionPosition={'first'}\r\n              styles={customStyles}\r\n              formatCreateLabel={(str) => str}\r\n              value={converterCurrentResult}\r\n              onChange={handleSelectChange}\r\n\r\n              tabIndex={0}\r\n              isValidNewOption={(str) => true}\r\n              options={converterFullResult}\r\n              hideSelectedOptions={false}\r\n              components={{\r\n                MenuList: CustomMenuList,\r\n                Option: CustomOption,\r\n                DropdownIndicator: CustomInd,\r\n                IndicatorSeparator: () => null,\r\n                MultiValueLabel: CustomMultiValueLabel,\r\n                MultiValueRemove: CustomMultiValueRemove,\r\n              }}\r\n              placeholder={translate('allTags', language)}\r\n              menuIsOpen={menuIsOpen}\r\n\r\n            />\r\n          </div> :\r\n          <div className={classes.selectSelectBox}  onClick={() => setMenuIsOpen(true)}>\r\n            <Select\r\n              openMenuOnFocus={true}\r\n              menuIsOpen={menuIsOpen}\r\n              className={classes.selectItem}\r\n              name=\"color\"\r\n              placeholder={translate('allTags', language)}\r\n              components={{\r\n                MenuList: CustomMenuList,\r\n                Option: CustomOption,\r\n                DropdownIndicator: CustomInd,\r\n                IndicatorSeparator: () => null,\r\n                MultiValueLabel: CustomMultiValueLabel,\r\n                MultiValueRemove: CustomMultiValueRemove,\r\n                ValueContainer: LimitedChipsContainer,\r\n              }}\r\n              onChange={handleSelectChange}\r\n              isClearable={true}\r\n              closeMenuOnSelect={false}\r\n              styles={customStyles}\r\n              isMulti\r\n              isSearchable={false}\r\n              value={converterCurrentResult}\r\n              options={converterFullResult}\r\n              hideSelectedOptions={false}\r\n            />\r\n            {converterCurrentResult.length < 1 &&\r\n            <Typography className={classes.selectPlaceholder}>{translate('allTags', language)}</Typography>\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n    }\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SearchSelect;\r\n","import React from 'react';\r\nimport SearchSelect from '../Search/SearchSelect';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {Typography} from \"@mui/material\";\r\n\r\nconst useStyles = makeStyles(({\r\n  searchText: {\r\n    marginRight: '8px !important',\r\n    color: '#2F3747 !important',\r\n    whiteSpace: 'nowrap'\r\n  },\r\n}))\r\n\r\nconst CriteriaItem = (props: any) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <Typography className={classes.searchText}>{props.title}</Typography>\r\n      <SearchSelect\r\n        criteriaFull={props.criteriaFull}\r\n        criteriaCurrent={props.criteriaCurrent}\r\n        isDefaultCriteria={props.isDefaultCriteria}\r\n        block={props.block}\r\n        index={props.index}\r\n      />\r\n    </>\r\n  ) \r\n}\r\n\r\nexport default CriteriaItem;","import React, {FC} from 'react';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {CriteriasType, RequestDataType} from '../../../store/search/search.types';\r\nimport CriteriaItem from './CriteriaItem';\r\n\r\nconst useStyles = makeStyles(({\r\n  searchItems: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    flexWrap: 'wrap',\r\n    // marginTop: '16px'\r\n    // display: 'grid'\r\n  },\r\n  searchItem: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    margin: '0 22px 16px 0',\r\n    width: '100%',\r\n  },\r\n  searchItemBlock_1:{\r\n    gridRowStart: 1,\r\n    gridRowEnd: 2,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_2:{\r\n    gridRowStart: 2,\r\n    gridRowEnd: 3,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_3:{\r\n    gridRowStart: 3,\r\n    gridRowEnd: 4,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_4:{\r\n    gridRowStart: 4,\r\n    gridRowEnd: 5,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_noWide: {\r\n    width: '30%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_Wide: {\r\n    width: '70%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n}))\r\n\r\ntype FindCriteriasPropsType = {\r\n  defaultCriterias?: RequestDataType[],\r\n  allCriterias: CriteriasType[] | null,\r\n  activeCriterias: CriteriasType[],\r\n  block?: string,\r\n  index?: {arrayIndex: number},\r\n}\r\n\r\nconst CriteriasList: FC<FindCriteriasPropsType> = React.memo(({\r\n  defaultCriterias,\r\n  allCriterias,\r\n  activeCriterias,\r\n  block,\r\n  index\r\n}) => {\r\n  const classes = useStyles();\r\n  \r\n  function switchSearchItemCLassName(className: string) {\r\n    const classSwitcher: {[id: string]: any} = {};\r\n    classSwitcher['searchItemBlock_1'] = classes.searchItemBlock_1;\r\n    classSwitcher['searchItemBlock_2'] = classes.searchItemBlock_2;\r\n    classSwitcher['searchItemBlock_3'] = classes.searchItemBlock_3;\r\n    classSwitcher['searchItemBlock_4'] = classes.searchItemBlock_4;\r\n    classSwitcher['searchItemBlock_Wide'] = classes.searchItemBlock_Wide;\r\n    classSwitcher['searchItemBlock_noWide'] = classes.searchItemBlock_noWide;\r\n    return classSwitcher[className];\r\n  }\r\n\r\n  return (\r\n    <div className={classes.searchItems}>\r\n      {defaultCriterias && allCriterias ? defaultCriterias.map(criteria => {\r\n        const criteriaKey = criteria.key.slice(4);\r\n        const compResult = allCriterias.filter(v => v.key === criteria.key);\r\n        return (\r\n          <div className={classes.searchItem}>\r\n            <CriteriaItem\r\n              title={compResult[0].title}\r\n              criteriaFull={compResult[0]}\r\n              criteriaCurrent={criteria}\r\n              isDefaultCriteria={true}\r\n              block={block}\r\n              index={index}\r\n            />\r\n          </div>\r\n        )\r\n      }) : null}\r\n\r\n      {activeCriterias && allCriterias ? activeCriterias.map(criteria => {\r\n        const compResult = allCriterias.filter(v => v.key === criteria.key);\r\n        const criteriaWide = criteria.wide ? 'searchItemBlock_Wide' : 'searchItemBlock_noWide';\r\n        const criteriaBlock = `searchItemBlock_${criteria.block}`;\r\n        return ( \r\n          // <div className={switchSearchItemCLassName(criteriaBlock)}> \r\n            <div className={switchSearchItemCLassName(criteriaWide)}>\r\n              <div className={classes.searchItem}>\r\n                <CriteriaItem\r\n                  title={criteria.title}\r\n                  criteriaFull={compResult[0]}\r\n                  criteriaCurrent={criteria}\r\n                  isDefaultCriteria={false}\r\n                  block={block}\r\n                  index={index}\r\n                />\r\n              </div>\r\n            {/* </div> */}\r\n          </div>\r\n        )\r\n      }) : null}\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default CriteriasList;","import React, {FC} from 'react';\r\nimport Select, {components} from \"react-select\";\r\n\r\n// SVG BLOCK\r\nconst VerticalDotsSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"21\" viewBox=\"0 0 17 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M8.36743 2.68359C7.69851 2.68359 7.15625 3.22588 7.15625 3.89477C7.15625 4.56367 7.69851 5.10595 8.36743 5.10595C9.03635 5.10595 9.57861 4.56367 9.57861 3.89477C9.57861 3.22588 9.03635 2.68359 8.36743 2.68359Z\"\r\n        fill=\"#2F3747\"/>\r\n      <path\r\n        d=\"M7.15625 9.00024C7.15625 8.33135 7.69854 7.78906 8.36743 7.78906C9.03632 7.78906 9.57861 8.33135 9.57861 9.00024C9.57861 9.66914 9.03632 10.2114 8.36743 10.2114C7.69854 10.2114 7.15625 9.66914 7.15625 9.00024Z\"\r\n        fill=\"black\"/>\r\n      <path\r\n        d=\"M7.15625 14.1057C7.15625 13.4368 7.69854 12.8945 8.36743 12.8945C9.03632 12.8945 9.57861 13.4368 9.57861 14.1057C9.57861 14.7746 9.03632 15.3169 8.36743 15.3169C7.69854 15.3169 7.15625 14.7746 7.15625 14.1057Z\"\r\n        fill=\"black\"/>\r\n    </svg>\r\n  )\r\n};\r\n\r\nconst HorizontalDotsSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"20\" height=\"20 \" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path d=\"M4 7C3.44771 7 3 7.44773 3 8C3 8.55227 3.44771 9 4 9C4.55229 9 5 8.55227 5 8C5 7.44773 4.55229 7 4 7Z\"\r\n            fill=\"black\"/>\r\n      <path d=\"M7 8C7 7.44773 7.44773 7 8 7C8.55227 7 9 7.44773 9 8C9 8.55227 8.55227 9 8 9C7.44773 9 7 8.55227 7 8Z\"\r\n            fill=\"black\"/>\r\n      <path\r\n        d=\"M11 8C11 7.44773 11.4477 7 12 7C12.5523 7 13 7.44773 13 8C13 8.55227 12.5523 9 12 9C11.4477 9 11 8.55227 11 8Z\"\r\n        fill=\"black\"/>\r\n    </svg>\r\n  )\r\n};\r\n\r\n\r\nconst PenSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M9.73764 2.33301C9.82604 2.33301 9.91084 2.36813 9.97338 2.43064L11.859 4.31625C11.9891 4.44643 11.9891 4.65749 11.859 4.78766L5.7307 10.9159C5.68882 10.9578 5.63654 10.9877 5.57924 11.0027L3.02696 11.6694C2.91246 11.6993 2.79069 11.6663 2.70702 11.5826C2.62334 11.4989 2.5903 11.3771 2.6202 11.2627L3.28687 8.71034C3.30184 8.65307 3.3318 8.60081 3.37368 8.55888L9.50191 2.43064C9.56444 2.36813 9.64924 2.33301 9.73764 2.33301Z\"\r\n        fill=\"black\"/>\r\n      <path\r\n        d=\"M2.66797 12.833C2.39183 12.833 2.16797 13.0569 2.16797 13.333C2.16797 13.6091 2.39183 13.833 2.66797 13.833H12.668C12.9441 13.833 13.168 13.6091 13.168 13.333C13.168 13.0569 12.9441 12.833 12.668 12.833H2.66797Z\"\r\n        fill=\"black\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst TrashSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M6.16536 2C6.16536 1.72386 6.38922 1.5 6.66536 1.5H9.33203C9.60816 1.5 9.83203 1.72386 9.83203 2V2.5H12.6654C12.9415 2.5 13.1654 2.72386 13.1654 3C13.1654 3.27614 12.9415 3.5 12.6654 3.5H3.33203C3.05589 3.5 2.83203 3.27614 2.83203 3C2.83203 2.72386 3.05589 2.5 3.33203 2.5H6.16536V2Z\"\r\n        fill=\"#F5222D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M4.16148 5.29652C4.18023 5.12771 4.32292 5 4.49277 5H11.5103C11.6801 5 11.8229 5.12771 11.8416 5.29652L11.975 6.49742C12.2155 8.66207 12.2155 10.8467 11.975 13.0113L11.9619 13.1296C11.8743 13.9179 11.2633 14.5466 10.4777 14.6566C8.83495 14.8866 7.16815 14.8866 5.52537 14.6566C4.73979 14.5466 4.12878 13.9179 4.04118 13.1296L4.02805 13.0113C3.78753 10.8467 3.78753 8.66207 4.02805 6.49742L4.16148 5.29652ZM7.16821 7.6C7.16821 7.32387 6.94435 7.1 6.66821 7.1C6.39207 7.1 6.16821 7.32387 6.16821 7.6V12.2667C6.16821 12.5428 6.39207 12.7667 6.66821 12.7667C6.94435 12.7667 7.16821 12.5428 7.16821 12.2667V7.6ZM9.83488 7.6C9.83488 7.32387 9.61101 7.1 9.33488 7.1C9.05875 7.1 8.83488 7.32387 8.83488 7.6V12.2667C8.83488 12.5428 9.05875 12.7667 9.33488 12.7667C9.61101 12.7667 9.83488 12.5428 9.83488 12.2667V7.6Z\"\r\n            fill=\"#F5222D\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst CloneSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M2.16602 5.99935C2.16602 3.88226 3.88226 2.16602 5.99935 2.16602H10.6746C10.9507 2.16602 11.1746 2.38988 11.1746 2.66602C11.1746 2.94216 10.9507 3.16602 10.6746 3.16602H5.99935C4.43454 3.16602 3.16602 4.43454 3.16602 5.99935V10.7373C3.16602 11.0134 2.94216 11.2373 2.66602 11.2373C2.38988 11.2373 2.16602 11.0134 2.16602 10.7373V5.99935Z\"\r\n        fill=\"#738094\"/>\r\n      <path\r\n        d=\"M12.2691 4.52877C10.1084 4.28729 7.89292 4.28729 5.7323 4.52877C5.11679 4.59756 4.62217 5.08195 4.54961 5.70225C4.29336 7.89326 4.29336 10.1066 4.54961 12.2976C4.62217 12.9179 5.11679 13.4023 5.7323 13.4711C7.89292 13.7126 10.1084 13.7126 12.2691 13.4711C12.8845 13.4023 13.3792 12.9179 13.4517 12.2976C13.708 10.1066 13.708 7.89326 13.4517 5.70225C13.3792 5.08195 12.8845 4.59756 12.2691 4.52877Z\"\r\n        fill=\"#A3AEBE\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n// TYPES BLOCK\r\ntype CustomControlSelectPropsType = {\r\n  handleSelectChange: (event: any) => void,\r\n  svg: 'horizontal' | 'vertical' | string,\r\n  options: { value: any, label: any }[],\r\n  optionsPosition: 'top' | 'bottom',\r\n  disabled?: boolean\r\n};\r\n\r\nconst CustomControlSelect: FC<CustomControlSelectPropsType> = ({\r\n                                                                 disabled,\r\n                                                                 handleSelectChange,\r\n                                                                 svg,\r\n                                                                 options,\r\n                                                                 optionsPosition\r\n                                                               }) => {\r\n  // STYLES BLOCK\r\n  const customDotsStyles = {\r\n    container: (base: any) => ({\r\n      ...base\r\n    }),\r\n    menu: (provided: any, state: any) => ({\r\n      ...provided,\r\n      width: '183px',\r\n      right: '0',\r\n      bottom: '35px',\r\n      boxShadow: '0px 0px 4px rgba(98, 98, 98, 0.22)',\r\n      borderRadius: '10px',\r\n      cursor: 'pointer',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      zIndex: '100000 !important'\r\n    }),\r\n    option: (provided: any, state: any) => ({\r\n      cursor: 'pointer',\r\n      padding: '10px 24px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      \"&:hover\": {\r\n        backgroundColor: '#F8FAFC',\r\n        color: '#722ED1'\r\n      }\r\n    }),\r\n    menuList: (provided: any, state: any) => ({\r\n      ...provided,\r\n      padding: '0',\r\n      display: 'flex',\r\n      flexDirection: 'column-reverse',\r\n    }),\r\n    control: (provided: any, state: any) => ({\r\n      ...provided,\r\n      cursor: 'pointer',\r\n      width: '32px',\r\n      height: '32px',\r\n      border: 'none',\r\n      boxShadow: 'none',\r\n      backgroundColor: '#E3E8EF',\r\n      borderRadius: '5px',\r\n      justifyContent: 'center',\r\n      display: 'flex'\r\n    }),\r\n    valueContainer: (provided: any, state: any) => ({\r\n      ...provided,\r\n      position: 'absolute',\r\n      zIndex: '1'\r\n    }),\r\n    dropdownIndicator: (provided: any, state: any) => ({\r\n      zIndex: '2000'\r\n    })\r\n  };\r\n\r\n  const CustomOption: FC<any> = ({data, children, ...props}) => {\r\n    if (data.value === 'rename') {\r\n      return (\r\n        <components.Option {...props}>\r\n          <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <PenSvg/>\r\n            <div style={{color: '#000', marginLeft: '10px', fontWeight: '700'}}>{data.label}</div>\r\n          </div>\r\n        </components.Option>\r\n      )\r\n    } else if (data.value === 'delete') {\r\n      return (\r\n        <components.Option {...props}>\r\n          <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <TrashSvg/>\r\n            <div style={{color: '#F5222D', marginLeft: '10px', fontWeight: '700'}}>{data.label}</div>\r\n          </div>\r\n        </components.Option>\r\n      )\r\n    } else if (data.value === 'clone') {\r\n      return (\r\n        <components.Option {...props}>\r\n          <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <CloneSvg/>\r\n            <div style={{color: '#222D', marginLeft: '10px', fontWeight: '700'}}>{data.label}</div>\r\n          </div>\r\n        </components.Option>\r\n      )\r\n    } else {\r\n      return (\r\n        <components.Option {...props}>\r\n          <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <div style={{marginLeft: '10px', fontWeight: '700'}}>{data.label}</div>\r\n          </div>\r\n        </components.Option>\r\n      )\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Select\r\n      isDisabled={disabled}\r\n      menuPlacement={optionsPosition}\r\n      styles={customDotsStyles}\r\n      placeholder={''}\r\n      isSearchable={false}\r\n      components={{\r\n        DropdownIndicator: () => (\r\n          <>\r\n            {\r\n              (svg === 'horizontal' && <HorizontalDotsSvg/>) ||\r\n              (svg === 'vertical' && <VerticalDotsSvg/>) ||\r\n              (svg && <div>{svg}</div>)\r\n            }\r\n          </>\r\n        ),\r\n        IndicatorSeparator: () => null,\r\n        SingleValue: () => null,\r\n        Option: CustomOption\r\n      }}\r\n      onChange={handleSelectChange}\r\n      options={options}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CustomControlSelect;","import React, {FC, memo, useEffect, useState} from 'react';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {Typography, Button} from \"@mui/material\";\r\nimport CustomControlSelect from '../Selects/CustomControlSelect';\r\nimport {useAppSelector} from '../../../hooks/redux';\r\nimport {translate} from \"../../../localizations\";\r\nimport {RootState} from \"../../../store/store\";\r\n\r\nconst useStyles = makeStyles(({\r\n  searchTitleRight: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  searchDeleteAllButton: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginRight: '40px',\r\n    cursor: 'pointer'\r\n  },\r\n  searchDeleteAllButtonText: {\r\n    color: '#2F3747 !important'\r\n  },\r\n  searchButton: {\r\n    fontSize: '14px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    color: '#22075E !important',\r\n    '&:hover ': {\r\n      textDecoration: 'underline !important',\r\n      backgroundColor: '#e0b8ff !important'\r\n    }\r\n  },\r\n  searchButtonIcon: {\r\n    fill: '#722ED1 !important'\r\n  },\r\n}));\r\n\r\nconst FolderPlusSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n          d=\"M16.7577 6.67277C17.1038 8.86287 17.079 11.0965 16.6843 13.2782C16.5404 14.0741 15.8813 14.6708 15.0822 14.7285L13.6209 14.8341C10.5605 15.0553 7.48852 15.0553 4.42814 14.8341L3.07734 14.7365C2.21323 14.6741 1.50051 14.0289 1.3448 13.1681C0.963241 11.0588 0.897923 8.9036 1.15102 6.77476L1.39414 4.72991C1.51149 3.74285 2.34055 3 3.32483 3H5.36936C6.25472 3 6.97244 3.72493 6.97244 4.61918C6.97244 4.64872 6.99615 4.67266 7.0254 4.67266H14.799C15.7453 4.67266 16.5513 5.36716 16.7005 6.31101L16.7577 6.67277ZM9.69369 7.7311C9.69369 7.35784 9.39408 7.05523 9.02454 7.05523C8.65498 7.05523 8.35538 7.35784 8.35538 7.7311V9.30813H6.79403C6.42447 9.30813 6.12488 9.61074 6.12488 9.984C6.12488 10.3573 6.42447 10.6599 6.79403 10.6599H8.35538V12.2369C8.35538 12.6102 8.65498 12.9128 9.02454 12.9128C9.39408 12.9128 9.69369 12.6102 9.69369 12.2369V10.6599H11.255C11.6246 10.6599 11.9242 10.3573 11.9242 9.984C11.9242 9.61074 11.6246 9.30813 11.255 9.30813H9.69369V7.7311Z\"\r\n          fill=\"#9254DE\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst CrossSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M11.1618 4.83785C11.3896 5.06567 11.3896 5.43503 11.1618 5.66285L5.66187 11.1628C5.43406 11.3906 5.06469 11.3906 4.83688 11.1628C4.60906 10.935 4.60906 10.5656 4.83688 10.3378L10.3368 4.83785C10.5646 4.61004 10.934 4.61004 11.1618 4.83785Z\"\r\n        fill=\"black\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.83688 4.83785C5.06469 4.61004 5.43406 4.61004 5.66187 4.83785L11.1618 10.3378C11.3896 10.5656 11.3896 10.935 11.1618 11.1628C10.934 11.3906 10.5646 11.3906 10.3368 11.1628L4.83688 5.66285C4.60906 5.43503 4.60906 5.06567 4.83688 4.83785Z\"\r\n        fill=\"black\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst SaveCriterias = (props: any) => {\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n  const classes = useStyles();\r\n  return (\r\n    <div>\r\n    {props.currentTemplate ?\r\n      <div>\r\n        <CustomControlSelect\r\n          optionsPosition={\"bottom\"}\r\n          options={[\r\n            {value: 'rename', label: 'Переименовать'},\r\n            {value: 'delete', label: 'Удалить'}\r\n          ]}\r\n          svg={'vertical'}\r\n          handleSelectChange={props.handleSelectChange}\r\n        />\r\n      </div> :\r\n      <div className={classes.searchTitleRight}>\r\n        <div onClick={props.removeAllCriteriasHandler} className={classes.searchDeleteAllButton}>\r\n          <CrossSvg style={{marginRight: '5px'}}/>\r\n          <Typography className={classes.searchDeleteAllButtonText}>\r\n            {translate('searchClear', language)}\r\n          </Typography>\r\n        </div>\r\n        <Button\r\n          className={classes.searchButton}\r\n          startIcon={<FolderPlusSvg className={classes.searchButtonIcon}/>}\r\n          color=\"secondary\"\r\n          variant=\"contained\"\r\n          onClick={props.handleCreateNewTemplateButtonClick}\r\n        >\r\n          {translate('searchSaveTemp', language)}\r\n        </Button>\r\n      </div>\r\n    }\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default SaveCriterias;","import React from 'react';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {useAppSelector} from '../../../hooks/redux';\r\nimport {Typography, Button} from \"@mui/material\";\r\nimport {translate} from \"../../../localizations\";\r\nimport {RootState} from \"../../../store/store\";\r\nimport TextSelect from '../Selects/TextSelect/TextSelect';\r\n\r\nconst useStyles = makeStyles(({\r\n  criteriaTemplateTitle: {\r\n    marginTop: '3px',\r\n    borderLeft: '1px solid #CDD5DF', \r\n    paddingLeft: '16px'\r\n  },\r\n  criteriaTemplateText: {\r\n    fontFamily: '\"Inter\", sans-serif',\r\n    display: 'flex', \r\n    fontSize: '16px', \r\n    lineHeight: '24px', \r\n    color: '#2F3747', \r\n    marginRight: '5px'\r\n  },\r\n  criteriaTemplateTextNumber: {\r\n    fontSize: '16px', \r\n    lineHeight: '24px', \r\n    marginRight: '3px', \r\n    color: '#2F3747'\r\n  }\r\n}));\r\n\r\nconst CriteriaTemplate = (props: any) => {\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.criteriaTemplateTitle}>\r\n    <TextSelect\r\n        name={'templatesSelect'}\r\n        value={props.currentTemplate ? {value: props.currentTemplate, label: props.currentTemplate.title} : null}\r\n        handleValueChange={props.handleValueChange}\r\n        options={props.options}\r\n        iconPosition={'right'}\r\n        customControl={\r\n          <div className={classes.criteriaTemplateText}>\r\n            {props.currentTemplate ?\r\n              <>\r\n                <Typography style={{color: '#722ED1'}}>{props.currentTemplate.title}</Typography>\r\n              </> :\r\n              <>\r\n                <Typography className={classes.criteriaTemplateTextNumber}>{translate('searchTemp', language)}</Typography>\r\n                <span>({props.allTemplates.length})</span>\r\n              </>\r\n            }\r\n          </div>\r\n        }\r\n        ifArrowColor={props.currentTemplate ? '#722ED1' : '#000'}\r\n        menuPosition={'left'}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CriteriaTemplate;","import React, {FC, memo, useEffect, useState} from 'react';\r\nimport BlockBox from \"../BlockBox\";\r\nimport {Button, Typography} from \"@mui/material\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {callsSlice, getBaseCallsData} from \"../../../store/calls/calls.slice\";\r\nimport {\r\n  getAllSearchCriterias,\r\n  getDefaultCriterias,\r\n  getSearchHash,\r\n  searchSlice\r\n} from \"../../../store/search/search.slice\";\r\nimport {translate} from \"../../../localizations\";\r\nimport {RootState} from \"../../../store/store\";\r\nimport {getAllTemplates, templateSlice} from \"../../../store/search/template.slice\";\r\nimport {CriteriasType} from \"../../../store/search/search.types\";\r\nimport CreateNameTemplateModalWindow from \"./CreateNameTemplateModalWindow\";\r\nimport DeleteTemplateModalWindow from \"./DeleteTemplateModalWindow\";\r\nimport TextSelect from \"../Selects/TextSelect/TextSelect\";\r\nimport {optionsCreator} from \"../../../utils/optionsCreator\";\r\nimport CriteriasList from '../Criterias/CriteriasList';\r\nimport SaveCriterias from '../Criterias/SaveCriterias';\r\nimport CriteriaTemplate from '../Criterias/CriteriaTemplate';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport * as queryString from \"querystring\";\r\n\r\nconst useStyles = makeStyles(({\r\n  searchTitle: {\r\n    height: '40px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '15px'\r\n  },\r\n  searchTitleLeft: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center'\r\n  },\r\n  searchTitleLeftText: {\r\n    marginRight: '16px !important',\r\n    color: '#2F3747 !important',\r\n    fontWeight: '500 !important',\r\n  },\r\n  searchTitleLeftStick: {\r\n    marginLeft: '16px !important',\r\n    color: '#CDD5DF !important',\r\n    fontSize: '17px !important'\r\n  }, \r\n  searchTitleRight: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  searchDeleteAllButton: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginRight: '40px',\r\n    cursor: 'pointer'\r\n  },\r\n  searchDeleteAllButtonText: {\r\n    color: '#2F3747 !important'\r\n  },\r\n  searchButton: {\r\n    fontSize: '14px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    color: '#22075E !important',\r\n    '&:hover ': {\r\n      textDecoration: 'underline !important',\r\n      backgroundColor: '#e0b8ff !important'\r\n    }\r\n  },\r\n  searchButtonIcon: {\r\n    fill: '#722ED1 !important'\r\n  },\r\n\r\n  searchItems: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    flexWrap: 'wrap',\r\n    // display: 'grid'\r\n  },\r\n  searchItem: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    margin: '0 22px 16px 0',\r\n    width: '100%',\r\n  },\r\n  searchItemBlock_1: {\r\n    gridRowStart: 1,\r\n    gridRowEnd: 2,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_2: {\r\n    gridRowStart: 2,\r\n    gridRowEnd: 3,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_3: {\r\n    gridRowStart: 3,\r\n    gridRowEnd: 4,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_4: {\r\n    gridRowStart: 4,\r\n    gridRowEnd: 5,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_noWide: {\r\n    width: '30%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchItemBlock_Wide: {\r\n    width: '70%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchText: {\r\n    marginRight: '8px !important',\r\n    color: '#2F3747 !important',\r\n    // whiteSpace: 'nowrap',\r\n    width: '120px !important',\r\n  },\r\n  tagsBox: {\r\n    minWidth: '70px',\r\n    height: '32px',\r\n    backgroundColor: '#F8FAFC',\r\n    border: 'none !important',\r\n    outline: 'none'\r\n  },\r\n  searchSearchButton: {\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    borderRadius: '5px !important'\r\n  },\r\n  selectArrow: {\r\n    marginRight: '10px'\r\n  },\r\n  selectArrowOnArrow: {\r\n    marginBottom: '5px'\r\n  },\r\n}));\r\n\r\n\r\ntype FilterPropsType = {\r\n  pageName: string\r\n}\r\n\r\nconst Search: FC<FilterPropsType> = memo(({pageName}) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n  const defaultCriterias = useAppSelector(state => state.search.defaultCriterias);\r\n  const activeCriterias = useAppSelector(state => state.search.activeCriterias);\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n  const allCriterias = useAppSelector(state => state.search.allCriterias);\r\n  const allTemplates = useAppSelector(state => state.template.allTemplates);\r\n  const currentUser = useAppSelector(state => state.users.currentUser);\r\n\r\n  const searchParams = useAppSelector(state => state.search.searchParams);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const searchRequest = async () => {\r\n    setLoading(true);\r\n    dispatch(callsSlice.actions.zeroingSkip(null)); \r\n    dispatch(callsSlice.actions.setEmptyState({leaveBundles: 0}));\r\n    const bastCallDataResponse = await dispatch(getBaseCallsData({}));\r\n    // @ts-ignore\r\n    const bastCallData = bastCallDataResponse.payload;\r\n\r\n    history.push(`?searchHash=${bastCallData.search_filter_hash}`); \r\n    setLoading(false);\r\n  };\r\n\r\n  async function convertUrlHash() {\r\n    if (searchParams) {\r\n      let newSearchParams = searchParams;\r\n      if (newSearchParams[0] === \"?\") {\r\n        newSearchParams = newSearchParams.slice(1);\r\n      }\r\n\r\n      const searchParamsObj = queryString.parse(newSearchParams);\r\n      const hash = searchParamsObj.searchHash;\r\n      if (hash) {\r\n        // @ts-ignore\r\n        const searchHashRequestData = await dispatch(getSearchHash(hash));\r\n        // @ts-ignore\r\n        const searchHashRequestError = searchHashRequestData.error;\r\n        // @ts-ignore\r\n        const searchHashRequestPayload = searchHashRequestData.payload;\r\n        if (searchHashRequestError) {\r\n          console.log(searchHashRequestError);\r\n        }\r\n        // @ts-ignore\r\n        if (searchHashRequestPayload) {\r\n          console.log(searchHashRequestPayload);\r\n        }\r\n        debugger\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    convertUrlHash().then()\r\n  }, [])\r\n\r\n  function switchSearchItemCLassName(className: string) {\r\n    const classSwitcher: { [id: string]: any } = {};\r\n    classSwitcher['searchItemBlock_1'] = classes.searchItemBlock_1;\r\n    classSwitcher['searchItemBlock_2'] = classes.searchItemBlock_2;\r\n    classSwitcher['searchItemBlock_3'] = classes.searchItemBlock_3;\r\n    classSwitcher['searchItemBlock_4'] = classes.searchItemBlock_4;\r\n    classSwitcher['searchItemBlock_Wide'] = classes.searchItemBlock_Wide;\r\n    classSwitcher['searchItemBlock_noWide'] = classes.searchItemBlock_noWide;\r\n    return classSwitcher[className];\r\n  }\r\n \r\n  // template select\r\n  const convertedTemplate = optionsCreator(allTemplates);\r\n\r\n\r\n  const removeAllCriteriasHandler = () => {\r\n    dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n    dispatch(searchSlice.actions.setClearDefaultCriteriasValues(null));\r\n    dispatch(searchSlice.actions.removeAllActiveCriterias(null));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuth && activeCriterias.length < 1 && defaultCriterias.length < 1) {\r\n      dispatch(getAllSearchCriterias());\r\n      dispatch(getDefaultCriterias());\r\n      dispatch(getAllTemplates());\r\n    }\r\n  }, [isAuth]);\r\n\r\n  const handleCreateNewTemplateButtonClick = () => {\r\n    setIsOpenRenameMethod('post');\r\n    setIsOpenRenameWindow(true);\r\n  };\r\n\r\n  const currentTemplate = useAppSelector(state => state.template.currentTemplate);\r\n\r\n  // modal windows states.\r\n  const [isOpenRenameWindow, setIsOpenRenameWindow] = useState<boolean>(false);\r\n  const [isOpenRenameMethod, setIsOpenRenameMethod] = useState<'put' | 'post' | null>(null);\r\n\r\n  const [isOpenDeleteWindow, setIsOpenDeleteWindow] = useState<boolean>(false);\r\n\r\n  const [op, setOp] = useState<any>([]);\r\n  useEffect(() => {\r\n    setOp(handleMoreSelectClick())\r\n  }, [allCriterias, activeCriterias, defaultCriterias])\r\n\r\n  const handleMoreSelectClick = () => {\r\n    // let state = allCriterias;\r\n    // if (state) {\r\n    //   let local = []\r\n    //   const defAcCriterias = [...activeCriterias, ...defaultCriterias]\r\n    //   for (let i = 0; i < state.length; i++) {\r\n    //     if (!defAcCriterias.find((item) => {\r\n    //       if (state) {\r\n    //         return item.key === state[i].key\r\n    //       }\r\n    //     })) {\r\n    //       local.push({value: state[i], label: state[i].title})\r\n    //     }\r\n    //   }\r\n    //   return local\r\n    // }\r\n\r\n    if (allCriterias) {\r\n      interface keyable {\r\n        [key: string]: any\r\n      }\r\n\r\n      let local: Array<keyable> = [];\r\n\r\n      allCriterias.forEach((item, i) => {\r\n        local.push({value: allCriterias[i], label: allCriterias[i].title});\r\n      })\r\n\r\n      for (let i = 0; i < local.length; i++) {\r\n        if (activeCriterias.find((item) => item.key === local[i].value.key)) {\r\n          local[i].icon = 'minus';\r\n        } else {\r\n          local[i].icon = 'plus';\r\n        }\r\n      }\r\n      return local\r\n    }\r\n  }\r\n\r\n  function onTemplateSelectValueChange(event: any) {\r\n    dispatch(templateSlice.actions.setCurrentTemplate(event.value));\r\n    dispatch(searchSlice.actions.setClearDefaultCriteriasValues(null))\r\n    if (allCriterias) {\r\n      let fullCriteriaLocal: CriteriasType[] = [];\r\n      for (let i = 0; i < event.value.items.length; i++) {\r\n        const obj = allCriterias.find((item) => {\r\n          return item.key === event.value.items[i].key;\r\n        });\r\n        // @ts-ignore\r\n        fullCriteriaLocal.push({...obj, values: event.value.items[i].values})\r\n      }\r\n\r\n      let activeCriteriasLocal = [];\r\n      for (let i = 0; i < fullCriteriaLocal.length; i++) {\r\n        const obj = defaultCriterias.find((item) => {\r\n          return item.key === fullCriteriaLocal[i].key\r\n        });\r\n        if (obj) {\r\n          dispatch(searchSlice.actions.setDefaultCriteriaValues({\r\n            key: fullCriteriaLocal[i].key,\r\n            values: fullCriteriaLocal[i].values\r\n          }))\r\n        } else {\r\n          activeCriteriasLocal.push(fullCriteriaLocal[i]);\r\n        }\r\n      }\r\n      dispatch(searchSlice.actions.setActiveCriterias(activeCriteriasLocal))\r\n    }\r\n  }\r\n\r\n  function onAllCriteriasSelectValueChange(event: any) {\r\n    let index = -1;\r\n    for (let i in activeCriterias) {\r\n      if (event.value.key === activeCriterias[i].key) {\r\n        index = parseInt(i, 10);\r\n        dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n        dispatch(searchSlice.actions.removeActiveCriteria(activeCriterias[index]));\r\n        break\r\n      }\r\n    }\r\n    if (index < 0) {\r\n      dispatch(searchSlice.actions.setActiveCriterias([...activeCriterias, {...event.value, values: []}]));\r\n      dispatch(templateSlice.actions.setCurrentTemplate(null));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{margin: '24px 0'}}>\r\n      <BlockBox padding=\"24px 24px 10px 24px\" height=\"100%\" minHeight=\"200px\">\r\n        <div className={classes.searchTitle}>\r\n          <div className={classes.searchTitleLeft}>\r\n            <Typography className={classes.searchTitleLeftText} variant=\"h5\">\r\n              {translate('searchTitle', language)}\r\n            </Typography>\r\n            <CriteriaTemplate\r\n              handleValueChange={onTemplateSelectValueChange}\r\n              options={convertedTemplate}\r\n              currentTemplate={currentTemplate}\r\n              allTemplates={allTemplates}\r\n            />\r\n            <div style={{marginTop: '3px', borderLeft: '1px solid #CDD5DF', paddingLeft: '16px'}}>\r\n              {/*<TextSelect*/}\r\n              {/*  name={'templatesSelect'}*/}\r\n              {/*  value={currentTemplate ? {value: currentTemplate, label: currentTemplate.title} : null}*/}\r\n              {/*  handleValueChange={onTemplateSelectValueChange}*/}\r\n              {/*  options={convertedTemplate}*/}\r\n              {/*  iconPosition={'right'}*/}\r\n              {/*  customControl={*/}\r\n              {/*    <div style={{*/}\r\n              {/*      display: 'flex',*/}\r\n              {/*      fontSize: '16px',*/}\r\n              {/*      lineHeight: '24px',*/}\r\n              {/*      color: '#2F3747',*/}\r\n              {/*      marginRight: '5px'*/}\r\n              {/*    }}>*/}\r\n              {/*      {currentTemplate ?*/}\r\n              {/*        <>*/}\r\n              {/*          <Typography style={{color: '#722ED1'}}>{currentTemplate.title}</Typography>*/}\r\n              {/*        </> :*/}\r\n              {/*        <>*/}\r\n              {/*          <Typography style={{*/}\r\n              {/*            fontSize: '16px',*/}\r\n              {/*            lineHeight: '24px',*/}\r\n              {/*            marginRight: '3px',*/}\r\n              {/*            color: '#2F3747'*/}\r\n              {/*          }}>{translate('searchTemp', language)}</Typography>*/}\r\n              {/*          <span style={{fontFamily: '\"Inter\", sans-serif'}}>*/}\r\n              {/*            ({allTemplates.length})*/}\r\n              {/*          </span>*/}\r\n              {/*        </>*/}\r\n              {/*      }*/}\r\n              {/*    </div>*/}\r\n              {/*  }*/}\r\n              {/*  ifArrowColor={currentTemplate ? '#722ED1' : '#000'}*/}\r\n              {/*  menuPosition={'left'}*/}\r\n              {/*/>*/}\r\n            </div>\r\n          </div>\r\n          {(activeCriterias.length > 0 || defaultCriterias.some(item => item.values.length > 0)) &&\r\n          <SaveCriterias\r\n            currentTemplate={currentTemplate}\r\n            handleSelectChange={(event: any) => {\r\n              if (event.value === 'rename') {\r\n                setIsOpenRenameMethod('put');\r\n                setIsOpenRenameWindow(true);\r\n              } else if (event.value === 'delete') {\r\n                setIsOpenDeleteWindow(true);\r\n              }\r\n            }}\r\n            removeAllCriteriasHandler={removeAllCriteriasHandler}\r\n            handleCreateNewTemplateButtonClick={handleCreateNewTemplateButtonClick}\r\n          />\r\n          }\r\n        </div>\r\n        <div style={{display: 'flex', alignItems: 'flex-start', minHeight: '50px'}}> \r\n          <CriteriasList\r\n            defaultCriterias={defaultCriterias}\r\n            allCriterias={allCriterias}\r\n            activeCriterias={activeCriterias}\r\n          />\r\n            <div style={{display: 'flex', alignItems: 'center', minHeight: '54px'}}>\r\n              <LoadingButton\r\n                className={classes.searchSearchButton}\r\n                startIcon={<SearchIcon/>}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                loading={loading}\r\n                loadingPosition=\"start\"\r\n                onClick={searchRequest}\r\n              >\r\n                {translate('searchButton', language)}\r\n              </LoadingButton>\r\n              <div style={{margin: '0 5px 0 20px', whiteSpace: 'nowrap'}}>\r\n                <TextSelect\r\n                  name={'moreSelect'}\r\n                  value={null}\r\n                  handleValueChange={onAllCriteriasSelectValueChange}\r\n                  options={op}\r\n                  iconPosition={'left'}\r\n                  customControl={\r\n                    <div style={{display: 'flex', alignItems: 'center'}}>\r\n                      <Typography style={{color: '#722ED1', fontWeight: '700', marginLeft: '5px'}}>{translate('searchMore', language)}</Typography>\r\n                    </div>\r\n                  }\r\n                  ifArrowColor={'#722ED1'}\r\n                  notClose={true}\r\n                  menuPosition={'right'}\r\n                  height={\"400px\"}\r\n                />\r\n              </div>\r\n            </div> \r\n          {/*<div className={classes.searchItems}>*/}\r\n          {/*  {defaultCriterias && allCriterias ? defaultCriterias.map(criteria => {*/}\r\n          {/*    const criteriaKey = criteria.key.slice(4);*/}\r\n          {/*    const compResult = allCriterias.filter(v => v.key === criteria.key);*/}\r\n          {/*    return (*/}\r\n          {/*      <div className={classes.searchItem}>*/}\r\n          {/*        <Typography className={classes.searchText}>{compResult[0].title}</Typography>*/}\r\n          {/*        <SearchSelect*/}\r\n          {/*          criteriaFull={compResult[0]}*/}\r\n          {/*          criteriaCurrent={criteria}*/}\r\n          {/*          isDefaultCriteria={true}*/}\r\n          {/*        />*/}\r\n          {/*      </div>*/}\r\n          {/*    )*/}\r\n          {/*  }) : null}*/}\r\n          {/*  {activeCriterias && allCriterias ? activeCriterias.map(criteria => {*/}\r\n          {/*    const compResult = allCriterias.filter(v => v.key === criteria.key);*/}\r\n          {/*    // @ts-ignore*/}\r\n          {/*    const criteriaWide = criteria.wide ? 'searchItemBlock_Wide' : 'searchItemBlock_noWide';*/}\r\n          {/*    // @ts-ignore*/}\r\n          {/*    const criteriaBlock = `searchItemBlock_${criteria.block}`;*/}\r\n          {/*    return (*/}\r\n          {/*      // <div className={switchSearchItemCLassName(criteriaBlock)}>*/}\r\n          {/*      <div className={switchSearchItemCLassName(criteriaWide)}>*/}\r\n          {/*        <div className={classes.searchItem}>*/}\r\n          {/*          <Typography className={classes.searchText}>{criteria.title}</Typography>*/}\r\n          {/*          <SearchSelect*/}\r\n          {/*            criteriaFull={compResult[0]}*/}\r\n          {/*            criteriaCurrent={criteria}*/}\r\n          {/*            isDefaultCriteria={false}*/}\r\n          {/*          />*/}\r\n          {/*        </div>*/}\r\n          {/*        /!* </div> *!/*/}\r\n          {/*      </div>*/}\r\n          {/*    )*/}\r\n          {/*  }) : null}*/}\r\n          {/*</div>*/}\r\n        {/*  <div style={{display: 'flex', alignItems: 'center', minHeight: '54px'}}>*/}\r\n        {/*    <LoadingButton*/}\r\n        {/*      className={classes.searchSearchButton}*/}\r\n        {/*      startIcon={<SearchIcon/>}*/}\r\n        {/*      color=\"primary\"*/}\r\n        {/*      variant=\"contained\"*/}\r\n        {/*      loading={loading}*/}\r\n        {/*      loadingPosition=\"start\"*/}\r\n        {/*      onClick={searchRequest}*/}\r\n        {/*    >*/}\r\n        {/*      {translate('searchButton', language)}*/}\r\n        {/*    </LoadingButton>*/}\r\n        {/*    <div style={{margin: '0 5px 0 20px', whiteSpace: 'nowrap'}}>*/}\r\n        {/*      <TextSelect*/}\r\n        {/*        name={'moreSelect'}*/}\r\n        {/*        value={null}*/}\r\n        {/*        handleValueChange={onAllCriteriasSelectValueChange}*/}\r\n        {/*        options={op}*/}\r\n        {/*        iconPosition={'left'}*/}\r\n        {/*        customControl={*/}\r\n        {/*          <div style={{display: 'flex', alignItems: 'center'}}>*/}\r\n        {/*            <Typography style={{*/}\r\n        {/*              color: '#722ED1',*/}\r\n        {/*              fontWeight: '700',*/}\r\n        {/*              marginLeft: '5px'*/}\r\n        {/*            }}>{translate('searchMore', language)}</Typography>*/}\r\n        {/*            /!* {activeCriterias.length > 0 &&*/}\r\n        {/*                <span style={{marginLeft: '3px', color: '#722ED1', fontWeight: '700'}}>*/}\r\n        {/*                  ({activeCriterias.length})*/}\r\n        {/*                </span>*/}\r\n        {/*                } *!/*/}\r\n        {/*          </div>*/}\r\n        {/*        }*/}\r\n        {/*        ifArrowColor={'#722ED1'}*/}\r\n        {/*        notClose={true}*/}\r\n        {/*        menuPosition={'right'}*/}\r\n        {/*        height={\"400px\"}*/}\r\n        {/*      />*/}\r\n        {/*    </div>*/}\r\n        {/*  </div>*/}\r\n        </div>\r\n      </BlockBox>\r\n\r\n      {/*Modal windows*/}\r\n      <CreateNameTemplateModalWindow\r\n        currentTemplate={currentTemplate}\r\n        isOpen={isOpenRenameWindow}\r\n        handleClose={() => {\r\n          setIsOpenRenameWindow(false)\r\n        }}\r\n        method={isOpenRenameMethod}\r\n      />\r\n      <DeleteTemplateModalWindow\r\n        currentTemplate={currentTemplate}\r\n        isOpen={isOpenDeleteWindow}\r\n        handleClose={() => {\r\n          setIsOpenDeleteWindow(false)\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Search;\r\n","import React, { FC, useEffect, useState } from 'react';\r\n\r\nimport ToggleButton from \"@mui/material/ToggleButton\";\r\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { translate } from \"../../localizations\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { RootState } from \"../../store/store\";\r\nimport { reportsSlice } from './../../store/reports/reports.slice';\r\nimport { unitsOfTime } from './СontrolBlock';\r\n\r\nconst useStyles = makeStyles(({\r\n  cbDateItems: {\r\n    display: 'flex',\r\n    margin: '5px 10px 0 0'\r\n  },\r\n  controlBlockDateItem: {\r\n    width: '50%',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    margin: '0 0 0 10px',\r\n  },\r\n  calendar: {\r\n    '& .MuiDialog-container': {\r\n      backgroundColor: 'none !important',\r\n      position: 'absolute',\r\n      top: '118px !important',\r\n      left: '148px',\r\n      height: 'auto !important',\r\n      '& .MuiPaper-root': {\r\n        margin: '0'\r\n      }\r\n    }\r\n  },\r\n  calendarInput: {\r\n    '& .MuiInputBase-input': {\r\n      cursor: 'pointer !important',\r\n      width: '100px !important',\r\n      marginLeft: '10px'\r\n    },\r\n    '& .MuiInputBase-input.Mui-disabled': {\r\n      WebkitTextFillColor: '#738094'\r\n    }\r\n  },\r\n  controlBlockButtonBox: {\r\n    boxShadow: 'none !important',\r\n    padding: '0 5px',\r\n    marginLeft: '45px'\r\n  },\r\n  controlBlockButton: {\r\n    border: 'none !important',\r\n    transition: '0.4s !important',\r\n    outline: 'none !important',\r\n    height: '40px',\r\n    fontSize: '14px !important',\r\n    padding: '8px 16px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    color: '#738094 !important',\r\n    backgroundColor: '#ffffff !important',\r\n    whiteSpace: 'nowrap',\r\n    '&.Mui-selected': {\r\n      backgroundColor: '#D6D9DF !important',\r\n      color: '#000 !important'\r\n    }\r\n  },\r\n}));\r\n\r\ntype ButtonsPropsType = {\r\n  date: Date[] | null[],\r\n  items: {\r\n    value: string,\r\n    onClick: () => void,\r\n    unitOfTime: Date[] | null[]\r\n  }[],\r\n  period?: string | null\r\n};\r\n\r\nconst periods: { [key: string]: string } = {\r\n  today: 'today',\r\n  yesterday: 'yesterday',\r\n  week: 'this_week',\r\n  month: 'this_mont',\r\n  year: 'this_year',\r\n  allTime: 'all_time'\r\n}\r\n\r\nconst getPeriod = (period: string) => {\r\n  return periods[period]\r\n}       \r\n\r\nexport const getNamePeriod = (period: string) => {\r\n  return Object.keys(periods).find((key) => periods[key] === period)\r\n}\r\n\r\nconst ButtonGroup: FC<ButtonsPropsType> = ({date, items, period}) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const callReport = useAppSelector(state => state.reports.callReport);\r\n\r\n  const [alignment, setAlignment] = useState<string | null>(null);\r\n  const handleChange = (\r\n    event: React.MouseEvent<HTMLElement>,\r\n    newAlignment: string,\r\n  ) => {\r\n    setAlignment(newAlignment);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (period) {\r\n      //@ts-ignore\r\n      setAlignment(getNamePeriod(period));\r\n      //@ts-ignore\r\n      dispatch(reportsSlice.actions.setDate(unitsOfTime[getNamePeriod(period)]));\r\n    }\r\n  }, [period, callReport])\r\n\r\n\r\n  useEffect(() => {\r\n    for (let i = 0; i < items.length; i++) {\r\n      // @ts-ignore\r\n      if (items[i].unitOfTime[0] && date[0] && (items[i].unitOfTime[0].toString() === date[0].toString())) {\r\n        setAlignment(items[i].value);\r\n        dispatch(reportsSlice.actions.setPeriod(getPeriod(items[i].value)))\r\n        break\r\n      } else if (items[i].unitOfTime[0] === null && items[i].unitOfTime[0] === date[0]) {\r\n        setAlignment(items[i].value);\r\n        dispatch(reportsSlice.actions.setPeriod(getPeriod(items[i].value)));\r\n      } else {\r\n        setAlignment(null);\r\n        dispatch(reportsSlice.actions.setPeriod(null));\r\n      }\r\n    }\r\n  }, [date]);\r\n\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n\r\n  return (\r\n    <div>\r\n      <ToggleButtonGroup\r\n        className={classes.controlBlockButtonBox}\r\n        value={alignment}\r\n        exclusive\r\n        onChange={handleChange}\r\n      >\r\n        {items.map((item) => (\r\n          <ToggleButton\r\n            key={item.value}\r\n            disabled={item.value === alignment}\r\n            className={classes.controlBlockButton}\r\n            value={item.value}\r\n            onClick={item.onClick}\r\n          >\r\n            {translate(item.value, language)}\r\n          </ToggleButton>\r\n        ))}\r\n      </ToggleButtonGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ButtonGroup;","import React, {useState} from 'react';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {DateRangePicker,CustomProvider} from 'rsuite';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {RootState} from \"../../store/store\";\r\nimport {translate} from '../../localizations';\r\nimport {startOfDay, endOfDay, addDays, subDays, addYears, subMonths} from 'date-fns';\r\n\r\nconst CalendarSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 13 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{position: 'absolute', right: '8px',  top: 'calc(50% - 8px)'}}\r\n    >\r\n      <path \r\n        d=\"M4.64286 0.9375V1.875H8.35714V0.9375C8.35714 0.419824 8.7721 0 9.28571 0C9.79933 0 10.2143 0.419824 10.2143 0.9375V1.875H11.6071C12.3761 1.875 13 2.50459 13 3.28125V4.6875H0V3.28125C0 2.50459 0.623594 1.875 1.39286 1.875H2.78571V0.9375C2.78571 0.419824 3.20067 0 3.71429 0C4.2279 0 4.64286 0.419824 4.64286 0.9375ZM0 5.625H13V13.5938C13 14.3701 12.3761 15 11.6071 15H1.39286C0.623594 15 0 14.3701 0 13.5938V5.625ZM1.85714 8.90625C1.85714 9.16406 2.06491 9.375 2.32143 9.375H3.25C3.50536 9.375 3.71429 9.16406 3.71429 8.90625V7.96875C3.71429 7.71094 3.50536 7.5 3.25 7.5H2.32143C2.06491 7.5 1.85714 7.71094 1.85714 7.96875V8.90625ZM5.57143 8.90625C5.57143 9.16406 5.78036 9.375 6.03571 9.375H6.96429C7.21964 9.375 7.42857 9.16406 7.42857 8.90625V7.96875C7.42857 7.71094 7.21964 7.5 6.96429 7.5H6.03571C5.78036 7.5 5.57143 7.71094 5.57143 7.96875V8.90625ZM9.75 7.5C9.49464 7.5 9.28571 7.71094 9.28571 7.96875V8.90625C9.28571 9.16406 9.49464 9.375 9.75 9.375H10.6786C10.9339 9.375 11.1429 9.16406 11.1429 8.90625V7.96875C11.1429 7.71094 10.9339 7.5 10.6786 7.5H9.75ZM1.85714 12.6562C1.85714 12.9141 2.06491 13.125 2.32143 13.125H3.25C3.50536 13.125 3.71429 12.9141 3.71429 12.6562V11.7188C3.71429 11.4609 3.50536 11.25 3.25 11.25H2.32143C2.06491 11.25 1.85714 11.4609 1.85714 11.7188V12.6562ZM6.03571 11.25C5.78036 11.25 5.57143 11.4609 5.57143 11.7188V12.6562C5.57143 12.9141 5.78036 13.125 6.03571 13.125H6.96429C7.21964 13.125 7.42857 12.9141 7.42857 12.6562V11.7188C7.42857 11.4609 7.21964 11.25 6.96429 11.25H6.03571ZM9.28571 12.6562C9.28571 12.9141 9.49464 13.125 9.75 13.125H10.6786C10.9339 13.125 11.1429 12.9141 11.1429 12.6562V11.7188C11.1429 11.4609 10.9339 11.25 10.6786 11.25H9.75C9.49464 11.25 9.28571 11.4609 9.28571 11.7188V12.6562Z\" fill=\"#B37FEB\"/>\r\n    </svg>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles(({\r\n  dateRangePickerInputs: {\r\n    position: 'relative',\r\n    border: 'none !important',\r\n    outlined: 'none !important',\r\n    minWidth: '222px',\r\n    height: '40px',\r\n    '& .rs-picker-toggle.rs-btn': {\r\n      height: '100%',\r\n      paddingTop: '8px',\r\n      '&:hover:not(.rs-btn-disabled), &.rs-picker-toggle-active': {\r\n        borderColor: '#722ED1'\r\n      },\r\n      '&.rs-picker-toggle-active': {\r\n        boxShadow: '0 0 0 3px rgba(114,46,209,0.25)'\r\n      }\r\n    },\r\n    '& .rs-picker-toggle-value': {\r\n      color: '#575757 !important',\r\n      paddingTop: '1px'\r\n    },\r\n    '& .rs-picker-toggle-clean.rs-btn-close': {\r\n      top: '9px !important',\r\n    }\r\n  },\r\n  dateRangePanel: {\r\n    '& .rs-picker-daterange-panel': {\r\n      display: 'flex',\r\n      '& .rs-picker-daterange-content': {\r\n        backgroundColor: '#fff'\r\n      },\r\n      '& .rs-calendar-header-title': {\r\n        fontSize: '14px',\r\n        lineHeight: '22px',\r\n      },\r\n      '& .rs-picker-toolbar': {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        borderLeft: '1px solid #e5e5ea',\r\n        borderTop: 'none',\r\n        '&::before, &::after': {\r\n          content: 'none',\r\n        }\r\n      },\r\n      '& .rs-picker-toolbar-ranges': {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        '& .rs-btn': {\r\n          textAlign: 'left',\r\n          paddingLeft: '0',\r\n          color: '#575757 !important'\r\n        }\r\n      },\r\n      '& .rs-picker-daterange-header': {\r\n        display: 'none',\r\n      },\r\n      '& .rs-btn-icon.rs-btn-xs>.rs-icon': {\r\n        fontSize: '20px',\r\n      },\r\n      '& .rs-calendar-table-cell-selected .rs-calendar-table-cell-content': {\r\n        backgroundColor: '#722ED1 !important'\r\n      },\r\n      '& .rs-btn-primary, & .rs-btn-primary:focus, & .rs-btn-primary:hover': {\r\n        backgroundColor: '#722ED1 !important'\r\n      },\r\n      '& .rs-calendar-table-cell:hover .rs-calendar-table-cell-content': {\r\n        color: '#722ED1 !important',\r\n        backgroundColor: 'rgba(114, 46, 209, 0.15)'\r\n      },\r\n      '& .rs-calendar-table-cell-selected:hover .rs-calendar-table-cell-content': {\r\n        color: '#fff !important'\r\n      },\r\n      '& .rs-calendar-table-cell-in-range:before': {\r\n        backgroundColor: 'rgba(114, 46, 209, 0.15)'\r\n      }\r\n    },\r\n    '.rs-calendar-table-cell-is-today .rs-calendar-table-cell-content': {\r\n      boxShadow: 'inset 0 0 0 1px #722ED1 !important'\r\n    },\r\n  }\r\n}))\r\n\r\n\r\nconst DateRangePickerWrapper = (props: any) => {\r\n  const classes = useStyles();\r\n  const {language} = useSelector((state: RootState) => state.lang);\r\n\r\n  return (    \r\n    <DateRangePicker\r\n      id={props.id}\r\n      disabled={props.disabled}\r\n      menuClassName={classes.dateRangePanel}\r\n      ranges={[\r\n        {\r\n          label: translate('today', language),\r\n          value: [startOfDay(new Date()), endOfDay(new Date())],\r\n          closeOverlay: true\r\n        },\r\n        {\r\n          label: translate('lastWeek', language),\r\n          value: [startOfDay(subDays(new Date(), 6)), endOfDay(new Date())],\r\n          closeOverlay: true\r\n        },\r\n        {\r\n          label: translate('lastMonth', language),\r\n          value: [startOfDay(subMonths(new Date(), 1)), endOfDay(new Date())],\r\n          closeOverlay: true\r\n        },\r\n        {\r\n          label: translate('lastYear', language),\r\n          value: [startOfDay(addYears(new Date(), -1)), endOfDay(new Date())],\r\n          closeOverlay: true\r\n        },\r\n      ]}\r\n      caretAs={CalendarSvg}\r\n      isoWeek\r\n      appearance=\"default\"\r\n      placeholder={translate('placeholderCalendar', language)}\r\n      format={'dd.MM.yyyy'}\r\n      className={classes.dateRangePickerInputs}\r\n      value={props.value}\r\n      onChange={props.onChange}\r\n      onClean={props.onClean}\r\n    />\r\n  )\r\n}\r\n\r\nexport default DateRangePickerWrapper;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ButtonGroup from \"./ButtonGroup\";\r\nimport DateRangePickerWrapper from './DateRangePickerWrapper';\r\nimport Snackbar from \"./Snackbar\";\r\n\r\nimport { RootState } from \"../../store/store\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { searchSlice } from \"../../store/search/search.slice\";\r\nimport { reportsSlice } from './../../store/reports/reports.slice';\r\n\r\n// Svg\r\nconst DownloadSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"12\" height=\"14\" viewBox=\"0 0 12 14\" xmlns=\"http://www.w3.org/2000/svg\"\r\n         fill={props.fill ? props.fill : \"#738094\"}>\r\n      <path\r\n        d=\"M0.75 10.1875C1.06066 10.1875 1.3125 10.4394 1.3125 10.75V12.25C1.3125 12.3536 1.39645 12.4375 1.5 12.4375H10.5C10.6036 12.4375 10.6875 12.3536 10.6875 12.25V10.75C10.6875 10.4394 10.9394 10.1875 11.25 10.1875C11.5606 10.1875 11.8125 10.4394 11.8125 10.75V12.25C11.8125 12.9749 11.2249 13.5625 10.5 13.5625H1.5C0.775125 13.5625 0.1875 12.9749 0.1875 12.25V10.75C0.1875 10.4394 0.439342 10.1875 0.75 10.1875Z\"/>\r\n      <path\r\n        d=\"M5.05298 0.8125C4.66726 0.8125 4.34541 1.10734 4.31172 1.49166C4.19649 2.80619 4.17617 4.12719 4.25084 5.44438C4.0656 5.45462 3.88043 5.46648 3.69536 5.47997L2.57822 5.56142C2.1475 5.59277 1.90672 6.07308 2.13926 6.43698C2.93579 7.68355 3.96213 8.76723 5.16361 9.63033L5.61113 9.95185C5.84326 10.1186 6.15593 10.1186 6.38806 9.95185L6.83558 9.63033C8.03708 8.76723 9.06338 7.68355 9.85996 6.43698C10.0925 6.07308 9.85171 5.59277 9.42098 5.56142L8.30386 5.47997C8.11876 5.46648 7.93358 5.45462 7.74833 5.44438C7.82303 4.12719 7.80271 2.80619 7.68751 1.49165C7.65376 1.10734 7.33193 0.8125 6.94621 0.8125H5.05298Z\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n// Styles\r\nconst useStyles = makeStyles(({\r\n  controlBlockWrapper: {\r\n    marginTop: '24px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    position: 'relative'\r\n  },\r\n  controlBlockDate: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    maxWidth: '665px',\r\n    width: '100%',\r\n  },\r\n  cbDateItems: {\r\n    display: 'flex',\r\n  },\r\n  controlBlockDateItem: {\r\n    display: 'flex',\r\n    marginRight: '15px',\r\n    alignItems: 'center',\r\n  },\r\n  controlBlockDownload: {\r\n    display: 'flex'\r\n  },\r\n  controlBlockButtonBox: {\r\n    boxShadow: 'none !important',\r\n    padding: '0 5px'\r\n  },\r\n  controlBlockButton: {\r\n    border: 'none !important',\r\n    transition: '0.4s !important',\r\n    outline: 'none !important',\r\n    height: '40px',\r\n    fontSize: '14px !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    color: '#738094 !important',\r\n    backgroundColor: '#ffffff !important',\r\n    '&.Mui-selected': {\r\n      backgroundColor: '#D6D9DF !important',\r\n      color: '#000 !important'\r\n    }\r\n  },\r\n  cbButtonWithIcon: {\r\n    padding: '0 20px !important',\r\n    '& .MuiButton-startIcon svg': {\r\n      fill: '#738094',\r\n    }\r\n  },\r\n}))\r\n\r\nexport const unitsOfTime = {\r\n  today: [new Date(Date.now()), new Date(Date.now())],\r\n  yesterday: [new Date(Date.now() - 24 * 60 * 60 * 1000), new Date(Date.now() - 24 * 60 * 60 * 1000)],\r\n  week: [new Date(Date.now() - 168 * 60 * 60 * 1000), new Date(Date.now())],\r\n  month: [new Date(Date.now() - 720 * 60 * 60 * 1000), new Date(Date.now())],\r\n  year: [new Date(Date.now() - 8760 * 60 * 60 * 1000), new Date(Date.now())],\r\n  allTime: [null, null]\r\n}\r\n\r\nconst ControlBlock = (props: any) => {\r\n  const element = document.getElementById(\"dateRangePicker\");\r\n  if (element) {\r\n    element.classList.remove(\"rs-picker-toggle-active\");\r\n  }\r\n\r\n  const {language} = useSelector((state: RootState) => state.lang);\r\n  const classes = useStyles();\r\n  const dateSearch = useAppSelector(state => state.search.date);\r\n  const dateReports = useAppSelector(state => state.reports.date);\r\n  const periodReports = useAppSelector(state => state.reports.activeReport.period);\r\n  const dispatch = useDispatch();\r\n\r\n  const [errorSnackbar, setErrorSnackbar] = useState<boolean>(false);\r\n  const [disabledCalendar, setDisabledCalendar] = useState<boolean>(false);\r\n  const [disabledCalendarReport, setDisabledCalendarReport] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    if (periodReports && periodReports != 'all_time') setDisabledCalendarReport(false);\r\n  }, [periodReports])\r\n\r\n  useEffect(() => {\r\n    if (dateSearch[0] === null) setDisabledCalendar(true);\r\n    if (dateReports[0] === null) setDisabledCalendarReport(true);\r\n  }, [dateSearch, dateReports])\r\n\r\n  return (\r\n    <div className={classes.controlBlockWrapper}>\r\n      <div className={classes.controlBlockDate}>\r\n        {/* Ввод точной даты */}\r\n        <div style={{height: '40px', display: 'flex'}}>\r\n          {props.switchEntity === 'reports' ?\r\n            <DateRangePickerWrapper\r\n              id={'dateRangePicker'}\r\n              value={dateReports}\r\n              disabled={disabledCalendarReport}\r\n              onChange={(value: [Date, Date],) => {\r\n                dispatch(reportsSlice.actions.setDate(value));\r\n              }}\r\n              onClean={() => {\r\n                dispatch(reportsSlice.actions.setDate([null, null]));\r\n              }}\r\n            />\r\n            :\r\n            <DateRangePickerWrapper\r\n              id={'dateRangePicker'}\r\n              value={dateSearch}\r\n              disabled={disabledCalendar}\r\n              onChange={(value: [Date, Date],) => {\r\n                dispatch(searchSlice.actions.setDate(value));\r\n              }}\r\n              onClean={() => {\r\n                dispatch(searchSlice.actions.setDate([null, null]));\r\n              }}\r\n            />\r\n          }\r\n          {props.switchEntity === 'reports' ?\r\n            <ButtonGroup\r\n              date={dateReports}\r\n              period={periodReports}\r\n              items={[\r\n                {\r\n                  value: 'today', onClick: () => {\r\n                    setDisabledCalendarReport(false);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.today));\r\n                  }, unitOfTime: unitsOfTime.today\r\n                },\r\n                {\r\n                  value: 'yesterday', onClick: () => {\r\n                    setDisabledCalendarReport(false);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.yesterday));\r\n                  }, unitOfTime: unitsOfTime.yesterday\r\n                },\r\n                {\r\n                  value: 'week', onClick: () => {\r\n                    setDisabledCalendarReport(false);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.week));\r\n                  }, unitOfTime: unitsOfTime.week\r\n                },\r\n                {\r\n                  value: 'month', onClick: () => {\r\n                    setDisabledCalendarReport(false);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.month));\r\n                  }, unitOfTime: unitsOfTime.month\r\n                },\r\n                {\r\n                  value: 'year', onClick: () => {\r\n                    setDisabledCalendarReport(false);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.year));\r\n                  }, unitOfTime: unitsOfTime.year\r\n                },\r\n                {\r\n                  value: 'allTime', onClick: () => {\r\n                    setDisabledCalendarReport(true);\r\n                    dispatch(reportsSlice.actions.setDate(unitsOfTime.allTime));\r\n                  }, unitOfTime: unitsOfTime.allTime\r\n                },\r\n              ]}\r\n            />\r\n            :\r\n            <ButtonGroup\r\n              date={dateSearch}\r\n              items={[\r\n                {\r\n                  value: 'today', onClick: () => {\r\n                    setDisabledCalendar(false);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.today));\r\n                  }, unitOfTime: unitsOfTime.today\r\n                },\r\n                {\r\n                  value: 'yesterday', onClick: () => {\r\n                    setDisabledCalendar(false);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.yesterday));\r\n                  }, unitOfTime: unitsOfTime.yesterday\r\n                },\r\n                {\r\n                  value: 'week', onClick: () => {\r\n                    setDisabledCalendar(false);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.week));\r\n                  }, unitOfTime: unitsOfTime.week\r\n                },\r\n                {\r\n                  value: 'month', onClick: () => {\r\n                    setDisabledCalendar(false);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.month));\r\n                  }, unitOfTime: unitsOfTime.month\r\n                },\r\n                {\r\n                  value: 'year', onClick: () => {\r\n                    setDisabledCalendar(false);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.year));\r\n                  }, unitOfTime: unitsOfTime.year\r\n                },\r\n                {\r\n                  value: 'allTime', onClick: () => {\r\n                    setDisabledCalendar(true);\r\n                    dispatch(searchSlice.actions.setDate(unitsOfTime.allTime));\r\n                  }, unitOfTime: unitsOfTime.allTime\r\n                },\r\n              ]}\r\n            />\r\n          }\r\n        </div>\r\n      </div>\r\n      <Snackbar\r\n        type={'error'}\r\n        open={errorSnackbar}\r\n        onClose={() => {\r\n          setErrorSnackbar(false);\r\n        }}\r\n        text={'Эта функция пока не работает'}\r\n        time={2000}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControlBlock;","import React, {FC, memo} from 'react';\r\nimport Chip from '@mui/material/Chip';\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport cn from 'classnames';\r\nimport Tooltip from '@mui/material/Tooltip';\r\ntype TagPropsType = {\r\n  title: string,\r\n  body: string\r\n};\r\n\r\nexport const TwoTags: FC<TagPropsType> = memo(({title, body}) => {\r\n\r\n  const useStyles = makeStyles(({\r\n    general: {\r\n      height: '24px !important',\r\n      cursor: 'default !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      borderRadius: '0 !important',\r\n    },\r\n    title: {\r\n      borderRadius: `${body ? '0' : '3px'} !important`,\r\n      borderTopLeftRadius: \"3px !important\",\r\n      borderBottomLeftRadius: \"3px !important\",\r\n      margin: '0 0 5px 5px !important',\r\n      backgroundColor: '#D6D9DF !important',\r\n      color: `#000000 !important`,\r\n      borderColor: '#D6D9DF !important'\r\n    },\r\n    body: {\r\n      borderTopRightRadius: \"3px !important\",\r\n      borderBottomRightRadius: \"3px !important\",\r\n      margin: '0 5px 5px 0 !important',\r\n      backgroundColor: `#722ED1 !important`,\r\n      color: `#fff !important`,\r\n      borderColor: `#722ED1 !important`\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <span>\r\n      <Chip label={title} className={cn(classes.title, classes.general)}/>\r\n      {body && <Chip label={body} className={cn(classes.body, classes.general)}/>}\r\n    </span>\r\n  )\r\n});\r\n\r\n\r\nexport const TwoTagsMini: FC<TagPropsType> = memo(({title, body}) => {\r\n\r\n  const useStyles = makeStyles(({\r\n    general: {\r\n      height: '20px !important',\r\n      cursor: 'default !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      borderRadius: '0 !important',\r\n    },\r\n    title: {\r\n      borderRadius: `${body ? '0' : '3px'} !important`,\r\n      borderTopLeftRadius: \"3px !important\",\r\n      borderBottomLeftRadius: \"3px !important\",\r\n      backgroundColor: '#D6D9DF !important',\r\n      color: `#000000 !important`,\r\n      borderColor: '#D6D9DF !important'\r\n    },\r\n    body: {\r\n      borderTopRightRadius: \"3px !important\",\r\n      borderBottomRightRadius: \"3px !important\",\r\n      margin: '5px 5px 5px 0 !important',\r\n      backgroundColor: `#722ED1 !important`,\r\n      color: `#fff !important`,\r\n      borderColor: `#722ED1 !important`\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <span>\r\n      <Chip label={title} className={cn(classes.title, classes.general)}/>\r\n      {body && <Chip label={body} className={cn(classes.body, classes.general)}/>}\r\n    </span>\r\n  )\r\n});\r\n\r\nexport const BaseTag: FC<{ body: string }> = memo(({body}) => {\r\n  const useStyles = makeStyles(({\r\n    body: {\r\n      zIndex: '2',\r\n      height: '24px !important',\r\n      cursor: 'pointer !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      border: '2px solid #E9ECEF !important',\r\n      borderRadius: '3px !important',\r\n      margin: '2px !important',\r\n      backgroundColor: '#D6D9DF !important',\r\n      color: `#000000 !important`\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return <Chip label={body} className={classes.body}/>\r\n});\r\n\r\n\r\n\r\nexport const Fragment: FC<{matchData: string}> = memo(({children, matchData}) => {\r\n  const useStyles = makeStyles(({\r\n    tooltip: {\r\n      borderRadius: \"3px\",\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      color: '#000 !important',\r\n      fontSize: '14px !important',\r\n      padding: '6px 8px !important',\r\n      backgroundColor : '#fff !important',\r\n      boxShadow: 'rgba(100, 100, 111, 0.2) 0px 7px 29px 0px'\r\n    },\r\n    arrow: {\r\n      backgroundColor: '#fff !important'\r\n    },\r\n    body: {\r\n      borderRadius: '3px !important',\r\n      height: '24px !important',\r\n      margin: '5px !important',\r\n      cursor: 'pointer !important',\r\n      backgroundColor: `#D6D9DF !important`,\r\n      color: `#000 !important`,\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      border: `2px solid #D6D9DF !important`,\r\n      \"&:hover\": {\r\n        borderColor: `#D6D9DF !important`\r\n      }\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <Tooltip disableInteractive={true} classes={{tooltip: classes.tooltip}} title={matchData} placement=\"top\">\r\n      <Chip label={children} className={classes.body}/>\r\n    </Tooltip>\r\n  )\r\n});\r\n","import React, {FC} from \"react\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {Fab, Tooltip} from \"@mui/material\";\r\n\r\ntype TooltipPlacementType =\r\n  'bottom-end'\r\n  | 'bottom-start'\r\n  | 'bottom'\r\n  | 'left-end'\r\n  | 'left-start'\r\n  | 'left'\r\n  | 'right-end'\r\n  | 'right-start'\r\n  | 'right'\r\n  | 'top-end'\r\n  | 'top-start'\r\n  | 'top';\r\n\r\ntype IconButtonPropsType = {\r\n  onClick: (event: any) => void,\r\n  disabled?: boolean,\r\n\r\n  icon: any,\r\n  backgroundColor?: string,\r\n  borderRadius?: string,\r\n  margin?: string,\r\n  width?: string,\r\n  height?: string,\r\n\r\n  tooltip?: boolean,\r\n  tooltipTitle?: string,\r\n  tooltipPlacement?: TooltipPlacementType\r\n};\r\n\r\nconst IconButton: FC<IconButtonPropsType> = (\r\n  {\r\n    // logic\r\n    onClick,\r\n    disabled,\r\n\r\n    // styles\r\n    icon,\r\n    backgroundColor,\r\n    borderRadius,\r\n    margin,\r\n    width,\r\n    height,\r\n\r\n    // tooltip params\r\n    tooltipTitle,\r\n    tooltipPlacement\r\n  }) => {\r\n\r\n  const useButtonStyles = makeStyles(({\r\n    button: {\r\n      '&.MuiButtonBase-root.MuiFab-root': {\r\n        opacity: disabled ? \"0.8\" : \"1\",\r\n        minWidth: '32px',\r\n        padding: '0 8px',\r\n        width: width ? width : '32px',\r\n        height: height ? height : '32px',\r\n        minHeight: '32px',\r\n        borderRadius: borderRadius ? borderRadius : '5px',\r\n        boxShadow: 'none',\r\n        margin: margin ? margin : \"0\",\r\n        backgroundColor: backgroundColor ? backgroundColor : \"#E3E8EF\"\r\n      }\r\n    },\r\n    tooltip: {\r\n      borderRadius: \"3px\",\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      color: '#000 !important',\r\n      fontSize: '14px !important',\r\n      backgroundColor: '#fff !important',\r\n      marginBottom: '7px !important',\r\n      boxShadow: 'rgba(100, 100, 111, 0.2) 0px 7px 29px 0px'\r\n    },\r\n  }));\r\n\r\n  const classes = useButtonStyles()\r\n\r\n  return (\r\n    <Tooltip\r\n      title={tooltipTitle ? tooltipTitle : \"\"}\r\n      placement={tooltipPlacement}\r\n      classes={{tooltip: classes.tooltip}}\r\n    >\r\n      <Fab\r\n        disabled={disabled}\r\n        className={classes.button}\r\n        onClick={(event) => onClick(event)}\r\n      >\r\n        {icon}\r\n      </Fab>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default IconButton;","import React, {FC} from 'react';\r\nimport IconButton from \"../IconButton\";\r\n\r\nconst RebootSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M4.36267 5.44226C4.21919 5.40441 4.09994 5.30478 4.03716 5.17032C3.97439 5.03586 3.97458 4.88047 4.03769 4.74617L5.14486 2.38991C5.22736 2.21431 5.404 2.1023 5.59801 2.10254C5.79202 2.10278 5.96837 2.21523 6.05044 2.39103L6.53886 3.43718C6.55632 3.43032 6.57436 3.42437 6.59291 3.41939C9.49111 2.64282 12.4702 4.36275 13.2467 7.26097C14.0233 10.1592 12.3034 13.1382 9.40518 13.9148C6.50692 14.6914 3.5279 12.9714 2.75132 10.0732C2.50436 9.15157 2.37364 8.83264 2.58992 7.96678C2.65685 7.69891 2.92829 7.53598 3.1962 7.60291C3.46411 7.66978 3.62704 7.94124 3.56011 8.20918C3.38392 8.91451 3.51534 9.06091 3.71724 9.81444C4.35088 12.1792 6.78158 13.5825 9.14631 12.9489C11.5111 12.3152 12.9144 9.88457 12.2808 7.51984C11.6575 5.19371 9.29551 3.79783 6.96778 4.35587L7.46058 5.4114C7.54264 5.58719 7.51558 5.7946 7.39124 5.94349C7.26684 6.09237 7.06758 6.15587 6.87998 6.10638L4.36267 5.44226Z\"\r\n        fill=\"#738094\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype RebootPropsType = {\r\n  onClick: any,\r\n  disabled?: boolean\r\n}\r\n\r\nconst Reboot: FC<RebootPropsType> = (\r\n  {\r\n    onClick,\r\n    disabled\r\n  }) => {\r\n  return (\r\n    <IconButton\r\n      margin={'0 15px 0 0'}\r\n      backgroundColor=\"#E3E8EF\"\r\n      disabled={disabled}\r\n      icon={<RebootSvg/>}\r\n      onClick={(event: any) => {\r\n        onClick()\r\n      }}\r\n\r\n      tooltipTitle={`Переобработка звонка`}\r\n      tooltipPlacement=\"top\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default Reboot;","import React, {FC} from 'react';\r\nimport IconButton from \"../IconButton\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\n\r\nconst DownloadSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M3.33398 10.833C3.61012 10.833 3.83398 11.0569 3.83398 11.333V12.6663C3.83398 12.7584 3.9086 12.833 4.00065 12.833H12.0007C12.0927 12.833 12.1673 12.7584 12.1673 12.6663V11.333C12.1673 11.0569 12.3912 10.833 12.6673 10.833C12.9435 10.833 13.1673 11.0569 13.1673 11.333V12.6663C13.1673 13.3107 12.645 13.833 12.0007 13.833H4.00065C3.35632 13.833 2.83398 13.3107 2.83398 12.6663V11.333C2.83398 11.0569 3.05784 10.833 3.33398 10.833Z\"\r\n            fill=\"#A3AEBE\"/>\r\n      <path\r\n        d=\"M7.15864 2.5C6.81578 2.5 6.52969 2.76208 6.49974 3.1037C6.39732 4.27217 6.37925 5.44639 6.44563 6.61723C6.28097 6.62633 6.11638 6.63687 5.95186 6.64887L4.95886 6.72127C4.57599 6.74913 4.36196 7.17607 4.56866 7.49953C5.27669 8.6076 6.189 9.57087 7.25698 10.3381L7.65478 10.6239C7.86111 10.7721 8.13904 10.7721 8.34538 10.6239L8.74318 10.3381C9.81118 9.57087 10.7234 8.6076 11.4315 7.49953C11.6382 7.17607 11.4242 6.74913 11.0413 6.72127L10.0483 6.64887C9.88378 6.63687 9.71918 6.62633 9.55451 6.61723C9.62091 5.44639 9.60284 4.27217 9.50044 3.10369C9.47044 2.76208 9.18438 2.5 8.84151 2.5H7.15864Z\"\r\n        fill=\"#738094\"/>\r\n    </svg>\r\n\r\n  );\r\n};\r\n\r\n\r\ntype DownloadHrefPropsType = {\r\n  href: string | null,\r\n}\r\n\r\nexport const DownloadHref: FC<DownloadHrefPropsType> = ({href}) => {\r\n  const currentCall = useAppSelector(state => state.calls.currentCall);\r\n\r\n  return (\r\n    <IconButton\r\n      onClick={() => {}}\r\n      disabled={!href}\r\n      icon={\r\n        // @ts-ignore\r\n        <a href={href ? href : currentCall ? currentCall.audio : \"\"} download=\"\">\r\n          <DownloadSvg/>\r\n        </a>\r\n      }\r\n\r\n      margin={'0 15px 0 0'}\r\n      backgroundColor=\"#E3E8EF\"\r\n\r\n      tooltipTitle={\"Скачать\"}\r\n      tooltipPlacement={\"top\"}\r\n    />\r\n  );\r\n};\r\n\r\n\r\ntype DownloadOnClickPropsType = {\r\n  onClick: (event: any) => void,\r\n}\r\n\r\nexport const DownloadOnClick: FC<DownloadOnClickPropsType> = ({onClick}) => {\r\n  const currentCall = useAppSelector(state => state.calls.currentCall);\r\n\r\n  return (\r\n    <IconButton\r\n      onClick={onClick}\r\n      icon={<DownloadSvg/>}\r\n\r\n      margin={'0 15px 0 0'}\r\n      backgroundColor=\"#E3E8EF\"\r\n\r\n      tooltipTitle={\"Скачать\"}\r\n      tooltipPlacement={\"top\"}\r\n    />\r\n  );\r\n};\r\n\r\n","import React, {FC} from 'react';\r\nimport IconButton from \"../IconButton\";\r\n\r\nconst BackSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M13.352 9.39611C13.2972 9.44451 13.2641 9.51298 13.2605 9.58605C13.2281 10.2611 13.1727 10.9354 13.0941 11.6076C12.9913 12.486 12.281 13.1858 11.3942 13.2848C9.157 13.5349 6.8426 13.5349 4.60538 13.2848C3.71864 13.1858 3.00831 12.486 2.90557 11.6076C2.63824 9.32185 2.63824 7.01285 2.90557 4.72713C3.00831 3.84869 3.71864 3.14894 4.60538 3.04983C6.0804 2.88498 7.59073 2.82889 9.08879 2.88142C9.19693 2.88521 9.28899 2.80291 9.29659 2.69493L9.32933 2.22625C9.33133 2.19865 9.33406 2.17135 9.33746 2.14436C9.35373 2.01477 9.26386 1.88698 9.13333 1.88236C7.58293 1.82743 6.02163 1.88533 4.49431 2.05603C3.15293 2.20594 2.07005 3.26261 1.91235 4.61097C1.63599 6.97385 1.63599 9.36085 1.91235 11.7237C2.07005 13.072 3.15293 14.1288 4.49431 14.2786C6.80533 14.537 9.19426 14.537 11.5053 14.2786C12.8467 14.1288 13.9295 13.072 14.0873 11.7237C14.1999 10.7605 14.2667 9.79331 14.2875 8.82531C14.2901 8.70385 14.1411 8.64331 14.0557 8.72985C13.829 8.96005 13.5943 9.18225 13.352 9.39611Z\" fill=\"#A3AEBE\"/>\r\n      <path d=\"M5.2448 10.3666C5.09732 10.326 4.99642 10.1902 5.0001 10.0373L5.03959 8.39467C5.09614 6.04271 7.01899 4.16551 9.37166 4.16551H10.2099C10.2275 3.74969 10.2514 3.33407 10.2817 2.9188L10.3269 2.29837C10.3545 1.91975 10.7767 1.70809 11.0965 1.9125C12.4772 2.79469 13.6775 3.93142 14.6333 5.26209L14.9374 5.68539C15.0209 5.8016 15.0209 5.95812 14.9374 6.07433L14.6333 6.49763C13.6775 7.82827 12.4772 8.96501 11.0965 9.84721C10.8331 10.0155 10.4993 9.90174 10.3747 9.64487C10.3485 9.59027 10.3317 9.52734 10.3269 9.46134L10.2817 8.84094C10.2455 8.34567 10.2185 7.84994 10.2005 7.35394L9.96446 7.31841C8.46032 7.09201 6.97252 7.81787 6.2252 9.14267L5.62366 10.2091C5.59501 10.2598 5.55435 10.3009 5.50712 10.3297C5.43048 10.3765 5.33598 10.3917 5.2448 10.3666Z\" fill=\"#738094\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype BackPropsType = {\r\n  onClick: (event: any) => void\r\n}\r\n\r\nconst Back: FC<BackPropsType> = ({onClick}) => {\r\n  return (\r\n    <IconButton\r\n      onClick={(event: any) => {onClick(event)}}\r\n      icon={<BackSvg/>}\r\n\r\n      backgroundColor=\"#E3E8EF\"\r\n      margin={'0 15px 0 0'}\r\n\r\n      tooltipTitle={\"Скопировать публичную ссылку\"}\r\n      tooltipPlacement={\"top\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Back;","import React, {FC, useState, useEffect} from 'react';\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport ReactAudioPlayer from \"react-audio-player\";\r\nimport Speed from \"./Buttons/Speed\";\r\n\r\nconst useStyles = makeStyles(({\r\n  audioPlayer: {\r\n    width: '100%',\r\n    marginBottom: '16px',\r\n  }\r\n}));\r\n\r\ntype AudioPlayerPropsType = {\r\n  onListen: (e: any) => void,\r\n  callAudio: string | undefined | null,\r\n  audioPlayerRef: any\r\n}\r\n\r\nconst AudioPlayer: FC<AudioPlayerPropsType> = ({callAudio, onListen, audioPlayerRef}) => {\r\n  const classes = useStyles();\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsPlaying(false);\r\n    }\r\n  })\r\n\r\n  const togglePlayPause = () => {\r\n    const prevValue = isPlaying;\r\n    debugger\r\n    setIsPlaying(!prevValue);\r\n    if (!prevValue) {\r\n      audioPlayerRef.current.audioEl.current.play();\r\n    } else {\r\n      audioPlayerRef.current.audioEl.current.pause();\r\n    }\r\n  }\r\n\r\n  const changeRange = () => {\r\n    audioPlayerRef.current.audioEl.current.currentTime = 2;\r\n  }\r\n\r\n  return (\r\n    <div tabIndex={1} style={{display: 'flex', backgroundColor: '#F8FAFC'}}>\r\n      <ReactAudioPlayer\r\n        ref={audioPlayerRef}\r\n        className={classes.audioPlayer}\r\n        controls={true}\r\n        src={callAudio ? callAudio : ''}\r\n        listenInterval={1}\r\n        // autoPlay={true}\r\n        onListen={onListen}\r\n        onSeeked={onListen}\r\n      />\r\n      {/*<Speed audioPlayerRef={audioPlayerRef}/>*/}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioPlayer;\r\n\r\n\r\n{/*<audio*/}\r\n{/*  ref={audioPlayerRef}*/}\r\n{/*  className={classes.audioPlayer}*/}\r\n{/*  src={callAudio ? callAudio : ''}*/}\r\n{/*  preload=\"metadata\"*/}\r\n{/*  controls={true}*/}\r\n{/*/>*/}","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport MobileStepper from \"@mui/material/MobileStepper\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport KeyboardArrowLeft from \"@mui/icons-material/KeyboardArrowLeft\";\r\nimport KeyboardArrowRight from \"@mui/icons-material/KeyboardArrowRight\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { getAllUserDicts, getAllWordInDictionary, updateDict } from \"../../../store/calls/calls.slice\";\r\nimport \"../style.css\";\r\n\r\n\r\ninterface TextMobileStepperPropType {\r\n  selectedText: string,\r\n  changeSelectedText: any,\r\n  choosedDictId: string,\r\n  setChoosedDictId: any,\r\n}\r\n\r\ninterface TextareaComponentPropType {\r\n  value: string,\r\n  changeValue: any,\r\n}\r\ninterface AllUserDictsComponentPropType {\r\n  allUserDicts: any,\r\n  handleNext: any,\r\n  choosedDictIdFunc: any,\r\n  getAllUserDictsFunc: any,\r\n}\r\ninterface AllPhraseInDictComponentPropType {\r\n  phrasesValue: string,\r\n  updatePhrasesValue: any,\r\n  addPhraseFunc: any,\r\n  selectedText: string,\r\n  choosedDictId: string,\r\n  setPhrases: any,\r\n  getAllPhraseInDict: any,\r\n}\r\n\r\nconst TextareaComponent = ({ value, changeValue }: TextareaComponentPropType) => {\r\n  return (\r\n    <textarea\r\n      className=\"dictionary-textarea\"\r\n      name=\"selected-text\"\r\n      id=\"\"\r\n      value={value}\r\n      onChange={(event) => changeValue(event.target.value)}\r\n    >\r\n    </textarea>\r\n  )\r\n};\r\n\r\n\r\nconst AllUserDictsComponent = ({\r\n  handleNext,\r\n  allUserDicts,\r\n  getAllUserDictsFunc,\r\n  choosedDictIdFunc\r\n}: AllUserDictsComponentPropType) => {\r\n\r\n  async function chooseOneDict(id: string) {\r\n    choosedDictIdFunc(id);\r\n    handleNext();\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAllUserDictsFunc();\r\n  }, []);\r\n\r\n  function renderDicts(item: any) {\r\n    return (\r\n      <div className=\"dict-item\" onClick={() => chooseOneDict(item.id)}>\r\n        <p>{item.title}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"dicts-block\">\r\n      {\r\n        allUserDicts.length > 0\r\n          ? (\r\n            allUserDicts.map(renderDicts)\r\n          ) : (\r\n            <div className=\"wait-dicts-loader\">\r\n              <CircularProgress />\r\n            </div>\r\n          )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst AllPhraseInDictComponent = ({\r\n  phrasesValue,\r\n  updatePhrasesValue,\r\n  choosedDictId,\r\n  getAllPhraseInDict,\r\n}: AllPhraseInDictComponentPropType) => {\r\n\r\n  useEffect(() => {\r\n    choosedDictId && getAllPhraseInDict();\r\n  }, []);\r\n  return (\r\n    <textarea\r\n      className=\"dictionary-textarea phrases-textarea\"\r\n      value={phrasesValue}\r\n      onChange={event => updatePhrasesValue(event.target.value)}\r\n    >\r\n    </textarea>\r\n  )\r\n}\r\n\r\n\r\nconst TextMobileStepper = ({ selectedText, changeSelectedText, choosedDictId, setChoosedDictId }: TextMobileStepperPropType) => {\r\n  const theme = useTheme();\r\n  const dispatch = useDispatch();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [allUserDicts, setAllUserDicts] = useState<any>([]);\r\n  const [phrasesValue, setPhrasesValue] = useState<string>(\"\");\r\n  const [phrases, setPhrases] = useState<any>([]);\r\n  const [newPhrases, setNewPhrases] = useState<any>([]);\r\n\r\n\r\n  function getPhrasesForTextarea(massive: any) {\r\n    return massive.join(`\r\n`);\r\n  }\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  async function getAllUserDictsFunc() {\r\n    const userDicts = await dispatch(getAllUserDicts());\r\n    // @ts-ignore\r\n    setAllUserDicts(userDicts.payload);\r\n  }\r\n\r\n  async function getAllPhraseInDict() {\r\n    const data = await dispatch(getAllWordInDictionary({ id: choosedDictId }));\r\n    // @ts-ignore\r\n    const phrases = data.payload.phrases;\r\n    // @ts-ignore\r\n    setPhrases(phrases);\r\n    setNewPhrases(phrases.slice(0));\r\n    setPhrasesValue(getPhrasesForTextarea(phrases));\r\n  }\r\n\r\n  function updatePhrasesValue(value: string) {\r\n    const newValue = value.split(`\r\n`);\r\n    setPhrasesValue(getPhrasesForTextarea(newValue));\r\n  }\r\n\r\n  function addPhrase() {\r\n    newPhrases.push(selectedText);\r\n    setPhrasesValue(getPhrasesForTextarea(newPhrases));\r\n    handleNext();\r\n  }\r\n\r\n  function rescindChangesFunc() {\r\n    setNewPhrases(phrases.slice(0));\r\n    setPhrasesValue(getPhrasesForTextarea(phrases));\r\n    handleBack();\r\n  }\r\n\r\n  console.log(phrases);\r\n  console.log(\"Новые фразы\", newPhrases);\r\n\r\n  const steps = [\r\n    {\r\n      label: \"Редактировать\",\r\n      description: <TextareaComponent value={selectedText} changeValue={changeSelectedText} />,\r\n    },\r\n    {\r\n      label: \"Выберите в какой словарь добавить\",\r\n      description: <AllUserDictsComponent\r\n        handleNext={handleNext}\r\n        choosedDictIdFunc={setChoosedDictId}\r\n        allUserDicts={allUserDicts}\r\n        getAllUserDictsFunc={getAllUserDictsFunc}\r\n      />,\r\n    },\r\n    {\r\n      label: \"Слова в словаре\",\r\n      description: <AllPhraseInDictComponent\r\n        phrasesValue={phrasesValue}\r\n        updatePhrasesValue={updatePhrasesValue}\r\n        addPhraseFunc={addPhrase}\r\n        getAllPhraseInDict={getAllPhraseInDict}\r\n        selectedText={selectedText}\r\n        choosedDictId={choosedDictId}\r\n        setPhrases={setPhrases}\r\n      />,\r\n    },\r\n    {\r\n      label: \"Слова в словаре\",\r\n      description: <AllPhraseInDictComponent\r\n        phrasesValue={phrasesValue}\r\n        updatePhrasesValue={updatePhrasesValue}\r\n        addPhraseFunc={addPhrase}\r\n        getAllPhraseInDict={getAllPhraseInDict}\r\n        selectedText={selectedText}\r\n        choosedDictId={choosedDictId}\r\n        setPhrases={setPhrases}\r\n      />,\r\n    }\r\n  ];\r\n\r\n  function sendNewPhraseToDict() {\r\n    const sendPhrases = phrasesValue.split(`\r\n`);\r\n\r\n    dispatch(updateDict({\r\n      dictId: choosedDictId,\r\n      phrases: sendPhrases,\r\n    }));\r\n  }\r\n\r\n  const maxSteps = steps.length;\r\n\r\n  return (\r\n    <Box sx={{ width: 400, flexGrow: 1 }}>\r\n      <Paper\r\n        square\r\n        elevation={0}\r\n        sx={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          height: 50,\r\n          pl: 2,\r\n          bgcolor: \"background.default\"\r\n        }}\r\n      >\r\n        <Typography>{steps[activeStep].label}</Typography>\r\n      </Paper>\r\n      <Box sx={{ height: 255, maxWidth: 400, width: \"100%\", p: 2 }}>\r\n        {steps[activeStep].description}\r\n      </Box>\r\n      <div className=\"menu-stepper\">\r\n        <div className=\"left-block\">\r\n          {\r\n            activeStep === 0\r\n              ? (\r\n                <Button\r\n                  size=\"small\"\r\n                  onClick={handleNext}\r\n                  disabled={activeStep === maxSteps - 1}\r\n                >\r\n                  Отправить в словарь\r\n                  {theme.direction === \"rtl\" ? (\r\n                    <KeyboardArrowLeft />\r\n                  ) : (\r\n                    <KeyboardArrowRight />\r\n                  )}\r\n                </Button>\r\n              ) : activeStep === 2 ? (\r\n                <Button\r\n                  size=\"small\"\r\n                  onClick={addPhrase}\r\n                >\r\n                  Добавить\r\n                </Button>\r\n              ) : activeStep === 3 && (\r\n                <>\r\n                  <Button\r\n                    size=\"small\"\r\n                    onClick={rescindChangesFunc}\r\n                  >\r\n                    Отмена\r\n                  </Button>\r\n                  <Button\r\n                    size=\"small\"\r\n                    onClick={sendNewPhraseToDict}\r\n                  >\r\n                    Отправить\r\n                  </Button>\r\n                </>\r\n              )\r\n          }\r\n        </div>\r\n        <div className=\"right-block\">\r\n          {\r\n            activeStep > 0 && (\r\n              <Button size=\"small\" onClick={handleBack}>\r\n                {theme.direction === \"rtl\" ? (\r\n                  <KeyboardArrowRight />\r\n                ) : (\r\n                  <KeyboardArrowLeft />\r\n                )}\r\n                Назад\r\n              </Button>\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TextMobileStepper;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport MobileStepper from \"@mui/material/MobileStepper\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport KeyboardArrowLeft from \"@mui/icons-material/KeyboardArrowLeft\";\r\nimport KeyboardArrowRight from \"@mui/icons-material/KeyboardArrowRight\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { getAllUserDicts, getAllWordInDictionary } from \"../../../store/calls/calls.slice\";\r\nimport TextMobileStepper from \"./TextMobileStepper\";\r\nimport \"../style.css\";\r\n\r\nconst BootstrapDialog = styled(Dialog)(({ theme }) => ({\r\n  \"& .MuiDialogContent-root\": {\r\n    padding: theme.spacing(2)\r\n  },\r\n  \"& .MuiDialogActions-root\": {\r\n    padding: theme.spacing(1)\r\n  }\r\n}));\r\n\r\ninterface DictionaryStepPropType {\r\n  selectionText: string,\r\n  closeDictionaryFunc: any,\r\n}\r\ninterface TextMobileStepperPropType {\r\n  selectedText: string,\r\n  changeSelectedText: any,\r\n}\r\n\r\nconst DictionaryStep = ({ selectionText, closeDictionaryFunc }: DictionaryStepPropType) => {\r\n  const [open, setOpen] = useState<boolean>(true);\r\n  const [selectedText, setSelectedText] = useState<string>(selectionText);\r\n  const [choosedDictId, setChoosedDictId] = useState<string>(\"\");\r\n\r\n  const handleClose = () => {\r\n    closeDictionaryFunc();\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Button variant=\"outlined\" onClick={handleClickOpen}>\r\n        Open dialog\r\n      </Button> */}\r\n      <BootstrapDialog\r\n        onClose={handleClose}\r\n        aria-labelledby=\"customized-dialog-title\"\r\n        open={open}\r\n      >\r\n        <TextMobileStepper\r\n          selectedText={selectedText}\r\n          changeSelectedText={setSelectedText}\r\n          choosedDictId={choosedDictId}\r\n          setChoosedDictId={setChoosedDictId}\r\n        />\r\n      </BootstrapDialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default DictionaryStep;\r\n","import React, { FC, memo, MutableRefObject, useState } from 'react';\r\n\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Typography } from \"@mui/material\";\r\nimport cn from 'classnames';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { BlockBox } from \"../../../components/common\";\r\nimport { BaseTag } from \"../../../components/common/Tag\";\r\nimport { callsSlice } from '../../../store/calls/calls.slice';\r\nimport { CallSttFragmentType } from \"../../../store/calls/calls.types\";\r\nimport { timeConverter } from \"../Call\";\r\nimport DictionaryPopup from './DictionaryPopup';\r\nimport DictionaryStep from \"./DictionaryStep\"; \r\n\r\ntype DialogItemType = {\r\n  prevFragment: CallSttFragmentType | { direction: string },\r\n  fragment: CallSttFragmentType,\r\n  fragmentIndex: number,\r\n  callId: string,\r\n  audioPlayerRef: any\r\n};\r\ntype CursorPositionType = {\r\n  top: number | undefined,\r\n  left: number | undefined,\r\n}\r\n\r\nconst DialogItem: FC<DialogItemType> = memo(({ prevFragment, fragment, fragmentIndex, callId, audioPlayerRef }) => {\r\n  const useStyles = makeStyles(({\r\n    diItem: {\r\n      display: 'flex',\r\n      margin: '3px 0',\r\n    },\r\n    diBodyInner: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'start',\r\n      position: 'relative',\r\n      maxWidth: '700px',\r\n    },\r\n    diBodyText: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap',\r\n      position: 'relative',\r\n      maxWidth: '600px !important',\r\n      height: '100% !important',\r\n      lineHeight: '22px !important',\r\n      color: '#738094 !important',\r\n      paddingRight: '45px !important',\r\n      padding: '7px',\r\n      paddingTop: '0px',\r\n    },\r\n    dateTypography: {\r\n      fontSize: '14px !important',\r\n    },\r\n    diTagsBlock: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'space-between',\r\n      margin: '0 16px'\r\n    },\r\n    diFragment: {\r\n      padding: '0 2px',\r\n      borderRadius: '3px'\r\n    },\r\n    typographyTitle: {\r\n      textAlign: 'right',\r\n      color: '#738094 !important',\r\n      fontWeight: '700 !important',\r\n      minWidth: '110px !important',\r\n      marginRight: '10px !important'\r\n    },\r\n    titleCustomer: {\r\n      color: '#0009FF !important'\r\n    },\r\n    titleEmployee: {\r\n      color: '#FF0E00 !important'\r\n    },\r\n  }))\r\n\r\n  const dispatch = useDispatch();\r\n  const [selectionText, setSelectionText] = useState<string>(\"\");\r\n  const [isUserSelectText, setIsUserSelectText] = useState<boolean>(false);\r\n  const [cursorPosition, setCursorPosition] = useState<CursorPositionType>({\r\n    top: 0,\r\n    left: 0,\r\n  });\r\n  const classes = useStyles();\r\n  const condition = fragment.direction === 'client';\r\n\r\n  const {popupVisible, popupPosition} = useSelector((state: any) => state.calls);\r\n\r\n  function onMouseUpFunction(event: any) {\r\n    if (window.getSelection()) {\r\n      const select: any = window.getSelection();\r\n      const selectionText = select.toString();\r\n\r\n      if (selectionText && !isUserSelectText) {\r\n        const bounds = event.currentTarget.getBoundingClientRect();\r\n        const y = event.clientY - bounds.top;\r\n        const x = event.clientX - bounds.left;\r\n        console.log(x, y);\r\n        console.log(event.clientX, event.clientY);\r\n        console.log(event.pageX, event.pageY);\r\n\r\n        const XX = window.innerWidth - event.clientX;\r\n        const YY = window.innerHeight - event.clientY;\r\n\r\n        dispatch(callsSlice.actions.setDictionaryPopupParams({ \r\n          popupVisible: true,\r\n          popupPosition: {\r\n            top: YY,\r\n            left: XX,\r\n          },\r\n         }));\r\n        setCursorPosition({ top: y, left: x })\r\n        setIsUserSelectText(true);\r\n        setSelectionText(selectionText.replace(/\\s+/g, ' ').trim());\r\n      }\r\n    }\r\n  }\r\n\r\n  function clearDictionaryData() {\r\n    setIsUserSelectText(false);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.diItem}>\r\n      {/* DIBody */}\r\n      <div className={classes.diBodyInner}>\r\n        <Typography\r\n          className={classes.dateTypography}>\r\n          {timeConverter(fragment.begin, false)}\r\n        </Typography>\r\n        <Typography\r\n          className={cn(classes.typographyTitle, condition ? classes.titleCustomer : classes.titleEmployee)}\r\n        >\r\n          {prevFragment\r\n            ?\r\n            prevFragment.direction !== fragment.direction && <>{`${condition ? 'Клиент' : 'Сотрудник'}:`}</>\r\n            :\r\n            <></>\r\n          }\r\n        </Typography>\r\n\r\n        <Typography className={classes.diBodyText} onMouseUp={onMouseUpFunction}>\r\n          {fragment.words.map((word, j) => (\r\n            <span\r\n              onClick={() => {\r\n                audioPlayerRef.current.audioEl.current.play();\r\n                audioPlayerRef.current.audioEl.current.currentTime = word.begin / 1000 + 0.01;\r\n              }}\r\n              id={`${callId}-${fragmentIndex}-${j}`}\r\n              className={classes.diFragment}\r\n              key={j}\r\n            >\r\n              {word.word}\r\n            </span>\r\n          ))}\r\n\r\n          {\r\n            isUserSelectText\r\n            && <DictionaryStep selectionText={selectionText} closeDictionaryFunc={clearDictionaryData} />\r\n            // && <DictionaryPopup popupPosition={cursorPosition} selectionText={selectionText} />\r\n          }\r\n        </Typography>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DialogItem;","import React, {FC} from 'react';\r\nimport IconButton from \"../IconButton\";\r\n\r\nconst HistorySvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M4.57576 4.58857C5.45144 3.70987 6.66152 3.16699 7.99935 3.16699C10.6687 3.16699 12.8327 5.33095 12.8327 8.00033C12.8327 10.6697 10.6687 12.8337 7.99935 12.8337C5.32998 12.8337 3.16602 10.6697 3.16602 8.00033C3.16602 7.72419 2.94216 7.50033 2.66602 7.50033C2.38988 7.50033 2.16602 7.72419 2.16602 8.00033C2.16602 11.222 4.77769 13.8337 7.99935 13.8337C11.221 13.8337 13.8327 11.222 13.8327 8.00033C13.8327 4.77867 11.221 2.16699 7.99935 2.16699C6.38502 2.16699 4.92307 2.82341 3.86744 3.88267C3.85047 3.8997 3.83498 3.91764 3.82098 3.93633L2.9826 3.09796C2.89114 3.0065 2.75504 2.97621 2.63342 3.02023C2.51181 3.06427 2.42664 3.17467 2.41494 3.30348L2.17923 5.89621C2.17028 5.99473 2.20554 6.09213 2.2755 6.16208C2.34544 6.23204 2.44286 6.26731 2.54138 6.25835L5.1341 6.02265C5.26291 6.01093 5.37332 5.92577 5.41734 5.80416C5.46138 5.68254 5.43108 5.54643 5.33962 5.45498L4.52088 4.63623C4.54002 4.62189 4.55838 4.60601 4.57576 4.58857Z\" fill=\"#738094\"/>\r\n      <path d=\"M8.5 4.66699C8.5 4.39085 8.27613 4.16699 8 4.16699C7.72387 4.16699 7.5 4.39085 7.5 4.66699V8.00033C7.5 8.17273 7.5888 8.33293 7.735 8.42433L9.735 9.67433C9.9692 9.82066 10.2777 9.74953 10.424 9.51533C10.5703 9.28113 10.4992 8.97266 10.265 8.82633L8.5 7.72319V4.66699Z\" fill=\"#738094\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\nconst History: FC = () => {\r\n  return (\r\n    <IconButton\r\n      onClick={(event: any) => {\r\n        // эмпти.\r\n      }}\r\n      disabled={true}\r\n\r\n      icon={<HistorySvg/>}\r\n      backgroundColor=\"#E3E8EF\"\r\n      margin={'0 15px 0 0'}\r\n      //tooltipTitle=\"История\"\r\n      //tooltipPlacement=\"top\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default History;","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/yandex_PNG20.d9efc901.png\";","import React, {FC, useEffect, useRef, useState} from 'react';\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {CircularProgress, Typography} from \"@mui/material\";\r\nimport 'react-h5-audio-player/lib/styles.css';\r\nimport {callAction, callsSlice, getCallInfo, getCallPublicToken, getCallStt} from \"../../../store/calls/calls.slice\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {\r\n  CallAudioType,\r\n  CallInfoType,\r\n  CallSttType,\r\n  CallTagType,\r\n} from \"../../../store/calls/calls.types\";\r\nimport Reboot from \"../../../components/common/Buttons/Reboot\";\r\nimport {DownloadHref} from \"../../../components/common/Buttons/Download\";\r\nimport Back from \"../../../components/common/Buttons/Back\";\r\nimport { BlockBox } from \"../../../components/common\";\r\nimport { Fragment } from \"../../../components/common/Tag\";\r\nimport AudioPlayer from \"../../../components/common/AudioPlayer\";\r\nimport DialogItem from \"./DialogItem\";\r\nimport { useAppSelector } from \"../../../hooks/redux\";\r\nimport CustomControlSelect from \"../../../components/common/Selects/CustomControlSelect\";\r\nimport {translate} from \"../../../localizations\";\r\nimport ModalWindow from \"../../../components/common/ModalWindowBox\";\r\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\r\nimport ToggleButton from \"@mui/material/ToggleButton\";\r\nimport CustomCheckbox from \"../../../components/common/Checkbox\";\r\nimport History from \"../../../components/common/Buttons/History\";\r\nimport {LoadingButton} from \"@mui/lab\";\r\nimport Logo from \"../../../assets/images/logo.png\";\r\nimport Yandex from \"../../../assets/images/yandex_PNG20.png\";\r\nimport {langSlice} from \"../../../store/lang/lang.slice\";\r\n\r\n\r\nconst CallSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"17\" height=\"17\" viewBox=\"0 0 17 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M15.4696 1.03022C15.6103 1.17087 15.6893 1.36164 15.6893 1.56055V5.38897C15.6893 5.80319 15.3535 6.13897 14.9393 6.13897C14.5251 6.13897 14.1893 5.80319 14.1893 5.38897V3.37121L11.0303 6.53022C10.7374 6.82311 10.2625 6.82311 9.9696 6.53022C9.6768 6.23732 9.6768 5.76245 9.9696 5.46956L13.1287 2.31055H11.1109C10.6967 2.31055 10.3609 1.97476 10.3609 1.56055C10.3609 1.14633 10.6967 0.810547 11.1109 0.810547H14.9393C15.1382 0.810547 15.329 0.889567 15.4696 1.03022Z\"\r\n        fill=\"#73D13D\" />\r\n      <path\r\n        d=\"M1.00005 6.86077C2.91645 11.0346 6.32648 14.3531 10.566 16.1521L11.2456 16.4549C12.8004 17.1477 14.6282 16.6214 15.5765 15.2079L16.4646 13.8842C16.7533 13.4538 16.6654 12.8741 16.2621 12.5487L13.2502 10.1189C12.8078 9.76204 12.1573 9.84524 11.8189 10.3018L10.8872 11.5591C8.49637 10.3797 6.55528 8.43874 5.37595 6.04792L6.63317 5.1162C7.08987 4.77778 7.17298 4.12726 6.81608 3.68488L4.38622 0.672942C4.06087 0.269662 3.48137 0.181692 3.051 0.470262L1.71816 1.36396C0.295825 2.31766 -0.227555 4.16051 0.481175 5.71946L0.999265 6.85908L1.00005 6.86077Z\"\r\n        fill=\"#A3AEBE\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype CallBodyPropsType = {\r\n  callInfo: CallInfoType,\r\n  callAudio: CallAudioType | null,\r\n  callStt: CallSttType | null,\r\n  bundleIndex: number | null,\r\n  expanded: boolean,\r\n  fragments: CallTagType[],\r\n\r\n  // сори)\r\n  audioRef: any,\r\n  onFragmentClick: any,\r\n  prevActiveFragment: any,\r\n  audioPlayerRef: any,\r\n  activeFragmentRef: any,\r\n  setIsCallBodyData: any\r\n};\r\n\r\nconst CallBody: FC<CallBodyPropsType> = React.memo((\r\n  {\r\n    callInfo,\r\n    callAudio,\r\n    callStt,\r\n    fragments,\r\n    bundleIndex,\r\n    expanded,\r\n    audioRef,\r\n    onFragmentClick,\r\n    audioPlayerRef,\r\n    setIsCallBodyData,\r\n\r\n    prevActiveFragment,\r\n    activeFragmentRef\r\n  }\r\n) => {\r\n  const useStyles = makeStyles(({\r\n    callBodyWrapper: {},\r\n    cbDialogWrapper: {\r\n      borderRadius: '5px',\r\n      height: '100%',\r\n      width: '100%',\r\n      backgroundColor: '#EEF2F6',\r\n      overflow: 'hidden'\r\n    },\r\n    cbDialogInner: {\r\n      padding: '12.5px 12px'\r\n    },\r\n    cbDialogItems: {\r\n      overflowY: 'auto',\r\n      padding: '5px 0 40px 0',\r\n      // height: '800px',\r\n      '&::-webkit-scrollbar': {\r\n        width: '4px',\r\n        height: '4px',\r\n        backgroundColor: '#f1f1f1',\r\n        outline: 'none',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n        borderRadius: '10px'\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#555'\r\n      }\r\n    },\r\n    audioPlayerBox: {\r\n      overflow: 'hidden',\r\n      position: 'sticky',\r\n      top: '-200px',\r\n      zIndex: '100',\r\n      backgroundColor: \"#EEF2F6\"\r\n    },\r\n\r\n    controlBlockButtonBox: {\r\n      boxShadow: 'none !important',\r\n      padding: '0 5px',\r\n      marginLeft: '20px'\r\n    },\r\n    controlBlockButton: {\r\n      border: 'none !important',\r\n      transition: '0.4s !important',\r\n      outline: 'none !important',\r\n      height: '40px',\r\n      fontSize: '14px !important',\r\n      // @ts-ignore\r\n      textTransform: 'none !important',\r\n      color: '#738094 !important',\r\n      backgroundColor: '#ffffff !important',\r\n      '&.Mui-selected': {\r\n        backgroundColor: '#D6D9DF !important',\r\n        color: '#000 !important'\r\n      }\r\n    },\r\n    isActive: {\r\n      backgroundColor: '#CDD5DF',\r\n      color: '#000'\r\n    },\r\n    typographyTitle: {\r\n      color: '#738094 !important',\r\n      fontWeight: '700 !important',\r\n      minWidth: '110px !important',\r\n    },\r\n    activeFragment: {\r\n      backgroundColor: '#F5F5DC'\r\n    }\r\n  }));\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentCall = useAppSelector(state => state.calls.currentCall);\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n\r\n  useEffect(() => {\r\n    if (!expanded && callAudio && bundleIndex) {\r\n      dispatch(callsSlice.actions.removeAudio({ id: callInfo.id, bundleIndex }));\r\n    }\r\n  }, [expanded]);\r\n\r\n  const callId = callInfo.id;\r\n\r\n  const prevIndex = useRef<string[] | undefined>(undefined);\r\n  const currentIndex = useRef<string[] | undefined>(undefined);\r\n\r\n  const getIndices = (array: Array<any>, necessaryElements: any) => {\r\n    let indices: number[] = []\r\n    for (let i = 0; i < necessaryElements.length; i++) {\r\n      indices.push(array.indexOf(necessaryElements[i]));\r\n    }\r\n    return indices;\r\n  }\r\n\r\n\r\n  // Возвращает строку с индексом фрагмента/фразы и слова.\r\n  function findWordIndexes(phrases: any[] | undefined, currentTime: number) {\r\n    if (phrases) {\r\n      const currentFragments = phrases.filter(phrase => phrase.begin <= currentTime && currentTime <= phrase.end);\r\n      const currentFragmentsIndices = getIndices(phrases, currentFragments);\r\n\r\n      if (currentFragmentsIndices.length < 1 || currentFragmentsIndices.some(index => index < 0)) {\r\n        return undefined;\r\n      }\r\n\r\n      let indices = []\r\n      for (let i = 0; i < currentFragments.length; i++) {\r\n        const currentWords = currentFragments[i].words.filter((word: any) => word.begin <= currentTime && currentTime <= word.end);\r\n        const currentWordsIndices = getIndices(currentFragments[i].words, currentWords);\r\n\r\n        for (let j = 0; j < currentWords.length; j++) {\r\n          indices.push(`${callId}-${currentFragmentsIndices[i]}-${currentWordsIndices[j]}`)\r\n        }\r\n      }\r\n      if (indices.length < 1) {\r\n        return undefined;\r\n      }\r\n      return indices;\r\n    }\r\n  } // return [1-4, 2-8]\r\n\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsCallBodyData(false);\r\n    }\r\n  }, []);\r\n\r\n  const { language } = useAppSelector(state => state.lang);\r\n\r\n  const onListen = (eventCurrentTime: any) => {\r\n    let currentTimeLocal;\r\n    if (!!eventCurrentTime.target) {\r\n      currentTimeLocal = eventCurrentTime.target.currentTime * 1000;\r\n    } else {\r\n      currentTimeLocal = eventCurrentTime * 1000;\r\n    }\r\n    if (callStt) {\r\n      const indices = findWordIndexes(callStt.fragments, currentTimeLocal);\r\n\r\n      if (indices && JSON.stringify(indices) !== JSON.stringify(prevIndex.current)) {\r\n\r\n        let activeWord = null;\r\n        for (let i = 0; i < indices.length; i++) {\r\n          activeWord = document.getElementById(`${indices[i]}`);\r\n          if (activeWord) {\r\n            activeWord.classList.add(classes.isActive);\r\n          }\r\n        }\r\n\r\n        if (prevIndex.current) {\r\n          for (let i = 0; i < prevIndex.current.length; i++) {\r\n            // убираем раскраску с предыдущего\r\n            const removeElement = document.getElementById(`${prevIndex.current[i]}`);\r\n            if (removeElement) {\r\n              removeElement.classList.remove(classes.isActive)\r\n            }\r\n          }\r\n        }\r\n\r\n        // новоепредыдущее = текущее\r\n        prevIndex.current = indices;\r\n      }\r\n      if (!indices) {\r\n        // убираем раскраску с предыдущего\r\n        const removeElement = document.getElementById(`${prevIndex.current}`);\r\n        if (removeElement) {\r\n          removeElement.classList.remove(classes.isActive)\r\n        }\r\n      }\r\n      currentIndex.current = indices;\r\n    }\r\n  }\r\n\r\n\r\n  const callActionSelectConverter = (values: any = []) => {\r\n    let local: { value: any, label: string }[] = [];\r\n    for (let i = 0; i < values.length; i++) {\r\n      if (values[i] !== \"analyze\" && values[i] !== \"get_api_tags\") {\r\n        if (values[i] === \"delete\") {\r\n          local.unshift({value: values[i], label: translate(values[i], language)});\r\n        } else {\r\n          local.push({value: values[i], label: translate(values[i], language)});\r\n        }\r\n      }\r\n    }\r\n    return local;\r\n  };\r\n\r\n  // MW\r\n  const [isOpen, setOpen] = useState(false);\r\n  function handleMWOpen() {\r\n    setOpen(true);\r\n  }\r\n  function handleMWClose() {\r\n    setOpen(false);\r\n  }\r\n  // MW button\r\n  const [MWButtonLoading, setMWButtonLoading] = useState(false);\r\n\r\n  type SttFormType = {\r\n    engine: \"yandex\" | \"imot\",\r\n    keepFragments: boolean\r\n  }\r\n  const [sttForm, setSttForm] = useState<SttFormType>({\r\n    engine: \"imot\",\r\n    keepFragments: false\r\n  });\r\n\r\n\r\n  // onClick's действий со звонком\r\n  async function formPublicToken(id: string) {\r\n    const publicTokenData = await dispatch(getCallPublicToken(id));\r\n    // @ts-ignore\r\n    const publicToken: { access_token: string, token_type: string } = publicTokenData.payload;\r\n    const host = window.location.origin;\r\n\r\n    const publicUrl = `${host}/imot/#/${language}/call?id=${id}&token=${publicToken.access_token}`;\r\n    navigator.clipboard.writeText(publicUrl);\r\n    dispatch(langSlice.actions.setSnackbar({\r\n      type: \"success\",\r\n      text: \"Публичная ссылка скопированна\",\r\n      value: true,\r\n      time: 2000\r\n    }));\r\n  }\r\n\r\n  async function rebootAction() {\r\n    if (callStt) {\r\n      dispatch(callsSlice.actions.setStt({\r\n        stt: null,\r\n        id: callInfo.id,\r\n        index: bundleIndex\r\n      }));\r\n\r\n      await dispatch(callAction({\r\n        id: callInfo.id,\r\n        data: {\r\n          action: \"analyze\",\r\n          engine: callStt.engine,\r\n          keep_fragments: false\r\n        }\r\n      }));\r\n\r\n      const newCallInfoData = await dispatch(getCallInfo({id: callInfo.id}));\r\n      dispatch(callsSlice.actions.setInfo({\r\n        // @ts-ignore\r\n        info: newCallInfoData.payload,\r\n        id: callInfo.id,\r\n        index: bundleIndex\r\n      }));\r\n\r\n      const newCallSttData = await dispatch(getCallStt({id: callInfo.id}));\r\n      dispatch(callsSlice.actions.setStt({\r\n        // @ts-ignore\r\n        stt: newCallSttData.payload,\r\n        id: callInfo.id,\r\n        index: bundleIndex\r\n      }));\r\n\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"success\",\r\n        text: \"Звонок перераспознан\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n    }\r\n  }\r\n\r\n  async function sttAction() {\r\n    handleMWOpen()\r\n  }\r\n\r\n  async function sttActionSubmit() {\r\n    if (callStt) {\r\n      setMWButtonLoading(true);\r\n      await dispatch(callAction({\r\n        id: callInfo.id,\r\n        data: {\r\n          action: \"stt\",\r\n          engine: sttForm.engine,\r\n          keep_fragments: sttForm.keepFragments\r\n        }\r\n      }));\r\n      handleMWClose();\r\n      setMWButtonLoading(false);\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"info\",\r\n        text: \"Запрос на перераспознание отправлен\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.callBodyWrapper}>\r\n      <div ref={audioRef} className={classes.audioPlayerBox}>\r\n        <AudioPlayer\r\n          onListen={onListen}\r\n          callAudio={callAudio}\r\n          audioPlayerRef={audioPlayerRef}\r\n        />\r\n      </div>\r\n      <div style={{ display: 'flex' }}>\r\n        <div className={classes.cbDialogWrapper}>\r\n          <div className={classes.cbDialogInner}>\r\n            {fragments.length > 0 &&\r\n              <>\r\n                <Typography style={{ marginBottom: '10px' }} className={classes.typographyTitle}>\r\n                  Теги:\r\n                </Typography>\r\n                <div style={{ display: 'flex', marginBottom: '15px' }}>\r\n                  {fragments.map((fragment) => (\r\n                    <div\r\n                      onClick={(event: any) => {\r\n                        onFragmentClick(fragment);\r\n                      }}\r\n                    >\r\n                      <Fragment matchData={fragment.matchData}>\r\n                        {fragment.name}\r\n                      </Fragment>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            }\r\n\r\n            {callStt ?\r\n              <div>\r\n                <Typography style={{marginBottom: '10px'}} className={classes.typographyTitle}>\r\n                  Текстовый диалог:\r\n                </Typography>\r\n                <div className={classes.cbDialogItems} id={callId}>\r\n                  <div>\r\n                    {callStt.fragments.length > 1 ?\r\n                      callStt.fragments.map((phrase, i, array) => {\r\n                        return (\r\n                          <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}\r\n                               id={`${phrase.id}-phrase`}>\r\n                            <div style={{width: '85%'}}>\r\n                              <DialogItem\r\n                                audioPlayerRef={audioPlayerRef}\r\n                                prevFragment={array[i - 1] ? array[i - 1] : {direction: phrase.direction === 'client' ? 'operator' : 'client'}}\r\n                                fragment={phrase}\r\n                                callId={callId}\r\n                                fragmentIndex={i}\r\n                              />\r\n                            </div>\r\n                            <div style={{textAlign: 'center', width: '15%'}}>\r\n                              {fragments.map((fragment, j) => {\r\n                                if (phrase.begin === fragment.fBegin && phrase.end === fragment.fEnd) {\r\n                                  return <div>\r\n                                    <Fragment matchData={fragment.matchData}>{fragment.name}</Fragment>\r\n                                  </div>;\r\n                                }\r\n                                return null;\r\n                              })}\r\n                            </div>\r\n                          </div>\r\n                        )\r\n                      })\r\n                      : <Typography>У этого звонка нет stt</Typography>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              </div> :\r\n              <div style={{textAlign: \"center\"}}>\r\n                <CircularProgress size={80}/>\r\n              </div>\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        {/* Кнопочки */}\r\n        <div style={{backgroundColor: 'fff', width: '370px', marginTop: '20px'}}>\r\n          <div style={{display: 'flex', justifyContent: 'flex-end', alignItems: 'center', paddingRight: '14px'}}>\r\n\r\n            {isAuth && (\r\n              <Back\r\n                onClick={(event) => {\r\n                  formPublicToken(callId)\r\n                }}\r\n              />\r\n            )}\r\n\r\n            {/* Скачать */}\r\n            <DownloadHref href={callAudio}/>\r\n\r\n            {/* Перераспознать */}\r\n            {callInfo.allowedActions.indexOf(\"analyze\") != -1 && (\r\n              <Reboot onClick={() => {\r\n                rebootAction()\r\n              }}/>\r\n            )}\r\n\r\n            {/* История */}\r\n            <History/>\r\n\r\n            {/* Удаление и смена каналов. */}\r\n            <CustomControlSelect\r\n              handleSelectChange={async (event) => {\r\n                if (callStt) {\r\n                  if (event.value === \"stt\") {\r\n                    sttAction()\r\n                  } else if (event.value === \"delete\") {\r\n                    await dispatch(callAction({\r\n                      id: callInfo.id,\r\n                      data: {\r\n                        action: event.value,\r\n                        engine: callStt.engine,\r\n                        keep_fragments: false\r\n                      }\r\n                    }));\r\n                    dispatch(callsSlice.actions.deleteCall({id: callInfo.id, bundleIndex: bundleIndex}));\r\n                    dispatch(langSlice.actions.setSnackbar({\r\n                      type: \"success\",\r\n                      text: \"Звонок удален\",\r\n                      value: true,\r\n                      time: 1500\r\n                    }));\r\n                  } else if (event.value === \"swap_channels\") {\r\n                    if (callStt) {\r\n                      dispatch(callsSlice.actions.setStt({\r\n                        stt: null,\r\n                        id: callInfo.id,\r\n                        index: bundleIndex\r\n                      }));\r\n\r\n                      await dispatch(callAction({\r\n                        id: callInfo.id,\r\n                        data: {\r\n                          action: event.value,\r\n                          engine: callStt.engine,\r\n                          keep_fragments: false\r\n                        }\r\n                      }));\r\n                      const newCallSttData = await dispatch(getCallStt({id: callInfo.id}));\r\n                      await dispatch(callsSlice.actions.setStt({\r\n                        // @ts-ignore\r\n                        stt: newCallSttData.payload,\r\n                        id: callInfo.id,\r\n                        index: bundleIndex\r\n                      }));\r\n                      dispatch(langSlice.actions.setSnackbar({\r\n                        type: \"success\",\r\n                        text: \"Каналы поменяны местами\",\r\n                        value: true,\r\n                        time: 2000\r\n                      }));\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              svg={\"vertical\"}\r\n              options={callActionSelectConverter(callInfo.allowedActions)}\r\n              optionsPosition={\"bottom\"}\r\n            />\r\n          </div>\r\n\r\n          {/* Params block*/}\r\n          <BlockBox width={'auto'} height={'auto'} padding={'24px'} margin={'24px 14px 24px 24px'} borderRadius={'10px'}\r\n            boxShadow={'0px 0px 4px rgba(98, 98, 98, 0.22)'}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '12px' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <Typography className={classes.typographyTitle}>Сотрудник:</Typography>\r\n                <Typography style={{ color: '#1B202B' }}>{callInfo.operatorPhone}</Typography>\r\n              </div>\r\n              <CallSvg />\r\n            </div>\r\n            <div style={{ display: 'flex', marginBottom: '12px' }}>\r\n              <Typography className={classes.typographyTitle}>Клиент:</Typography>\r\n              <Typography style={{ color: '#1B202B' }}>{callInfo.clientPhone}</Typography>\r\n            </div>\r\n            <div style={{ display: 'flex' }}>\r\n              <Typography className={classes.typographyTitle}>Дата и время:</Typography>\r\n              <Typography style={{ color: '#1B202B' }}>{callInfo.callTimeReadable}</Typography>\r\n            </div>\r\n          </BlockBox>\r\n\r\n        </div>\r\n      </div>\r\n      <ModalWindow\r\n        isMWOpen={isOpen}\r\n        handleMWClose={handleMWClose}\r\n        text={\"Параметры перераспознования\"}\r\n        width={'400px'}\r\n      >\r\n        <ToggleButtonGroup\r\n          style={{marginTop: '15px'}}\r\n          value={sttForm.engine}\r\n          exclusive\r\n          onChange={() => {\r\n          }}\r\n        >\r\n          <ToggleButton\r\n            value={\"imot\"}\r\n            onClick={() => {\r\n              setSttForm({...sttForm, engine: \"imot\"})\r\n            }}\r\n          >\r\n            <img src={Logo} alt=\"\"/>\r\n          </ToggleButton>\r\n\r\n          <ToggleButton\r\n            value={\"yandex\"}\r\n            onClick={() => {\r\n              setSttForm({...sttForm, engine: \"yandex\"})\r\n            }}\r\n          >\r\n            <img src={Yandex} width={60} alt=\"\"/>\r\n          </ToggleButton>\r\n        </ToggleButtonGroup>\r\n\r\n        <div style={{display: 'flex', margin: '15px 0'}}>\r\n          <CustomCheckbox\r\n            style={{marginRight: '10px'}}\r\n            onClick={(event) => {\r\n              setSttForm({...sttForm, keepFragments: !sttForm.keepFragments})\r\n            }}\r\n            checked={sttForm.keepFragments}\r\n          />\r\n          <Typography style={{cursor: \"pointer\"}}>\r\n            Сохранять фрагменты\r\n          </Typography>\r\n        </div>\r\n        <div>\r\n          <LoadingButton\r\n            loading={MWButtonLoading}\r\n            style={{marginRight: '15px'}}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={sttActionSubmit}\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n          <LoadingButton\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleMWClose}\r\n          >\r\n            {translate(\"cancelButton\", language)}\r\n          </LoadingButton>\r\n        </div>\r\n      </ModalWindow>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\n\r\nexport default CallBody;","import React, {memo, useEffect, useRef, useState} from 'react';\r\nimport {Skeleton, Typography} from \"@mui/material\";\r\nimport {styled} from '@mui/material/styles';\r\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport MuiAccordion, {AccordionProps} from '@mui/material/Accordion';\r\nimport MuiAccordionSummary, {\r\n  AccordionSummaryProps,\r\n} from '@mui/material/AccordionSummary';\r\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport Grid from '@mui/material/Grid';\r\nimport Stack from '@mui/material/Stack';\r\nimport {TwoTags, Fragment} from \"../../components/common/Tag\";\r\nimport {CallInfoType, CallSttType, CallTagType} from \"../../store/calls/calls.types\";\r\nimport CallBody from \"./Body/CallBody\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {callsSlice, getAndSetCallAudio, getAndSetCallStt} from \"../../store/calls/calls.slice\";\r\nimport {useAppSelector} from \"../../hooks/redux\";\r\nimport {RootState} from \"../../store/store\";\r\nimport {translate} from \"../../localizations\";\r\nimport CustomCheckbox from \"../../components/common/Checkbox\";\r\n\r\n\r\nconst Accordion = styled((props: AccordionProps) => (\r\n  <MuiAccordion\r\n    disableGutters\r\n    TransitionProps={{unmountOnExit: true, timeout: 0}}\r\n    elevation={0} {...props}\r\n  />\r\n))(({theme}) => ({\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  '&:not(:last-child)': {},\r\n  borderBottom: 0,\r\n  '&:before': {\r\n    display: 'none',\r\n  },\r\n}));\r\n\r\nconst AccordionSummary = styled((props: AccordionSummaryProps) => (\r\n  <MuiAccordionSummary\r\n    expandIcon={<ArrowForwardIosSharpIcon sx={{fontSize: '0.9rem'}}/>}\r\n    {...props}\r\n  />\r\n))(({theme}) => ({\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(255, 255, 255, .05)'\r\n      : 'rgba(0, 0, 0, .03)',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({theme}) => ({\r\n  padding: theme.spacing(2),\r\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\nconst CallSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"17\" height=\"17\" viewBox=\"0 0 17 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M15.4696 1.03022C15.6103 1.17087 15.6893 1.36164 15.6893 1.56055V5.38897C15.6893 5.80319 15.3535 6.13897 14.9393 6.13897C14.5251 6.13897 14.1893 5.80319 14.1893 5.38897V3.37121L11.0303 6.53022C10.7374 6.82311 10.2625 6.82311 9.9696 6.53022C9.6768 6.23732 9.6768 5.76245 9.9696 5.46956L13.1287 2.31055H11.1109C10.6967 2.31055 10.3609 1.97476 10.3609 1.56055C10.3609 1.14633 10.6967 0.810547 11.1109 0.810547H14.9393C15.1382 0.810547 15.329 0.889567 15.4696 1.03022Z\"\r\n        fill=\"#73D13D\"/>\r\n      <path\r\n        d=\"M1.00005 6.86077C2.91645 11.0346 6.32648 14.3531 10.566 16.1521L11.2456 16.4549C12.8004 17.1477 14.6282 16.6214 15.5765 15.2079L16.4646 13.8842C16.7533 13.4538 16.6654 12.8741 16.2621 12.5487L13.2502 10.1189C12.8078 9.76204 12.1573 9.84524 11.8189 10.3018L10.8872 11.5591C8.49637 10.3797 6.55528 8.43874 5.37595 6.04792L6.63317 5.1162C7.08987 4.77778 7.17298 4.12726 6.81608 3.68488L4.38622 0.672942C4.06087 0.269662 3.48137 0.181692 3.051 0.470262L1.71816 1.36396C0.295825 2.31766 -0.227555 4.16051 0.481175 5.71946L0.999265 6.85908L1.00005 6.86077Z\"\r\n        fill=\"#A3AEBE\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype CallStubMiddlewarePropsType = {\r\n  callInfo: CallInfoType | null,\r\n  callAudio: string | null,\r\n  callStt: CallSttType | null,\r\n  bundleIndex: number | null,\r\n\r\n  expanded: boolean,\r\n  handleExpandedChange: (panel: string | false) => void,\r\n  solo?: boolean,\r\n  setLastElement?: any\r\n};\r\n\r\n\r\nconst CallStubMiddleware = memo((\r\n  {\r\n    callInfo,\r\n    callAudio,\r\n    callStt = null,\r\n    bundleIndex,\r\n    expanded,\r\n    handleExpandedChange,\r\n    solo,\r\n    setLastElement\r\n  }: CallStubMiddlewarePropsType) => {\r\n  const useStyles = makeStyles(({\r\n    accordion: {\r\n      backgroundColor: '#ffffff !important',\r\n      borderTop: '2px solid #F8FAFC !important',\r\n      padding: '18px 24px 10px 24px !important',\r\n      cursor: 'default !important',\r\n      '& .MuiAccordionSummary-content': {\r\n        margin: '0 !important',\r\n      },\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'flex-start !important',\r\n      '& .MuiAccordionSummary-expandIconWrapper .MuiSvgIcon-root': {\r\n        margin: '25px !important',\r\n        position: 'relative',\r\n        fill: '#818D9F',\r\n        transform: 'rotate(90deg)',\r\n        cursor: 'pointer'\r\n      },\r\n      '&.Mui-disabled': {\r\n        opacity: '1 !important'\r\n      }\r\n    },\r\n    slave: {\r\n      position: 'absolute',\r\n      top: '35px',\r\n      right: '40px',\r\n      borderRadius: '5px',\r\n      width: '32px',\r\n      height: '32px',\r\n      backgroundColor: '#E3E8EF',\r\n    },\r\n    callInner: {},\r\n    employee: {\r\n      display: 'flex',\r\n      alignItems: 'center'\r\n    },\r\n    employeeText: {\r\n      marginRight: '20px !important',\r\n      minWidth: '40px !important'\r\n    },\r\n    callDateBox: {\r\n      display: 'flex',\r\n      marginTop: '8px'\r\n    },\r\n    callDate: {\r\n      marginRight: '5px !important',\r\n      color: '#738094 !important'\r\n    },\r\n    callTime: {\r\n      color: '#738094 !important'\r\n    },\r\n    callDurationBox: {\r\n      marginTop: '8px'\r\n    },\r\n    callDuration: {\r\n      color: '#738094 !important'\r\n    },\r\n    callMNumberBox: {\r\n      minWidth: '120px',\r\n    },\r\n    callMNumber: {\r\n      fontSize: '15px !important'\r\n    },\r\n    callTagsTitle: {\r\n      color: '#738094 !important',\r\n      minWidth: '120px',\r\n      fontSize: '12px !important',\r\n    },\r\n    accordionDetails: {\r\n      backgroundColor: '#F8FAFC',\r\n      border: 'none',\r\n    },\r\n\r\n    '@media (width: 1024px)': {\r\n      callInner: {\r\n        display: 'block',\r\n      }\r\n    }\r\n  }));\r\n\r\n  const classes = useStyles()\r\n\r\n  // Заглушки пока не пришли звонки с сервака.\r\n  if (!callInfo) {\r\n    return (\r\n      <Accordion style={{border: 'none', zIndex: '1'}}>\r\n        {/* Первичная информация о звонке. */}\r\n        <AccordionSummary className={classes.accordion} disabled>\r\n          <Grid container className={classes.callInner}>\r\n            <div style={{textAlign: 'center', margin: '12px 12px 0 0'}}>\r\n              <CustomCheckbox\r\n                checked={false}\r\n                onChange={() => {\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {/* Сотрудник. */}\r\n            <Grid item xs={1.8} style={{minWidth: '145px'}}>\r\n              {/* Имя и фамилия. */}\r\n              <div className={classes.employee}>\r\n                <Skeleton width={108} height={20} variant=\"text\"/>\r\n                <CallSvg style={{marginLeft: '35px'}}/>\r\n              </div>\r\n              {/* Дата звонка.*/}\r\n              <div className={classes.callDateBox}>\r\n                <Skeleton width={147} height={20} variant=\"text\"/>\r\n              </div>\r\n            </Grid>\r\n\r\n            {/* Клиент. */}\r\n            <Grid item xs={1.5} className={classes.callMNumberBox}>\r\n              {/* Номер телефона. */}\r\n              <Skeleton style={{maxWidth: '100px'}} width={108} height={20} variant=\"text\"/>\r\n              {/* Время звонка. */}\r\n              <div className={classes.callDurationBox}>\r\n                <Skeleton width={147} height={20} variant=\"text\"/>\r\n              </div>\r\n            </Grid>\r\n\r\n            <Grid item xs={6.7}>\r\n\r\n              {/* Теги */}\r\n              <div style={{display: 'flex'}}>\r\n                <Typography className={classes.callTagsTitle}>Теги звонка</Typography>\r\n                <div style={{width: '100%'}}>\r\n                  <Skeleton style={{maxWidth: '500px', margin: '0 0 10px 10px'}} height={20} variant=\"text\"/>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Фрагменты */}\r\n              <div style={{display: 'flex'}}>\r\n                <Typography className={classes.callTagsTitle}>Теги фрагмента</Typography>\r\n                <div style={{width: '100%'}}>\r\n                  <Skeleton style={{maxWidth: '500px', margin: '0 0 20px 10px'}} height={20} variant=\"text\"/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={classes.slave}>\r\n\r\n              </div>\r\n            </Grid>\r\n\r\n          </Grid>\r\n        </AccordionSummary>\r\n      </Accordion>\r\n    );\r\n  }\r\n  return (\r\n    <Call\r\n      callInfo={callInfo}\r\n      callAudio={callAudio}\r\n      callStt={callStt}\r\n      bundleIndex={bundleIndex}\r\n      handleExpandedChange={handleExpandedChange}\r\n      expanded={expanded}\r\n      solo={solo}\r\n      setLastElement={setLastElement}\r\n    />\r\n  )\r\n});\r\n\r\n\r\ntype CallPropsType = {\r\n  callInfo: CallInfoType,\r\n  callAudio: string | null,\r\n  callStt: CallSttType | null,\r\n  bundleIndex: number | null,\r\n\r\n  expanded: boolean,\r\n  handleExpandedChange: (panel: string | false) => void,\r\n  solo?: boolean,\r\n  setLastElement?: any\r\n};\r\n\r\n// конвертирует время для показа\r\nexport const timeConverter = (s: number, hoursIsDisplay: boolean) => {\r\n  const pad = (n: number) => {\r\n    return ('00' + n).slice(-2);\r\n  };\r\n  let ms = s % 1000;\r\n  s = (s - ms) / 1000;\r\n  let secs = s % 60;\r\n  s = (s - secs) / 60;\r\n  let mins = s % 60;\r\n  let hrs = (s - mins) / 60;\r\n  if (hoursIsDisplay) {\r\n    return `${pad(hrs)}:${pad(mins)}:${pad(secs)}`;\r\n  }\r\n  return `${pad(mins)}:${pad(secs)}`;\r\n};\r\n\r\nfunction areEqual(prevProps: CallPropsType, nextProps: CallPropsType) {\r\n  return prevProps.callAudio === nextProps.callAudio && prevProps.callStt === nextProps.callStt && prevProps.expanded === nextProps.expanded;\r\n}\r\n\r\nconst Call = memo((props: CallPropsType) => {\r\n  console.log(props);\r\n  const useStyles = makeStyles(({\r\n    accordion: {\r\n      border: 'none !important',\r\n      zIndex: '1 !important'\r\n    },\r\n    accordionSummary: {\r\n      // @ts-ignore\r\n      position: `sticky !important`,\r\n      top: '0 !important',\r\n      // @ts-ignore\r\n      userSelect: 'auto !important',\r\n      zIndex: '100 !important',\r\n      backgroundColor: '#ffffff !important',\r\n      borderTop: '2px solid #F8FAFC !important',\r\n      padding: '18px 24px 10px 24px !important',\r\n      cursor: 'default !important',\r\n      '& .MuiAccordionSummary-content': {\r\n        margin: '0 !important',\r\n      },\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'flex-start !important',\r\n      '& .MuiAccordionSummary-expandIconWrapper .MuiSvgIcon-root': {\r\n        margin: '25px !important',\r\n        position: 'relative',\r\n        fill: '#818D9F',\r\n        transform: 'rotate(90deg)',\r\n        cursor: 'pointer'\r\n      },\r\n      '&.Mui-disabled': {\r\n        opacity: '1 !important'\r\n      }\r\n    },\r\n    slave: {\r\n      position: 'absolute',\r\n      top: '35px',\r\n      right: '40px',\r\n      borderRadius: '5px',\r\n      width: '32px',\r\n      height: '32px',\r\n      backgroundColor: '#E3E8EF',\r\n    },\r\n    callInner: {\r\n      display: 'flex',\r\n      ['@media (max-width:1024px)']: { // eslint-disable-line no-useless-computed-key\r\n        display: 'block',\r\n      }\r\n    },\r\n    callEmAndCl: {\r\n      display: 'flex'\r\n    },\r\n    employee: {\r\n      minWidth: '200px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    employeeText: {\r\n      fontSize: '14px !important',\r\n      marginRight: '20px !important',\r\n      minWidth: '40px !important'\r\n    },\r\n    tagsAndFragmentsBlock: {\r\n      ['@media (max-width:1024px)']: { // eslint-disable-line no-useless-computed-key\r\n        marginTop: '10px'\r\n      }\r\n    },\r\n    callDateBox: {\r\n      display: 'flex',\r\n      marginTop: '8px'\r\n    },\r\n    callDate: {\r\n      marginRight: '5px !important',\r\n      color: '#738094 !important'\r\n    },\r\n    callTime: {\r\n      fontSize: '13px !important',\r\n      color: '#738094 !important'\r\n    },\r\n    callDurationBox: {\r\n      display: 'flex',\r\n      marginTop: '8px'\r\n    },\r\n    callDuration: {\r\n      fontSize: '14px !important',\r\n      color: '#738094 !important'\r\n    },\r\n    callMNumberBox: {\r\n      minWidth: '200px',\r\n    },\r\n    callMNumber: {\r\n      fontSize: '14px !important'\r\n    },\r\n    callTagsTitle: {\r\n      color: '#738094 !important',\r\n      minWidth: '120px',\r\n      fontSize: '12px !important',\r\n    },\r\n    accordionDetails: {\r\n      backgroundColor: '#F8FAFC',\r\n      border: 'none',\r\n      margin: '0px !important'\r\n    },\r\n    typographyTitle: {\r\n      fontSize: '14px !important',\r\n      color: '#2F3747 !important',\r\n      fontWeight: '700 !important',\r\n      marginRight: '5px !important'\r\n    },\r\n    activeFragment: {\r\n      backgroundColor: '#F5F5DC'\r\n    }\r\n  }));\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n  const selectedCalls = useAppSelector(state => state.calls.selectedCalls);\r\n\r\n  // устанавливает локальный bundle index\r\n  const [index, setIndex] = useState<null | number>(null);\r\n  useEffect(() => {\r\n    if (index === null) {\r\n      setIndex(props.bundleIndex);\r\n    }\r\n  }, [props.bundleIndex])\r\n\r\n  // устанавливает пришело ли аудио и stt.\r\n  const [isCallBodyData, setIsCallBodyData] = useState<boolean>(false);\r\n\r\n  // разделяет теги на теги и фрагменты\r\n  const tagsAndFragmentsSeparator = () => {\r\n    let tags = [];\r\n    let fragments = [];\r\n    for (let i = 0; i < props.callInfo.tags?.length; i++) {\r\n      // debugger\r\n      // if (props.callInfo.tags[i].tagType === 'api_callback') {\r\n      //   clientTags.push(props.callInfo.tags[i]);\r\n      // }{\r\n      if (props.callInfo.tags[i].fragment) {\r\n        fragments.push(props.callInfo.tags[i]);\r\n      } else {\r\n        tags.push(props.callInfo.tags[i]);\r\n      }\r\n\r\n    }\r\n    return {tags, fragments};\r\n  };\r\n  const tagsAndFragmentsArray = tagsAndFragmentsSeparator();\r\n\r\n  const scroll = (currentTarget: any) => {\r\n    if (currentTarget) {\r\n      setTimeout(() => {\r\n        const topValue = window.pageYOffset + currentTarget.getBoundingClientRect().top - 10;\r\n        window.scrollTo({\r\n          top: topValue,\r\n          behavior: \"smooth\"\r\n        });\r\n      }, 400);\r\n    }\r\n  }\r\n\r\n  const accordionSummary = useRef<any | null>(null);\r\n  const audioRef = useRef<any | null>(null);\r\n\r\n  useEffect(() => {\r\n    function onResize() {\r\n      if (accordionSummary.current && audioRef.current) {\r\n        audioRef.current.style.top = `${accordionSummary.current.offsetHeight}px`;\r\n      }\r\n    }\r\n    onResize()\r\n    window.addEventListener('resize', onResize)\r\n    return () => {\r\n      window.addEventListener('resize', onResize)\r\n    }\r\n  });\r\n\r\n  const activeFragmentRef = useRef<any>(null);\r\n  const prevActiveFragment = useRef<any>(null);\r\n\r\n  const audioPlayerRef = useRef<any>(props.callAudio);\r\n\r\n  const onFragmentClick = (activeFragment: CallTagType) => {\r\n    activeFragmentRef.current = activeFragment;\r\n    if (props.callStt) {\r\n      if (prevActiveFragment.current && prevActiveFragment.current !== activeFragment) {\r\n        const removeFragment = document.getElementById(`${prevActiveFragment.current.fragment}-phrase`);\r\n        if (removeFragment) {\r\n          removeFragment.classList.remove(classes.activeFragment);\r\n        }\r\n      }\r\n      const activePhrase = props.callStt.fragments.find(fragment => fragment.begin === activeFragment.fBegin && fragment.end === activeFragment.fEnd);\r\n      const allPhrases = document.getElementById(`${props.callInfo.id}`);\r\n      let activePhraseHtmlEl;\r\n      if (activePhrase) {\r\n        activePhraseHtmlEl = document.getElementById(`${activePhrase.id}-phrase`);\r\n      }\r\n      if (activePhraseHtmlEl && allPhrases) {\r\n        activePhraseHtmlEl.classList.add(classes.activeFragment);\r\n        activePhraseHtmlEl.scrollIntoView({\r\n          behavior: 'smooth',\r\n          block: 'center',\r\n        })\r\n      }\r\n      prevActiveFragment.current = activeFragment;\r\n      audioPlayerRef.current.audioEl.current.play();\r\n      audioPlayerRef.current.audioEl.current.currentTime = activeFragment.fBegin / 1000;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (activeFragmentRef.current && props.callAudio && props.callStt) {\r\n      onFragmentClick(activeFragmentRef.current);\r\n    }\r\n  }, [props.callAudio, props.callStt])\r\n\r\n\r\n  const checked = selectedCalls.length > 0 && selectedCalls.find(selectedCall => {\r\n    return selectedCall.callId === props.callInfo.id.toUpperCase();\r\n  })\r\n\r\n  return (\r\n    <Accordion\r\n      id={props.callInfo.id}\r\n      className={classes.accordion}\r\n      tabIndex={-1}\r\n      expanded={props.solo ? props.solo : props.expanded && isCallBodyData}\r\n    >\r\n      {/* Первичная информация о звонке. */}\r\n      <div ref={props.setLastElement}>\r\n        <div style={{position: 'sticky', top: '0', zIndex: '101'}} ref={accordionSummary}>\r\n          <AccordionSummary\r\n            id={'accordionSummary'}\r\n            className={classes.accordionSummary} tabIndex={-1}\r\n          >\r\n            <div style={{textAlign: 'center', margin: '12px 12px 0 0'}}>\r\n              <CustomCheckbox\r\n                checked={checked && (checked.callId === props.callInfo.id.toUpperCase())}\r\n                onChange={(event) => {\r\n                  if (event.currentTarget.checked) {\r\n                    dispatch(callsSlice.actions.pushSelectedCall({\r\n                      callId: props.callInfo.id,\r\n                      bundleIndex: props.bundleIndex\r\n                    }));\r\n                  } else {\r\n                    dispatch(callsSlice.actions.removeSelectedCall({\r\n                      callId: props.callInfo.id,\r\n                      bundleIndex: props.bundleIndex\r\n                    }));\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n            <div className={classes.callInner} onClick={async (e) => {\r\n              if (index || index === 0) {\r\n                if (!isCallBodyData) {\r\n                  props.handleExpandedChange(props.callInfo.id);\r\n                  dispatch(getAndSetCallAudio({id: props.callInfo.id, bundleIndex: index}));\r\n                  dispatch(getAndSetCallStt({id: props.callInfo.id, bundleIndex: index}));\r\n                  await setIsCallBodyData(true);\r\n                } else {\r\n                  dispatch(callsSlice.actions.removeAudio({id: props.callInfo.id, bundleIndex: index}));\r\n                  setIsCallBodyData(false);\r\n                  if (audioPlayerRef.current) {\r\n                    audioPlayerRef.current.audioEl.current.currentTime = 0;\r\n                    prevActiveFragment.current = null;\r\n                    activeFragmentRef.current = null;\r\n                  }\r\n                  props.handleExpandedChange(false);\r\n                }\r\n                scroll(e.target);\r\n              }\r\n            }}>\r\n\r\n              <div className={classes.callEmAndCl}>\r\n                {/* Сотрудник. */}\r\n                <div>\r\n\r\n                  {/* Имя и фамилия. */}\r\n                  <div className={classes.employee}>\r\n                    <Typography className={classes.typographyTitle}>{translate(\"callsEmployee\", language)}:</Typography>\r\n                    <Typography className={classes.employeeText}>\r\n                      {props.callInfo.operatorPhone}\r\n                    </Typography>\r\n                    <CallSvg/>\r\n                  </div>\r\n\r\n                  {/* Дата звонка.*/}\r\n                  <div className={classes.callDateBox}>\r\n                    <Typography className={classes.typographyTitle}>{translate(\"callsTime\", language)}:</Typography>\r\n                    <Typography className={classes.callDate}>\r\n                      {props.callInfo.callTimeReadable}\r\n                    </Typography>\r\n                  </div>\r\n\r\n                  {/*<div>*/}\r\n                  {/*  {tagsAndFragmentsArray.clientTags.map(tag => {*/}\r\n                  {/*    return (*/}\r\n                  {/*      <div style={{margin: 0, display: 'flex'}}>*/}\r\n                  {/*        <TwoTagsMini title={tag.name} body={tag.value}/>*/}\r\n                  {/*      </div>*/}\r\n                  {/*    )*/}\r\n                  {/*  })}*/}\r\n                  {/*</div>*/}\r\n\r\n                </div>\r\n\r\n                {/* Клиент. */}\r\n                <div className={classes.callMNumberBox}>\r\n                  {/* Номер телефона. */}\r\n                  <div style={{display: 'flex'}}>\r\n                    <Typography className={classes.typographyTitle}>{translate(\"callsCustomer\", language)}:</Typography>\r\n                    <Typography className={classes.callMNumber}>\r\n                      {props.callInfo.clientPhone}\r\n                    </Typography>\r\n                  </div>\r\n\r\n                  {/* Время звонка. */}\r\n                  <div className={classes.callDurationBox}>\r\n                    <Typography className={classes.typographyTitle}>{translate(\"callsDuration\", language)}:</Typography>\r\n                    <Typography className={classes.callDuration}>\r\n                      {timeConverter(props.callInfo.duration, true)}\r\n                    </Typography>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={classes.tagsAndFragmentsBlock}>\r\n                {/* Tags */}\r\n                <div style={{display: 'flex'}}>\r\n                  <Typography className={classes.callTagsTitle}>{translate(\"callsTags\", language)}</Typography>\r\n                  <Stack direction=\"row\" style={{flexWrap: 'wrap', width: '200px !important'}}>\r\n                    {tagsAndFragmentsArray.tags.map((tag: CallTagType) => {\r\n                      return (\r\n                        <div style={{margin: 0, display: 'flex'}}>\r\n                          <TwoTags title={tag.name} body={tag.value}/>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </Stack>\r\n                </div>\r\n\r\n                {/* Fragments */}\r\n                {tagsAndFragmentsArray.fragments.length > 0 &&\r\n                <div style={{display: 'flex'}}>\r\n                  <Typography className={classes.callTagsTitle}>{translate(\"callsFragments\", language)}</Typography>\r\n                  <Stack direction=\"row\" style={{flexWrap: 'wrap', width: '200px !important'}}>\r\n\r\n                    {tagsAndFragmentsArray.fragments.map((tag: CallTagType) => {\r\n                      return (\r\n                        <div\r\n                          onClick={async (event) => {\r\n                            if (!props.expanded) {\r\n                              await props.handleExpandedChange(props.callInfo.id);\r\n                            } else {\r\n                              event.stopPropagation();\r\n                            }\r\n                            onFragmentClick(tag);\r\n                          }}\r\n                        >\r\n                          <Fragment matchData={tag.matchData}>{tag.name}</Fragment>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </Stack>\r\n                </div>\r\n                }\r\n                <div className={classes.slave}>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n          </AccordionSummary>\r\n        </div>\r\n      </div>\r\n      {/* Основная информация о звонке. */}\r\n      <AccordionDetails className={classes.accordionDetails}>\r\n        <CallBody\r\n          onFragmentClick={onFragmentClick}\r\n          audioRef={audioRef}\r\n          callInfo={props.callInfo}\r\n          callAudio={props.callAudio}\r\n          callStt={props.callStt}\r\n          fragments={tagsAndFragmentsArray.fragments}\r\n          bundleIndex={props.bundleIndex}\r\n          expanded={props.expanded}\r\n          audioPlayerRef={audioPlayerRef}\r\n\r\n          setIsCallBodyData={setIsCallBodyData}\r\n\r\n          prevActiveFragment={prevActiveFragment}\r\n          activeFragmentRef={activeFragmentRef}\r\n        />\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  );\r\n}, areEqual)\r\n\r\nexport default CallStubMiddleware;\r\n","import React, {FC, useState} from 'react';\r\nimport {Typography} from \"@mui/material\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport {useAppSelector} from \"../../hooks/redux\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {RootState} from \"../../store/store\";\r\nimport {translate} from \"../../localizations\";\r\nimport {\r\n  callsAction,\r\n  callsSlice, deleteCall,\r\n  getActionFiles, getAndSetCallInfo, getAndSetCallStt,\r\n  getBaseCallsData, getTask,\r\n  SelectedCallType\r\n} from \"../../store/calls/calls.slice\";\r\nimport {DownloadOnClick} from \"../../components/common/Buttons/Download\";\r\nimport Reboot from \"../../components/common/Buttons/Reboot\";\r\nimport IconButton from \"../../components/common/IconButton\";\r\nimport CustomControlSelect from \"../../components/common/Selects/CustomControlSelect\";\r\nimport {langSlice} from \"../../store/lang/lang.slice\";\r\nimport ContainedSelect from \"../../components/common/Selects/ContainedSelect\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport {current} from \"@reduxjs/toolkit\";\r\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\r\nimport ToggleButton from \"@mui/material/ToggleButton\";\r\nimport Logo from \"../../assets/images/logo.png\";\r\nimport Yandex from \"../../assets/images/yandex_PNG20.png\";\r\nimport CustomCheckbox from \"../../components/common/Checkbox\";\r\nimport {LoadingButton} from \"@mui/lab\";\r\nimport ModalWindow from \"../../components/common/ModalWindowBox\";\r\n\r\nconst useStyles = makeStyles(({\r\n  callsHeader: {\r\n\r\n    background: '#fff',\r\n    borderRadius: '10px 10px 0 0'\r\n  },\r\n  callsTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: '20px 12px 20px 24px'\r\n  },\r\n  callsCols: {\r\n    borderTop: '2px solid #F8FAFC',\r\n    padding: '16px 24px',\r\n  },\r\n  callsTitleText: {\r\n    fontWeight: '700 !important'\r\n  }\r\n}))\r\n\r\nconst ClockSvg = (props: React.SVGProps<SVGSVGElement>) => (\r\n  <svg width=\"20\" height=\"19\" viewBox=\"0 0 20 19\" fill={props.fill ? props.fill : '#738094'}\r\n       xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path\r\n      d=\"M4.53033 0.469667C4.82322 0.762557 4.82322 1.23744 4.53033 1.53033L2.03033 4.03033C1.73744 4.32322 1.26256 4.32322 0.969667 4.03033C0.676778 3.73744 0.676778 3.26256 0.969667 2.96967L3.46967 0.469667C3.76256 0.176778 4.23744 0.176778 4.53033 0.469667Z\"\r\n      fill=\"#738094\"/>\r\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n          d=\"M10 1.5C5.30558 1.5 1.5 5.30558 1.5 10C1.5 14.6944 5.30558 18.5 10 18.5C14.6944 18.5 18.5 14.6944 18.5 10C18.5 5.30558 14.6944 1.5 10 1.5ZM10.75 5C10.75 4.58579 10.4142 4.25 10 4.25C9.5858 4.25 9.25 4.58579 9.25 5V10C9.25 10.2586 9.3832 10.4989 9.6025 10.636L12.6025 12.511C12.9538 12.7305 13.4165 12.6238 13.636 12.2725C13.8555 11.9212 13.7488 11.4585 13.3975 11.239L10.75 9.5843V5Z\"\r\n          fill=\"#738094\"/>\r\n    <path\r\n      d=\"M15.4697 1.53033C15.1768 1.23744 15.1768 0.762557 15.4697 0.469667C15.7626 0.176778 16.2374 0.176778 16.5303 0.469667L19.0303 2.96967C19.3232 3.26256 19.3232 3.73744 19.0303 4.03033C18.7374 4.32322 18.2626 4.32322 17.9697 4.03033L15.4697 1.53033Z\"\r\n      fill=\"#738094\"/>\r\n  </svg>\r\n);\r\n\r\nconst ArrowsSvg = (props: React.SVGProps<SVGSVGElement>) => (\r\n  <svg width=\"6\" height=\"12\" viewBox=\"0 0 6 12\" fill={props.fill ? props.fill : '#738094'}\r\n       xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n    <path\r\n      d=\"M2.56736 0.75C2.75981 0.416667 3.24094 0.416667 3.43339 0.75L5.16544 3.75C5.35789 4.08333 5.11733 4.5 4.73243 4.5H1.26832C0.883424 4.5 0.642861 4.08333 0.835311 3.75L2.56736 0.75Z\"/>\r\n    <path\r\n      d=\"M3.43264 11.25C3.24019 11.5833 2.75906 11.5833 2.56661 11.25L0.834562 8.25C0.642112 7.91667 0.882675 7.5 1.26757 7.5H4.73168C5.11658 7.5 5.35714 7.91667 5.16469 8.25L3.43264 11.25Z\"/>\r\n  </svg>\r\n);\r\n\r\ntype CallsHeaderPropsType = {\r\n  found?: any,\r\n  total?: any,\r\n  switchTitleFound: boolean\r\n};\r\n\r\nconst CallsHeader: FC<CallsHeaderPropsType> = React.memo((\r\n  {\r\n    found,\r\n    total,\r\n    switchTitleFound\r\n  }\r\n) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const foundUseApp = useAppSelector(state => state.calls.found);\r\n  const totalUseApp = useAppSelector(state => state.calls.total);\r\n\r\n  const currentUser = useAppSelector(state => state.users.currentUser);\r\n  const selectedCalls = useAppSelector(state => state.calls.selectedCalls);\r\n\r\n  const calls = useAppSelector(state => state.calls.calls);\r\n\r\n  const sortParams = useAppSelector(state => state.calls.sort);\r\n  const sortArray = [\r\n    {value: \"date\", label: translate(\"date\", language)},\r\n    {value: \"duration\", label: translate(\"duration\", language)},\r\n    {value: \"grade\", label: translate(\"grade\", language)}\r\n  ];\r\n\r\n  function selectedCallsConverter(selectedCalls: SelectedCallType[]) {\r\n    return selectedCalls.map(call => call.callId);\r\n  }\r\n\r\n\r\n  async function superMegaUltraHardFunction(selectedCalls: SelectedCallType[]) {\r\n    await selectedCalls.forEach(async (selectedCall) => {\r\n      await dispatch(getAndSetCallInfo({id: selectedCall.callId, bundleIndex: selectedCall.bundleIndex}));\r\n      await dispatch(getAndSetCallStt({id: selectedCall.callId, bundleIndex: selectedCall.bundleIndex}));\r\n    });\r\n  }\r\n\r\n  type SttFormType = {\r\n    engine: \"yandex\" | \"imot\",\r\n    keepFragments: boolean\r\n  }\r\n\r\n  const [sttForm, setSttForm] = useState<SttFormType>({\r\n    engine: \"imot\",\r\n    keepFragments: false\r\n  });\r\n\r\n  const [MWButtonLoading, setMWButtonLoading] = useState<boolean>(false);\r\n\r\n  const [isMWOpen, setMWOpen] = useState<boolean>(false)\r\n  function handleMWClose() {\r\n    setMWOpen(false);\r\n  }\r\n  function handleMWOpen() {\r\n    setMWOpen(true);\r\n  }\r\n\r\n  // calls buttons\r\n  async function downloadAction() {\r\n    if (currentUser) {\r\n      const action = \"audio_archive\";\r\n      const taskIdData = await dispatch(callsAction({\r\n        action: action,\r\n        engine: \"imot\",\r\n        keep_fragments: false,\r\n        call_ids: selectedCallsConverter(selectedCalls),\r\n      }));\r\n      // @ts-ignore\r\n      const taskPayload = taskIdData.payload;\r\n      if (taskPayload) {\r\n        const taskId = taskPayload.data.task_id;\r\n        await dispatch(getActionFiles({taskId, action}));\r\n      } else {\r\n        dispatch(langSlice.actions.setSnackbar({\r\n          type: \"info\",\r\n          text: \"Выберите звонки\",\r\n          value: true,\r\n          time: 2000\r\n        }));\r\n      }\r\n    }\r\n  }\r\n\r\n  async function excelAction() {\r\n    if (currentUser) {\r\n      const action = \"stt_export\";\r\n      const taskIdData = await dispatch(callsAction({\r\n        action: action,\r\n        engine: \"imot\",\r\n        keep_fragments: false,\r\n        call_ids: selectedCallsConverter(selectedCalls),\r\n      }));\r\n      // @ts-ignore\r\n      const taskPayload = taskIdData.payload;\r\n      if (taskPayload) {\r\n        const taskId = taskPayload.data.task_id;\r\n        await dispatch(getActionFiles({taskId, action}));\r\n      } else {\r\n        dispatch(langSlice.actions.setSnackbar({\r\n          type: \"info\",\r\n          text: \"Выберите звонки\",\r\n          value: true,\r\n          time: 2000\r\n        }));\r\n      }\r\n    }\r\n  }\r\n\r\n  async function rebootAction() {\r\n    if (currentUser) {\r\n      const action = \"analyze\";\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"info\",\r\n        text: \"Запрос отправлен\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n      const taskIdData = await dispatch(callsAction({\r\n        action: action,\r\n        engine: \"imot\",\r\n        keep_fragments: false,\r\n        call_ids: selectedCallsConverter(selectedCalls),\r\n      }));\r\n      // @ts-ignore\r\n      const taskPayload = taskIdData.payload;\r\n      if (taskPayload) {\r\n        const taskId = taskPayload.data.task_id;\r\n        await dispatch(getTask(taskId));\r\n        superMegaUltraHardFunction(selectedCalls);\r\n      } else {\r\n        dispatch(langSlice.actions.setSnackbar({\r\n          type: \"info\",\r\n          text: \"Выберите звонки\",\r\n          value: true,\r\n          time: 2000\r\n        }));\r\n      }\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"success\",\r\n        text: \"Звонки перераспознаны\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n    }\r\n  }\r\n\r\n  async function deleteAction() {\r\n    let callsLocal = [...cloneDeep(calls)];\r\n    dispatch(langSlice.actions.setSnackbar({\r\n      type: \"info\",\r\n      text: \"Запрос отправлен\",\r\n      value: true,\r\n      time: 2000\r\n    }));\r\n    for (const selectedCall of selectedCalls) {\r\n      if (selectedCall.bundleIndex || selectedCall.bundleIndex === 0) {\r\n        await dispatch(deleteCall(selectedCall.callId));\r\n        let currentCalls = callsLocal[selectedCall.bundleIndex];\r\n        const call = currentCalls.find(item => {\r\n          if (item.info) {\r\n            return item.info.id === selectedCall.callId;\r\n          }\r\n        })\r\n        let callIndex = -1;\r\n        if (call) {\r\n          callIndex = currentCalls.indexOf(call);\r\n        }\r\n        if (callIndex != -1) {\r\n          currentCalls.splice(callIndex, 1);\r\n        }\r\n        callsLocal[selectedCall.bundleIndex] = currentCalls\r\n      }\r\n    }\r\n    dispatch(callsSlice.actions.setCalls(callsLocal));\r\n    dispatch(callsSlice.actions.removeSelectedCalls(null));\r\n    dispatch(langSlice.actions.setSnackbar({\r\n      type: \"success\",\r\n      text: \"Звонки удалены\",\r\n      value: true,\r\n      time: 2000\r\n    }));\r\n  }\r\n\r\n  async function sttSubmit() {\r\n    handleMWOpen();\r\n  }\r\n\r\n  async function sttActionSubmit() {\r\n    if (currentUser) {\r\n      const action = \"stt\";\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"info\",\r\n        text: \"Запрос отправлен\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n      const taskIdData = await dispatch(callsAction({\r\n        action: action,\r\n        engine: sttForm.engine,\r\n        keep_fragments: sttForm.keepFragments,\r\n        call_ids: selectedCallsConverter(selectedCalls),\r\n      }));\r\n      // @ts-ignore\r\n      const taskPayload = taskIdData.payload;\r\n      if (taskPayload) {\r\n        const taskId = taskPayload.data.task_id;\r\n        await dispatch(getTask(taskId));\r\n        superMegaUltraHardFunction(selectedCalls);\r\n      } else {\r\n        dispatch(langSlice.actions.setSnackbar({\r\n          type: \"info\",\r\n          text: \"Выберите звонки\",\r\n          value: true,\r\n          time: 2000\r\n        }));\r\n      }\r\n    }\r\n  }\r\n\r\n  async function swapChannelsAction() {\r\n    const action = \"swap_channels\";\r\n    const taskIdData = await dispatch(callsAction({\r\n      action: action,\r\n      engine: \"imot\",\r\n      keep_fragments: false,\r\n      call_ids: selectedCallsConverter(selectedCalls),\r\n    }));\r\n    // @ts-ignore\r\n    const taskPayload = taskIdData.payload;\r\n    if (taskPayload) {\r\n      const taskId = taskPayload.data.task_id;\r\n      await dispatch(getTask(taskId));\r\n      superMegaUltraHardFunction(selectedCalls);\r\n    } else {\r\n      dispatch(langSlice.actions.setSnackbar({\r\n        type: \"info\",\r\n        text: \"Выберите звонки\",\r\n        value: true,\r\n        time: 2000\r\n      }));\r\n    }\r\n    dispatch(langSlice.actions.setSnackbar({\r\n      type: \"success\",\r\n      text: \"Каналы поменяны местами\",\r\n      value: true,\r\n      time: 2000\r\n    }));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.callsHeader}>\r\n      <div className={classes.callsTitle}>\r\n        <div>\r\n          {!switchTitleFound ?\r\n            <Typography className={classes.callsTitleText}>Найдено звонков {found ? found : foundUseApp} из {total ? total : totalUseApp}</Typography>\r\n            :\r\n            <Typography className={classes.callsTitleText}>Найдено {found ? found : foundUseApp} звонков</Typography>\r\n          }\r\n        </div>\r\n        <div style={{display: 'flex', alignItems: 'center'}}>\r\n          <div>\r\n            <ContainedSelect\r\n              width={\"150px\"}\r\n              onSelectChange={(event) => {\r\n                if (event.value === \"grade\") {\r\n                  dispatch(langSlice.actions.setSnackbar({\r\n                    type: \"error\",\r\n                    text: \"Этот вид сортировки пока не работает\",\r\n                    value: true,\r\n                    time: 2000\r\n                  }));\r\n                } else {\r\n                  dispatch(callsSlice.actions.setSort(event.value));\r\n                  dispatch(callsSlice.actions.zeroingSkip(null));\r\n                  dispatch(callsSlice.actions.setEmptyState({leaveBundles: 0}))\r\n                  if (event.value === \"duration\") {\r\n                    dispatch(getBaseCallsData({sort: event.value}))\r\n                  } else if (event.value === \"date\") {\r\n                    dispatch(getBaseCallsData({}))\r\n                  }\r\n                }\r\n              }}\r\n              options={sortArray}\r\n              value={{value: sortParams, label: translate(sortParams, language)}}\r\n            />\r\n          </div>\r\n\r\n          <div style={{display: 'flex', justifyContent: 'flex-end', alignItems: 'center', marginLeft: '20px'}}>\r\n            {/* Скачать */}\r\n            <DownloadOnClick onClick={() => {downloadAction().then()}}/>\r\n\r\n            {/* Excel export */}\r\n            <IconButton\r\n              onClick={() => {excelAction().then()}}\r\n              icon={\r\n                <Typography style={{fontSize: \"13px\"}}>ex</Typography>\r\n              }\r\n              margin={'0 15px 0 0'}\r\n              backgroundColor=\"#E3E8EF\"\r\n              tooltipTitle={\"Excel экспорт\"}\r\n              tooltipPlacement={\"top\"}\r\n            />\r\n\r\n            {/* Перераспознать */}\r\n            <Reboot onClick={() => {rebootAction().then()}}/>\r\n\r\n            {/* Удаление и смена каналов. */}\r\n            <CustomControlSelect\r\n              handleSelectChange={async (event) => {\r\n                if (event.value === \"delete\") deleteAction().then();\r\n                else if (event.value === \"stt\") sttSubmit().then();\r\n                else if (event.value === \"swap_channels\") swapChannelsAction().then();\r\n              }}\r\n              svg={\"vertical\"}\r\n              options={[\r\n                {value: 'delete', label: \"Удалить\"},\r\n                {value: \"swap_channels\" ,label: \"Поменять каналы местами\"},\r\n                {value: \"stt\", label: \"Перетегировать\"}\r\n              ]}\r\n              optionsPosition={\"bottom\"}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Grid container className={classes.callsCols}>\r\n        <Grid item xs={0.5} style={{minWidth: '50px', display: 'flex', alignItems: 'center'}}>\r\n          <span style={{marginRight: '15px'}}><ClockSvg/></span>\r\n          <ArrowsSvg/>\r\n        </Grid>\r\n\r\n        <Grid item xs={1.23} style={{minWidth: '100px', display: 'flex', alignItems: 'center'}}>\r\n          <Typography\r\n            style={{marginRight: '15px', fontWeight: '600'}}>{translate('callsEmployee', language)}</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={3.5} style={{minWidth: '130px', display: 'flex', alignItems: 'center'}}>\r\n          <Typography\r\n            style={{marginRight: '15px', fontWeight: '600'}}>{translate('callsCustomer', language)}</Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={1} style={{minWidth: '130px', display: 'flex', alignItems: 'center'}}>\r\n          <Typography style={{marginRight: '15px', fontWeight: '600'}}>{translate('callsTag', language)}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <ModalWindow\r\n        isMWOpen={isMWOpen}\r\n        handleMWClose={handleMWClose}\r\n        text={\"Параметры перераспознования\"}\r\n        width={'400px'}\r\n      >\r\n        <ToggleButtonGroup\r\n          style={{marginTop: '15px'}}\r\n          value={sttForm.engine}\r\n          exclusive\r\n          onChange={() => {\r\n          }}\r\n        >\r\n          <ToggleButton\r\n            value={\"imot\"}\r\n            onClick={() => {\r\n              setSttForm({...sttForm, engine: \"imot\"})\r\n            }}\r\n          >\r\n            <img src={Logo} alt=\"\"/>\r\n          </ToggleButton>\r\n\r\n          <ToggleButton\r\n            value={\"yandex\"}\r\n            onClick={() => {\r\n              setSttForm({...sttForm, engine: \"yandex\"})\r\n            }}\r\n          >\r\n            <img src={Yandex} width={60} alt=\"\"/>\r\n          </ToggleButton>\r\n        </ToggleButtonGroup>\r\n\r\n        <div style={{display: 'flex', margin: '15px 0'}}>\r\n          <CustomCheckbox\r\n            style={{marginRight: '10px'}}\r\n            onClick={(event) => {\r\n              setSttForm({...sttForm, keepFragments: !sttForm.keepFragments})\r\n            }}\r\n            checked={sttForm.keepFragments}\r\n          />\r\n          <Typography style={{cursor: \"pointer\"}}>\r\n            Сохранять фрагменты\r\n          </Typography>\r\n        </div>\r\n        <div>\r\n          <LoadingButton\r\n            loading={MWButtonLoading}\r\n            style={{marginRight: '15px'}}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={sttActionSubmit}\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n          <LoadingButton\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleMWClose}\r\n          >\r\n            {translate(\"cancelButton\", language)}\r\n          </LoadingButton>\r\n        </div>\r\n      </ModalWindow>\r\n\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default CallsHeader;","import React, {useEffect, useState, useRef} from 'react';\r\n\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {CircularProgress, Typography} from \"@mui/material\";\r\nimport {makeStyles} from '@mui/styles';\r\n\r\nimport {BlockBox, Search, СontrolBlock} from \"../../components/common\";\r\nimport {useAppSelector} from \"../../hooks/redux\";\r\nimport {callsSlice, getBaseCallsData} from \"../../store/calls/calls.slice\";\r\nimport {searchSlice} from '../../store/search/search.slice';\r\nimport {CallType} from \"../../store/calls/calls.types\";\r\nimport CallStubMiddleware from \"./Call\";\r\nimport {RootState} from \"../../store/store\";\r\nimport {translate} from \"../../localizations\";\r\nimport CallsHeader from './CallsHeader';\r\nimport {langSlice} from \"../../store/lang/lang.slice\";\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nconst Calls = React.memo(() => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const calls = useAppSelector<CallType[][]>(state => state.calls.calls);\r\n\r\n  const [callsLocal, setCallsLocal] = useState<CallType[][]>([]);\r\n\r\n  useEffect(() => {\r\n    if (callsLocal.length < 1) {\r\n      setCallsLocal(calls);\r\n    } else {\r\n      setCallsLocal(calls);\r\n    }\r\n  }, [calls]);\r\n  // const {language} = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [expanded, setExpanded] = React.useState<string | false>(false);\r\n  const handleExpandedChange = (callId: string | false) => {\r\n    setExpanded(callId);\r\n  };\r\n\r\n  const pushNewCalls = async () => {\r\n    setHasMore(false);\r\n    await dispatch(getBaseCallsData({}));\r\n    setHasMore(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.title = \"Звонки | IMOT.io\";\r\n    dispatch(langSlice.actions.setLoading(false));\r\n    if (calls.length < 2) {\r\n      pushNewCalls().then();\r\n    }\r\n    return () => {\r\n      dispatch(searchSlice.actions.setDefaultCriterias(null));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return history.listen((location) => {\r\n      if (location.pathname !== '/calls') {\r\n        dispatch(callsSlice.actions.setEmptyState({leaveBundles: 1}));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{cursor: 'default'}}>\r\n      <СontrolBlock/>\r\n      <Search pageName=\"Звонок\"/>\r\n      <BlockBox>\r\n        <CallsHeader switchTitleFound={false}/>\r\n\r\n        <div>\r\n          <InfiniteScroll\r\n            style={{overflow: \"hidden !important\"}}\r\n            dataLength={callsLocal.length}\r\n            next={pushNewCalls}\r\n            hasMore={hasMore}\r\n            loader={<CircularProgress color=\"primary\"/>}\r\n          >\r\n            {callsLocal.length !== 0 ?\r\n              callsLocal.map((callsArrays: CallType[]) => {\r\n                return (\r\n                  <div>\r\n                    {callsArrays.map((call: CallType) => {\r\n                      return (\r\n                        <div>\r\n                          <CallStubMiddleware\r\n                            callInfo={call.info}\r\n                            callAudio={call.audio}\r\n                            callStt={call.stt}\r\n                            bundleIndex={callsLocal.indexOf(callsArrays)}\r\n                            expanded={expanded === call.info?.id}\r\n                            handleExpandedChange={handleExpandedChange}\r\n                          />\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                )\r\n              })\r\n              :\r\n              <BlockBox padding={'24px'}><Typography>{translate('callsEmpty', \"ru\")}</Typography></BlockBox>\r\n            }\r\n          </InfiniteScroll>\r\n        </div>\r\n      </BlockBox>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Calls\r\n","export default __webpack_public_path__ + \"static/media/dashboard.1afdbca0.png\";","export default __webpack_public_path__ + \"static/media/sound.9f77644e.png\";","import React, { useEffect, useState } from 'react';\r\nimport ModalWindowBox from \"../../components/common/ModalWindowBox\";\r\nimport { IconButton, Typography } from \"@mui/material\";\r\nimport cn from \"classnames\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport Input from \"../../components/common/Input\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useFormik } from \"formik\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { translate } from \"../../localizations\";\r\n\r\nconst useStyles = makeStyles(({\r\n  mwTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '15px'\r\n  },\r\n  mwTitleText: {\r\n    fontWeight: '700 !important'\r\n  },\r\n  mwIconButton: {},\r\n  mwText: {\r\n    color: \"#738094 !important\",\r\n  },\r\n  mwHelp: {\r\n    marginBottom: '35px !important'\r\n  },\r\n  mwButtonBox: {\r\n    marginTop: '25px',\r\n    textAlign: 'right'\r\n  }\r\n}));\r\n\r\nconst ForgotPasswordModalWindow = ({ isOpen, handleClose }: any) => {\r\n  const classes = useStyles();\r\n  const [submitButtonDisabled, setSubmitButtonDisabled] = useState<boolean>(true);\r\n\r\n  const validate = (values: { email: string }) => {\r\n    if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\r\n      setSubmitButtonDisabled(true);\r\n    } else {\r\n      setSubmitButtonDisabled(false);\r\n    }\r\n  };\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n    },\r\n    validate,\r\n    onSubmit: async (values) => {\r\n      alert(values.email);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    formik.values.email = '';\r\n  }, [handleClose])\r\n\r\n  const { language } = useAppSelector(state => state.lang);\r\n\r\n  return (\r\n    <ModalWindowBox\r\n      isMWOpen={isOpen}\r\n      handleMWClose={handleClose}\r\n      text={\"Забыли пароль?\"}\r\n    >\r\n      <Typography className={cn(classes.mwHelp, classes.mwText)}>\r\n        Ввидите email для восстановление пароля,на него будет\r\n        выслано письмо.\r\n      </Typography>\r\n      <form onSubmit={formik.handleSubmit}>\r\n        <Input\r\n          name={\"email\"}\r\n          type={\"email\"}\r\n          handleChange={formik.handleChange}\r\n          value={formik.values.email}\r\n          bcColor={\"#EEF2F6\"}\r\n          label={\"Email\"}\r\n          autoComplete=\"off\"\r\n        />\r\n        <div className={classes.mwButtonBox}>\r\n          <LoadingButton\r\n            disabled={submitButtonDisabled}\r\n            type=\"submit\"\r\n            style={{ marginRight: '15px' }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n          <LoadingButton\r\n            onClick={handleClose}\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n          >\r\n            {translate(\"cancelButtonMW\", language)}\r\n          </LoadingButton>\r\n        </div>\r\n      </form>\r\n    </ModalWindowBox>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordModalWindow;","import React, { useState } from 'react';\r\n\r\nimport { IconButton, Typography } from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport MuiPhoneNumber from 'mui-phone-number';\r\nimport { Form, Formik } from \"formik\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport cn from \"classnames\";\r\n\r\nimport { registerNewUser } from '../../store/auth/auth.slice';\r\nimport ModalWindowBox from \"../../components/common/ModalWindowBox\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport Input from \"../../components/common/Input\";\r\nimport { translate } from \"../../localizations\";\r\n\r\nconst useStyles = makeStyles(({\r\n  mwTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '15px'\r\n  },\r\n  mwTitleText: {\r\n    fontWeight: '700 !important'\r\n  },\r\n  mwIconButton: {},\r\n  mwText: {\r\n    color: \"#738094 !important\",\r\n  },\r\n  mwHelp: {\r\n    marginBottom: '35px !important'\r\n  },\r\n  mwButtonBox: {\r\n    textAlign: 'right'\r\n  },\r\n  mwNumberInput: {\r\n    width: '100%',\r\n    '& .MuiInput-root:before': {\r\n      border: 'none !important'\r\n    },\r\n    '& .MuiInput-root:after': {\r\n      border: 'none !important'\r\n    },\r\n    '& .MuiInput-root .MuiInputAdornment-root .MuiButton-root': {\r\n      padding: '12px 15px',\r\n      backgroundColor: '#CDD5DF',\r\n      color: '#000',\r\n      width: '20px',\r\n      borderRadius: '5px 0 0 5px',\r\n      height: '35px'\r\n    },\r\n    '& .MuiInput-root': {\r\n      height: '35px',\r\n      marginLeft: '0px',\r\n      justifyContent: 'space-between',\r\n      borderRadius: '5px',\r\n      backgroundColor: '#EEF2F6',\r\n      fontSize: '14px',\r\n      color: '#738094'\r\n    },\r\n    '& .MuiInput-root input::selection ': {\r\n      backgroundColor: '#EEF2F6'\r\n    },\r\n  }\r\n}));\r\n\r\nconst SignUpModalWindow = ({ isOpen, handleClose }: any) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [submitButtonDisabled, setSubmitButtonDisabled] = useState<boolean>(true);\r\n  const [isUserRegistered, setIsUserRegistered] = useState<boolean>(false);\r\n\r\n  const { language } = useAppSelector(state => state.lang);\r\n\r\n  const validate = (values: {\r\n    name: string,\r\n    email: string,\r\n    phoneNumber: string\r\n  }) => {\r\n    if (values.name.length > 0 && /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email) && values.phoneNumber.replace(/\\D+/g, \"\").toString().length > 5) {\r\n      setSubmitButtonDisabled(false);\r\n    } else {\r\n      setSubmitButtonDisabled(true);\r\n    }\r\n  };\r\n\r\n  function closeThisModalWindow() {\r\n    setSubmitButtonDisabled(true);\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <ModalWindowBox\r\n      isMWOpen={isOpen}\r\n      handleMWClose={closeThisModalWindow}\r\n      text={`${isUserRegistered ? \"Вы успешно зарегистрировались\" : \"Забронировать бесплатную версию\"}`}\r\n    >\r\n      {\r\n        isUserRegistered\r\n          ? (\r\n            <Typography className={cn(classes.mwHelp, classes.mwText)}>\r\n              Поздравляем, вы успешно зарегистрировались! <br />\r\n              Проверьте указанную вами почту)\r\n            </Typography>\r\n          ) : (\r\n            <>\r\n              <Typography className={cn(classes.mwHelp, classes.mwText)}>\r\n                Пожалуйста, заполните форму, и наша команда свяжется с вами\r\n              </Typography>\r\n              <Formik\r\n                initialValues={{\r\n                  name: '',\r\n                  email: '',\r\n                  phoneNumber: ''\r\n                }}\r\n                validate={validate}\r\n                onSubmit={async values => {\r\n                  const data = await dispatch(registerNewUser(values));\r\n                  // @ts-ignore\r\n                  const me = data.payload;\r\n                  console.log(me);\r\n\r\n                  if (me) {\r\n                    console.log(me);\r\n                    setIsUserRegistered(true);\r\n                  } else {\r\n                    console.log(\"Что-то пошло не так. Попробуйте авторизоваться снова\");\r\n                    setIsUserRegistered(false)\r\n                  }\r\n                }}\r\n                render={({\r\n                  handleChange,\r\n                  setFieldValue,\r\n                }) => {\r\n                  return (\r\n                    <Form>\r\n                      <div style={{ marginTop: '25px' }}>\r\n                        <Input\r\n                          name={\"name\"}\r\n                          type={\"text\"}\r\n                          bcColor={\"#EEF2F6\"}\r\n                          label={\"Ваше имя\"}\r\n                          handleChange={handleChange}\r\n                        />\r\n                      </div>\r\n                      <div style={{ marginTop: '25px' }}>\r\n                        <Input\r\n                          name={\"email\"}\r\n                          type={\"email\"}\r\n                          bcColor={\"#EEF2F6\"}\r\n                          label={\"Email\"}\r\n                          handleChange={handleChange}\r\n                        />\r\n                      </div>\r\n                      <div style={{ margin: '25px 0' }}>\r\n                        <Typography style={{ color: '#738094', margin: '0 0 10px 9px', fontSize: '11px' }}>\r\n                          Номер телефона</Typography>\r\n                        <MuiPhoneNumber onChange={e => setFieldValue(\"phoneNumber\", e)}\r\n                          className={classes.mwNumberInput}\r\n                          defaultCountry={'ru'} />\r\n                      </div>\r\n                      <div className={classes.mwButtonBox}>\r\n                        <LoadingButton\r\n                          type=\"submit\"\r\n                          disabled={submitButtonDisabled}\r\n                          style={{ marginRight: '15px', textTransform: \"none\" }}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                        >\r\n                          {translate(\"sendButton\", language)}\r\n                        </LoadingButton>\r\n                        <LoadingButton\r\n                          onClick={closeThisModalWindow}\r\n                          variant=\"contained\"\r\n                          color=\"secondary\"\r\n                        >\r\n                          {translate(\"cancelButton\", language)}\r\n                        </LoadingButton>\r\n                      </div>\r\n                    </Form>\r\n                  )\r\n                }}\r\n              >\r\n              </Formik>\r\n            </>\r\n          )\r\n      }\r\n    </ModalWindowBox>\r\n  );\r\n};\r\n\r\nexport default SignUpModalWindow;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Typography } from \"@mui/material\";\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Button from '@mui/material/Button';\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useFormik } from 'formik';\r\nimport cn from 'classnames';\r\n\r\n\r\nimport { authSlice, fetchAuthToken, approveUserToken } from \"../../store/auth/auth.slice\";\r\nimport { PhonePng, DashboardPng, SoundPng } from '../../assets/images/Auth';\r\nimport LogoImg from '../../assets/images/logo.svg';\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport Input from \"../../components/common/Input\";\r\nimport ForgotPasswordModalWindow from \"./ForgotPasswordModalWindow\";\r\nimport SignUpModalWindow from \"./SignUpModalWindow\";\r\nimport {getChildUser, getChildUsers, getMe} from \"../../store/users/users.slice\"\r\n\r\nconst useStyles = makeStyles(({\r\n  authWrapper: {\r\n    height: '100vh',\r\n    display: 'flex',\r\n  },\r\n  authBothSides: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n\r\n  authGreetSide: {\r\n    flex: '0 0 54%',\r\n    background: 'linear-gradient(124deg, rgba(126,174,255,1) 0%, rgba(147,173,251,1) 31%, rgba(252,166,233,1) 100%)'\r\n  },\r\n  authText: {\r\n    position: 'relative',\r\n    color: '#FFFFFF !important'\r\n  },\r\n  authWelcome: {\r\n    fontSize: '20px !important',\r\n  },\r\n  authTo: {\r\n    margin: '8px 0 23px 0 !important',\r\n    fontSize: '46px !important',\r\n    fontWeight: '700 !important'\r\n  },\r\n  authHelp: {\r\n    fontSize: '16px !important',\r\n    color: '#F8FAFC !important'\r\n  },\r\n\r\n  authPhoneIcon: {\r\n    margin: '0 0 100px 60px'\r\n  },\r\n  authDashboardIcon: {\r\n    marginLeft: '230px'\r\n  },\r\n  authSoundIcon: {\r\n    margin: '60px 0 0 130px'\r\n  },\r\n\r\n  authFormSide: {\r\n    flex: '0 0 46%',\r\n    background: 'linear-gradient(124deg, rgba(220,205,247,1) 0%, rgba(252,177,235,1) 100%)'\r\n  },\r\n  authFormInner: {\r\n    width: '320px',\r\n    margin: '0 10px'\r\n  },\r\n  authInputBox: {\r\n    position: 'relative',\r\n    marginBottom: '18px !important'\r\n  },\r\n  authInput: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '5px',\r\n    width: '100%',\r\n    '& .MuiInputLabel-root': {\r\n      color: '#738094 !important',\r\n      fontSize: '14px !important',\r\n      left: '-5px',\r\n      top: '-9px'\r\n    },\r\n    '& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline': {\r\n      border: 'none',\r\n    },\r\n    '& .MuiOutlinedInput-root .MuiOutlinedInput-input': {\r\n      padding: '8px 28px 8px 10px !important',\r\n      color: '#738094'\r\n    }\r\n  },\r\n  authLogoBox: {\r\n    textAlign: 'center',\r\n    marginBottom: '56px'\r\n  },\r\n  authPasswordInputIcon: {\r\n    position: 'absolute',\r\n    right: '10px',\r\n    top: '31px'\r\n  },\r\n  authLoginInputIcon: {\r\n    position: 'absolute',\r\n    right: '10px',\r\n    top: '10px'\r\n  },\r\n  authForgotButton: {\r\n    padding: '0 5px !important',\r\n    color: '#722ED1 !important',\r\n    fontWeight: '700 !important',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    fontSize: '12px !important',\r\n    position: 'absolute',\r\n    right: '-220px',\r\n    top: '-5px',\r\n  },\r\n  authButton: {\r\n    width: '100%',\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    margin: '16px 0 30px 0 !important',\r\n    '& .MuiLoadingButton-loadingIndicator': {\r\n      right: '123px'\r\n    },\r\n  }\r\n}));\r\n\r\nconst LoginSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M13.0909 11.4227C12.7593 10.6372 12.2781 9.92377 11.6741 9.32207C11.0719 8.71863 10.3586 8.23751 9.57348 7.90527C9.56645 7.90176 9.55942 7.9 9.55239 7.89648C10.6475 7.10547 11.3594 5.81699 11.3594 4.36328C11.3594 1.95508 9.40825 0.00390625 7.00004 0.00390625C4.59184 0.00390625 2.64067 1.95508 2.64067 4.36328C2.64067 5.81699 3.35258 7.10547 4.4477 7.89824C4.44067 7.90176 4.43364 7.90352 4.42661 7.90703C3.63911 8.23926 2.93247 8.71562 2.32602 9.32383C1.72258 9.926 1.24146 10.6393 0.909224 11.4244C0.582837 12.193 0.406809 13.0171 0.390669 13.852C0.3902 13.8707 0.39349 13.8894 0.400347 13.9068C0.407204 13.9243 0.417488 13.9402 0.430593 13.9537C0.443698 13.9671 0.45936 13.9778 0.476654 13.9851C0.493949 13.9923 0.512527 13.9961 0.531294 13.9961H1.58598C1.66333 13.9961 1.72485 13.9346 1.72661 13.859C1.76176 12.502 2.30668 11.2311 3.26997 10.2678C4.26665 9.27109 5.59028 8.72266 7.00004 8.72266C8.40981 8.72266 9.73344 9.27109 10.7301 10.2678C11.6934 11.2311 12.2383 12.502 12.2735 13.859C12.2752 13.9363 12.3368 13.9961 12.4141 13.9961H13.4688C13.4876 13.9961 13.5061 13.9923 13.5234 13.9851C13.5407 13.9778 13.5564 13.9671 13.5695 13.9537C13.5826 13.9402 13.5929 13.9243 13.5997 13.9068C13.6066 13.8894 13.6099 13.8707 13.6094 13.852C13.5918 13.0117 13.4178 12.1943 13.0909 11.4227ZM7.00004 7.38672C6.19321 7.38672 5.43383 7.07207 4.86254 6.50078C4.29126 5.92949 3.97661 5.17012 3.97661 4.36328C3.97661 3.55645 4.29126 2.79707 4.86254 2.22578C5.43383 1.65449 6.19321 1.33984 7.00004 1.33984C7.80688 1.33984 8.56626 1.65449 9.13754 2.22578C9.70883 2.79707 10.0235 3.55645 10.0235 4.36328C10.0235 5.17012 9.70883 5.92949 9.13754 6.50078C8.56626 7.07207 7.80688 7.38672 7.00004 7.38672Z\"\r\n        fill=\"#2F3747\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst PasswordSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"12\" height=\"16\" viewBox=\"0 0 12 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M4.875 11C4.875 10.3787 5.3787 9.875 6 9.875C6.6213 9.875 7.125 10.3787 7.125 11C7.125 11.6213 6.6213 12.125 6 12.125C5.3787 12.125 4.875 11.6213 4.875 11Z\"\r\n        fill=\"#2F3747\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M2.71622 6.94792L2.47964 4.81871C2.44931 4.54573 2.44931 4.27022 2.47964 3.99724L2.49672 3.84356C2.67783 2.21352 3.95929 0.923783 5.58816 0.73215C5.86176 0.69996 6.13821 0.69996 6.41181 0.73215C8.04066 0.923783 9.32211 2.21353 9.50324 3.84357L9.52026 3.99724C9.55064 4.27022 9.55064 4.54573 9.52026 4.8187L9.28371 6.94792L9.79866 6.98902C10.6107 7.05389 11.2738 7.66432 11.4055 8.46824C11.68 10.1449 11.68 11.8552 11.4055 13.5319C11.2738 14.3359 10.6107 14.9463 9.79866 15.0111L8.67659 15.1007C6.89504 15.2429 5.10501 15.2429 3.32345 15.1007L2.20135 15.0111C1.3893 14.9463 0.726226 14.3359 0.594586 13.5319C0.320034 11.8552 0.320034 10.1449 0.594586 8.46824C0.726226 7.66432 1.3893 7.05389 2.20135 6.98902L2.71622 6.94792ZM5.71956 1.84945C5.90586 1.82753 6.09411 1.82753 6.28034 1.84945C7.38936 1.97991 8.26176 2.85802 8.38514 3.9678L8.40216 4.12147C8.42331 4.31188 8.42331 4.50406 8.40216 4.69447L8.16134 6.86234C6.72194 6.76964 5.27804 6.76964 3.83864 6.86234L3.59777 4.69447C3.57661 4.50406 3.57661 4.31188 3.59777 4.12147L3.61484 3.9678C3.73815 2.85802 4.61061 1.97991 5.71956 1.84945ZM8.58704 8.02087C6.86511 7.88347 5.13494 7.88347 3.41297 8.02087L2.29088 8.11049C1.99468 8.13412 1.75282 8.35679 1.7048 8.65004C1.44996 10.2064 1.44996 11.7938 1.7048 13.3501C1.75282 13.6434 1.99468 13.8661 2.29088 13.8897L3.41297 13.9792C5.13494 14.1167 6.86511 14.1167 8.58704 13.9792L9.70911 13.8897C10.0054 13.8661 10.2472 13.6434 10.2952 13.3501C10.5501 11.7938 10.5501 10.2064 10.2952 8.65004C10.2472 8.35679 10.0054 8.13412 9.70911 8.11049L8.58704 8.02087Z\"\r\n        fill=\"#1B202B\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst Auth = () => {\r\n  const authToken = new URLSearchParams(window.location.search).get('token');\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [buttonClick, setButtonClick] = useState<boolean>(false);\r\n  const [isUserApprove, setIsUserApprove] = useState<boolean | null>(null);\r\n\r\n  const [openChangePasswordWindow, setOpenChangePasswordWindow] = useState<boolean>(false);\r\n  const handleOpenChangePasswordWindow = () => setOpenChangePasswordWindow(true);\r\n  const handleCloseChangePasswordWindow = () => setOpenChangePasswordWindow(false);\r\n\r\n  const [openSignUpWindow, setOpenSignUpWindow] = useState<boolean>(false);\r\n  const handleOpenSignUpWindow = () => setOpenSignUpWindow(true);\r\n  const handleCloseSignUpWindow = () => setOpenSignUpWindow(false);\r\n\r\n  const error = useAppSelector(state => state.auth.error);\r\n  const { language } = useAppSelector(state => state.lang);\r\n  const currentUser = useAppSelector(state => state.users.currentUser);\r\n\r\n  const history = useHistory();\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      username: '',\r\n      password: ''\r\n    },\r\n    onSubmit: async (values) => {\r\n      setButtonClick(true);\r\n      const authData = await dispatch(fetchAuthToken(values));\r\n      setButtonClick(false);\r\n\r\n      // @ts-ignore\r\n      if (authData.payload) {\r\n        const meData = await dispatch(getMe());\r\n        // @ts-ignore\r\n        const me = meData.payload;\r\n\r\n        await dispatch(getChildUser());\r\n        await dispatch(getChildUsers());\r\n\r\n        history.location.pathname = \"/\";\r\n        history.push(`/${language}/${me ? me.id : \"_\"}/calls`)\r\n      }\r\n\r\n    },\r\n  });\r\n\r\n  async function approveAuthToken() {\r\n    const approveTokenData = await dispatch(approveUserToken(authToken));\r\n    // @ts-ignore\r\n    const isApprove = approveTokenData.payload;\r\n    console.log(isApprove)\r\n\r\n    if (isApprove < 300) {\r\n      console.log('Всё хорошо');\r\n      setIsUserApprove(true);\r\n    } else {\r\n      console.log('Всё плохо');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.title = \"Авторизация | IMOT.io\";\r\n\r\n    authToken && approveAuthToken()\r\n\r\n    return () => {\r\n      setButtonClick(false);\r\n      dispatch(authSlice.actions.setError(null));\r\n    }\r\n  }, [dispatch]);\r\n\r\n\r\n  return (\r\n    <div className={classes.authWrapper}>\r\n      <div className={cn(classes.authGreetSide, classes.authBothSides)}>\r\n        <div>\r\n          <img className={classes.authPhoneIcon} src={PhonePng} alt=\"\" />\r\n          <img className={classes.authDashboardIcon} src={DashboardPng} alt=\"\" />\r\n          <Typography className={cn(classes.authWelcome, classes.authText)}>\r\n            ДОБРО ПОЖАЛОВАТЬ\r\n          </Typography>\r\n          <Typography className={cn(classes.authTo, classes.authText)}>\r\n            В речевую аналитику\r\n          </Typography>\r\n          <Typography className={cn(classes.authHelp, classes.authText)}>\r\n            Войдите, чтобы получить доступ\r\n          </Typography>\r\n          <img className={classes.authSoundIcon} src={SoundPng} alt=\"\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className={cn(classes.authFormSide, classes.authBothSides)}>\r\n        <div className={classes.authFormInner}>\r\n          <div className={classes.authLogoBox}>\r\n            <img src={LogoImg} height={30} alt=\"This is Logo icon.\" />\r\n          </div>\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <div className={classes.authInputBox}>\r\n              <Input\r\n                name={\"username\"}\r\n                type={\"text\"}\r\n                handleChange={formik.handleChange}\r\n                value={formik.values.username}\r\n                bcColor={\"#FFFFFF\"}\r\n                label={\"Login\"}\r\n              />\r\n              <LoginSvg className={classes.authLoginInputIcon} />\r\n            </div>\r\n            <div className={classes.authInputBox}>\r\n              <Button tabIndex={-1} onClick={() => {\r\n                handleOpenChangePasswordWindow();\r\n              }}\r\n                className={classes.authForgotButton}>\r\n                Забыли пароль\r\n              </Button>\r\n              <Input\r\n                name={\"password\"}\r\n                type={\"password\"}\r\n                handleChange={formik.handleChange}\r\n                value={formik.values.password}\r\n                bcColor={\"#FFFFFF\"}\r\n                label={\"Password\"}\r\n              />\r\n              <div style={{ width: '32px', height: '100%' }}>\r\n                <PasswordSvg className={classes.authPasswordInputIcon} />\r\n              </div>\r\n            </div>\r\n\r\n            <LoadingButton\r\n              className={classes.authButton}\r\n              loading={buttonClick}\r\n              loadingPosition=\"end\"\r\n              endIcon={<SendIcon />}\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              Войти\r\n            </LoadingButton>\r\n          </form>\r\n          <Button\r\n            className={classes.authButton}\r\n            variant=\"outlined\" color=\"primary\"\r\n            onClick={handleOpenSignUpWindow}\r\n          >\r\n            Зарегистрироваться\r\n          </Button>\r\n          <div style={{ height: '48px' }}>\r\n            {error ? <Alert severity=\"error\">{error}</Alert> : null}\r\n            {isUserApprove === null \r\n              ? null\r\n              : isUserApprove\r\n                ? <Alert severity=\"success\">Ваш токен подтверждён, теперь можете войти</Alert>\r\n                : <Alert severity=\"error\">Ваш токен не подтверждён</Alert>\r\n            }\r\n          </div>\r\n        </div>\r\n        <ForgotPasswordModalWindow isOpen={openChangePasswordWindow} handleClose={handleCloseChangePasswordWindow} />\r\n        <SignUpModalWindow isOpen={openSignUpWindow} handleClose={handleCloseSignUpWindow} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMlSURBVHgB7VsJlFTVmf7vu2+ppRcaFRkTFbcoGk1kMsk46qiTGU+MyRkdB2MMioqACggogmaAtgVXQAZFVCIB3HDoOc6ScRk1I/EkZtyYibvBsLiBLF3d1VX1trvkv2+pel10Q3dXY5Nz/PRS9ZZ6977v/tv9/9sAX6JbEBgkPDxjW7Yh3fB1T9u14cKWr+ZwKBL2IwwaMc82y2/7LrwSHFDZpmnwljDlVk7FG6CTd0uOveXiufXvwCBh0Ih5qpn9oCNHfyFRTgiOgmpR0wG0FDYLQOiyQwrxAhDxn7btv/Djluxn8AVh0Ih5cpY33i4Zy0VCgQKSFDmKKAqgm0hQBs+Z6hqSBPJpz3Xvuagl87+wj6HBIIEQ41guQjIUNzIiSOA5nwM4LoBdxM82AA+b8EmjFNqPDSP927W3sHWPzimdCvsQgyYxLT/aNZeAcYFpGEdnDCOTNjUwUFSUWsmkGcbvWqRiupIeqzJqJvijlkFnXzCbbIEBxqARE+Oq8383bAgd/s00TZ+dMszR9ZZ5WMogARkBP5FEqYEGBKFa0TpIjFx+IoHNv/gW80EYQPSZmObmZu209E1/xzzSxAjNc0O2S5t99vGrL2699pnvu1ADRo9eS4+Hc85ImcbNjZZ1mmWiAMUjjAmK7I8ih+hQvsi4WOqYdNbEFlKCAUCfiHmx2R5BU9Yzrk2OczzUfTVYHBzBgUqC/kOIVxybT7h0ofU21Ig5P+r4i6ZUdlHWoqfrVZYwJshQkhORo46ZZE+zknvF+CV1n0ON6DUxv1okDwUXXit0wsGej4PgSscBuCLHiJ5E1P+ywwNvzBULUv8FNQK9ELnzYv8qJGcB2qAsVEmPgo7kaLqamHAI+JsN7Xbp9Gk1ktMrr7QWRVz68HB7BxycR0F1ImICj4LkCJQezsPGOGmk0lyx/Drna1Aj0BTLGx83728veCeWXNgUGOUEKerY68Q+3dCbKS8nBDmm3rReXDGzeAjUgF4RM/zPL5hb7IQzSw52LKNWHjw25XZZOLigcTLMJOYvHrrePhwGAHNa05veLm48udP2WkX1wgGP3aJy55X+pdRHCmk9vnJabgj0E3sl5vk7nHMdW5vbWQwJCcYiKw0iESYoLcDD2RSBJJGvUbBW3TNFWjAAWN56VMemHR9dUnL9leW+IepfkVNQExJKsGog6BmellkN/cQebcyzd7gnaK7xUns7GeqzighXIx6osjlCGWItNIaBR9F467i79Qurf9M6k10udTLSI2AzEJ14c45r0E6l3NZWKL133eLGtp7GteQy//aUqd8Y2pTwH9W31CQYWZl05ThX/pxrFqfnQx/RIzH/vUBmdQ9ebs/BSba7OxHVUOd4ZIwVORCTo2SSsPlXLjbmJO9vnS5+yQT5GzUChg3NFLDIiHIp8zjrb3AQT7R10kdblnd1waNHS3pmnVilG9qYeLaUlKqIWbMY0FTZEKtLNpelv5+8ZMjz0Af0qEqmz88r5OEkFZpHNg+6iDAkzscPI9ED/Yox5oF467OXT+fXJJ/vcjjCRjZcLzTeBjYd1cFXzSYNnkfO8j36YENKbl4wxZ815ZwNZZVsbSWce+2TfM5fVwzE7lsFgMwhaG+QUmRWqgYirRHrgenTP07DQBDjeNqY2Ngm376ajC4Hkfoo8nwbp0qtd5yw+Y62aOmk0inqtgkTXjdQNA5T39XzlYdTs61mOYNSp9mhp1HNc8lBvq/f8ZXDR7x26/jCN+Nur33sgHyuwC7CxeWn8Tho0L8GbgkJEYoYlBmhGhx5BGucDQNBjMfIKC4qx92RUV4AQiJ8j/TdcSV0dAroKOAnSkG+ACnbtpaq2/5KO35YyRWUod7JBOEiel4GVSqFNo0jMT5KEkMJ9Hz9RAnpX86b4I2NhzHnX1J/cH1/hkYScQ0eSKbh73hISiQ5GqEzl07K9zqE6JEYzmSjkF1fupqMLjxF5xUpni+h6DhITAfkSwXoRNHrLDFsMOrWCTv+7LVtW5yNO7dM3Nq+66lc0Sn4LCIoEaekkJysOlQRNjZfkeNpQyXTV80bx2+K+/518T9aORdPxEsHRZKOK04fpUZIHkqNDH04J7wZeokeje+/zhJuqUDMHj3Rbl9CckooKbliAXbl26DoMsypZDEBZeBM6mAYOphN9nHzf37QB/Fvbjz3zaZM9pBJjdkhE9MG/SpJjEjFJAVUqzY/NNDKhqhmqGQWETfMXUkXqvuWXS6PRC7eRQG0IIqzbK+EhtgDI0XLb4oUMQeKp8xaesjrsBf0KDH4km43sVQld9KN3VG2ouja0GnvhAImUphw8byPzcOAEKdd8zza+eKm5DPveOqk3Ny1B85vY/lT8663UoiKkVckpdHkZvFTsFBqQslRfWm3zR5bOFs945qVZKOQ7K6YVPWp42T4bmRnooYD0S2Rmgm9wJ4CvLbekBGTp+xRJ64sO0q7UH1y4KNhMEwTZ1jiQAW6bY7Nu7+l9UKvu85aHhn60YzV5riC69wsZEV7VbqzDt2vherAkHkVT3khSYYm0o83XxGG/r6tL6Qgy7EPxSU4JrbwPqY8U9nWIGnnLrjkw2HQX2I4Ee8CgS5635NHUrNcdDh0FNuC5uAq07TqkRgDB6hhI6hS/E1HL90OewSR1z+cbnGEuF7ERgtC1am3MEeDYsO4jy+LMqikh2kHgJ++V91z7WMkzzhbBWVbo6HUmOgN/YrEQGDLMkbDkCuhv8TgTL+XePcKqoxwoM8oskpKOoo70ca4mG2rAzOVCVwnQWuIaYlPKHF/uGTNkb1a8U5bQRf7QiyNuwtUyiSQoSrs95Achu5dBtKDi9bz5l0mv6fuLTk776GatOPn6JjV4kiiUDMHFZUSQv5kb2Po2V37/q+J1j0ZSaJc7LijlEeDuwNVCcdE0mCl6vFlaNA0SriRFhfc2XrUR9AH7KSfz+LA1ldeElXKokBRagRGhBwjR8YCcjTP53PVPTMeP2QLeqLn4gFSDccAynVXpEb9h1N1/F0TNo+C/hDDLHgV36vUHRkBV1EInrcL0F7ajq64iAM2wTIb8ZryBIoUTaBnGHfX44e+Cn1Ey/KvlASR40GTrGKINUhrKmDz0aZ5KucLKhbinJ4y5ydxclys1qK3Uum/QJ1cv0wKRARRPXUO9IeYy27NfKrp/J045O5uWeD6AlWnE0kpoIThbNIhOEgdYyA0fLiSRHWcu2jNEf1e4U5ebq4nRK6Jjym+cQYDHILEiIAchv2JwBviIiawGwUn9xz2y+LfKHVSRjuKZSoECXke9IcYCIhgq0nCAFd7JAWDZnAmh0A61RDEKbouwcRktoUDGtqo/wpqhKd7zfiiwSJSSULaxHgIcxwEWCA56KaRIHxxro1pHr297oZHhhdxtfRv8UA1YgTLfaa8UxepISMXXLVtWL+IsaX9NDUqx9UqpeNIs6lGOLD+MBhaNxzVyEL1oVEGW4Lj0O9CjZiyNL0Jg7d1sf820NhYFN0uphRVAkgiMSrC5bhS5Ub2r4MfEfI/5ZgG7QzFrLkKH+I3iKKBLAP7+J763SMx4xc2bRKErQPS/TpJGURVC7J0HTJmGo1jPWSsLA5eD72RNK++Y0JbI9QITfPXxAGxMqimgeQjIYQojVHLdxYQhF4wWKSWuP0y1WKPRgJimO9XgqMIKHun99gn7A06W6O8k+zOK0U1Z+QBydDA1C0U9TSksJkoapjFO9h14CKoEbbwX1D9KKerXtTUlbfx8YXRJSlyIoLQHp2p7p/2UN2bXIgCQwPt+p3gcQftHodYWjAlUUCbgzlkYffU516rBM0TXs+MSJ+8lTlaQ/J8TE5QUmVQjkg5CQQ8WsBx0A3YxI68/eiWlhYBNeDusR278sXCUBdXO77wpS81XMlZn0tB36SatVE35PuE66/e2Tr0LXX/3NEbXra9wqEcvA+QgI1mmm6tr2t4G6s873lC7Lx55QmfI8kS+kuMwsrr2FJeopNE9ZIaoJy5C3IqKuCSga0LZldEsmtasnnmCnoL1IDJ5/7faKpbGq3nH3e4n76/ovV7bbAP0Stifjatc6TGMuu5pzZoVBDzFJAT1ZkUQUGcSaG8lFCxiJEix153P9kIfyLoVflk/D/XvwemfLY6pgkgK3VlLbI56qE0ShMEe16wmCqYfFCVd+FPBL0eqA+dN6PbrChTlTHusvlHC2tNQQ44zqNI8reNn8/u1ZJ/f0Cfatc/m+o+KRzzfNmDGZUyURGMbE1AfVw+JcKThn/CdctSH8J+jj6JNqY3mokuefJcl3wNhOWSWK2U1EQl7TCLD5qpS3PtwzNkFvZz9ImYiYutt4CyB5O2pjocDuxNVC0IPnlZaMI6kyAndxT5EtjP0WdjmHd2NBND7komsAB2N8qxfQl0NSk56pqk4+6b7Nfkvvc1+mRjYiy71r6cOKmf72ZrEovMwKbIRF2KVjb6VCqU/sRr7jOXQy+Bi0Cy/MbcoYasH4lJzo4r70y/sqcgrRb0ixiFZZO8N8A1RkkJ5Qxot0h4L0WOliAHXboUhrj+6iV0cU8/f2Smc6wJxkSXyVOFTr+Oxj0TlIJVlVPIbUWeGztz2QHPwQCj33GFC6Xx0gjTiHucssjelHdEiKjYH33VuLbw/qne5O5++uRsOSktrfWerU13CvTbmDnNFNqxmIe9umGVcrjOm/598RT3H2CA0W+JUVg6xbmBONZdUFWxTH6p3kMXBIRq/y6tXA/UioqWz/7/pfkt684KkkxP/pRdyh26CgsPxInKJn4UXSuV1IxKN5LIXZQUz5z6QH3NW9xi1ESM2gq2bJL/W+ka34G9LBFJlb6RaO9evF0kWMETf3XO+XjqiCGH/4AyuqLkgaXq34zHu6UqZVyVJ0qSgyWEzVJ6Z01/IL0ZBgA1hegq4+LrHWMl5du6U6fqlGhyGmSUSlExDykvJ4yxh9Qd8YoixUZSikpl/JCUIIlNZFkt1Q4qKSphgSa1EZh3aW2+5u06GADUvHaZtuSgD4Sen44lendPtaeyh4o3MapPHr4gRJJAsaUkOTYgRe2Q4NVPUxl+AbEjUttHYpsVEqZ/q0ke8yAEu2xqw4As6qbeN/QJQTvnCSK6Fufl7lIjkipHQsnBSm5QM8pqoYQoUjwmE7+VidBafYbkKInhHpQXsqrpxLx46WR3IdSImpmNoezNkgkdrYTVX0CkttdOSSIAtNAYZ7FG7fGwiO+yqsRPOT6SiVMyqESouVX2Rv1BRrCLK/oV00vjp96TfQj6iQFLAyh7k4MPL2U0/7YA3u09ZamJklvB/ptooxEa2kBSKqRURE6CrJASdBZLT5AOCwr+SiVJZTBg8MyiZdMK50C/32eAcduUDQelnINfIn76OE1FdD12Eb5cLDnqiAuZuCQTd3X9FhzJWMXUkRaUgw1V3056KhDbIO395eRF6S3QRwx44uin9x6zg8vS94VW2IylMKiyMpCc/zAxjdUroaqJsixSlesxEt8SBXpSvhbuZPA9oTY8BbVqwYMNAMOZ7fR5x6bCgEtMjNsv2zTCpE3rCEsdHhS9kvvdk6i2H9UX4iPZ/fWwiJYgTBOgp0iQiJdqYjSRkw3tx92w8Ojt0Afss1TjTauO2OzxrWdyWtzApReWSBPGM67H7GY/qmWlLCFQdU/0b7R8VyVbjxWg5OTAdvIohSVMzGPZRLhNpNM4EPqIfZqDvWnVyM1M5M9mWv4tjoMUUf0YulWV3hKStD2VeMAXDjgsD46XA9frVBufsT8PP92SK3fkoI/Y58lpJTnPbHp3lEfa1jBZwFIqT0hI92RI2Z0EdRPXRLep+rXr56Hk7kLvloNwEhxFCn53W/9p+be2Qh/xhWTt1+HC0B2xYgwz8ndhUj3YwiGjZE7ZDO9FOrqQKStnFSm2p0hpR2lpR6Xy0TPheaL2/zlbSvkdN0A/sM+Mb0+Yd/n7V1PeeJsuMkOwghhs7Alfsusqs8r0Vp2MDa5ACWnDoHA7FN2dKB0MGhqGQF1jFhPx4n3ul/5x3urT+vW32184MQqzx244KiWMtVRmR+mQxoWkrgLEhFRULcXLElI5KwRHSWmDTmc7SktbICmZujpoaMqqNMQWQ9IzZq8Y1ef4JQaFQcBLv7s3d9iobzxcLw/UMYI5LUxZaAE55QROmYwKSWVSAvXJYf55eyAxaststj4kBddQv3e9ju/csurUPtuVJAZFYpKYM2b9NwxS/5jG0idQkgKlXpravxdIUDWCnQooITkoONtQfZAUwqCuvj5QHyTlLU+6P7x1xan9lpQYg05MCEmaL3lvKnA6TRPW4TpYSJCJBOnBBsdYajjGKg56n0JZfZCUhpAUvPo8K9rjbn3ijI9hALCfEBOi+ZLfDGM8fZEmjBkg9EPVX6HS6M9klaT4vITEdAauWf2JVqYuK+sard8w8O/G4vgzLavOcmCAsF8RE0P92c5Qm59OmDYGzcnpUsijGWOBxChXT3ViU4s8humK+2979LvrYR9gvySmGled/+SwjFV3InqvOs/3P2na8dk7LesuHzDp+BJf4kt8iS8afwTYDcCOIbHQFgAAAABJRU5ErkJggg==\"","import React, {FC} from 'react';\r\nimport IconButton from \"../IconButton\";\r\n\r\nconst PlusSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M8.00034 2.66699C8.38454 2.66699 8.69599 2.97845 8.69599 3.36264V12.638C8.69599 13.0222 8.38454 13.3337 8.00034 13.3337C7.61614 13.3337 7.30469 13.0222 7.30469 12.638V3.36264C7.30469 2.97845 7.61614 2.66699 8.00034 2.66699Z\" fill=\"#389E0D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M2.66602 8.00034C2.66602 7.61614 2.97747 7.30469 3.36167 7.30469H12.637C13.0212 7.30469 13.3327 7.61614 13.3327 8.00034C13.3327 8.38454 13.0212 8.69599 12.637 8.69599H3.36167C2.97747 8.69599 2.66602 8.38454 2.66602 8.00034Z\" fill=\"#389E0D\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype PlusPropsType = {\r\n  margin?: string,\r\n  handleClick?: any,\r\n  disabled?: boolean\r\n}\r\n\r\nconst Plus: FC<PlusPropsType> = ({disabled, margin, handleClick}) => {\r\n  return (\r\n    <IconButton\r\n      disabled={disabled}\r\n      margin={margin ? margin : '0 15px 0 0'}\r\n      backgroundColor=\"#D9F7BE\"\r\n      icon={<PlusSvg/>}\r\n      onClick={handleClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Plus;","import { makeStyles } from \"@mui/styles\";\r\n\r\nexport const reportsStyles = makeStyles(({\r\n  reportItemInfo: {\r\n    marginTop: '40px',\r\n  },\r\n  reportTitle: {\r\n    marginRight: '16px !important',\r\n    color: '#2F3747 !important',\r\n    fontWeight: '500 !important',\r\n  },\r\n  reportFindNumber: {\r\n    color: '#A3AEBE !important',\r\n    fontWeight: '700 !important'\r\n  },\r\n  reportButtonsGroup: {\r\n    margin: '24px 0 16px 0',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center'\r\n  },\r\n  reportButtonsGroupLeft: {},\r\n  reportOptionsButton: {\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    borderRadius: '5px !important',\r\n    background: '#fff !important',\r\n    color: '#1B202B !important',\r\n  },\r\n  reportOptionsButtonActive: {\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    borderRadius: '5px !important',\r\n    background: '#fff !important',\r\n    color: '#1B202B !important',\r\n    border: '1px solid #722ED1 !important',\r\n  },\r\n  getReportsButton: {\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    borderRadius: '5px !important',\r\n    marginLeft: '20px !important'\r\n  },\r\n\r\n  searchTitle: {\r\n    // height: '40px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '15px'\r\n  },\r\n\r\n  searchTitleLeft: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    width: '100%'\r\n  },\r\n  searchTitleLeftText: {\r\n    marginRight: '16px !important',\r\n    color: '#2F3747 !important',\r\n    fontWeight: '500 !important',\r\n  },\r\n  searchTitleLeftStick: {\r\n    marginLeft: '16px !important',\r\n    color: '#CDD5DF !important',\r\n    fontSize: '17px !important'\r\n  },\r\n\r\n  searchText: {\r\n    marginRight: '8px !important',\r\n    color: '#2F3747 !important',\r\n    whiteSpace: 'nowrap'\r\n  },\r\n  tagsBox: {\r\n    minWidth: '70px',\r\n    height: '32px',\r\n    backgroundColor: '#F8FAFC',\r\n    border: 'none !important',\r\n    outline: 'none'\r\n  },\r\n  searchSearchButton: {\r\n    // @ts-ignore\r\n    textTransform: 'none !important',\r\n    borderRadius: '5px !important'\r\n  },\r\n  selectArrow: {\r\n    marginRight: '10px'\r\n  },\r\n  selectArrowOnArrow: {\r\n    marginBottom: '5px'\r\n  },\r\n  criteriaList: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    marginTop: '16px',\r\n    width: '100%'\r\n  },\r\n  filtersBlock: {\r\n    border: '1px solid #E3E8EF',\r\n    borderRadius: '13px',\r\n    padding: '16px',\r\n    marginBottom: '8px'\r\n  },\r\n  filterBlockFlex: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    width: '100%',\r\n    border: '1px solid #E3E8EF',\r\n    borderRadius: '13px',\r\n    padding: '16px 16px 0 16px',\r\n  },\r\n  filterBlockWrapper: {\r\n    // height: '40px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center'\r\n  },\r\n  filterBlockControl: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    width: '100%',\r\n    justifyContent: 'flex-end'\r\n  },\r\n  filterBlockTitle: {\r\n    color: '#722ED1 !important',\r\n    fontWeight: '700 !important',\r\n    marginLeft: '5px !important'\r\n  },\r\n  parameterBlock: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: '16px',\r\n    width: '100%',\r\n    flexWrap: 'wrap',\r\n    '&:last-of-type': {\r\n      marginBottom: 0\r\n    }\r\n  },\r\n  flexCenter: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between'\r\n  },\r\n  parameterItemTitle: {\r\n    whiteSpace: 'nowrap',\r\n    marginRight: '10px !important',\r\n    minWidth: '167px',\r\n    color: '#2F3747 !important'\r\n  },\r\n  parameterSelect: {\r\n    display: 'inline-flex',\r\n    marginRight: '20px',\r\n    whiteSpace: 'nowrap',\r\n    width: '200px'\r\n  },\r\n  reportInput: {\r\n    border: '1px solid #ccc',\r\n    borderRadius: '2px',\r\n    minWidth: '200px',\r\n    maxWidth: '300px',\r\n    width: '100%'\r\n  },\r\n  checkboxDiff: {\r\n    '& label': {\r\n      marginRight: '0px',\r\n    }\r\n  },\r\n  checkboxDiffValues: {\r\n    display: 'flex',\r\n    //@ts-ignore\r\n    flexDirection: 'row !important',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    '& label': {\r\n      marginRight: '0px',\r\n    }\r\n  },\r\n  checkboxDiffLabel: {\r\n    marginRight: '15px !important',\r\n  },\r\n  reportName: {\r\n    '& span': {\r\n      display: 'none'\r\n    }\r\n  },\r\n  errorInput: {\r\n    position: 'relative',\r\n    '& .MuiFormControl-root': {\r\n      borderColor: '#F5222D !important'\r\n    },\r\n    '& span': {\r\n      display: 'block',\r\n      position: 'absolute',\r\n      top: '-20px',\r\n      left: '0px'\r\n    }\r\n  },\r\n  errorTitle: {\r\n    color: '#F5222D !important',\r\n    fontSize: '13px !important'\r\n  },\r\n\r\n  notFoundCalls: {\r\n    color: '#A3AEBE !important',\r\n    fontWeight: '700 !important',\r\n    textAlign: 'center',\r\n    margin: '14% 0'\r\n  },\r\n  deleteModal: {\r\n    padding: '20px',\r\n    minHeight: '160px',\r\n    minWidth: '300px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  table: {\r\n    width: 'auto',\r\n    marginTop: '24px',\r\n    marginBottom: '30px',\r\n    height: '100%',\r\n    //@ts-ignore\r\n    overflowX: 'auto !important',\r\n    overflowY: 'hidden',\r\n    '&::-webkit-scrollbar': {\r\n      height: '6px',\r\n      backgroundColor: '#fff',\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      backgroundСolor: '#A3AEBE',\r\n      background: '#A3AEBE',\r\n      borderRadius: '14px',\r\n    }\r\n  },\r\n  flexCenterMb: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    marginBottom: '16px'\r\n  },\r\n  tableHeaderTitle: {\r\n    fontWeight: '600',\r\n    lineHeight: '1.3',\r\n    color: '#738094',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  tableHeaderSubTitle: {\r\n    whiteSpace: 'break-spaces',\r\n    paddingBottom: '17px',\r\n    textAlign: 'center',\r\n    position: 'relative',\r\n    fontSize: '13px',\r\n    '&:after': {\r\n      position: 'absolute',\r\n      bottom: '7px',\r\n      width: '36px',\r\n      height: '1px',\r\n      display: 'block',\r\n      content: '\"\"',\r\n      left: 'calc(50% - 18px)',\r\n      background: 'rgba(224, 224, 224, 1)',\r\n    },\r\n  },\r\n  tableHeaderSubSubTitle: {\r\n    fontSize: '0.8em',\r\n    textAlign: 'center',\r\n    fontWeight: '400'\r\n  },\r\n  centerMessage: {\r\n    color: '#738094',\r\n    opacity: '0.6',\r\n    fontWeight: '500',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '400px'\r\n  },\r\n  centerMessageTitle: {\r\n    maxWidth: '300px',\r\n    textAlign: 'center'\r\n  }\r\n}));","import React from \"react\";\r\n\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\r\n\r\nexport function SortedDescendingIcon() {\r\n  return <ExpandMoreIcon className=\"icon\" />;\r\n}\r\n\r\nexport function SortedAscendingIcon() {\r\n  return <ExpandLessIcon className=\"icon\" />;\r\n}\r\n\r\nexport const ExportIcon = (props: any) => {\r\n  return(\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={props.style}>\r\n      <path d=\"M13.35 9.39611C13.2952 9.44451 13.2621 9.51298 13.2585 9.58605C13.2261 10.2611 13.1707 10.9354 13.0921 11.6076C12.9893 12.486 12.279 13.1858 11.3922 13.2848C9.15505 13.5349 6.84064 13.5349 4.60343 13.2848C3.71669 13.1858 3.00636 12.486 2.90361 11.6076C2.63629 9.32185 2.63629 7.01285 2.90361 4.72713C3.00636 3.84869 3.71669 3.14894 4.60343 3.04983C6.07844 2.88498 7.58877 2.82889 9.08683 2.88142C9.19497 2.88521 9.28703 2.80291 9.29463 2.69493L9.32738 2.22625C9.32938 2.19865 9.3321 2.17135 9.3355 2.14436C9.35177 2.01477 9.26191 1.88698 9.13138 1.88236C7.58098 1.82743 6.01967 1.88533 4.49235 2.05603C3.15097 2.20594 2.06809 3.26261 1.91039 4.61097C1.63403 6.97385 1.63403 9.36085 1.91039 11.7237C2.06809 13.072 3.15097 14.1288 4.49235 14.2786C6.80337 14.537 9.1923 14.537 11.5033 14.2786C12.8447 14.1288 13.9275 13.072 14.0853 11.7237C14.1979 10.7605 14.2647 9.79331 14.2855 8.82531C14.2881 8.70385 14.1391 8.64331 14.0537 8.72985C13.827 8.96005 13.5923 9.18225 13.35 9.39611Z\" fill=\"#A3AEBE\"/>\r\n      <path d=\"M5.2448 10.3666C5.09732 10.326 4.99642 10.1902 5.0001 10.0373L5.03959 8.39467C5.09614 6.04271 7.01899 4.16551 9.37166 4.16551H10.2099C10.2275 3.74969 10.2514 3.33407 10.2817 2.9188L10.3269 2.29837C10.3545 1.91975 10.7767 1.70809 11.0965 1.9125C12.4772 2.79469 13.6775 3.93142 14.6333 5.26209L14.9374 5.68539C15.0209 5.8016 15.0209 5.95812 14.9374 6.07433L14.6333 6.49763C13.6775 7.82827 12.4772 8.96501 11.0965 9.84721C10.8331 10.0155 10.4993 9.90174 10.3747 9.64487C10.3485 9.59027 10.3317 9.52734 10.3269 9.46134L10.2817 8.84094C10.2455 8.34567 10.2185 7.84994 10.2005 7.35394L9.96446 7.31841C8.46032 7.09201 6.97252 7.81787 6.2252 9.14267L5.62366 10.2091C5.59501 10.2598 5.55435 10.3009 5.50712 10.3297C5.43048 10.3765 5.33598 10.3917 5.2448 10.3666Z\" fill=\"#738094\"/>\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport const OnTopArrow = (props: any) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={props.style}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M7.39101 4.59994C7.17176 4.83662 6.81636 4.83662 6.59711 4.59994L3.9999 1.79621L1.40271 4.59994C1.18347 4.83662 0.828006 4.83662 0.608766 4.59994C0.389526 4.36325 0.389526 3.97957 0.608766 3.74288L3.60295 0.510518C3.8222 0.273838 4.1776 0.273838 4.39685 0.510518L7.39101 3.74288C7.61026 3.97957 7.61026 4.36325 7.39101 4.59994Z\"\r\n        fill=\"#1B202B\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const OnBottomArrow = (props: any) => {\r\n  return (\r\n    <svg width=\"8\" height=\"5\" viewBox=\"0 0 8 5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={props.style}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M7.39101 0.400166C7.61026 0.636846 7.61026 1.02059 7.39101 1.25725L4.39685 4.48958C4.1776 4.72627 3.8222 4.72627 3.60295 4.48958L0.608766 1.25725C0.389526 1.02059 0.389526 0.636846 0.608766 0.400166C0.828006 0.163486 1.18347 0.163486 1.40271 0.400166L3.9999 3.20392L6.59711 0.400166C6.81636 0.163486 7.17176 0.163486 7.39101 0.400166Z\"\r\n        fill=\"#738094\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const TrashSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M6.9375 2.25C6.9375 1.93934 7.18934 1.6875 7.5 1.6875H10.5C10.8106 1.6875 11.0625 1.93934 11.0625 2.25V2.8125H14.25C14.5606 2.8125 14.8125 3.06434 14.8125 3.375C14.8125 3.68566 14.5606 3.9375 14.25 3.9375H3.75C3.43934 3.9375 3.1875 3.68566 3.1875 3.375C3.1875 3.06434 3.43934 2.8125 3.75 2.8125H6.9375V2.25Z\"\r\n        fill=\"#F5222D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.68118 5.95858C4.70227 5.76868 4.8628 5.625 5.05388 5.625H12.9487C13.1397 5.625 13.3003 5.76868 13.3213 5.95858L13.4714 7.3096C13.742 9.74483 13.742 12.2026 13.4714 14.6378L13.4566 14.7708C13.3581 15.6577 12.6707 16.3649 11.787 16.4887C9.93883 16.7474 8.06368 16.7474 6.21556 16.4887C5.33178 16.3649 4.64439 15.6577 4.54584 14.7708L4.53106 14.6378C4.26048 12.2026 4.26048 9.74483 4.53106 7.3096L4.68118 5.95858ZM8.06375 8.55C8.06375 8.23935 7.8119 7.9875 7.50125 7.9875C7.19059 7.9875 6.93875 8.23935 6.93875 8.55V13.8C6.93875 14.1107 7.19059 14.3625 7.50125 14.3625C7.8119 14.3625 8.06375 14.1107 8.06375 13.8V8.55ZM11.0638 8.55C11.0638 8.23935 10.8119 7.9875 10.5013 7.9875C10.1906 7.9875 9.93875 8.23935 9.93875 8.55V13.8C9.93875 14.1107 10.1906 14.3625 10.5013 14.3625C10.8119 14.3625 11.0638 14.1107 11.0638 13.8V8.55Z\"\r\n        fill=\"#FF4D4F\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n","import React, { FC } from 'react';\r\n\r\nimport { \r\n  BarChart, \r\n  Bar, \r\n  XAxis, \r\n  YAxis, \r\n  ReferenceLine, \r\n  Tooltip, \r\n  Legend, \r\n  ResponsiveContainer\r\n} from 'recharts';\r\n\r\ntype ChartBarPropsType = {\r\n  data: {}[],\r\n  width: number,\r\n  height: number,\r\n  dataKey: string[],\r\n}\r\n\r\ninterface ColorType  {\r\n  [key: string]: string\r\n}\r\nconst color: ColorType = {\r\n  green: '#95DE64',\r\n  orange: '#95DE64',\r\n  orange2: '#FFA940',\r\n  red:'#FF4D4F',\r\n  blue: '#597EF7',\r\n  purple: '#B37FEB' ,\r\n  darkYellow: '#D46B08',\r\n  cyan: '#36CFC9',\r\n  magenta: '#F759AB'\r\n}\r\nexport const getRandomColor = () => {\r\n  const keys = Object.keys(color);\r\n  return color[keys[Math.floor(Math.random() * keys.length)]];\r\n}\r\n\r\n\r\nconst ChartBar: FC<ChartBarPropsType>= React.memo(({data, width, height, dataKey}) => {\r\n  return (\r\n    <ResponsiveContainer width={'100%'} height={300}>\r\n      <BarChart\r\n        width={width}\r\n        height={height}\r\n        data={data}\r\n        margin={{\r\n          top: 5,\r\n          right: 30,\r\n          left: 20,\r\n          bottom: 5,\r\n        }}\r\n      >\r\n        <XAxis dataKey=\"idName\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Legend height={36}/>\r\n        <ReferenceLine y={0} stroke=\"#000\" />\r\n        {dataKey.map((item,index) => {\r\n          return (\r\n            <Bar dataKey={item} fill={getRandomColor()} stackId=\"stack\" />\r\n          )\r\n        })}\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n    \r\n//  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n//   <ComposedChart\r\n//     layout=\"vertical\"\r\n//     width={500}\r\n//     height={300}\r\n//     data={data}\r\n//     margin={{\r\n//       top: 5,\r\n//       right: 30,\r\n//       left: 20,\r\n//       bottom: 5,\r\n//     }}\r\n//   >\r\n//     <CartesianGrid strokeDasharray=\"3 3\" />\r\n//     <XAxis />\r\n//     <YAxis dataKey=\"idName\"/>\r\n//     <Tooltip />\r\n//     <Legend />\r\n//     <Bar dataKey='calls_count_0'  fill=\"#8884d8\" background={{ fill: '#eee' }} />\r\n//     {/* <Bar dataKey='calls_minutes_0' fill=\"#82ca9d\" />\r\n//   </ComposedChart>\r\n// </ResponsiveContainer>\r\n  )\r\n})\r\n\r\nexport default ChartBar;\r\n","import React, { FC } from 'react';\r\n\r\nimport { \r\n  Radar, \r\n  RadarChart, \r\n  PolarGrid, \r\n  PolarAngleAxis, \r\n  PolarRadiusAxis, \r\n  ResponsiveContainer \r\n} from 'recharts';\r\n\r\nimport { getRandomColor } from './ChartBar';\r\n\r\ntype ChartRadarPropsType = {\r\n  data: {}[],\r\n  width: number,\r\n  height: number,\r\n  dataKey: string[],\r\n}\r\n\r\nconst ChartRadar: FC<ChartRadarPropsType> = ({data, width, height, dataKey}) => {\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={height}>\r\n        <RadarChart cx=\"50%\" cy=\"50%\" outerRadius=\"80%\" data={data}>\r\n          <PolarGrid />\r\n          <PolarAngleAxis dataKey=\"idName\" />\r\n          <PolarRadiusAxis />\r\n\r\n          {dataKey.map((item,index) => {\r\n            const color = getRandomColor();\r\n            return (\r\n            <Radar name=\"radar\" dataKey={item} stroke={color} fill={color} fillOpacity={0.6} />\r\n            )\r\n          })}\r\n        </RadarChart>\r\n    </ResponsiveContainer>\r\n  )\r\n}\r\n\r\nexport default ChartRadar;","import React, { FC } from 'react';\r\n\r\nimport { \r\n  PieChart, \r\n  Pie,\r\n  ResponsiveContainer \r\n} from 'recharts';\r\n\r\ntype ChartPiePropsType = {\r\n  data: {}[],\r\n  width: number,\r\n  height: number,\r\n  dataKey: string[],\r\n}\r\n\r\nconst ChartPie: FC<ChartPiePropsType>= React.memo(({data, width, height, dataKey}) => {\r\n  return (\r\n    <ResponsiveContainer width={'100%'} height={height}>\r\n     <PieChart width={400} height={height}>\r\n        <Pie data={data} dataKey={dataKey[0]} cx=\"50%\" cy=\"50%\" outerRadius={100} fill=\"#82ca9d\" label />\r\n      </PieChart>\r\n    </ResponsiveContainer>\r\n  )\r\n})\r\n\r\nexport default ChartPie;\r\n","import React, { FC } from 'react';\r\n\r\nimport {  \r\n  XAxis, \r\n  YAxis, \r\n  Line, \r\n  LineChart, \r\n  Legend,  \r\n  Tooltip, \r\n  ResponsiveContainer \r\n} from 'recharts';\r\n\r\nimport { getRandomColor } from './ChartBar';\r\n\r\ntype ChartAreaPropsType = {\r\n  data: any[],\r\n  width: number,\r\n  height: number,\r\n  dataKey: string[],\r\n}\r\nconst ChartArea: FC<ChartAreaPropsType> = React.memo(({ data, width, height, dataKey }) => {\r\n return (   \r\n    <ResponsiveContainer width={'100%'} height={300}>\r\n      <LineChart\r\n        width={width}\r\n        height={height}\r\n        data={data}\r\n        margin={{\r\n          top: 10,\r\n          right: 30,\r\n          left: 0,\r\n          bottom: 0,\r\n        }}\r\n      >\r\n        <XAxis dataKey=\"idName\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Legend height={36}/>\r\n        {dataKey.map((item,index) => {\r\n          return (\r\n          <Line type=\"monotone\" dataKey={item} stroke={getRandomColor()} strokeWidth={3} />\r\n          )\r\n        })}\r\n      </LineChart>\r\n    </ResponsiveContainer>\r\n  )\r\n})\r\n\r\nexport default ChartArea","import React, { FC } from 'react';\r\n\r\nimport { useAppSelector } from '../../../hooks/redux';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport FormGroup from '@mui/material/FormGroup';\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport FormLabel from '@mui/material/FormLabel';\r\n\r\nimport { RootState } from '../../../store/store';\r\nimport { translate } from '../../../localizations';\r\nimport { BlockBox } from \"../../common\";\r\nimport ChartBar from '../../common/Charts/ChartBar';\r\nimport ChartRadar from '../../common/Charts/ChartRadar';\r\nimport ChartPie from '../../common/Charts/ChartPie';\r\nimport ChartArea from '../../common/Charts/ChartArea';\r\n\r\ntype ChartsBlockType = {\r\n  chartTypeValue: {\r\n    label: string,\r\n    value: string\r\n  }\r\n  tableRows: {}[]\r\n  dataChart: [],\r\n  handleCheckChart: (event: React.ChangeEvent<HTMLInputElement>) => void,\r\n  checkChart: string,\r\n}\r\n\r\nconst ChartsBlock: FC<ChartsBlockType> = React.memo(({ chartTypeValue, tableRows , dataChart, handleCheckChart, checkChart }) => {\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n  return (\r\n    <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '30px', zIndex: '5'}}>\r\n      <BlockBox padding=\"24px\" width=\"calc(70% - 30px)\">\r\n        <div>\r\n          {/* to do: подготовить данные */}\r\n          {chartTypeValue.value === 'lineChart' ? \r\n            <div style={{marginTop: '30px', width: '100%'}}>\r\n            <ChartArea\r\n              data={tableRows}\r\n              width={800}\r\n              height={300}\r\n              dataKey={dataChart}\r\n            />\r\n          </div>\r\n          : <></>\r\n          }\r\n\r\n          {chartTypeValue.value === 'barChart' ? \r\n            <div style={{marginTop: '30px', width: '100%'}}>\r\n              <ChartBar\r\n                data={tableRows}\r\n                width={800}\r\n                height={400}\r\n                dataKey={dataChart}\r\n              />\r\n            </div>\r\n            : <></>\r\n          }\r\n          {/* to do: подготовить данные */}\r\n          {chartTypeValue.value === 'radarChart' ? \r\n            <div style={{marginTop: '30px', width: '100%'}}>\r\n              <ChartRadar\r\n                data={tableRows}\r\n                width={800}\r\n                height={300}\r\n                dataKey={dataChart}\r\n              />\r\n            </div>\r\n            : <></>\r\n          }\r\n          {/* to do: подготовить данные */}\r\n          {chartTypeValue.value === 'pieChart' ? \r\n            <div style={{marginTop: '30px', width: '100%'}}>\r\n              <ChartPie\r\n                data={tableRows}\r\n                width={800}\r\n                height={300}\r\n                dataKey={dataChart}\r\n              />\r\n            </div>\r\n            : <></>\r\n          }\r\n        </div>\r\n      </BlockBox>\r\n      <BlockBox padding=\"24px\" height=\"300px\" width=\"30%\">  \r\n        <FormGroup>\r\n          <FormControl>\r\n            <FormLabel id=\"radio-buttons-group\" style={{marginBottom: '10px'}}>{translate('reportShow', language)}</FormLabel>\r\n              <RadioGroup\r\n                aria-labelledby=\"radio-buttons-group\"\r\n                defaultValue=\"calls\"\r\n                name=\"radio-buttons-group\"\r\n                onChange={handleCheckChart}\r\n                value={checkChart}\r\n              >\r\n              <FormControlLabel value=\"calls\" control={<Radio />} label={`${translate('reportCalls', language)}`} />\r\n              <FormControlLabel value=\"minutes\" control={<Radio />} label={`${translate('reportMinutes', language)}`} />\r\n              <FormControlLabel value=\"percent\" control={<Radio />} label={`${translate('reportPercent', language)}`} />\r\n            </RadioGroup>\r\n          </FormControl>\r\n        </FormGroup>\r\n      </BlockBox>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default ChartsBlock;","import React, { FC, memo, useEffect, useState } from 'react';\r\n\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { DataGrid, GridColDef, GridRowsProp, MuiEvent } from '@mui/x-data-grid';\r\nimport { Typography } from '@mui/material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport Box from '@mui/material/Box';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport FormGroup from '@mui/material/FormGroup';\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\nimport { RootState } from '../../store/store';\r\nimport { translate } from \"../../localizations\";\r\nimport CallsHeader from '../Calls/CallsHeader';\r\nimport CallStubMiddleware from '../Calls/Call';\r\nimport { CallType } from '../../store/calls/calls.types';\r\nimport { getCallsInfoById, callsSlice } from '../../store/calls/calls.slice';\r\nimport { CriteriasType } from '../../store/search/search.types';\r\nimport { getAllSearchCriterias, getDefaultCriterias, searchSlice } from \"../../store/search/search.slice\";\r\nimport ContainedSelect from '../../components/common/Selects/ContainedSelect';\r\nimport CriteriasList from '../../components/common/Criterias/CriteriasList';\r\nimport TextSelect from '../../components/common/Selects/TextSelect/TextSelect';\r\nimport Input from \"../../components/common/Input\";\r\nimport Plus from '../../components/common/Buttons/Plus';\r\nimport Snackbar, { SnackbarType } from \"../../components/common/Snackbar\";\r\nimport { BlockBox, СontrolBlock } from \"../../components/common\";\r\nimport { optionsCreator, optionsCreatorVEL, optionsCreatorWithName, optionsCreatorWithKey } from '../../utils/optionsCreator';\r\nimport { reportsStyles } from './Reports.jss';\r\nimport { ExportIcon, OnTopArrow, OnBottomArrow, TrashSvg } from \"./Reports.svg\";\r\nimport ChartsBlock from '../../components/common/Charts/ChartsBlock';\r\nimport SearchSelect from '../../components/common/Search/SearchSelect';\r\nimport { reportsSlice,\r\n  getAllReports,\r\n  getReport,\r\n  setReports,\r\n  getCallReport,\r\n  deleteReport,\r\n  getSelectors,\r\n  getTagNames\r\n} from '../../store/reports/reports.slice';\r\n\r\nconst Reports = React.memo(() => {\r\n  const classes = reportsStyles();\r\n  const dispatch = useDispatch();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n  //reports\r\n  const allReports = useAppSelector(state => state.reports.allReports);\r\n  const savedReportsOptions = optionsCreatorWithName(allReports);\r\n  const currentSavedReport = useAppSelector(state => state.reports.currentSavedReport);\r\n  const callReport = useAppSelector(state => state.reports.callReport);\r\n  const totalCalls = useAppSelector(state => state.reports.callReport.report.total_calls);\r\n\r\n  //calls\r\n  const calls = useAppSelector<CallType[][]>(state => state.calls.calls);\r\n  const [foundCalls, setFoundCalls] = React.useState<string | number>(0);\r\n  const [callsSwitch, setCallSwitch] = useState(false);\r\n\r\n  const [expanded, setExpanded] = React.useState<string | false>(false);\r\n  const handleExpandedChange = (panel: string | false) => {\r\n    setExpanded(panel);\r\n  };\r\n\r\n  //criterias\r\n  const activeCriteriasReports = useAppSelector(state => state.search.activeCriteriasReports);\r\n  const defaultCriterias = useAppSelector(state => state.search.defaultCriterias);\r\n  const allCriterias = useAppSelector(state => state.search.allCriterias);\r\n  const allCriteriasColumn = useAppSelector(state => state.search.allCriterias);\r\n  const activeCriteriasColumn = useAppSelector(state => state.search.activeCriteriasColumn);\r\n  const activeParameters = useAppSelector(state => state.reports.activeParameters);\r\n\r\n  const [visibleParameters, setVisibleParameters] = React.useState(true);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  //error\r\n  const error = useAppSelector(state => state.reports.error);\r\n  useEffect(() => {\r\n    if (error) {\r\n      setSnackbar({ type: 'error', value: true, text: error, time: 2000 });\r\n    }\r\n  }, [error])\r\n\r\n  useEffect(() => {\r\n    document.title = \"Отчёты | IMOT.io\";\r\n    setLoading(true);\r\n    if (isAuth && activeCriteriasReports.length < 1) {\r\n      dispatch(getDefaultCriterias());\r\n    }\r\n    dispatch(getAllReports());\r\n    funcForTag();\r\n    func();    \r\n    funcForCriterias();\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const func = async () => {\r\n    await dispatch(getSelectors());\r\n  }\r\n  const funcForTag = async () => {\r\n    await dispatch(getTagNames());\r\n  }\r\n  const funcForCriterias = async () => {\r\n    await dispatch(getAllSearchCriterias());\r\n  }\r\n\r\n  interface selectNamesType {\r\n    [key: string]: {\r\n      label: string,\r\n      type: string | null,\r\n    }\r\n  }\r\n  const selectNames: selectNamesType = {\r\n    calls: {\r\n      label: `${translate('reportTypeCalls', language)}`,\r\n      type: null\r\n    },\r\n    time : {\r\n      label: `${translate('reportGroupByRowTime', language)}`,\r\n      type: 'select'\r\n    },\r\n    search_items : {\r\n      label: `${translate('reportGroupByRowSearchItems', language)}`,\r\n      type: 'title'\r\n    },\r\n    tag : {\r\n      label: `${translate('reportGroupByRowTag', language)}`,\r\n      type: 'select-tag'\r\n    },\r\n    tag_name_list : {\r\n      label: `${translate('reportGroupByRowTagNameList', language)}`,\r\n      type: 'input'\r\n    },\r\n    tag_value_list : {\r\n      label: `${translate('reportGroupByRowTagValueList', language)}`,\r\n      type: 'input-value'\r\n    },\r\n    operator_phone : {\r\n      label: `${translate('reportGroupByRowOperatorPhone', language)}`,\r\n      type: 'boolean'\r\n    },\r\n    client_phone : {\r\n      label: `${translate('reportGroupByRowClientPhone', language)}`,\r\n      type: 'boolean'\r\n    },\r\n    calls_count : {\r\n      label: `${translate('reportGroupByRowCallsCount', language)}`,\r\n      type: 'boolean'\r\n    },\r\n    stt_engine: {\r\n      label: `${translate('reportGroupByRowSttEngine', language)}`,\r\n      type: 'boolean'\r\n    },\r\n    hour: {\r\n      label: `${translate('reportGroupByTimeHour', language)}`,\r\n      type: null\r\n    },\r\n    day: {\r\n      label: `${translate('reportGroupByTimeDay', language)}`,\r\n      type: null\r\n    },\r\n    week: {\r\n      label: `${translate('reportGroupByTimeWeek', language)}`,\r\n      type: null\r\n    },\r\n    month: {\r\n      label: `${translate('reportGroupByTimeMonth', language)}`,\r\n      type: null\r\n    },\r\n  }\r\n  const chartTypes = [\r\n    {label: `${translate('barChart', language)}`, value: 'barChart' },\r\n    {label: `${translate('lineChart', language)}`, value: 'lineChart' },\r\n    {label: `${translate('pieChart', language)}`, value: 'pieChart' },\r\n    {label: `${translate('radarChart', language)}`, value: 'radarChart' },\r\n  ]  \r\n  const chartTypeOptions = chartTypes;\r\n  const [chartTypeValue, setChartTypeValue] = useState(chartTypeOptions[0]);\r\n\r\n  const handleOptionsReportsSelect = (options: any) => {\r\n    let local: { value: any, label: string, type: string | null }[] = [];\r\n    for (let i = 0; i < options.length; i++) {\r\n      let selectTitle: string = options[i]\r\n      //temporarily\r\n      if (selectTitle !== 'tag_value_list') {\r\n          local.push({ value: options[i], label: selectNames[selectTitle].label, type: selectNames[selectTitle].type })\r\n        }\r\n    }\r\n    return local;\r\n  }\r\n  const handleOptionsReportsSelectObj = (options: any) => {\r\n    let local = {};\r\n    if (options.length || options.group_by) {\r\n      if (options === 'calls') {\r\n        local = { value: options, label: selectNames[options].label };\r\n      } else {\r\n        local = { value: options.group_by, label: selectNames[options.group_by].label, type: selectNames[options.group_by].type };\r\n      }\r\n    }\r\n    return local;\r\n  }\r\n\r\n  const handleMoreSelectClick = (allCriteriasArr: CriteriasType[] | null , activeCriterias: CriteriasType[]) => {\r\n    if (allCriteriasArr) {\r\n      let local: { value: { key: string }, label: string, icon?: string }[] = [];\r\n      allCriteriasArr.forEach((item, i) => {\r\n        local.push({ value: allCriteriasArr[i], label: allCriteriasArr[i].title });\r\n      })\r\n      for (let i = 0; i < local.length; i++) {\r\n        if (activeCriterias.find((item) => item.key === local[i].value.key)) {\r\n          local[i].icon = 'minus';\r\n        } else {\r\n          local[i].icon = 'plus';\r\n        }\r\n      }\r\n      return local\r\n    }\r\n  }\r\n\r\n  function onAllCriteriasSelectValueChange(event: any) {\r\n    let index = -1;\r\n    for (let i in activeCriteriasReports) {\r\n      if (event.value.key === activeCriteriasReports[i].key) {\r\n        index = parseInt(i, 10);\r\n        dispatch(searchSlice.actions.removeActiveCriteriaReports(activeCriteriasReports[index]));\r\n        break\r\n      }\r\n    }\r\n    if (index < 0) {\r\n      dispatch(searchSlice.actions.setActiveCriteriasReports([...activeCriteriasReports, { ...event.value, values: [] }]));\r\n    }\r\n  }\r\n\r\n  function onAllCriteriasColumnSelectValueChange(event: any) {\r\n    let index = -1;\r\n    for (let i in activeCriteriasColumn) {\r\n      if (event.value.key === activeCriteriasColumn[i].key) {\r\n        index = parseInt(i, 10);\r\n        dispatch(searchSlice.actions.removeActiveCriteriaColumnReports(activeCriteriasColumn[index]));\r\n        break\r\n      }\r\n    }\r\n    if (index < 0) {\r\n      dispatch(searchSlice.actions.setActiveCriteriaReportsColumn([...activeCriteriasColumn, { ...event.value, values: [] }]));\r\n    }\r\n  }\r\n\r\n  function onAllCriteriasColumnSelectValueChangeTEST(event: any, arrayIndex: number, activeCriterias: CriteriasType[], allCriteriasArr: CriteriasType[], allOptions: any) {\r\n    let index = -1;\r\n    for (let i in activeCriterias) {\r\n      if (event.value.key === activeCriterias[i].key) {\r\n        index = parseInt(i, 10);\r\n        dispatch(reportsSlice.actions.removeActiveCriteriaColumn({ criteria: activeCriterias[index], arrayIndex: arrayIndex }));\r\n\r\n        const activeCriteriasArr = cloneDeep(activeCriterias);\r\n        activeCriteriasArr.splice(index, 1);\r\n\r\n        const local2 = handleMoreSelectClick(allCriteriasArr, [...activeCriteriasArr]);\r\n        const allOptions = local2;\r\n        dispatch(reportsSlice.actions.setOptionsCriterias({ arrayIndex: arrayIndex, criteria: allOptions }));\r\n        break\r\n      }\r\n    }\r\n    if (index < 0) {\r\n      dispatch(reportsSlice.actions.setActiveCriteriaColumn({ criteria: [...activeCriterias, { ...event.value, values: [] }], arrayIndex: arrayIndex }));\r\n      const local2 = handleMoreSelectClick(allCriteriasArr, [...activeCriterias, { ...event.value, values: [] }]);\r\n      const allOptions = local2;\r\n      dispatch(reportsSlice.actions.setOptionsCriterias({ arrayIndex: arrayIndex, criteria: allOptions }));\r\n    }\r\n  }\r\n\r\n  const activeReport = useAppSelector(state => state.reports.activeReport);\r\n  const period = useAppSelector(state => state.reports.activeReport.period);\r\n  const groupByColumns = useAppSelector(state => state.reports.activeReport.cols_group_by);\r\n\r\n  // selectors values\r\n  const selectorsValues = useAppSelector(state => state.reports.selectors);\r\n\r\n  //название отчета\r\n  const reportName = useAppSelector(state => state.reports.activeReport.report_name);\r\n\r\n  // тип отчета\r\n  const typeReportOptions = handleOptionsReportsSelect(selectorsValues.report_types);\r\n  const typeReport = useAppSelector(state => state.reports.activeReport.report_type);\r\n  const typeReportValue = handleOptionsReportsSelectObj(typeReport);\r\n\r\n  // по строкам\r\n  const groupByRowsReportOptions = handleOptionsReportsSelect(selectorsValues.rows_groupings);\r\n  const groupByRows = useAppSelector(state => state.reports.activeReport.rows_group_by);\r\n  let groupByRowsValue: any = {};\r\n  if (groupByRows) {\r\n    groupByRowsValue = handleOptionsReportsSelectObj(groupByRows);\r\n  }\r\n\r\n  // по времени\r\n  const timeColumnsReportOptions = handleOptionsReportsSelect(selectorsValues.groupings_by_time);\r\n  const [timeColumnsReportValue, setTimeColumnsReportValue] = useState(timeColumnsReportOptions[0]);\r\n\r\n  // tag names\r\n  const tagNames = useAppSelector(state => state.reports.tagNames);\r\n  const tagNamesOptions = optionsCreatorVEL(tagNames);\r\n  let tagNamesValue = { value: '', label: '' };\r\n  //@ts-ignore\r\n  if (groupByRows.group_by === 'tag') {\r\n    //@ts-ignore\r\n    tagNamesValue = { label: groupByRows.value, value: groupByRows.value };\r\n  } else {\r\n    tagNamesValue = tagNamesOptions[0];\r\n  }\r\n\r\n  const tagNamesColOptions = optionsCreatorVEL(tagNames);\r\n  //@ts-ignore\r\n  let tagNameColFrom = useAppSelector(state => state.reports.activeReport.cols_group_by[0]);\r\n  let tagNamesColValue: any = { label: tagNameColFrom.value, value: tagNameColFrom.value };\r\n\r\n  let tagNameListValue: any = []\r\n  if (groupByColumns.length != 0 && groupByColumns[0].group_by === 'tag_name_list' && groupByColumns[0].value) {\r\n    tagNameListValue = tagNameColFrom.value;\r\n  } else {\r\n    tagNameListValue = [];\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (groupByColumns.length != 0 && groupByColumns[0].group_by === 'tag' && groupByColumns[0].value) {\r\n      tagNamesColValue = { label: tagNameColFrom.value, value: tagNameColFrom.value };\r\n    } \r\n    else {\r\n      tagNamesColValue = tagNamesOptions[0];\r\n      if (groupByColumns[0].group_by === 'tag' && tagNamesOptions[0]) {\r\n        dispatch(reportsSlice.actions.setDefaultColsTagsValue({ value: tagNamesOptions[0] }))\r\n      }\r\n    }\r\n  }, [tagNamesOptions, groupByColumns, tagNameColFrom])\r\n\r\n  const [op, setOp] = useState<any>([]);\r\n  useEffect(() => {\r\n    setOp(handleMoreSelectClick(allCriterias, activeCriteriasReports));\r\n  }, [allCriterias, activeCriteriasReports, defaultCriterias]);\r\n\r\n  const [opCriteriasColumn, setOpCriteriasColumn] = useState<any>([]);\r\n  useEffect(() => {\r\n    setOpCriteriasColumn(handleMoreSelectClick(allCriteriasColumn, activeCriteriasColumn));\r\n  }, [allCriteriasColumn, activeCriteriasColumn]);\r\n\r\n  const [opAddCriterias, setOpAddCriterias] = useState(op);\r\n  useEffect(() => {\r\n    if (allCriterias) {\r\n      setOpAddCriterias(handleMoreSelectClick(allCriterias, []));\r\n    }\r\n  }, [allCriterias])\r\n\r\n  // по столбцам\r\n  const groupByColumnsReportOptions = handleOptionsReportsSelect(selectorsValues.cols_groupings);\r\n  let groupByColumnsValue: any = {};\r\n  if (groupByColumns.length != 0) {\r\n    groupByColumnsValue = handleOptionsReportsSelectObj(groupByColumns[0]);\r\n  }\r\n\r\n  //call search items\r\n  const callSearchItems = useAppSelector(state => state.reports.activeReport.call_search_items);\r\n  useEffect(() => {\r\n    if (callSearchItems.length != 0) {\r\n      let handleArray: any = [];\r\n      for (let i = 0; i < callSearchItems.length; i++) {\r\n        //@ts-ignore\r\n        let handleArrayItem = allCriterias.find((item) => callSearchItems[i].key === item.key);\r\n        handleArray.push(handleArrayItem);\r\n      }\r\n      let activeSearchItems = cloneDeep(handleArray);\r\n      for (let i = 0; i < activeSearchItems.length; i++) {\r\n        //@ts-ignore\r\n        activeSearchItems[i].values = callSearchItems[i].values;\r\n      }\r\n      dispatch(searchSlice.actions.setActiveCriteriasReports(activeSearchItems));\r\n    }\r\n  }, [callSearchItems])\r\n\r\n  useEffect(() => {\r\n    if (timeColumnsReportOptions.length != 0) setTimeColumnsReportValue(timeColumnsReportOptions[0]);\r\n  }, [selectorsValues])\r\n\r\n  //название деф столбца\r\n  //@ts-ignore\r\n  const colsGroupDefault = useAppSelector(state => state.reports.activeReport.cols_group_by[0]);\r\n  let reportNameColumnDefault = '';\r\n  if (colsGroupDefault) {\r\n    if (colsGroupDefault.value) {\r\n      //@ts-ignore\r\n      reportNameColumnDefault = colsGroupDefault.value.col_name;\r\n    }\r\n    if (!reportNameColumnDefault) reportNameColumnDefault = '';\r\n  }\r\n\r\n  //checkbox diff values in table\r\n  const [checkboxValue, setCheckBoxValue] = useState(false);\r\n  const handleChangeCheck = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCheckBoxValue(event.target.checked);\r\n  }\r\n  //checkbox show values in table\r\n  const [checkboxCalls, setCheckboxCalls] = useState(true);\r\n  const handleChangeCheckCalls = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCheckboxCalls(event.target.checked);\r\n  }\r\n  const [checkboxMinutes, setCheckboxMinutes] = useState(true);\r\n  const handleChangeCheckMinutes = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCheckboxMinutes(event.target.checked);\r\n  }\r\n  const [checkboxPercent, setCheckboxPercent] = useState(true);\r\n  const handleChangeCheckPercent = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCheckboxPercent(event.target.checked);\r\n  }\r\n  //chart\r\n  const checkboxShowChart = useAppSelector(state => state.reports.showCharts);\r\n  const handleCheckboxShowChart = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    // setCheckboxShowChart(event.target.checked);\r\n    dispatch(reportsSlice.actions.setShowCharts(event.target.checked))\r\n  }\r\n  const [checkChart, setCheckChart] = useState('calls');\r\n  const handleCheckChart = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCheckChart((event.target as HTMLInputElement).value);\r\n  }\r\n\r\n  const tableRows = useAppSelector(state => state.reports.tableRows);\r\n  const tableColumns = useAppSelector(state => state.reports.tableColumns);\r\n  const rowGroupHeaderTitle = useAppSelector(state => state.reports.callReport.report.row_group_header);\r\n\r\n  const columnsTable = function () {\r\n    const columnsArray: any[] = [{\r\n      field: 'idName',\r\n      name: `${rowGroupHeaderTitle}`,\r\n      headerName: `${rowGroupHeaderTitle}`,\r\n      minWidth: 160,\r\n      height: 75,\r\n      minHeight: 100,\r\n      flex: 1.5,\r\n      editable: false,\r\n      headerAlign: 'center',\r\n      align: 'center',\r\n      headerClassName: 'light-header--theme',\r\n    }];\r\n    callReport.report.cols.forEach((item, index) => {\r\n      if (checkboxCalls) {\r\n        columnsArray.push({\r\n          field: `calls_count_${index}`,\r\n          name: `${item}`,\r\n          headerName: `${translate('reportCalls', language)}`,\r\n          minWidth: 150,\r\n          height: 75,\r\n          minHeight: 100,\r\n          flex: 1,\r\n          editable: false,\r\n          headerAlign: 'center',\r\n          align: 'center',\r\n          headerClassName: 'light-header--theme',\r\n          cellClassName: 'cell-active',\r\n          renderHeader: () => (\r\n            <div className={classes.tableHeaderTitle}>\r\n              <div className={classes.tableHeaderSubTitle}>{item}</div>\r\n              <div className={classes.tableHeaderSubSubTitle}>{`${translate('reportCalls', language)}`}</div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n\r\n      if (checkboxMinutes) {\r\n        columnsArray.push({\r\n          field: `calls_minutes_${index}`,\r\n          name: `${item}`,\r\n          headerName: `${translate('reportMinutes', language)}`,\r\n          minWidth: 150,\r\n          height: 75,\r\n          minHeight: 100,\r\n          flex: 1,\r\n          editable: false,\r\n          headerAlign: 'center',\r\n          align: 'center',\r\n          headerClassName: 'light-header--theme',\r\n          content: 'minuts',\r\n          renderHeader: () => (\r\n            <div className={classes.tableHeaderTitle}>\r\n              <div className={classes.tableHeaderSubTitle}>{item}</div>\r\n              <div className={classes.tableHeaderSubSubTitle}>{`${translate('reportMinutes', language)}`}</div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n\r\n      if (checkboxPercent) {\r\n        columnsArray.push({\r\n          field: `percent_calls_count_from_total_${index}`,\r\n          name: `${item}`,\r\n          headerName: `%`,\r\n          minWidth: 150,\r\n          height: 75,\r\n          minHeight: 100,\r\n          flex: 1,\r\n          editable: false,\r\n          headerAlign: 'center',\r\n          align: 'center',\r\n          headerClassName: 'light-header--theme',\r\n          content: 'percent',\r\n          renderHeader: () => (\r\n            <div className={classes.tableHeaderTitle}>\r\n              <div className={classes.tableHeaderSubTitle}>{item}</div>\r\n              <div className={classes.tableHeaderSubSubTitle}>{'%'}</div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n\r\n    })\r\n    if (checkboxCalls) {\r\n      columnsArray.push({\r\n        field: 'row_sum_calls_count',\r\n        headerName: `${translate('reportSumCalls', language)}`,\r\n        minWidth: 150,\r\n        height: 75,\r\n        minHeight: 100,\r\n        flex: 1,\r\n        headerAlign: 'center',\r\n        align: 'center',\r\n        headerClassName: 'light-header--theme',\r\n        cellClassName: 'cell-active',\r\n        renderHeader: () => (\r\n          <div className={classes.tableHeaderTitle}>\r\n            <div className={classes.tableHeaderSubTitle}>{`${translate('reportAll', language)}`}</div>\r\n            <div className={classes.tableHeaderSubSubTitle}>{`${translate('reportSumCalls', language)}`}</div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n    if (checkboxMinutes) {\r\n      columnsArray.push({\r\n        field: 'row_sum_calls_minutes',\r\n        headerName: `${translate('reportCountMinutes', language)}`,\r\n        minWidth: 150,\r\n        height: 75,\r\n        minHeight: 100,\r\n        flex: 1,\r\n        headerAlign: 'center',\r\n        align: 'center',\r\n        headerClassName: 'light-header--theme',\r\n        cellClassName: 'dataCell-hover',\r\n        content: 'minuts',\r\n        renderHeader: () => (\r\n          <div className={classes.tableHeaderTitle}>\r\n            <div className={classes.tableHeaderSubTitle}>{`${translate('reportAll', language)}`}</div>\r\n            <div className={classes.tableHeaderSubSubTitle}>{`${translate('reportCountMinutes', language)}`}</div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n\r\n    if (checkboxPercent) {\r\n      columnsArray.push({\r\n        field: 'row_percent_count_from_total',\r\n        headerName: '%',\r\n        minWidth: 150,\r\n        height: 75,\r\n        minHeight: 100,\r\n        flex: 1,\r\n        headerAlign: 'center',\r\n        align: 'center',\r\n        headerClassName: 'light-header--theme',\r\n        content: 'percent',\r\n        renderHeader: () => (\r\n          <div className={classes.tableHeaderTitle}>\r\n            <div className={classes.tableHeaderSubTitle}>{`${translate('reportAll', language)}`}</div>\r\n            <div className={classes.tableHeaderSubSubTitle}>{'%'}</div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n    if (checkboxCalls) {\r\n      columnsArray.push({\r\n        field: 'row_total_processed_calls_count',\r\n        headerName: `${translate('reportAllCount', language)}`,\r\n        minWidth: 150,\r\n        height: 75,\r\n        minHeight: 100,\r\n        flex: 1,\r\n        headerAlign: 'center',\r\n        align: 'center',\r\n        headerClassName: 'light-header--theme',\r\n        content: 'percent',\r\n        renderHeader: () => (\r\n          <div className={classes.tableHeaderTitle}>\r\n            <div className={classes.tableHeaderSubTitle}>{`${translate('reportAll', language)}`}</div>\r\n            <div className={classes.tableHeaderSubSubTitle}>{`${translate('reportAllCount', language)}`}</div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n\r\n    return columnsArray\r\n  }\r\n  const columns: GridColDef[] = columnsTable();\r\n  const rowsTable = () => {\r\n    const result: any[] = [];\r\n    const columnsArray: any[] = columnsTable();\r\n    let resultIds: any[] = [];\r\n\r\n    callReport.report.rows.forEach((itemRow, indexRow) => {\r\n      //создаем первую id строку\r\n      result.push({});\r\n      result[indexRow].id = indexRow;\r\n      result[indexRow][columnsArray[0].field] = itemRow;\r\n\r\n      //создаем пустой массив для callIds\r\n      result[indexRow]['callIds'] = {};\r\n\r\n      //количество звонков/ минут/ %\r\n      callReport.report.cols.forEach((itemCol, indexCol) => {\r\n        result[indexRow][`calls_count_${indexCol}`] = callReport.report.values[itemRow].cols[itemCol].calls_count;\r\n        result[indexRow][`calls_minutes_${indexCol}`] = callReport.report.values[itemRow].cols[itemCol].calls_minutes;\r\n        result[indexRow][`percent_calls_count_from_total_${indexCol}`] = `${callReport.report.values[itemRow].cols[itemCol].percent_calls_count_from_total}%`;\r\n        result[indexRow][`percent_calls_${indexCol}`] = callReport.report.values[itemRow].cols[itemCol].percent_calls_count_from_total;\r\n\r\n        if (checkboxValue) {\r\n          const diffValue = callReport.diff_report[itemRow].cols[itemCol].calls_count;\r\n          let diffAdd = '';\r\n          if (diffValue > 0) {\r\n            diffAdd = ` (+${diffValue})`;\r\n          } else {\r\n            diffAdd = ` (${diffValue})`;\r\n          }\r\n          result[indexRow][`calls_count_${indexCol}`] += diffAdd;\r\n\r\n          const diffValueMinutes = callReport.diff_report[itemRow].cols[itemCol].calls_minutes;\r\n          let diffAddMinutes = '';\r\n          if (diffValueMinutes > 0) {\r\n            diffAddMinutes = ` (+${diffValueMinutes})`;\r\n          } else {\r\n            diffAddMinutes = ` (${diffValueMinutes})`;\r\n          }\r\n          result[indexRow][`calls_minutes_${indexCol}`] += diffAddMinutes;\r\n\r\n          const diffValuePercent = callReport.diff_report[itemRow].cols[itemCol].percent_calls_count_from_total;\r\n          let diffAddPercent = '';\r\n          if (diffValuePercent > 0) {\r\n            diffAddPercent = ` (+${diffValuePercent}%)`;\r\n          } else {\r\n            diffAddPercent = ` (${diffValuePercent}%)`;\r\n          }\r\n          result[indexRow][`percent_calls_count_from_total_${indexCol}`] += diffAddPercent;\r\n        }\r\n        result[indexRow]['callIds'][`calls_count_${indexCol}`] = callReport.report.values[itemRow].cols[itemCol].call_ids;\r\n        //массив ids\r\n        resultIds.push(...callReport.report.values[itemRow].cols[itemCol].call_ids);\r\n      })\r\n      //общее время по строке\r\n      result[indexRow]['row_sum_calls_count'] = callReport.report.values[itemRow].row_info.row_sum_calls_count;\r\n      result[indexRow]['row_sum_calls_minutes'] = callReport.report.values[itemRow].row_info.row_sum_calls_minutes;\r\n      result[indexRow]['row_percent_count_from_total'] = `${callReport.report.values[itemRow].row_info.row_percent_count_from_total}%`;\r\n      result[indexRow]['row_total_processed_calls_count'] = callReport.report.values[itemRow].row_info.row_total_processed_calls_count;\r\n\r\n      if (checkboxValue) {\r\n        const diffValue = callReport.diff_report[itemRow].row_info.row_sum_calls_count;\r\n        let diffAdd = '';\r\n        if (diffValue > 0) {\r\n          diffAdd = ` (+${diffValue})`;\r\n        } else {\r\n          diffAdd = ` (${diffValue})`;\r\n        }\r\n        result[indexRow][`row_sum_calls_count`] += diffAdd;\r\n\r\n        const diffValueMinutes = callReport.diff_report[itemRow].row_info.row_sum_calls_minutes;\r\n        let diffAddMinutes = '';\r\n        if (diffValueMinutes > 0) {\r\n          diffAddMinutes = ` (+${diffValueMinutes})`;\r\n        } else {\r\n          diffAddMinutes = ` (${diffValueMinutes})`;\r\n        }\r\n        result[indexRow][`row_sum_calls_minutes`] += diffAddMinutes;\r\n\r\n        const diffValuePercent = callReport.diff_report[itemRow].row_info.row_percent_count_from_total;\r\n        let diffAddPercent = '';\r\n        if (diffValuePercent > 0) {\r\n          diffAddPercent = ` (+${diffValuePercent}%)`;\r\n        } else {\r\n          diffAddPercent = ` (${diffValuePercent}%)`;\r\n        }\r\n        result[indexRow][`row_percent_count_from_total`] += diffAddPercent;\r\n\r\n        const diffValueCount = callReport.diff_report[itemRow].row_info.row_total_processed_calls_count;\r\n        let diffAddCount = '';\r\n        if (diffValueCount > 0) {\r\n          diffAddCount = ` (+${diffValueCount}%)`;\r\n        } else {\r\n          diffAddCount = ` (${diffValueCount}%)`;\r\n        }\r\n        result[indexRow][`row_total_processed_calls_count`] += diffAddCount;\r\n      }\r\n      //массив ids\r\n      result[indexRow]['callIds']['row_sum_calls_count'] = resultIds;\r\n      resultIds = [];\r\n    })\r\n    return result;\r\n  }\r\n  const rows: GridRowsProp = rowsTable();\r\n\r\n  const [dataChart, setDataChart] = useState<any>([]);\r\n  const getDataChartFunc = () => {\r\n    let arr: any[] = [];\r\n    if (checkChart === 'calls') {\r\n      callReport.report.cols.forEach((itemCol, indexCol) => {\r\n        arr.push(`calls_count_${indexCol}`)\r\n      })\r\n    } else if (checkChart === 'minutes') {\r\n      callReport.report.cols.forEach((itemCol, indexCol) => {\r\n        arr.push(`calls_minutes_${indexCol}`)\r\n      })\r\n    } else {\r\n      callReport.report.cols.forEach((itemCol, indexCol) => {\r\n        arr.push(`percent_calls_${indexCol}`)\r\n      })\r\n    }\r\n    return arr\r\n  }\r\n  useEffect(() => {\r\n    dispatch(reportsSlice.actions.setTableRows(rows));\r\n    dispatch(reportsSlice.actions.setTableColumns(columns));\r\n  }, [callReport, checkboxValue, checkboxCalls, checkboxMinutes, checkboxPercent])\r\n\r\n  useEffect(() => {\r\n    if (callReport) {\r\n      setDataChart(getDataChartFunc());\r\n    }\r\n  }, [callReport, checkChart])\r\n\r\n\r\n  const zeroParameters = () => {\r\n    dispatch(searchSlice.actions.removeAllActiveCriteriasReports(null));\r\n    dispatch(searchSlice.actions.removeAllActiveCriteriasColumnReports(null));\r\n    dispatch(reportsSlice.actions.removeAllActiveParameters(null));\r\n    dispatch(reportsSlice.actions.setNameReport(''));\r\n    dispatch(reportsSlice.actions.setInitialSavedReport(null));\r\n  }\r\n\r\n  const getCallParameters = async (event: any) => {\r\n    hideVisibleParameters();\r\n    setLoading(true);\r\n    //обнуление параметров\r\n    zeroParameters();\r\n\r\n    await dispatch(reportsSlice.actions.setCurrentSavedReport(event));\r\n    await dispatch(getReport(event.value));\r\n    await dispatch(getCallReport());\r\n    setLoading(false);\r\n  }\r\n\r\n  //отображение доп группировки по столбцам из сохраненных отчетов - to do:  переделать это\r\n  useEffect(() => {\r\n    if (groupByColumns.length > 0) {\r\n      if (groupByColumns[0].group_by === 'search_items') {\r\n        //@ts-ignore\r\n        if (groupByColumns[0].value.search_items) {\r\n          //@ts-ignore\r\n          for (let i = 0; i < groupByColumns[0].value.search_items.length; i++) {\r\n            //@ts-ignore\r\n            const groupColumnsItem = groupByColumns[0].value.search_items[i]\r\n            //@ts-ignore\r\n            dispatch(searchSlice.actions.setActiveCriteriaReportsColumn(allCriterias.filter((item) => item.key === groupColumnsItem.key)))\r\n            dispatch(searchSlice.actions.setActiveCriteriaReportsColumnValues({ key: groupColumnsItem.key, values: [...groupColumnsItem.values] }));\r\n          }\r\n        }\r\n      }\r\n      if (groupByColumns[0].group_by === 'tag_name_list') {\r\n        dispatch(reportsSlice.actions.setDefaultColTagsName(groupByColumns[0].value))\r\n        \r\n      }\r\n    }\r\n\r\n    if (groupByColumns.length > 1) {\r\n      //доп группировки\r\n      for (let i = 1; i < groupByColumns.length; i++) {\r\n        dispatch(reportsSlice.actions.setActiveParameters([{\r\n          select: { options: groupByColumnsReportOptions, value: handleOptionsReportsSelectObj(groupByColumns[i]) },\r\n          tagsVal: { options: tagNamesColOptions, value: tagNamesColValue },\r\n          op: { options: opAddCriterias, value: '' },\r\n          tagsNameList: { options: tagNamesColOptions, value: [] },\r\n          callFilters: { options: opAddCriterias, values: allCriterias, activeValues: [] }\r\n        }]))\r\n        if (groupByColumns[i].group_by === 'tag') {\r\n          dispatch(reportsSlice.actions.setParameterTagstFieldValue({\r\n            arrayIndex: i - 1,\r\n            //@ts-ignore\r\n            value: { value: groupByColumns[i].value, label: groupByColumns[i].value }\r\n          }))\r\n        } else if (groupByColumns[i].group_by === 'search_items') {\r\n          dispatch(reportsSlice.actions.setNameColumnFieldValue({\r\n            arrayIndex: i - 1,\r\n            //@ts-ignore\r\n            value: groupByColumns[i].value.col_name\r\n          }))\r\n          let activeColsCriterias = [];\r\n          //@ts-ignore\r\n          for (let j = 0; j < groupByColumns[i].value.search_items.length; j++) {\r\n            //@ts-ignore\r\n            const searchItem = groupByColumns[i].value.search_items[j];\r\n            //@ts-ignore\r\n            activeColsCriterias.push(allCriterias.filter((item) => item.key === searchItem.key));\r\n\r\n            let activeSearchItems = cloneDeep(activeColsCriterias);\r\n              //@ts-ignore\r\n              activeSearchItems[j].values = searchItem.values\r\n            dispatch(reportsSlice.actions.setActiveCriteriaColumn({\r\n              arrayIndex: i - 1,\r\n              criteria: activeSearchItems[j]\r\n            }))\r\n            dispatch(reportsSlice.actions.setOptionsCriterias({\r\n              arrayIndex: i - 1,\r\n              criteria: handleMoreSelectClick(allCriterias, activeSearchItems[j])\r\n            }))\r\n          }\r\n        } else if (groupByColumns[i].group_by === 'tag_name_list') {\r\n          dispatch(reportsSlice.actions.setActiveColTagsName({\r\n            arrayIndex: i - 1,\r\n            //@ts-ignore\r\n            value: groupByColumns[i].value\r\n          }))\r\n        } \r\n      }\r\n    }\r\n  }, [callReport])\r\n\r\n  //построение отчета\r\n  const formReport = async () => {\r\n    dispatch(callsSlice.actions.callsReset());\r\n    setLoading(true);\r\n    await dispatch(getCallReport());\r\n    await setLoading(false);\r\n    hideVisibleParameters();\r\n  }\r\n\r\n  const [validateInputItem, setValidateInputItem] = useState(false);\r\n  // сохранение отчета\r\n  const saveReportAsync = async () => {\r\n    if (reportName === '') {\r\n      setValidateInputItem(true);\r\n    }\r\n    else {\r\n      setValidateInputItem(false);\r\n      await dispatch(setReports());\r\n      await dispatch(getAllReports());\r\n      await dispatch(reportsSlice.actions.setCurrentSavedReport({ value: reportName, label: reportName }));\r\n\r\n      setSnackbar({\r\n        type: 'success',\r\n        value: true,\r\n        text: `${translate('reportSaved', language)}`,\r\n        time: 3000\r\n      });\r\n    }\r\n  }\r\n  // удаление отчета\r\n  const deleteReportAsync = async () => {\r\n    await dispatch(deleteReport(currentSavedReport.value));\r\n    await dispatch(getAllReports());\r\n    await handleClose();\r\n\r\n    zeroParameters();\r\n\r\n    setSnackbar({\r\n      type: 'success',\r\n      value: true,\r\n      text: `${translate('reportDeleted', language)}`,\r\n      time: 3000\r\n    });\r\n  }\r\n\r\n  const getCalls = async (callIds: any[]) => {\r\n    if (callIds.length != 0) {\r\n      dispatch(callsSlice.actions.callsReset());\r\n      await dispatch(getCallsInfoById(callIds));\r\n      setCallSwitch(true);\r\n      setFoundCalls(callIds.length);\r\n    } else setCallSwitch(false);\r\n  }\r\n\r\n  const hideVisibleParameters = () => {\r\n    setVisibleParameters(false);\r\n  }\r\n  const showVisibleParameters = () => {\r\n    setVisibleParameters(true);\r\n  }\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const handleClose = () => {\r\n    setIsOpen(false);\r\n  }\r\n  const handleOpen = () => {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  //высота таблицы\r\n  const [heightTable, setHeightTable] = useState('1200px');\r\n  const gridWrapperRef = React.useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const gridDiv = gridWrapperRef.current;\r\n    if (gridDiv != undefined || gridDiv != null && columns.length > 0 || rows.length > 0) {\r\n      if (gridDiv) {\r\n        const gridEl: HTMLDivElement = gridDiv.querySelector('.MuiDataGrid-root')!;\r\n        const gridElHeader: HTMLDivElement = gridDiv.querySelector('.MuiDataGrid-columnHeaders')!;\r\n        const gridElHeaderInner: HTMLDivElement = gridDiv.querySelector('.MuiDataGrid-columnHeadersInner')!;\r\n        if (gridEl) {\r\n          setHeightTable(`${ gridEl.clientHeight - 2 }px`);\r\n        }\r\n        if (gridElHeader && gridElHeaderInner) {\r\n          const height = gridElHeaderInner.clientHeight\r\n          gridElHeader.style.minHeight = `${height}px`;\r\n          gridElHeader.style.maxHeight = `${height}px`;\r\n          gridElHeader.style.lineHeight = `${height}px`;\r\n        }\r\n      }\r\n    }\r\n  }, [tableColumns, tableRows, columns, rows, callReport, activeReport]);\r\n\r\n  const [snackbar, setSnackbar] = useState<SnackbarType>({\r\n    type: 'success',\r\n    text: '',\r\n    value: false,\r\n    time: null\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <СontrolBlock switchEntity={'reports'} />\r\n      <div>\r\n        <div className={classes.reportButtonsGroup}>\r\n          <div className={classes.reportButtonsGroupLeft}>\r\n            <LoadingButton\r\n              className={visibleParameters ? classes.reportOptionsButtonActive : classes.reportOptionsButton}\r\n              color=\"primary\"\r\n              variant=\"text\"\r\n              endIcon={visibleParameters ? <OnTopArrow style={{ margin: '0 7px 0 5px' }} /> : <OnBottomArrow style={{ margin: '0 7px 0 5px' }} />}\r\n              onClick={() => {\r\n                visibleParameters ? hideVisibleParameters() : showVisibleParameters()\r\n              }}\r\n            >\r\n              {translate('reportOptions', language)}\r\n            </LoadingButton>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <Typography style={{ marginRight: '20px', whiteSpace: 'nowrap' }}>{translate('savedReports', language)}:</Typography>\r\n            <div style={{ display: 'flex' }}>\r\n              <ContainedSelect\r\n                height={'38px'}\r\n                width={'265px'}\r\n                marginRight={'0px'}\r\n                justify={'center'}\r\n                onSelectChange={(event) => {\r\n                  getCallParameters(event);\r\n                }}\r\n                options={savedReportsOptions}\r\n                value={currentSavedReport}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {visibleParameters ?\r\n        <BlockBox padding=\"16px\">\r\n          {/* звонки */}\r\n          <div className={classes.filtersBlock}>\r\n            <div className={classes.searchTitle}>\r\n              <div className={classes.searchTitleLeft}>\r\n                <Typography className={classes.searchTitleLeftText} variant=\"h6\">\r\n                  {translate('reportOptions', language)}\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'flex-start', minHeight: '50px' }}>\r\n              <div style={{ width: '100%' }}>\r\n                {/* название */}\r\n                <div className={classes.parameterBlock}>\r\n                  <div className={classes.flexCenter}>\r\n                    <Typography className={classes.parameterItemTitle}>{translate('reportTitle', language)}</Typography>\r\n                    <div style={{ width: '265px' }} className={validateInputItem ? classes.errorInput : classes.reportName}>\r\n                      <span>\r\n                        <Typography className={classes.errorTitle}>{translate('reportTitleMes', language)}</Typography>\r\n                      </span>\r\n                      <Input\r\n                        name={\"report_name\"}\r\n                        type={\"text\"}\r\n                        bcColor={\"#FFFFFF\"}\r\n                        height={'38px'}\r\n                        border={'1px solid #E3E8EF'}\r\n                        label={\"\"}\r\n                        value={reportName}\r\n                        handleChange={(event: any) => {\r\n                          dispatch(reportsSlice.actions.setNameReport(event.target.value))\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* тип отчета */}\r\n                <div className={classes.parameterBlock}>\r\n                  <div className={classes.flexCenter}>\r\n                    <Typography className={classes.parameterItemTitle}>{translate('reportType', language)}</Typography>\r\n                    <ContainedSelect\r\n                      height={'38px'}\r\n                      width={'265px'}\r\n                      justify={'center'}\r\n                      onSelectChange={\r\n                        (event) => {\r\n                          dispatch(reportsSlice.actions.setTypeReport(event.value));\r\n                        }}\r\n                      options={typeReportOptions}\r\n                      value={typeReportValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* по строкам */}\r\n                <div className={classes.parameterBlock}>\r\n                  <div className={classes.flexCenter}>\r\n                    <Typography className={classes.parameterItemTitle}>{translate('reportGroupByRow', language)}</Typography>\r\n                    <ContainedSelect\r\n                      height={'38px'}\r\n                      width={'265px'}\r\n                      justify={'flex-end'}\r\n                      onSelectChange={(event) => {\r\n                        if (event.type === 'select-tag') {\r\n                          dispatch(reportsSlice.actions.setActiveRowsGroupBy({ group_by: event.value, value: tagNamesValue.value }));\r\n                        } else if (event.type === 'select') {\r\n                          dispatch(reportsSlice.actions.setActiveRowsGroupBy({ group_by: event.value, value: timeColumnsReportValue.value }));\r\n                        }\r\n                        else {\r\n                          dispatch(reportsSlice.actions.setActiveRowsGroupBy({ group_by: event.value, value: null }));\r\n                        }\r\n                      }}\r\n                      options={groupByRowsReportOptions}\r\n                      value={groupByRowsValue}\r\n                    />\r\n                  </div>\r\n                  {/* по тегу */}\r\n                  {groupByRowsValue && groupByRowsValue.type === 'select-tag' ?\r\n                    <div style={{ width: '265px' }}>\r\n                      <ContainedSelect\r\n                        height={'38px'}\r\n                        width={'265px'}\r\n                        justify={'flex-end'}\r\n                        onSelectChange={(event) => {\r\n                          dispatch(reportsSlice.actions.setActiveRowsGroupBy({ group_by: groupByRowsValue.value, value: event.value }))\r\n                        }}\r\n                        options={tagNamesOptions}\r\n                        value={tagNamesValue}\r\n                      />\r\n                    </div>\r\n                    : <></>\r\n                  }\r\n\r\n                  {/* по времени */}\r\n                  {groupByRowsValue && groupByRowsValue.type === 'select' ?\r\n                    <div style={{ width: '265px' }}>\r\n                      <ContainedSelect\r\n                        height={'38px'}\r\n                        width={'265px'}\r\n                        justify={'flex-end'}\r\n                        onSelectChange={(event) => {\r\n                          setTimeColumnsReportValue(event);\r\n                          dispatch(reportsSlice.actions.setActiveRowsGroupBy({ group_by: groupByRowsValue.value, value: event.value }));\r\n                        }\r\n                        }\r\n                        options={timeColumnsReportOptions}\r\n                        value={timeColumnsReportValue}\r\n                      />\r\n                    </div>\r\n                    : <></>\r\n                  }\r\n                </div>\r\n\r\n                {/* по столбцам */}\r\n                <div className={classes.parameterBlock}>\r\n                  <div className={classes.parameterBlock}>\r\n\r\n                    {/* типо дефолтный */}\r\n                    <div style={{ display: 'inline-flex', color: '#2F3747' }}>\r\n                      <div className={classes.flexCenter}>\r\n                        <Typography className={classes.parameterItemTitle}>{translate('reportGroupByColumns', language)}</Typography>\r\n                        <ContainedSelect\r\n                          height={'38px'}\r\n                          width={'265px'}\r\n                          justify={'flex-end'}\r\n                          onSelectChange={(event) => {\r\n                            if (event.type === 'select-tag') {\r\n                              dispatch(reportsSlice.actions.setDefaultColsTagGroupBy({ value: tagNamesColValue }))\r\n                            }\r\n                            else if (event.type === 'title') {\r\n                              dispatch(reportsSlice.actions.setDefaultColsTitleGroupBy({ col_name: reportNameColumnDefault }))\r\n                            }\r\n                            else if (event.type === 'input') {\r\n                              dispatch(reportsSlice.actions.setDefaultColsGroupBy({group_by: 'tag_name_list', value: []}))\r\n                            }\r\n                            else {\r\n                              dispatch(reportsSlice.actions.setDefaultColsGroupBy({ group_by: event }))\r\n                            }\r\n                          }}\r\n                          options={groupByColumnsReportOptions}\r\n                          value={groupByColumnsValue}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    {groupByColumnsValue && groupByColumnsValue.type === 'title' ?\r\n                      <>\r\n                        <div style={{ display: 'inline-flex' }}>\r\n                          <div style={{ marginRight: '20px', minWidth: '265px', width: '265px' }}>\r\n                            <Input\r\n                              name={\"\"}\r\n                              type={\"text\"}\r\n                              height={'38px'}\r\n                              bcColor={\"#FFFFFF\"}\r\n                              border={'1px solid #E3E8EF'}\r\n                              label={`${translate('reportColumnHeading', language)}`}\r\n                              value={reportNameColumnDefault}\r\n                              handleChange={(event: any) => {\r\n                                dispatch(reportsSlice.actions.setDefaultColsTitleGroupBy({ col_name: event.target.value }));\r\n                              }}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className={classes.parameterSelect}>\r\n                          <TextSelect\r\n                            name={'moreSelect'}\r\n                            value={null}\r\n                            handleValueChange={onAllCriteriasColumnSelectValueChange}\r\n                            options={opCriteriasColumn}\r\n                            iconPosition={'left'}\r\n                            customControl={\r\n                              <div className={classes.filterBlockControl}>\r\n                                <Typography className={classes.filterBlockTitle}>{translate('searchMore', language)}</Typography>\r\n                              </div>\r\n                            }\r\n                            ifArrowColor={'#722ED1'}\r\n                            notClose={true}\r\n                            menuPosition={'right'}\r\n                            height={\"400px\"}\r\n                          />\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', alignItems: 'center', width: '100%', paddingLeft: '177px', marginTop: '16px' }}>\r\n                          {activeCriteriasColumn.length > 0 ?\r\n                            <div className={classes.filterBlockFlex}>\r\n                              <CriteriasList\r\n                                allCriterias={allCriteriasColumn}\r\n                                activeCriterias={activeCriteriasColumn}\r\n                                block={\"reports-column\"}\r\n                              />\r\n                            </div>\r\n                            : <></>\r\n                          }\r\n                        </div>\r\n                      </>\r\n                      : <></>\r\n                    }\r\n                    {groupByColumnsValue && groupByColumnsValue.type === 'select-tag' ?\r\n                      <div style={{ display: 'inline-flex', width: '265px' }}>\r\n                        <ContainedSelect\r\n                          height={'38px'}\r\n                          width={'265px'}\r\n                          justify={'flex-end'}\r\n                          onSelectChange={(event) => {\r\n                            dispatch(reportsSlice.actions.setDefaultColsTagGroupBy({ value: event }))\r\n                          }}\r\n                          options={tagNamesColOptions}\r\n                          value={tagNamesColValue}\r\n                        />\r\n                      </div>\r\n                      :\r\n                      <></>\r\n                    }\r\n                    {groupByColumnsValue && groupByColumnsValue.type === 'input' ?\r\n                      <div style={{ display: 'inline-flex', width: '265px' }}>\r\n                        <SearchSelect\r\n                          criteriaFull={null} \r\n                          criteriaCurrent={null}\r\n                          isDefaultCriteria={true}\r\n                          array={tagNamesColOptions}\r\n                          valueList={tagNameListValue}\r\n                          handlerOnChange={(e: any) => {\r\n                            dispatch(reportsSlice.actions.setDefaultColTagsName(e));\r\n                          }}\r\n                        />\r\n                      </div>\r\n                      :\r\n                      <></>\r\n                    }\r\n                  </div>\r\n\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <div style={{ minWidth: '155px' }}>\r\n                      <Plus\r\n                        handleClick={() => {\r\n                          dispatch(reportsSlice.actions.setActiveParameters([{\r\n                            select: { options: groupByColumnsReportOptions, value: groupByColumnsValue },\r\n                            tagsVal: { options: tagNamesColOptions, value: tagNamesColValue },\r\n                            op: { options: opAddCriterias, value: opAddCriterias[0] },\r\n                            tagsNameList: { options: tagNamesColOptions, value: [] },\r\n                            callFilters: { options: opAddCriterias, values: allCriterias, activeValues: [] }\r\n                          }]))\r\n                        }}\r\n                      />\r\n                    </div>\r\n\r\n                    {/* новые фильтры */}\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n                      {activeParameters.map((item) => {\r\n                        const arrayIndex = activeParameters.indexOf(item);\r\n                        return (\r\n                          <div style={{ width: '100%', display: 'flex', justifyContent: ' flex-start', marginBottom: '16px', flexWrap: 'wrap' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap' }}>\r\n                              <div style={{ height: '16px', minWidth: '18px', marginRight: '5px' }}>\r\n                                <TrashSvg\r\n                                  style={{ width: '100%', height: 'auto' }}\r\n                                  onClick={() => {\r\n                                    dispatch(reportsSlice.actions.removeParameterField({\r\n                                      arrayIndex: arrayIndex,\r\n                                    }));\r\n                                  }}\r\n                                />\r\n                              </div>\r\n\r\n                              <div style={{ display: 'flex' }}>\r\n                                <ContainedSelect\r\n                                  height={'38px'}\r\n                                  width={'265px'}\r\n                                  justify={'center'}\r\n                                  onSelectChange={(event: any) => {\r\n                                    dispatch(reportsSlice.actions.setParameterSelectFieldValue({\r\n                                      arrayIndex: arrayIndex,\r\n                                      value: event\r\n                                    }))\r\n                                  }}\r\n                                  options={item[0].select.options}\r\n                                  value={item[0].select.value}\r\n                                />\r\n                              </div>\r\n                              {item[0].select.value && item[0].select.value.type === 'title' ?\r\n                                <>\r\n                                  <div style={{ display: 'inline-flex' }}>\r\n                                    <div style={{ marginRight: '20px', minWidth: '265px', width: '265px' }}>\r\n                                      <Input\r\n                                        name={\"\"}\r\n                                        type={\"text\"}\r\n                                        height={'38px'}\r\n                                        bcColor={\"#FFFFFF\"}\r\n                                        border={'1px solid #E3E8EF'}\r\n                                        label={`${translate('reportColumnHeading', language)}`}\r\n                                        value={item[0].nameColumn.value}\r\n                                        handleChange={(event: any) => {\r\n                                          dispatch(reportsSlice.actions.setNameColumnFieldValue({\r\n                                            arrayIndex: arrayIndex,\r\n                                            value: event.target.value\r\n                                          }))\r\n                                        }}\r\n                                      />\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                  <div className={classes.parameterSelect}>\r\n                                    <TextSelect\r\n                                      name={'moreSelect'}\r\n                                      value={null}\r\n                                      handleValueChange={(event: any) => {\r\n                                        onAllCriteriasColumnSelectValueChangeTEST(\r\n                                          event,\r\n                                          arrayIndex,\r\n                                          item[0].callFilters.activeValues,\r\n                                          item[0].callFilters.values,\r\n                                          item[0].callFilters.options\r\n                                        )\r\n                                      }}\r\n                                      options={item[0].callFilters.options}\r\n                                      iconPosition={'left'}\r\n                                      customControl={\r\n                                        <div className={classes.filterBlockControl}>\r\n                                          <Typography className={classes.filterBlockTitle}>{translate('searchMore', language)}</Typography>\r\n                                        </div>\r\n                                      }\r\n                                      ifArrowColor={'#722ED1'}\r\n                                      notClose={true}\r\n                                      menuPosition={'right'}\r\n                                      height={\"400px\"}\r\n                                    />\r\n                                  </div>\r\n                                  {item[0].callFilters.activeValues.length > 0 ?\r\n                                    <div style={{ display: 'flex', alignItems: 'center', width: '100%', paddingLeft: '24px', marginTop: '8px' }}>\r\n                                      <div className={classes.filterBlockFlex}>\r\n                                        <CriteriasList\r\n                                          allCriterias={item[0].callFilters.values}\r\n                                          activeCriterias={item[0].callFilters.activeValues}\r\n                                          index={{ arrayIndex: arrayIndex }}\r\n                                        />\r\n                                      </div>\r\n                                    </div>\r\n                                    : <></>\r\n                                  }\r\n                                </>\r\n                                : <></>\r\n                              }\r\n\r\n                              {item[0].select.value && item[0].select.value.type === 'select-tag' ?\r\n                                <div style={{ display: 'inline-flex', width: '265px' }}>\r\n                                  <ContainedSelect\r\n                                    height={'38px'}\r\n                                    width={'265px'}\r\n                                    justify={'flex-end'}\r\n                                    onSelectChange={(event) => {\r\n                                      dispatch(reportsSlice.actions.setParameterTagstFieldValue({\r\n                                        arrayIndex: arrayIndex,\r\n                                        value: event\r\n                                      }))\r\n                                    }\r\n                                    }\r\n                                    options={item[0].tagsVal.options}\r\n                                    value={item[0].tagsVal.value}\r\n                                  />\r\n                                </div>\r\n                                :\r\n                                <></>\r\n                              }\r\n\r\n                              {item[0].select.value && item[0].select.value.type === 'input' ?\r\n                                <div style={{ display: 'inline-flex', width: '265px' }}>\r\n                                  <SearchSelect\r\n                                    criteriaFull={null} \r\n                                    criteriaCurrent={null}\r\n                                    isDefaultCriteria={true}\r\n                                    array={item[0].tagsNameList.options}\r\n                                    valueList={item[0].tagsNameList.value}\r\n                                    handlerOnChange={(e: any) => {\r\n                                      dispatch(reportsSlice.actions.setActiveColTagsName({\r\n                                        arrayIndex: arrayIndex,\r\n                                        value: e\r\n                                      }));\r\n                                    }}\r\n                                  />\r\n                                </div>\r\n                                :\r\n                                <></>\r\n                              }\r\n                            </div>\r\n                          </div>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* фильтры звонков */}\r\n          <div className={classes.filtersBlock}>\r\n            <div className={classes.filterBlockWrapper}>\r\n              <div className={classes.searchTitleLeft}>\r\n                <Typography className={classes.searchTitleLeftText} variant=\"h6\">\r\n                  {translate('reportCallFilters', language)}\r\n                </Typography>\r\n                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  <div style={{ margin: '0 5px 0 20px', whiteSpace: 'nowrap' }}>\r\n                    <TextSelect\r\n                      name={'moreSelect'}\r\n                      value={null}\r\n                      handleValueChange={onAllCriteriasSelectValueChange}\r\n                      options={op}\r\n                      iconPosition={'left'}\r\n                      customControl={\r\n                        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                          <Typography className={classes.filterBlockTitle}>{translate('searchMore', language)}</Typography>\r\n                        </div>\r\n                      }\r\n                      ifArrowColor={'#722ED1'}\r\n                      notClose={true}\r\n                      menuPosition={'right'}\r\n                      height={\"400px\"}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className={classes.criteriaList}>\r\n              <CriteriasList\r\n                allCriterias={allCriterias}\r\n                activeCriterias={activeCriteriasReports}\r\n                block={\"reports\"}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <Dialog\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n          >\r\n            <div className={classes.deleteModal}>\r\n              <Typography style={{ fontWeight: '600' }}>{translate('reportDeleteMes', language)}</Typography>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '30px' }}>\r\n                <LoadingButton\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={handleClose}\r\n                >\r\n                  {translate('cancelButton', language)}\r\n                </LoadingButton>\r\n                <LoadingButton\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={deleteReportAsync}\r\n                >\r\n                  {translate('deleteButton', language)}\r\n                </LoadingButton>\r\n              </div>\r\n            </div>\r\n          </Dialog>\r\n\r\n          {snackbar.value &&\r\n            <Snackbar\r\n              type={snackbar.type}\r\n              open={snackbar.value}\r\n              onClose={() => {\r\n                setSnackbar({ ...snackbar, value: false })\r\n              }}\r\n              text={snackbar.text}\r\n              time={snackbar.time}\r\n            />\r\n          }\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <div style={{display: 'flex', alignItems: 'center', marginRight: '20px'}}>\r\n              <FormGroup className={classes.checkboxDiff}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      onChange={handleCheckboxShowChart}\r\n                      checked={checkboxShowChart}\r\n                    />}\r\n                  label={`${translate('reportToggleChart', language)}`}\r\n                />\r\n              </FormGroup>\r\n              <div>\r\n                <ContainedSelect\r\n                  height={'38px'}\r\n                  width={'265px'}\r\n                  justify={'center'}\r\n                  onSelectChange={(event: any) => {\r\n                    setChartTypeValue(event)\r\n                  }}\r\n                  options={chartTypeOptions}\r\n                  value={chartTypeValue}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n              {currentSavedReport.value ?\r\n                <LoadingButton\r\n                  className={classes.getReportsButton}\r\n                  color=\"error\"\r\n                  variant=\"outlined\"\r\n                  onClick={handleOpen}\r\n                >\r\n                  {translate('reportDeleteReport', language)}\r\n                </LoadingButton>\r\n                : <></>\r\n              }\r\n              <LoadingButton\r\n                className={classes.getReportsButton}\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                onClick={saveReportAsync}\r\n              >\r\n                {translate('reportSaveReport', language)}\r\n              </LoadingButton>\r\n\r\n              <LoadingButton\r\n                className={classes.getReportsButton}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                onClick={formReport}\r\n              >\r\n                {translate('makeReport', language)}\r\n              </LoadingButton>\r\n            </div>\r\n            \r\n          </div>\r\n        </BlockBox>\r\n        : null\r\n      }\r\n\r\n      {isLoading ?\r\n        <Box sx={{\r\n          display: 'flex',\r\n          height: '100%',\r\n          width: '100%',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          margin: '14% 0'\r\n        }}\r\n        >\r\n          <CircularProgress />\r\n        </Box>\r\n        :\r\n        <>\r\n          {callReport.report_parameters_hash ?\r\n            <>\r\n              {totalCalls === 0 ?\r\n                <div className={classes.notFoundCalls}>{translate('reportNotFind', language)}</div>\r\n                :\r\n                <div style={{ marginBottom: '60px' }}>\r\n                  <div className={classes.reportItemInfo}>\r\n\r\n                    {/* <div className={classes.flexCenterMb}>\r\n                      <LoadingButton\r\n                        className={classes.reportOptionsButton}\r\n                        color=\"primary\"\r\n                        variant=\"text\"\r\n                        loadingPosition=\"start\"\r\n                        startIcon={<ExportIcon />}\r\n                      >\r\n                        {translate('reportExport', language)}\r\n                      </LoadingButton>\r\n                    </div> */}\r\n                    \r\n                    {tableRows.length > 0  && dataChart.length > 0 && checkboxShowChart ?\r\n                      <ChartsBlock\r\n                        chartTypeValue={chartTypeValue}\r\n                        tableRows={tableRows}\r\n                        dataChart={dataChart}\r\n                        handleCheckChart={handleCheckChart}\r\n                        checkChart={checkChart}\r\n                      />\r\n                    : <></>\r\n                    }\r\n\r\n                    <div>\r\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                        <Typography className={classes.reportTitle} variant=\"h6\">\r\n                          {reportName}\r\n                        </Typography>\r\n                        <FormGroup className={classes.checkboxDiff}>\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                                onChange={handleChangeCheck}\r\n                                checked={checkboxValue}\r\n                              />}\r\n                            label={`${translate('reportDiff', language)}`}\r\n                          />\r\n                        </FormGroup>\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                      <div className={classes.reportFindNumber}>\r\n                        {translate('reportCallFind', language)}: &nbsp;\r\n                        {totalCalls}\r\n                      </div>\r\n                      <FormGroup className={classes.checkboxDiffValues}>\r\n                        <FormControlLabel\r\n                          className={classes.checkboxDiffLabel}\r\n                          control={\r\n                            <Checkbox\r\n                              onChange={handleChangeCheckCalls}\r\n                              checked={checkboxCalls}\r\n                            />}\r\n                          label={`${translate('reportCalls', language)}`}\r\n                        />\r\n                        <FormControlLabel\r\n                          className={classes.checkboxDiffLabel}\r\n                          control={\r\n                            <Checkbox\r\n                              onChange={handleChangeCheckMinutes}\r\n                              checked={checkboxMinutes}\r\n                            />}\r\n                          label={`${translate('reportMinutes', language)}`}\r\n                        />\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                              onChange={handleChangeCheckPercent}\r\n                              checked={checkboxPercent}\r\n                            />}\r\n                          label={`${translate('reportPercent', language)}`}\r\n                        />\r\n                      </FormGroup>\r\n                    </div>\r\n                  </div>\r\n                  <div className={classes.table}>\r\n                    <div style={{ display: 'flex', height: '100%' }}>\r\n                      <div style={{ flexGrow: 1, background: '#fff', height: heightTable }}>\r\n                        <Box\r\n                          sx={{\r\n                            height: 60,\r\n                            backgroundColor: '#fff',\r\n                            '& .light-header--theme .MuiDataGrid-columnHeaderTitle': {\r\n                              color: '#738094',\r\n                              fontWeight: 600,\r\n                              padding: '0 5px',\r\n                              lineHeight: 1.3,\r\n                            },\r\n                            '& .MuiDataGrid-root': {\r\n                              backgroundColor: '#fff',\r\n                              border: 'none !important',\r\n                              borderRadius: '10px',\r\n                            },\r\n                            '& .MuiDataGrid-cell': {\r\n                              color: '#2F3747',\r\n                              maxHeight: 'none !important',\r\n                              overflow: 'auto',\r\n                              whiteSpace: 'initial !important',\r\n                              lineHeight: '16px !important',\r\n                              display: 'flex !important',\r\n                              alignItems: 'center',\r\n                              paddingTop: '5px !important',\r\n                              paddingBottom: '5px !important',\r\n                              textAlign: 'center',\r\n                              fontSize: '12px !important',\r\n                              borderBottom: 'none !important'\r\n                            },\r\n                            '.MuiDataGrid-columnSeparator': {\r\n                              display: 'none',\r\n                            },\r\n                            '&.MuiDataGrid-root': {\r\n                              border: 'none',\r\n                            },\r\n                            '& .cell-active': {\r\n                              cursor: 'pointer',\r\n                              textDecoration: 'underline',\r\n                              color: '#531DAB',\r\n                              fontWeight: '600',\r\n                            },\r\n                            '& .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon': {\r\n                              opacity: '0.5 !important'\r\n                            },\r\n                            // костыль для скрытия пагинации\r\n                            '& .MuiDataGrid-footerContainer': {\r\n                              display: 'none !important'\r\n                            },\r\n                            \"& .MuiDataGrid-root .MuiDataGrid-columnHeader .MuiDataGrid-iconButtonContainer\": {\r\n                              visibility: \"visible\",\r\n                              width: 'auto',\r\n                              alignSelf: 'flex-end',\r\n                              marginBottom: '-3px'\r\n                            },\r\n                            '& .MuiDataGrid-columnHeader:nth-of-type(3n + 1) .MuiDataGrid-columnSeparator svg': {\r\n                              // fontSize: '2rem !important',\r\n                              color: 'rgba(115, 128, 148, 0.7) !important'\r\n                            },\r\n                            \"& .MuiDataGrid-root .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon\": {\r\n                              opacity: 0.5\r\n                            },\r\n                            '& .MuiDataGrid-iconButtonContainer': {\r\n                              '& button': {\r\n                                padding: '1px',\r\n                                '& svg': {\r\n                                  fontSize: '1.1rem',\r\n                                  padding: '1px'\r\n                                }\r\n                              }\r\n                            },\r\n                            '& .MuiDataGrid-columnHeaderTitleContainer': {\r\n                              overflow: 'hidden !important',\r\n                              padding: '7px 5px !important'\r\n                            },\r\n                            '& .MuiDataGrid-root .MuiDataGrid-columnHeader:focus, & .MuiDataGrid-root .MuiDataGrid-columnHeader:focus-within, ': {\r\n                              outline: 'none !important',\r\n                            },\r\n                            '& .MuiDataGrid-viewport, & .MuiDataGrid-row, & .MuiDataGrid-renderingZone': {\r\n                              maxHeight: 'none !important',\r\n                            },\r\n                            //sticky header\r\n                            '& .MuiDataGrid-columnHeaders': {\r\n                              position: \"sticky\",\r\n                              top: '-1px',\r\n                              backgroundColor: '#fff',\r\n                              // zIndex: 10,\r\n                              borderTopLeftRadius: '10px !important',\r\n                              borderTopRightRadius: '10px !important',\r\n                              borderBottom: 'none !important'\r\n                            },\r\n                            '& .MuiDataGrid-virtualScroller': {\r\n                              marginTop: \"0 !important\"\r\n                            },\r\n                            '& .MuiDataGrid-main': {\r\n                              overflow: \"visible\"\r\n                            }\r\n                          }}\r\n                        >\r\n                          \r\n                          <div ref={gridWrapperRef} style={{ height: heightTable }}>\r\n                            <DataGrid\r\n                              autoHeight\r\n                              pagination\r\n                              rows={tableRows}\r\n                              columns={tableColumns}\r\n                              pageSize={rows.length > 100 ? 100 : rows.length}\r\n                              rowsPerPageOptions={[rows.length > 100 ? 100 : rows.length]}\r\n                              loading={isLoading}\r\n                              disableColumnMenu={true}\r\n                              // disableSelectionOnClick\r\n                              onCellClick={(params, event: MuiEvent<React.MouseEvent>) => {\r\n                                if (params.row.callIds[params.field] != undefined) getCalls(params.row.callIds[params.field]);\r\n                              }}\r\n                            />\r\n                          </div>\r\n                        </Box>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    {calls.length != 0 && callsSwitch ?\r\n                      <CallsHeader\r\n                        found={foundCalls}\r\n                        switchTitleFound={true}\r\n                      />\r\n                      : <></>\r\n                    }\r\n                    {calls.length != 0 && callsSwitch ?\r\n                      calls.map((callsArrays: CallType[]) => {\r\n                        const callsArrayIndex = calls.indexOf(callsArrays)\r\n                        return (\r\n                          <div>\r\n                            {callsArrays.map((call: CallType) => {\r\n                              return (\r\n                                <CallStubMiddleware\r\n                                  callInfo={call.info} callAudio={call.audio} callStt={call.stt}\r\n                                  bundleIndex={callsArrayIndex} expanded={expanded === call.info?.id}\r\n                                  handleExpandedChange={handleExpandedChange}\r\n                                />\r\n                              )\r\n                            })}\r\n                          </div>\r\n                        )\r\n                      })\r\n                      : <></>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              }\r\n            </>\r\n            :\r\n            <div className={classes.centerMessage}>\r\n              <div className={classes.centerMessageTitle}>\r\n                {translate('reportsMakeReport', language)}\r\n              </div>\r\n            </div>\r\n          }\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n})\r\nexport default Reports;","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\n\r\ntype InitialStateType = {\r\n  textError: string,\r\n  counterError: number,\r\n  showError: boolean\r\n}\r\n\r\nconst initialState: InitialStateType = {\r\n  textError: \"Непредвиденная ошибка\",\r\n  counterError: 0,\r\n  showError: false\r\n};\r\n\r\nexport const errorSlice = createSlice({\r\n  name: 'error',\r\n  initialState,\r\n  reducers: {\r\n    setTextError(state, action: PayloadAction<string>) {\r\n      state.textError = action.payload;\r\n    },\r\n    incrementCounterError(state, action: PayloadAction<null>) {\r\n      state.counterError += 1;\r\n    },\r\n    setShowError(state, action: PayloadAction<boolean>) {\r\n      state.showError = action.payload;\r\n    }\r\n  }\r\n});\r\n","import {createAsyncThunk, createSlice, current, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {\r\n  FragmentRulesItem, FragmentsSelectType,\r\n  GlobalFilterItem,\r\n  GlobalFilterItemDetailed, SetTagsItem,\r\n  TagDetailedType,\r\n  TagGroupType,\r\n  TagType\r\n} from \"./tags.types\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport {instance} from \"../api\";\r\nimport {errorSlice} from \"../error/error.slice\";\r\n\r\n// группы.\r\nexport const getTagGroups = createAsyncThunk(\r\n  'tags/getTagGroups',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.get<TagGroupType[]>(`tag_rule_groups/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(tagsSlice.actions.setTagGroups(data));\r\n      return data;\r\n    } catch (error: unknown) {\r\n      debugger;\r\n      thunkAPI.dispatch(errorSlice.actions.setShowError(true));\r\n    }\r\n  }\r\n)\r\n\r\n// теги\r\nexport const getTags = createAsyncThunk(\r\n  'tags/getTags',\r\n  async (payload: { filter?: string, group?: string }, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const generateEndUrlPart = (payload: { filter?: string, group?: string }): string => {\r\n        if (payload.filter && payload.group) {\r\n          return `?filter=${payload.filter}&group=${payload.group}`;\r\n        } else if (payload.filter) {\r\n          return `?filter=${payload.filter}`;\r\n        } else if (payload.group) {\r\n          return `?group=${payload.group}`;\r\n        }\r\n        return '';\r\n      }\r\n      const {data} = await instance.get(`tag_rules/${generateEndUrlPart(payload)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(tagsSlice.actions.setTags(data));\r\n      return data;\r\n    } catch (error: any) {\r\n      thunkAPI.dispatch(errorSlice.actions.setShowError(true));\r\n    }\r\n  }\r\n);\r\n\r\n// детальная информация о теге.\r\nexport const getTag = createAsyncThunk(\r\n  'tags/getTag',\r\n  async (id: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.get<TagDetailedType>(`tag_rule/${id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      thunkAPI.dispatch(tagsSlice.actions.setCurrentTag(data));\r\n\r\n      // @ts-ignore\r\n      thunkAPI.dispatch(tagsSlice.actions.setActiveGlobalFilterCriterias(data.globalFilter));\r\n\r\n      thunkAPI.dispatch(tagsSlice.actions.removeFragments(null));\r\n      for (let i = 0; i < data.fragmentRules.length; i++) {\r\n        thunkAPI.dispatch(tagsSlice.actions.setFragment(data.fragmentRules[i]));\r\n      }\r\n\r\n      thunkAPI.dispatch(tagsSlice.actions.removeSetTags(null));\r\n      for (let i = 0; i < data.setTags.length; i++) {\r\n        thunkAPI.dispatch(tagsSlice.actions.setSetTag(data.setTags[i]));\r\n      }\r\n\r\n      return data;\r\n    } catch (error: any) {\r\n      thunkAPI.dispatch(errorSlice.actions.setTextError(error));\r\n    }\r\n  }\r\n)\r\n\r\n// обновление тега\r\nexport const updateTag = createAsyncThunk(\r\n  'tags/updateTag',\r\n  async (payload: any) => {\r\n    try {\r\n      debugger\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.put<TagDetailedType>(`tag_rule/${payload.id}`, payload, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n)\r\n\r\n// создание нового тега\r\nexport const postTag = createAsyncThunk(\r\n  'tags/postTag',\r\n  async (payload: any) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.post<TagDetailedType>(`tag_rule/`, payload, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n)\r\n\r\n// удаление тега\r\nexport const deleteTag = createAsyncThunk(\r\n  'tags/deleteTag',\r\n  async (id: string, thunkAPI) => {\r\n    try {\r\n      const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n      const {data} = await instance.delete<TagDetailedType>(`tag_rule/${id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n)\r\n\r\n// все критерии для глобаного фильтра.\r\nexport const getAllGlobalTagFilters = createAsyncThunk(\r\n  'tags/getAllGlobalTagFilters',\r\n  async (payload, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const {data} = await instance.get(`search_criterias/?extended=true`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    thunkAPI.dispatch(tagsSlice.actions.setAllGlobalFilterCriterias(data));\r\n  }\r\n)\r\n\r\nexport type TagActionType = 'clone' | 'enable' | 'disable' | 'delete' | 'make_global';\r\n\r\n// теговые активности\r\nexport const tagsActions = createAsyncThunk(\r\n  'tags/getAllGlobalTagFilters',\r\n  async (payload: {tagId: string, action: TagActionType}, thunkAPI) => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    const {data} = await instance.post(`tag_rule/${payload.tagId}/action`, {action: payload.action} ,{\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n  }\r\n)\r\n\r\nexport const createNullArray = (count: number) => {\r\n  let result = [];\r\n  for (let i = 0; i < count; i++) {\r\n    result.push(null);\r\n  }\r\n  return result;\r\n};\r\n\r\ntype ActiveFragmentItem = {\r\n  key: string,\r\n  title: string,\r\n  value: any,\r\n  options: string[] | null,\r\n  selectType: FragmentsSelectType,\r\n  visible: boolean\r\n};\r\n\r\ntype initialStateType = {\r\n  activeTagId: string | null,\r\n\r\n  searchParams: string,\r\n\r\n  searchInput: string,\r\n\r\n  tagGroups: TagGroupType[] | null[],\r\n  currentTagGroup: TagGroupType | null,\r\n\r\n  tags: TagType[] | null[] | null,\r\n  currentTag: TagDetailedType | null | false | undefined,\r\n\r\n  allGlobalFilterCriterias: GlobalFilterItemDetailed[],\r\n  defaultGlobalFilterCriterias: GlobalFilterItem[],\r\n  activeGlobalFilterCriterias: GlobalFilterItemDetailed[],\r\n\r\n  activeFragments: ActiveFragmentItem[][],\r\n  activeSetTags: SetTagsItem[]\r\n\r\n  error: string | null\r\n};\r\n\r\nconst initialState: initialStateType = {\r\n  activeTagId: null,\r\n  searchParams: \"\",\r\n  searchInput: \"\",\r\n\r\n  tagGroups: createNullArray(4),\r\n  currentTagGroup: null,\r\n\r\n  tags: createNullArray(15),\r\n  currentTag: null,\r\n\r\n  allGlobalFilterCriterias: [],\r\n  defaultGlobalFilterCriterias: [],\r\n  activeGlobalFilterCriterias: [],\r\n\r\n  activeFragments: [],\r\n  activeSetTags: [],\r\n\r\n  error: null\r\n};\r\n\r\n\r\ntype FragmentsArrayType = {\r\n  phrasesAndDicts: string[] | null,\r\n  phrases: string[],\r\n  dicts: string[],\r\n  direction: string,\r\n  fromStart: boolean,\r\n  silentBefore: string,\r\n  silentAfter: string,\r\n  interruptTime: string\r\n}\r\n\r\nexport const DirectionOptions = [\r\n  {label: 'Клиент сказал', value: 'client_say'},\r\n  {label: 'Оператор сказал', value: 'operator_say'},\r\n  {label: 'Клиент не сказал', value: 'client_not_say'},\r\n  {label: 'Оператор не сказал', value: 'operator_not_say'},\r\n  {label: 'Любой не сказал', value: 'any_not_say'},\r\n];\r\n\r\nconst fragmentsArray: FragmentsArrayType = {\r\n  direction: DirectionOptions[0].value,\r\n  phrasesAndDicts: null,\r\n  fromStart: false,\r\n  silentBefore: '',\r\n  silentAfter: '',\r\n  interruptTime: '',\r\n  phrases: [],\r\n  dicts: []\r\n};\r\n\r\nexport const tagsSlice = createSlice({\r\n  name: 'tags',\r\n  initialState,\r\n  reducers: {\r\n    // группы\r\n    setTagGroups(state, action: PayloadAction<TagGroupType[]>) {\r\n      state.tagGroups = action.payload;\r\n    },\r\n    setCurrentTagGroup(state, action: PayloadAction<TagGroupType>) {\r\n      state.currentTagGroup = action.payload;\r\n    },\r\n\r\n    setSearchParams(state, action: PayloadAction<string>) {\r\n      state.searchParams = action.payload;\r\n    },\r\n\r\n    setSearchInput(state, action: PayloadAction<string>) {\r\n      state.searchInput = action.payload;\r\n    },\r\n\r\n    // теги\r\n    setTags(state, action: PayloadAction<TagType[] | null[]>) {\r\n      state.tags = action.payload;\r\n    },\r\n    setCurrentTag(state, action: PayloadAction<TagDetailedType | null | false | undefined>) {\r\n      state.currentTag = action.payload;\r\n    },\r\n\r\n\r\n    // детали тега\r\n\r\n\r\n    // глобальные фильтры\r\n\r\n    // все критерии\r\n    setAllGlobalFilterCriterias(state, action: PayloadAction<GlobalFilterItemDetailed[]>) {\r\n      state.allGlobalFilterCriterias = action.payload;\r\n    },\r\n    // активные критерии\r\n    setActiveGlobalFilterCriterias(state, action: PayloadAction<GlobalFilterItemDetailed[] | []>) {\r\n      state.activeGlobalFilterCriterias.length = 0;\r\n      for (let i = 0; i < action.payload.length; i++) {\r\n        const fullCriteria = state.allGlobalFilterCriterias.find(item => item.key === action.payload[i].key);\r\n        if (fullCriteria) {\r\n          state.activeGlobalFilterCriterias.push({...fullCriteria, values: action.payload[i].values});\r\n        }\r\n      }\r\n    },\r\n    setActiveGlobalFilterCriteria(state, action: PayloadAction<GlobalFilterItemDetailed>) {\r\n      state.activeGlobalFilterCriterias.push(action.payload);\r\n    },\r\n    removeActiveGlobalFilterCriteria(state, action: PayloadAction<GlobalFilterItemDetailed>) {\r\n      const currentActiveCriterias = current(state.activeGlobalFilterCriterias);\r\n      const currentActiveCriteria = currentActiveCriterias.find(criteria => criteria.key === action.payload.key);\r\n      if (currentActiveCriterias) {\r\n        // @ts-ignore\r\n        const criteriaIndex = currentActiveCriterias.indexOf(currentActiveCriteria);\r\n        state.activeGlobalFilterCriterias.splice(criteriaIndex, 1)\r\n      }\r\n    },\r\n    setActiveGlobalFilterCriteriaValues(state, action: PayloadAction<GlobalFilterItemDetailed>) {\r\n      let activeCriterias = cloneDeep(current(state.activeGlobalFilterCriterias));\r\n      const activeCriteria = activeCriterias.find(item => {\r\n        return item.key === action.payload.key\r\n      });\r\n      if (activeCriteria) {\r\n        const activeCriteriaIndex = activeCriterias.indexOf(activeCriteria);\r\n        state.activeGlobalFilterCriterias[activeCriteriaIndex].values = action.payload.values;\r\n      }\r\n    },\r\n\r\n    // фрагменты\r\n    setFragment(state, action: PayloadAction<FragmentRulesItem | null>) {\r\n      // первоначальный обьект\r\n      let fragmentRulesItemLocal: any = {};\r\n      if (!action.payload) {\r\n        fragmentRulesItemLocal = fragmentsArray;\r\n      } else {\r\n        fragmentRulesItemLocal = action.payload;\r\n      }\r\n      // массив с объектами\r\n      let activeFragment = [];\r\n      for (let i = 0; i < Object.keys(fragmentRulesItemLocal).length; i++) {\r\n        const key = Object.keys(fragmentRulesItemLocal)[i];\r\n        if (key === 'direction') {\r\n          const value = DirectionOptions.find(item => item.value === fragmentRulesItemLocal[key]);\r\n          activeFragment.unshift({\r\n            key: key,\r\n            title: 'Поиск по словам',\r\n            value: value,\r\n            options: DirectionOptions,\r\n            selectType: 'multiValue',\r\n            visible: true\r\n          })\r\n        } else if (key === 'phrasesAndDicts') {\r\n          const criteria = current(state.allGlobalFilterCriterias).find(criteria => criteria.key === 'client_text');\r\n          let dictsArray: { label: string, value: string }[] = [];\r\n          if (criteria) {\r\n            for (let i = 0; i < criteria.values.length; i++) {\r\n              dictsArray.push({label: criteria.values[i], value: criteria.values[i]});\r\n            }\r\n          }\r\n\r\n          let converted: {value: string, label: string}[] = []\r\n          if (fragmentRulesItemLocal[key]) {\r\n            for (let i = 0; i < fragmentRulesItemLocal[key].length; i++) {\r\n              converted.push({value: fragmentRulesItemLocal[key][i], label: fragmentRulesItemLocal[key][i]})\r\n            }\r\n          }\r\n\r\n          activeFragment.push({\r\n            key: key,\r\n            title: 'Фразы или словари',\r\n            value: fragmentRulesItemLocal[key] && fragmentRulesItemLocal[key].length > 0 ? converted : null,\r\n            options: dictsArray,\r\n            selectType: 'multiString',\r\n            visible: true\r\n          });\r\n        } else if (key === 'fromStart') {\r\n          activeFragment.push({\r\n            key: key,\r\n            title: 'Искать с начала разговора',\r\n            value: {value: fragmentRulesItemLocal[key], label: fragmentRulesItemLocal[key]},\r\n            option: [],\r\n            selectType: 'checkbox',\r\n            visible: !!action.payload && !!fragmentRulesItemLocal[key]\r\n          })\r\n        } else if (key === 'phrases' || key === 'dicts') {\r\n          activeFragment.push({\r\n            key: key,\r\n            value: {value: fragmentRulesItemLocal[key], label: fragmentRulesItemLocal[key]},\r\n            selectType: 'doNotDisplay',\r\n            option: [],\r\n            visible: !!action.payload && !!fragmentRulesItemLocal[key]\r\n          })\r\n        } else {\r\n          activeFragment.push({\r\n            key: key,\r\n            title: (key === 'silentBefore' && 'Молчание до') ||\r\n              (key === 'silentAfter' && 'Молчание после') ||\r\n              (key === 'interruptTime' && 'Длительность перебивания'),\r\n            value: {value: fragmentRulesItemLocal[key], label: fragmentRulesItemLocal[key]},\r\n            option: fragmentRulesItemLocal[key],\r\n            selectType: 'input',\r\n            visible: !!action.payload && !!fragmentRulesItemLocal[key]\r\n\r\n          })\r\n        }\r\n      }\r\n      // @ts-ignore\r\n      state.activeFragments.push(activeFragment);\r\n    },\r\n    setFragmentFieldValue(state, action: PayloadAction<{ arrayIndex: number, fieldIndex: number, value: { value: any, label: string } }>) {\r\n      state.activeFragments[action.payload.arrayIndex][action.payload.fieldIndex].value = action.payload.value;\r\n    },\r\n    setFragmentField(state, action: PayloadAction<{ index: number, value: ActiveFragmentItem, visible: boolean }>) {\r\n      const fragments = current(state.activeFragments[action.payload.index]);\r\n      const field = fragments.find(item => item.key === action.payload.value.key);\r\n      let fieldIndex: number | null = null;\r\n      if (field) {\r\n        fieldIndex = fragments.indexOf(field);\r\n      }\r\n      if (fieldIndex || fieldIndex === 0) {\r\n        state.activeFragments[action.payload.index].splice(fieldIndex, 1);\r\n      }\r\n      debugger //@ts-ignore\r\n      state.activeFragments[action.payload.index].push({...field, visible: true})\r\n    },\r\n    removeFragmentField(state, action: PayloadAction<{arrayIndex: number, fieldIndex: number}>) {\r\n      state.activeFragments[action.payload.arrayIndex].splice(action.payload.fieldIndex, 1);\r\n      if (state.activeFragments[action.payload.arrayIndex].length < 1) {\r\n        state.activeFragments.splice(action.payload.arrayIndex, 1);\r\n      }\r\n    },\r\n    removeFragment(state, action: PayloadAction<number>) {\r\n      state.activeFragments.splice(action.payload, 1);\r\n    },\r\n    removeFragments(state, action: PayloadAction<null>) {\r\n      state.activeFragments.length = 0;\r\n    },\r\n\r\n    // теги\r\n    setSetTag(state, action: PayloadAction<SetTagsItem | null>) {\r\n      // первоначальный обьект\r\n      let tag: any = {};\r\n      if (!action.payload) {\r\n        tag = {\r\n          name: '',\r\n          value: '',\r\n          visible: false\r\n        }\r\n      } else {\r\n        tag = action.payload;\r\n      }\r\n\r\n      state.activeSetTags.push(tag);\r\n    },\r\n    setSetTagFieldValue(state, action: PayloadAction<{ tagIndex: number, fieldKey: string, value: string | boolean }>) {\r\n      // @ts-ignore\r\n      state.activeSetTags[action.payload.tagIndex][action.payload.fieldKey] = action.payload.value;\r\n    },\r\n    removeSetTag(state, action: PayloadAction<number>) {\r\n      state.activeSetTags.splice(action.payload, 1);\r\n    },\r\n    removeSetTags(state, action: PayloadAction<null>) {\r\n      state.activeSetTags.length = 0;\r\n    },\r\n\r\n    tagsReset: () => initialState\r\n  }\r\n});\r\n","import React, {FC, memo} from \"react\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {Skeleton, Typography} from \"@mui/material\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {dictsSlice, getDict, getDicts} from \"../../../store/dicts/dicts.slice\";\r\nimport {DictType, DictTypeDetailed, GroupType} from \"../../../store/dicts/dicts.types\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport {tagsSlice} from \"../../../store/tags/tags.slice\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\n\r\nconst PurpleCircleSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"7.5\" fill=\"white\" stroke=\"#9254DE\"/>\r\n      <circle cx=\"8\" cy=\"8\" r=\"4\" fill=\"#9254DE\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\ntype GroupPropsType = {\r\n  group: GroupType | null,\r\n  isActive: boolean\r\n};\r\n\r\n\r\nconst Group: FC<GroupPropsType> = memo(({group, isActive}) => {\r\n  const useStyles = makeStyles(({\r\n    groupItem: {\r\n      minHeight: '56px',\r\n      cursor: \"pointer\",\r\n      padding: '24px',\r\n      margin: '0 24px 24px 24px',\r\n      border: '2px solid #fff',\r\n      borderColor: isActive ? '#AD80E6' : '#ffffff',\r\n      boxShadow: '0px 0px 4px rgba(98, 98, 98, 0.22)',\r\n      borderRadius: '10px',\r\n      transition: '0.1s',\r\n      '&:hover': {\r\n        boxShadow: '0px 0px 4px rgba(98, 98, 98, 0.4)',\r\n      }\r\n    },\r\n    groupTopBlock: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      marginBottom: '10px'\r\n    },\r\n    groupTopBlockText: {\r\n      fontWeight: '700 !important',\r\n      color: '#738094 !important'\r\n    },\r\n\r\n    groupBottomBlock: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center'\r\n    },\r\n    groupBottomBlockText: {\r\n      color: '#000 !important'\r\n    },\r\n    groupBottomBlockRight: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center'\r\n    },\r\n    groupBottomBlockSvg: {\r\n      marginRight: '10px'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n  const {language} = useAppSelector(state => state.lang);\r\n\r\n  const onGroupClick = async () => {\r\n    if (group) {\r\n      dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n      dispatch(dictsSlice.actions.setCurrentGroup(group));\r\n      dispatch(dictsSlice.actions.setEmptyDicts(null));\r\n      dispatch(dictsSlice.actions.setCurrentDict(null));\r\n      const dictsData = await dispatch(getDicts({group: group.group}));\r\n      // @ts-ignore\r\n      const dicts: DictType[] = dictsData.payload;\r\n      const dataDict = await dispatch(getDict(dicts[0].id));\r\n      // @ts-ignore\r\n      const dict: DictTypeDetailed = dataDict.payload;\r\n      dispatch(dictsSlice.actions.setSearch( queryString.extract(`?group=${group.group}&id=${dict.id}`)));\r\n      history.location.pathname = `/`;\r\n      history.replace(`${language}/${userId}/markuprules/dictionaries?group=${group.group}&id=${dict.id}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.groupItem} onClick={onGroupClick}>\r\n      <div className={classes.groupTopBlock}>\r\n        {group\r\n          ? <Typography className={classes.groupTopBlockText}>{group.group}</Typography>\r\n          : <Skeleton variant=\"text\" width={250} height={20} />\r\n        }\r\n        {isActive && <PurpleCircleSvg/>}\r\n      </div>\r\n\r\n      <div className={classes.groupBottomBlock}>\r\n        {group\r\n          ? <Typography className={classes.groupBottomBlockText}>{group.count} словарей</Typography>\r\n          : <Skeleton variant=\"text\" width={80} height={20} />\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Group;\r\n","import React, {FC} from 'react';\r\nimport Group from \"./Group\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\n\r\nconst Groups: FC = () => {\r\n  const dictGroups = useAppSelector(state => state.dicts.groups);\r\n  const currentGroup = useAppSelector(state => state.dicts.currentGroup)\r\n\r\n  return (\r\n    <div style={{padding: '5px 0'}}>\r\n      {dictGroups ?\r\n        dictGroups.map((group) => {\r\n          return (\r\n            <Group\r\n              group={group}\r\n              isActive={Boolean(currentGroup && group && group.group === currentGroup.group)}\r\n            />\r\n          )\r\n        }) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Groups;\r\n","import React, {FC, memo} from \"react\";\r\nimport {DictType} from \"../../../store/dicts/dicts.types\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {dictsSlice} from \"../../../store/dicts/dicts.slice\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {InfoCircle, InfoCircleActive} from \"../../../pages/MarkupRules/MarkupRules\";\r\nimport {Skeleton} from \"@mui/material\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {BaseTag} from \"../../common/Tag\";\r\nimport {TagType} from \"../../../store/tags/tags.types\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\nimport queryString from \"query-string\";\r\n\r\n\r\ntype DictPropsType = {\r\n  body: DictType | null,\r\n  isActive: boolean,\r\n  handleClick: any\r\n};\r\n\r\nconst Item: FC<DictPropsType> = memo(({body, isActive, handleClick}) => {\r\n  const useStyles = makeStyles(({\r\n    itemBox: {\r\n      cursor: 'pointer',\r\n      minHeight: '31px',\r\n\r\n      padding: '9px 24px',\r\n      transition: '0.1s',\r\n      backgroundColor: isActive ? '#F9F0FF' : '#F8FAFC',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      borderRight: '4px solid #FFFFFF',\r\n      borderColor: isActive ? '#9254DE !important' : '#FFFFFF !important',\r\n      '&:hover': {\r\n        borderColor: body ? isActive ? '#9254DE !important' : '#F9F0FF !important' : '#F8FAFC',\r\n        backgroundColor: body ? '#F9F0FF' : '#F8FAFC'\r\n      },\r\n      '&:hover div': {\r\n        color: \"#722ED1\",\r\n      }\r\n    },\r\n    item: {\r\n      fontWeight: '700',\r\n      color: isActive ? '#722ED1' : '#2F3747',\r\n      fontSize: '13px',\r\n      fontFamily: 'Inter, sans-serif',\r\n    },\r\n    rule: {\r\n      fontWeight: '700',\r\n      color: isActive ? '#722ED1' : '#2F3747',\r\n      marginTop: '5px',\r\n      fontSize: '10px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      '&:hover': {\r\n        color: '#002766 !important'\r\n      }\r\n    }\r\n  }));\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const currentGroup = useAppSelector(state => state.dicts.currentGroup);\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n  const {language} = useAppSelector(state => state.lang);\r\n  return (\r\n    <div\r\n      className={classes.itemBox}\r\n      onClick={isActive\r\n        ? () => null\r\n        : async () => {\r\n          handleClick();\r\n          if (body && currentGroup) {\r\n            await dispatch(dictsSlice.actions.setSearch(`?group=${currentGroup.group}&id=${body.id}`));\r\n            history.location.pathname = '/'\r\n            history.replace(`${language}/${userId}/markuprules/dictionaries?group=${currentGroup.group}&id=${body.id}`)\r\n          }\r\n        }}\r\n    >\r\n      <div style={{minWidth: '130px'}}>\r\n        <div className={classes.item}>\r\n          {body\r\n            ? <>{body.title}</>\r\n            : <Skeleton variant=\"text\" width={130} height={15}/>\r\n          }\r\n        </div>\r\n        {body &&\r\n        // @ts-ignore\r\n        body.usedRules &&\r\n        <div className={classes.rule} onClick={isActive ? async () => {\r\n          history.location.pathname = '/'\r\n          history.replace(`${language}/${userId}/markuprules/tags/${body.id}`)\r\n          await dispatch(dictsSlice.actions.setActivePage('tags'));\r\n        } : () => null}>\r\n          {body\r\n            ? <div>\r\n              {// @ts-ignore\r\n                body.usedRules.map((rule) =>\r\n                <BaseTag body={rule.title}/>\r\n              )}\r\n          </div>\r\n            : <Skeleton variant=\"text\" width={60} height={11}/>\r\n          }\r\n        </div>\r\n        }\r\n      </div>\r\n      {isActive ? <InfoCircleActive/> : <InfoCircle/>}\r\n\r\n    </div>\r\n  )\r\n});\r\n\r\nexport default Item;\r\n","import Item from \"./Item\";\r\nimport React, {FC} from \"react\";\r\nimport {useAppSelector} from \"../../../hooks/redux\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {dictsSlice, getDict} from \"../../../store/dicts/dicts.slice\";\r\nimport {DictType, DictTypeDetailed} from \"../../../store/dicts/dicts.types\";\r\nimport {RootState} from \"../../../store/store\";\r\nimport {translate} from \"../../../localizations\";\r\n\r\ntype ItemsPropsType = {\r\n  items: DictType[] | null[] | null,\r\n  currentItem: DictTypeDetailed | null | false | undefined\r\n}\r\n\r\nconst Items: FC<ItemsPropsType> = ({items, currentItem}) => {\r\n  const dispatch = useDispatch();\r\n  const {language} = useAppSelector((state: RootState) => state.lang);\r\n\r\n  return (\r\n    <div style={{padding: '5px 0'}}>\r\n      {items && items.length > 0\r\n        ?\r\n        items.map((item) => {\r\n          return (\r\n            <Item\r\n              body={item}\r\n              // @ts-ignore\r\n              isActive={currentItem && item && currentItem.id === item.id}\r\n              handleClick={async () => {\r\n                if (item) {\r\n                  dispatch(dictsSlice.actions.setCurrentDict(null));\r\n                  await dispatch(getDict(item.id));\r\n                }\r\n              }}\r\n            />\r\n          )\r\n        })\r\n        :\r\n        <div\r\n          style={{\r\n            fontFamily: 'Inter, sans-serif',\r\n            fontWeight: '700',\r\n            fontSize: '16px',\r\n            marginLeft: '24.5px',\r\n\r\n            color: '#738094'\r\n          }}\r\n        >\r\n          {translate('nothingFound_dicts', language)}\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Items;\r\n","import * as React from 'react';\r\nimport {FC} from 'react';\r\nimport {styled} from '@mui/system';\r\nimport SwitchUnstyled, {switchUnstyledClasses} from '@mui/base/SwitchUnstyled';\r\n\r\nconst grey = {\r\n  400: '#BFC7CF',\r\n  500: '#AAB4BE',\r\n  600: '#6F7E8C',\r\n};\r\n\r\nconst Root = styled('span')(\r\n  ({theme}) => `\r\n  font-size: 0;\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 40px;\r\n  height: 20px;\r\n  cursor: pointer;\r\n\r\n  &.${switchUnstyledClasses.disabled} {\r\n    opacity: 0.4;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  & .${switchUnstyledClasses.track} {\r\n    background: ${theme.palette.mode === 'dark' ? grey[600] : grey[400]};\r\n    border-radius: 10px;\r\n    display: block;\r\n    height: 100%;\r\n    width: 100%;\r\n    position: absolute;\r\n  }\r\n\r\n  & .${switchUnstyledClasses.thumb} {\r\n    display: block;\r\n    width: 14px;\r\n    height: 14px;\r\n    top: 3px;\r\n    left: 3px;\r\n    border-radius: 16px;\r\n    background-color: #fff;\r\n    position: relative;\r\n    transition: all 200ms ease;\r\n  }\r\n\r\n  &.${switchUnstyledClasses.focusVisible} .${switchUnstyledClasses.thumb} {\r\n    background-color: ${grey[500]};\r\n    box-shadow: 0 0 1px 8px rgba(0, 0, 0, 0.25);\r\n  }\r\n\r\n  &.${switchUnstyledClasses.checked} {\r\n    .${switchUnstyledClasses.thumb} {\r\n      left: 22px;\r\n      top: 3px;\r\n      background-color: #fff;\r\n    }\r\n\r\n    .${switchUnstyledClasses.track} {\r\n      background: #B37FEB;\r\n    }\r\n  }\r\n\r\n  & .${switchUnstyledClasses.input} {\r\n    cursor: inherit;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    margin: 0;\r\n  }\r\n  `,\r\n);\r\n\r\ntype CustomSwitchPropsType = {\r\n  disabled: boolean,\r\n  onChecked: (e: any) => void,\r\n  checked: boolean\r\n};\r\n\r\nconst CustomSwitch: FC<CustomSwitchPropsType> = ({onChecked, disabled, checked}) => {\r\n  const label = {componentsProps: {input: {'aria-label': 'Demo switch'}}};\r\n  return <SwitchUnstyled\r\n    disabled={disabled}\r\n    onChange={onChecked}\r\n    component={Root}\r\n    checked={checked}\r\n    {...label}\r\n  />\r\n}\r\n\r\nexport default CustomSwitch;","import React, {FC, memo} from \"react\";\r\nimport {makeStyles} from \"@mui/styles\";\r\nimport {Typography} from \"@mui/material\";\r\n\r\ntype FieldPropsType = {\r\n  label: string,\r\n  labelBrother?: any,\r\n  bgColor?: string,\r\n  width?: string,\r\n  height?: string,\r\n  margin?: string,\r\n  padding?: string\r\n}\r\n\r\nconst Field: FC<FieldPropsType> = memo(({children, label, bgColor, width, height, margin, padding, labelBrother}) => {\r\n  const useStyles = makeStyles(({\r\n    fieldBox: {\r\n      margin: margin ? margin : '0',\r\n      height: height ? height : 'auto',\r\n      width: width ? width : 'auto'\r\n    },\r\n    fieldText: {\r\n      backgroundColor: bgColor ? bgColor : '#F8FAFC',\r\n      border: '1px solid #E3E8EF',\r\n      padding: padding ? padding : '3px 10px',\r\n      borderRadius: '5px',\r\n      marginTop: '10px'\r\n    },\r\n    fieldLabel: {\r\n      cursor: 'default !important',\r\n      color: '#738094 !important',\r\n      fontWeight: '700 !important',\r\n      fontSize: '13px !important'\r\n    },\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.fieldBox}>\r\n      <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>\r\n        <Typography className={classes.fieldLabel}>\r\n          {label}\r\n        </Typography>\r\n        {labelBrother}\r\n      </div>\r\n      <div className={classes.fieldText}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Field;\r\n","export default __webpack_public_path__ + \"static/media/no-results.c04492e6.png\";","export default __webpack_public_path__ + \"static/media/loading.fd468320.svg\";","import React, { FC, useEffect, useState } from 'react';\r\nimport { InputBase, Tooltip, Typography } from \"@mui/material\";\r\nimport Checkbox from \"../../../components/common/Checkbox\";\r\nimport Switch from \"../../../components/common/Switch\";\r\nimport CustomControlSelect from \"../../../components/common/Selects/CustomControlSelect\";\r\nimport { InfoCircleActive } from \"../MarkupRules\";\r\nimport { useAppSelector } from \"../../../hooks/redux\";\r\nimport Field from \"../../../components/common/FIeld\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useFormik } from \"formik\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  deleteDict,\r\n  dictActions, dictsSlice,\r\n  getDict,\r\n  getDicts,\r\n  getGroups,\r\n  updateDict\r\n} from \"../../../store/dicts/dicts.slice\";\r\nimport { BlockBox } from \"../../../components/common\";\r\nimport ModalWindow from \"../../../components/common/ModalWindowBox\";\r\nimport { DictType, DictTypeDetailed, GroupType } from \"../../../store/dicts/dicts.types\";\r\nimport Snackbar, { SnackbarType } from \"../../../components/common/Snackbar\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport noResultsPng from '../../../assets/images/no-results.png';\r\nimport { RootState } from \"../../../store/store\";\r\nimport { translate } from \"../../../localizations\";\r\nimport Preloader from \"../../../assets/loading.svg\";\r\n\r\nconst DictDetailsStubMiddleware: FC = () => {\r\n  const currentDict = useAppSelector(state => state.dicts.currentDict);\r\n  if (currentDict === null) {\r\n    return (\r\n      <BlockBox padding={'24px'}>\r\n        <div style={{ position: 'relative', height: '100%' }}>\r\n          <div style={{ position: 'absolute', top: '30%', left: '32%' }}>\r\n            <img src={Preloader} alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </BlockBox>\r\n    )\r\n  } else if (currentDict === false) {\r\n    return (\r\n      <BlockBox padding={'5px 24px 0 24px'}>\r\n        <div style={{ textAlign: 'center', marginTop: '150px' }}>\r\n          <img src={noResultsPng} alt=\"\" />\r\n        </div>\r\n      </BlockBox>\r\n    )\r\n  } else if (currentDict === undefined) {\r\n    return <></>\r\n  } else {\r\n    return <DictDetails currentDict={currentDict} />\r\n  }\r\n};\r\n\r\n\r\ntype DictDetailsPropsType = {\r\n  currentDict: DictTypeDetailed\r\n}\r\n\r\nconst useStyles = makeStyles(({\r\n  ddTextarea: {\r\n    cursor: 'default',\r\n    minHeight: '340px',\r\n    minWidth: '100%',\r\n    resize: 'none',\r\n    backgroundColor: '#F8FAFC',\r\n    color: '#2F3747',\r\n    fontFamily: 'Inter, sans-serif',\r\n    fontSize: '14px',\r\n    border: 'none',\r\n    outline: 'none',\r\n    lineHeight: '25px',\r\n    '&::-webkit-scrollbar': {\r\n      width: '4px',\r\n      outline: 'none',\r\n      background: '#CDD5DF'\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      background: '#A3AEBE',\r\n      height: '50px',\r\n    },\r\n    '&::-webkit-scrollbar-thumb:hover': {\r\n      background: '#9298A1'\r\n    }\r\n  },\r\n\r\n  tooltip: {\r\n    borderRadius: \"5px\",\r\n    fontFamily: 'Inter, sans-serif !important',\r\n    color: '#000 !important',\r\n    minWidth: '400px',\r\n    fontSize: '14px !important',\r\n    padding: '6px 8px !important',\r\n    backgroundColor: '#fff !important',\r\n    boxShadow: 'rgba(100, 100, 111, 0.2) 0px 7px 29px 0px',\r\n    marginTop: '50px !important',\r\n  },\r\n\r\n  switchText: {\r\n    marginLeft: '10px !important',\r\n    fontWeight: '700 !important'\r\n  },\r\n\r\n  rulesText: {\r\n    fontWeight: '700 !important'\r\n  }\r\n}));\r\n\r\nconst DictDetails: FC<DictDetailsPropsType> = ({ currentDict }) => {\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      title: '',\r\n      phrases: '',\r\n      groupName: ''\r\n    },\r\n    onSubmit: async (values) => {\r\n      setSubmitLoading(true);\r\n      const phrasesParseToObject = () => {\r\n        const phrasesArray = values.phrases.split('\\n');\r\n        let phrasesArrayNew = [];\r\n        for (let i = 0; i < phrasesArray.length; i++) {\r\n          if (phrasesArray[i].length > 1) {\r\n            phrasesArrayNew.push(phrasesArray[i]);\r\n          }\r\n        }\r\n        return phrasesArrayNew;\r\n      }\r\n      await dispatch(updateDict({\r\n        ...currentDict,\r\n        phrases: phrasesParseToObject(),\r\n        title: values.title,\r\n        group: values.groupName\r\n      }));\r\n      if (currentDict.group !== formik.values.groupName) {\r\n        const groupsData = await dispatch(getGroups());\r\n        // @ts-ignore\r\n        const groups: GroupType[] = groupsData.payload;\r\n        const currentGroup = groups.filter((item) => item.group === formik.values.groupName)[0];\r\n        dispatch(dictsSlice.actions.setCurrentGroup(currentGroup));\r\n        await dispatch(getDicts({ group: formik.values.groupName }))\r\n      }\r\n      if (currentDict.title !== formik.values.title) {\r\n        await dispatch(getDicts({ group: currentDict.group }));\r\n      }\r\n      setSubmitLoading(false);\r\n      setSnackbar({ type: 'success', value: true, text: 'Изменения сохранены', time: 2000 })\r\n    },\r\n  });\r\n\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const [render, setRender] = useState(false);\r\n  useEffect(() => {\r\n    formik.values.title = currentDict.title\r\n    formik.values.phrases = currentDict.phrases.join(\"\\n\")\r\n    formik.values.groupName = currentDict.group ? currentDict.group : currentGroup ? currentGroup.group : ''\r\n    setRender(!render);\r\n  }, [currentDict])\r\n\r\n  const createSelectOptions = () => {\r\n    let result = [];\r\n    for (let i = 0; i < currentDict.allowedActions.length; i++) {\r\n      const action = currentDict.allowedActions[i];\r\n      if (action === 'clone') {\r\n        result.push({ value: action, label: translate(\"cloneButton_dictDetailSelect\", language) });\r\n      } else if (action === 'delete') {\r\n        result.push({ value: action, label: translate(\"deleteButton_dictDetailSelect\", language) });\r\n      } else if (action === 'make_global') {\r\n        result.push({ value: action, label: translate(\"makeGlobal_dictDetailSelect\", language) });\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const [submitLoading, setSubmitLoading] = useState<boolean>(false);\r\n  const [deleteLoading, setDeleteLoading] = useState<boolean>(false);\r\n\r\n  // логика открытия модально окна\r\n  // MW - Modal Window\r\n  const [deleteDictMWIsOpen, setDeleteDictMWIsOpen] = useState<boolean>(false);\r\n  const handleMWOpen = () => {\r\n    setDeleteDictMWIsOpen(true);\r\n  };\r\n  const handleMWClose = () => {\r\n    setDeleteDictMWIsOpen(false);\r\n  };\r\n\r\n  const error = useAppSelector(state => state.dicts.error);\r\n  useEffect(() => {\r\n    setDeleteLoading(false);\r\n    if (error) {\r\n      setSnackbar({ type: 'error', value: true, text: 'Этот словарь нельзя удалить', time: 2000 });\r\n    }\r\n  }, [error])\r\n\r\n  const currentGroup = useAppSelector(state => state.dicts.currentGroup);\r\n  const history = useHistory();\r\n\r\n  // говнокодю по полной)\r\n  const dictHandleDelete = async () => {\r\n    if (currentGroup) {\r\n      setDeleteLoading(true);\r\n      await dispatch(deleteDict(currentDict.id));\r\n      const groupsData = await dispatch(getGroups());\r\n      if (currentGroup.count < 2) {\r\n        // @ts-ignore\r\n        const groups: GroupType[] = groupsData.payload;\r\n        dispatch(dictsSlice.actions.setCurrentGroup(groups[0]));\r\n        const dictsData = await dispatch(getDicts({ group: groups[0].group }));\r\n        // @ts-ignore\r\n        const dicts: DictType[] = dictsData.payload;\r\n        await dispatch(getDict(dicts[0].id));\r\n        dispatch(dictsSlice.actions.setSearch(`?group=${groups[0].group}&id=${dicts[0].id}`))\r\n        history.location.pathname = '/';\r\n        history.replace(`${language}/${userId}/markuprules/dictionaries?group=${groups[0].group}&id=${dicts[0].id}`)\r\n      } else {\r\n        const dataDicts = await dispatch(getDicts({ group: currentGroup.group }));\r\n        // @ts-ignore\r\n        const dicts: DictType[] = dataDicts.payload;\r\n        await dispatch(getDict(dicts[0].id));\r\n        dispatch(dictsSlice.actions.setSearch(`?group=${currentGroup.group}&id=${dicts[0].id}`))\r\n        history.location.pathname = '/';\r\n        history.replace(`${language}/${userId}/markuprules/dictionaries?group=${currentGroup.group}&id=${dicts[0].id}`)\r\n      }\r\n      handleMWClose();\r\n      setDeleteDictMWIsOpen(false);\r\n      setSnackbar({ type: \"success\", text: 'Словарь удален', value: true, time: 2000 });\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // snackbars\r\n  const [snackbar, setSnackbar] = useState<SnackbarType>({\r\n    type: 'success',\r\n    text: '',\r\n    value: false,\r\n    time: null\r\n  });\r\n\r\n  const [checked, setChecked] = useState<boolean>(currentDict.enabled);\r\n  const [checkedDisable, setCheckedDisable] = useState<boolean>(false);\r\n\r\n  return (\r\n    <BlockBox padding={'24px'}>\r\n      <form onSubmit={formik.handleSubmit}>\r\n        <Field label={translate(\"dictName_dictDetail\", language)} margin={'0 0 15px 0'}>\r\n          <InputBase\r\n            disabled={!currentDict.group}\r\n            style={{ width: '100%' }}\r\n            name=\"title\"\r\n            type=\"text\"\r\n            value={formik.values.title}\r\n            onChange={formik.handleChange}\r\n          />\r\n        </Field>\r\n        <Field label={translate(\"groupName_dictDetail\", language)} margin={'0 0 15px 0'}>\r\n          <InputBase\r\n            disabled={!currentDict.group}\r\n            style={{ width: '100%' }}\r\n            name=\"groupName\"\r\n            type=\"text\"\r\n            value={formik.values.groupName}\r\n            onChange={formik.handleChange}\r\n          />\r\n        </Field>\r\n        <Field margin={'0 0 15px 0'}\r\n          label={translate(\"phrasesList_dictDetail\", language)}\r\n          labelBrother={\r\n            <div style={{ display: 'flex', justifyContent: \"space-between\", width: '140px', alignItems: 'center' }}>\r\n              <div>\r\n                {currentDict.allowedActions.includes('enable') && currentDict.allowedActions.includes('disable') &&\r\n                  <div>\r\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                      <Switch\r\n                        onChecked={async (e) => {\r\n                          if (currentGroup) {\r\n                            setChecked(!checked);\r\n                            setCheckedDisable(true);\r\n                            setSnackbar({ type: 'loading', value: true, text: 'Загрузка...', time: null })\r\n                            await dispatch(dictActions({\r\n                              dictId: currentDict.id,\r\n                              action: currentDict.enabled ? 'disable' : 'enable'\r\n                            }))\r\n\r\n\r\n                            if (currentGroup.count < 2) {\r\n                              const groupsData = await dispatch(getGroups());\r\n                              // @ts-ignore\r\n                              const groups: GroupType[] = groupsData.payload;\r\n\r\n                              dispatch(dictsSlice.actions.setCurrentGroup(groups[0]));\r\n                              const dictsData = await dispatch(getDicts({ group: groups[0].group }))\r\n                              // @ts-ignore\r\n                              const dicts: DictType[] = dictsData.payload;\r\n                              dispatch(dictsSlice.actions.setCurrentDict(undefined));\r\n                              dispatch(dictsSlice.actions.setSearch(`?group=${groups[0].group}`));\r\n                              history.location.pathname = '/';\r\n                              history.replace(`${language}/${userId}/markuprules/dictionaries?group=${groups[0].group}`);\r\n                            } else {\r\n                              await dispatch(getDicts({ group: currentGroup.group }))\r\n                              dispatch(dictsSlice.actions.setCurrentDict(undefined));\r\n                              dispatch(dictsSlice.actions.setSearch(`?group=${currentGroup.group}`))\r\n                              history.location.pathname = '/';\r\n                              history.replace(`${language}/${userId}/markuprules/dictionaries?group=${currentGroup.group}`)\r\n                            }\r\n\r\n\r\n                            setSnackbar({ type: 'loading', value: false, text: 'Загрузка...', time: null })\r\n                            setSnackbar({\r\n                              type: 'success',\r\n                              value: true,\r\n                              text: `Словарь ${currentDict.enabled ? 'выключен' : 'включён'}`,\r\n                              time: 1000\r\n                            });\r\n                            setChecked(checked);\r\n                            setCheckedDisable(false);\r\n                          }\r\n                        }}\r\n                        checked={checked}\r\n                        disabled={checkedDisable}\r\n                      />\r\n                      <Typography className={classes.switchText}>\r\n                        {currentDict.enabled ? 'Вкл' : 'Выкл'}\r\n                      </Typography>\r\n                    </div>\r\n                  </div>\r\n                }\r\n              </div>\r\n              <Tooltip\r\n                disableInteractive={true}\r\n                classes={{ tooltip: classes.tooltip }}\r\n                title={\r\n                  <div>\r\n                    <Typography>Правила заполнения словарей</Typography>\r\n                    <ul style={{ marginTop: '0', paddingLeft: '20px' }}>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Каждая фраза размещается на отдельной строке.\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Поиск по содержимому осуществляется по целому слову.\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Поиск части слова осуществляется с заменой окончания символом * (например: в слове\r\n                        интернет*\r\n                        найдет\r\n                        и интернета/интернету/интернетов).\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Между слов во фразе при поиске возможно попадание до трех любых слов\r\n                        (например запись в словаре `плох* интернет` найдет фразу `плохо работает ваш интернет`).\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Для поиска фразы с точным совпадением (без лишних слов) необходимо расставить\r\n                        кавычки (например: \"не работает\", без кавычек найдет \"не знаю наверное работает\").\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Для поиска любого кол-ва слов в фразе, вместо пробела нужно поставить символ\r\n                        ~ (например: \"телефон~заработал\" найдет \"телефон сломался,\r\n                        ничего не показывает, что я только ни делал чтобы он заработал\").\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Для пропуска не более X слов, нужно вместо\r\n                        пробела поставить нижнее подчёркивание _ столько раз, сколько максимум\r\n                        будет слов (например: \"уже_работает\" найдет \"уже все работает\",\r\n                        но не найдет \"уже теперь все работает\").\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Символ `-` перед словом означает\r\n                        требование остутствие слова в фразе. (например `-не работает`\r\n                        будет находить фразы где есть слово `работает` но перед ним нет слова `не`.\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Символ `!` перед словом означает\r\n                        требование остутствие слова в ЛЮБОЙ части в фразе.\r\n                        (например `!плохо работает` не сработает на фразе `работает очень плохо`).\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        Можно указывать несколько слов через слеш `/`, тогда поиска делается\r\n                        по любому их указанных слов. (например:\r\n                        `доброе/добрый утро/день/вечер` найдет и фразы\r\n                        `доброе утро`, `добрый день` и `добрый вечер`).\r\n                      </li>\r\n                      <li style={{ margin: '5px 0' }}>\r\n                        У фразы словаря можно указывать `:` и фразу замены, фраза замены используется для\r\n                        словаря автозамены, а так же при применении правла тегирования. В правиле тегирования\r\n                        в значения тега будет проставляться значение указанное после `:` а искать будем по тому\r\n                        что до ':' (например сделаем записи в словаре \"беха:bmw\",\"ауди:audi\", \"иск 5:bmw\",\r\n                        и делаем правило тегирования которое ишет эти фразы, и заполняет тег \"марка автомобиля\",\r\n                        в значение тега будет проставлено audi или bmw).\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                }\r\n                placement=\"left\"\r\n              >\r\n                <div><InfoCircleActive /></div>\r\n              </Tooltip>\r\n            </div>\r\n          }\r\n        >\r\n          <textarea\r\n            className={classes.ddTextarea}\r\n            disabled={!currentDict.group}\r\n            onChange={formik.handleChange}\r\n            value={formik.values.phrases}\r\n            name=\"phrases\"\r\n          />\r\n        </Field>\r\n\r\n        <div style={{ marginTop: '45px' }}>\r\n\r\n          <div style={{ display: 'flex', justifyContent: \"space-between\", alignItems: 'center' }}>\r\n            <div>\r\n              <Typography className={classes.rulesText}>{translate(\"rulesName_dictDetail\", language)}</Typography>\r\n\r\n              {/* Checkbox block */}\r\n              <div style={{ margin: '18px 0 24px 0' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', marginBottom: '12px' }}>\r\n                  <Checkbox\r\n                    disabled={!currentDict.group}\r\n                    style={{ marginRight: '8px' }}\r\n                  />\r\n                  <Typography>{translate(\"autocorrectDict_dictDetail\", language)}</Typography>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <LoadingButton\r\n                type={\"submit\"}\r\n                style={{ marginRight: '24px' }}\r\n                variant={\"contained\"}\r\n                loading={submitLoading}\r\n                disabled={!currentDict.group}\r\n              >\r\n                {translate(\"saveButton_dictDetail\", language)}\r\n              </LoadingButton>\r\n              <div style={{ width: '40px', height: '40px' }}>\r\n                {currentDict.allowedActions.length > 0 &&\r\n                  <CustomControlSelect\r\n                    disabled={!currentDict}\r\n                    optionsPosition={\"top\"}\r\n                    options={createSelectOptions()}\r\n                    svg={'horizontal'}\r\n                    handleSelectChange={async (e) => {\r\n                      if (e.value === 'delete') {\r\n                        handleMWOpen();\r\n                      } else if (e.value === 'clone' && currentGroup) {\r\n                        setSnackbar({ type: 'loading', value: true, text: 'Загрузка...', time: null })\r\n                        await dispatch(dictActions({\r\n                          dictId: currentDict.id,\r\n                          action: 'clone'\r\n                        }));\r\n\r\n                        const dictsData = await dispatch(getDicts({ group: currentGroup.group }))\r\n                        // @ts-ignore\r\n                        const dicts: DictType[] = dictsData.payload;\r\n                        await dispatch(getDict(dicts[0].id))\r\n                        dispatch(dictsSlice.actions.setSearch(`?group=${currentGroup.group}&id=${dicts[0].id}`))\r\n                        history.location.pathname = '/';\r\n                        history.replace(`${language}/${userId}/markuprules/dictionaries?group=${currentGroup.group}&id=${dicts[0].id}`)\r\n                        setSnackbar({ type: 'loading', value: false, text: 'Загрузка...', time: null })\r\n                        setSnackbar({ type: 'success', value: true, text: 'Словарь склонирован', time: 2000 })\r\n                      }\r\n                    }}\r\n                  />\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      {snackbar.value &&\r\n        <Snackbar\r\n          type={snackbar.type}\r\n          open={snackbar.value}\r\n          onClose={() => {\r\n            setSnackbar({ ...snackbar, value: false })\r\n          }}\r\n          text={snackbar.text}\r\n          time={snackbar.time}\r\n        />\r\n      }\r\n\r\n\r\n      {/* modal window */}\r\n      <ModalWindow\r\n        isMWOpen={deleteDictMWIsOpen}\r\n        handleMWClose={handleMWClose}\r\n        text={\"Вы уверены, что хотите удалить словарь?\"}\r\n      >\r\n        <Field label={''}>{currentDict.title}</Field>\r\n        <div style={{ display: 'flex', marginTop: '10px' }}>\r\n          <LoadingButton\r\n            loading={deleteLoading}\r\n            style={{ marginRight: '15px' }}\r\n            variant=\"contained\"\r\n            color=\"error\"\r\n            onClick={dictHandleDelete}\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n          <LoadingButton\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleMWClose}\r\n          >\r\n            {translate(\"cancelButton\", language)}\r\n          </LoadingButton>\r\n        </div>\r\n      </ModalWindow>\r\n\r\n    </BlockBox>\r\n  );\r\n};\r\n\r\nexport default DictDetailsStubMiddleware;\r\n","import React, { useEffect, useState } from 'react';\r\nimport ModalWindow from \"../../../components/common/ModalWindowBox\";\r\nimport Groups from \"../../../components/MarkupRules/Groups/Groups\";\r\nimport Items from \"../../../components/MarkupRules/Items/Items\";\r\nimport DictDetails from \"./DictsDetail\";\r\nimport { MarkupRulesButtons, SearchInput } from \"../MarkupRules\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../../hooks/redux\";\r\nimport { dictsSlice, getDict, getDicts, getGroups, postDict } from \"../../../store/dicts/dicts.slice\";\r\nimport { DictType, GroupType } from \"../../../store/dicts/dicts.types\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport Snackbar from \"../../../components/common/Snackbar\";\r\nimport { useFormik } from \"formik\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Input } from \"../../../components/common\";\r\nimport { RootState } from \"../../../store/store\";\r\nimport { translate } from \"../../../localizations\";\r\nimport queryString from 'query-string';\r\nimport { tagsSlice } from \"../../../store/tags/tags.slice\";\r\nimport { langSlice } from \"../../../store/lang/lang.slice\";\r\n\r\nexport function createQueryString(queryObj: any) {\r\n  let str = '';\r\n  for (let key in queryObj) {\r\n    str += `&${key}=${queryObj[key]}`;\r\n  }\r\n  if (str.length > 1) {\r\n    const output = str.slice(1);\r\n    return `?${output}`\r\n  }\r\n  return \"\";\r\n}\r\n\r\nconst DictsPage = () => {\r\n  // STYLES BLOCK\r\n  const useDictsStyles = makeStyles(({\r\n    // dp - dicts page\r\n    dpContainer: {\r\n      width: '100%',\r\n      height: '810px',\r\n      margin: '40px 10px 60px 10px',\r\n      display: 'flex'\r\n    },\r\n\r\n    // left block\r\n    dpLeftBlock: {\r\n      width: '58%',\r\n      marginRight: '2%',\r\n      display: 'flex',\r\n    },\r\n    dpLeftBlockGroups: {\r\n      width: '50%',\r\n      backgroundColor: '#fff',\r\n      borderTopLeftRadius: \"10px\",\r\n      borderBottomLeftRadius: \"10px\"\r\n    },\r\n\r\n    dpLeftBlockDicts: {\r\n      paddingTop: '26px',\r\n      overflow: 'hidden',\r\n      width: '50%',\r\n      backgroundColor: '#F8FAFC',\r\n      borderTopRightRadius: \"10px\",\r\n      borderBottomRightRadius: \"10px\",\r\n    },\r\n\r\n    dpBothBox: {\r\n      marginTop: '24px',\r\n      height: '700px',\r\n      overflow: 'hidden',\r\n      overflowY: 'auto',\r\n      borderRadius: '5px',\r\n\r\n      '&::-webkit-scrollbar': {\r\n        paddingTop: '4px',\r\n        width: '4px',\r\n        outline: 'none',\r\n        background: '#CDD5DF'\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#9298A1'\r\n      }\r\n    },\r\n\r\n    // right block\r\n    dpRightBlock: {\r\n      width: '40%',\r\n    },\r\n\r\n    MWTitle: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      marginBottom: '25px'\r\n    },\r\n    MWTitleText: {\r\n      fontWeight: '700 !important'\r\n    },\r\n    MWButtons: {\r\n      marginTop: '15px',\r\n      textAlign: 'right'\r\n    },\r\n    MWInput: {\r\n      width: '100%',\r\n      height: '20px',\r\n      '&:input': {\r\n        padding: '0'\r\n      }\r\n    }\r\n  }));\r\n\r\n  // LOGIC BLOCK\r\n  const classes = useDictsStyles();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const dicts = useAppSelector(state => state.dicts.dicts);\r\n  const currentGroup = useAppSelector(state => state.dicts.currentGroup);\r\n  const currentDict = useAppSelector(state => state.dicts.currentDict);\r\n  const search = useAppSelector(state => state.dicts.search);\r\n\r\n\r\n  function searchStringParserInObj(initialString: string) {\r\n    const searchString = initialString.slice(1);\r\n    const searchStringArray = searchString.split(\"&\");\r\n\r\n    let output: any = {};\r\n    for (let i = 0; i < searchStringArray.length; i++) {\r\n      const query = queryString.parse(searchStringArray[i]);\r\n      output = { ...output, ...query }\r\n    }\r\n    return output;\r\n  }\r\n\r\n  async function queryByParameters(search: string) {\r\n    const searchParamsObject = searchStringParserInObj(search);\r\n    const groupsData = await dispatch(getGroups());\r\n    // @ts-ignore\r\n    const groups: GroupType[] = groupsData.payload;\r\n\r\n    const searchParams = searchStringParserInObj(search);\r\n\r\n    // @ts-ignore\r\n    const currentGroupLocal = groups.find(item => {\r\n      if (item) {\r\n        return item.group === searchParams.group\r\n      }\r\n    });\r\n    if (currentGroupLocal && currentGroup && currentGroupLocal.group !== currentGroup.group) {\r\n      dispatch(dictsSlice.actions.setEmptyDicts(null));\r\n    }\r\n    dispatch(dictsSlice.actions.setCurrentDict(null));\r\n\r\n    let dicts = null\r\n    if (currentGroupLocal && searchParamsObject.search) {\r\n      dispatch(dictsSlice.actions.setCurrentGroup(currentGroupLocal));\r\n      const dictsData = await dispatch(getDicts({ group: currentGroupLocal.group, filter: searchParamsObject.search }));\r\n      // @ts-ignore\r\n      dicts = dictsData.payload;\r\n    }\r\n    if (currentGroupLocal && !searchParamsObject.search) {\r\n      dispatch(dictsSlice.actions.setCurrentGroup(currentGroupLocal));\r\n      dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n      const dictsData = await dispatch(getDicts({ group: currentGroupLocal.group }));\r\n      // @ts-ignore\r\n      dicts = dictsData.payload;\r\n    }\r\n    if (dicts) {\r\n      if (dicts.find((item: any) => item.id === searchParamsObject.id)) {\r\n        await dispatch(getDict(searchParams.id));\r\n      } else {\r\n        dispatch(dictsSlice.actions.setCurrentDict(false));\r\n      }\r\n    }\r\n  }\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n\r\n\r\n  // первый рендиринг\r\n  const getStartDictsData = async () => {\r\n    const searchParams = createQueryString(queryString.parse(search));\r\n    const groupsData = await dispatch(getGroups());\r\n    // @ts-ignore\r\n    const groups: GroupType[] = groupsData.payload;\r\n\r\n    if (searchParams.length < 2) {\r\n      dispatch(dictsSlice.actions.setCurrentGroup(groups[0]));\r\n      const dictsData = await dispatch(getDicts({ group: groups[0].group }));\r\n      // @ts-ignore\r\n      const dicts: DictType[] = dictsData.payload;\r\n      dispatch(dictsSlice.actions.setSearch(`?group=${groups[0].group}&id=${dicts[0].id}`));\r\n      history.location.pathname = '/';\r\n      history.replace(`${language}/${userId}/markuprules/dictionaries?group=${groups[0].group}&id=${dicts[0].id}`)\r\n      if (!currentDict) {\r\n        await dispatch(getDict(dicts[0].id));\r\n      }\r\n    } else {\r\n      queryByParameters(search);\r\n      history.location.pathname = '/';\r\n      let newSearch = search;\r\n      if (search[0] !== '?') {\r\n        newSearch = `?${search}`;\r\n      }\r\n      history.replace(`${language}/${userId}/markuprules/dictionaries${newSearch}`);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return history.listen((location) => {\r\n      const currentSearch = createQueryString(queryString.parse(location.search));\r\n      let oldSearchConverted = createQueryString(queryString.parse(search));\r\n      if (oldSearchConverted[0] !== '?') {\r\n        oldSearchConverted = `?${search}`\r\n      }\r\n      debugger\r\n      if (currentSearch !== oldSearchConverted) {\r\n        queryByParameters(location.search);\r\n      }\r\n    });\r\n  }, [search]);\r\n\r\n\r\n  useEffect(() => {\r\n    getStartDictsData().then();\r\n    dispatch(langSlice.actions.setLoading(false));\r\n  }, []);\r\n\r\n\r\n  const dictHandleAddSubmit = async (e: any) => {\r\n    if (currentGroup) {\r\n      setAddButtonLoading(true);\r\n      // @ts-ignore\r\n      const newDictIdData = await dispatch(postDict({\r\n        title: e.dictName,\r\n        owner: null,\r\n        sttAutoReplace: null,\r\n        enabled: true,\r\n        group: e.groupName,\r\n        usedRules: [],\r\n        allowedUsers: [],\r\n        phrases: []\r\n      }))\r\n      // @ts-ignore\r\n      const newDictId = newDictIdData.payload;\r\n      const groupsData = await dispatch(getGroups());\r\n      // @ts-ignore\r\n      const group = groupsData.payload.filter((item) => item.group === e.groupName)[0];\r\n      dispatch(dictsSlice.actions.setCurrentGroup(group))\r\n      await dispatch(getDicts({ group: e.groupName }));\r\n      await dispatch(getDict(newDictId));\r\n      setSuccessSnackbarOpen(true);\r\n      setAddButtonLoading(false);\r\n      setAddDictMWIsOpen(false);\r\n      formik.values.dictName = '';\r\n      formik.values.groupName = '';\r\n    }\r\n  };\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      dictName: '',\r\n      groupName: ''\r\n    },\r\n    onSubmit(e) {\r\n      dictHandleAddSubmit(e).then()\r\n    }\r\n  });\r\n\r\n\r\n  // modal window(MW) открытие/закрытие.\r\n  const [addDictMWIsOpen, setAddDictMWIsOpen] = useState<boolean>(false);\r\n  const handleMWOpen = () => {\r\n    setAddDictMWIsOpen(true);\r\n  };\r\n  const handleMWClose = () => {\r\n    setAddDictMWIsOpen(false);\r\n  };\r\n  const [addButtonLoading, setAddButtonLoading] = useState<boolean>(false);\r\n\r\n  const [isErrorSnackbarOpen, setErrorSnackbarOpen] = useState<boolean>(false);\r\n  const [isSuccessSnackbarOpen, setSuccessSnackbarOpen] = useState<boolean>(false);\r\n\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n\r\n  return (\r\n    <div className={classes.dpContainer}>\r\n      <div className={classes.dpLeftBlock}>\r\n        <div className={classes.dpLeftBlockGroups}>\r\n          {/* local url handler */}\r\n          <MarkupRulesButtons />\r\n\r\n          {currentGroup &&\r\n            <Snackbar\r\n              type={'success'}\r\n              open={isSuccessSnackbarOpen}\r\n              onClose={() => {\r\n                setSuccessSnackbarOpen(false)\r\n              }}\r\n              text={`Словарь добавлен`}\r\n              time={2000}\r\n            />}\r\n\r\n          {/* groups */}\r\n          <div className={classes.dpBothBox}>\r\n            <Groups />\r\n          </div>\r\n        </div>\r\n\r\n        {/* dicts */}\r\n        <div className={classes.dpLeftBlockDicts}>\r\n          <SearchInput\r\n            onSubmit={async (values: any) => {\r\n              const searchObj = searchStringParserInObj(history.location.search);\r\n              debugger\r\n              dispatch(dictsSlice.actions.setEmptyDicts(null));\r\n              dispatch(dictsSlice.actions.setCurrentDict(null));\r\n              const dictsData = await dispatch(getDicts({ group: searchObj.group, filter: values.search }));\r\n              // @ts-ignore\r\n              const dicts: DictType[] = dictsData.payload;\r\n              if (dicts.length < 1) {\r\n                await dispatch(dictsSlice.actions.setCurrentDict(false));\r\n              } else {\r\n                await dispatch(getDict(dicts[0].id));\r\n              }\r\n            }}\r\n            handleMWOpen={handleMWOpen} />\r\n          <Snackbar\r\n            type={'error'}\r\n            open={isErrorSnackbarOpen}\r\n            onClose={() => {\r\n              setErrorSnackbarOpen(false)\r\n            }}\r\n            text={'В эту группу нельзя добавить словарь'}\r\n            time={2000}\r\n          />\r\n\r\n          <div className={classes.dpBothBox}>\r\n            <Items\r\n              items={dicts}\r\n              currentItem={currentDict}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* detail */}\r\n      <div className={classes.dpRightBlock}>\r\n        <DictDetails />\r\n      </div>\r\n\r\n      {/* modal window */}\r\n      <ModalWindow\r\n        isMWOpen={addDictMWIsOpen}\r\n        handleMWClose={handleMWClose}\r\n        width={'400px'}\r\n        text={\"Введите имя словаря и группы\"}\r\n      >\r\n\r\n        <form onSubmit={formik.handleSubmit}>\r\n          <Input\r\n            height={'36px'}\r\n            value={formik.values.dictName}\r\n            handleChange={formik.handleChange}\r\n            name={'dictName'}\r\n            type={'text'}\r\n            bcColor={'#F8FAFC'}\r\n            label={'Словарь'}\r\n          />\r\n          <div style={{ marginTop: '20px' }}>\r\n            <Input\r\n              height={'36px'}\r\n              value={formik.values.groupName}\r\n              handleChange={formik.handleChange}\r\n              name={'groupName'}\r\n              type={'text'}\r\n              bcColor={'#F8FAFC'}\r\n              label={'Группа'}\r\n            />\r\n          </div>\r\n\r\n          <div className={classes.MWButtons}>\r\n            <LoadingButton\r\n              loading={addButtonLoading}\r\n              style={{ marginRight: '15px' }}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              type=\"submit\"\r\n            >\r\n              {translate(\"sendButton\", language)}\r\n            </LoadingButton>\r\n            <LoadingButton\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleMWClose}\r\n            >\r\n              {translate(\"cancelButton\", language)}\r\n            </LoadingButton>\r\n          </div>\r\n        </form>\r\n      </ModalWindow>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DictsPage;","import { makeStyles } from \"@mui/styles\";\r\n\r\nexport const useTagDetailsStyles = makeStyles(({\r\n  tdWrapper: {\r\n    height: '100%',\r\n    padding: '24px'\r\n  },\r\n  tdNameAdnPriority: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    width: '100%'\r\n  },\r\n  tdTagNameInput: {\r\n    width: '100%',\r\n    border: ''\r\n  },\r\n  tdPriorityInput: {\r\n    '& input': {\r\n      textAlign: 'center'\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\"\r\n    }\r\n  },\r\n  typographyTitle: {\r\n    color: '#2F3747 !important',\r\n    fontWeight: '700 !important',\r\n    fontSize: '16px !important',\r\n    margin: '15px 0 !important'\r\n  },\r\n  typographyTitleMini: {\r\n    color: '#738094 !important',\r\n    fontWeight: '700 !important',\r\n    fontSize: '11px !important'\r\n  },\r\n  typographyTitleMiniTwo: {\r\n    marginBottom: '10px !important',\r\n    color: '#738094 !important',\r\n    fontWeight: '700 !important',\r\n    fontSize: '13px !important'\r\n  },\r\n  typographyTitleMiniThree: {\r\n    color: '#738094 !important',\r\n    fontWeight: '700 !important',\r\n    fontSize: '13px !important'\r\n  }\r\n}));\r\n","import React from \"react\";\r\n\r\nexport const InfoSvg = (props: any) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM8.91429 4.34286C8.91429 4.8478 8.50496 5.25714 8 5.25714C7.49504 5.25714 7.08571 4.8478 7.08571 4.34286C7.08571 3.83792 7.49504 3.42857 8 3.42857C8.50496 3.42857 8.91429 3.83792 8.91429 4.34286ZM8 6.85714C8.3787 6.85714 8.68571 7.16416 8.68571 7.54286V12.1143C8.68571 12.493 8.3787 12.8 8 12.8C7.6213 12.8 7.31429 12.493 7.31429 12.1143V7.54286C7.31429 7.16416 7.6213 6.85714 8 6.85714Z\" fill=\"#722ED1\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const WarningSvg = (props: any) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\" fill={props.fill ? props.fill : \"#FAAD14\"} {...props}>\r\n      <path d=\"M8 1C4.13438 1 1 4.13438 1 8C1 11.8656 4.13438 15 8 15C11.8656 15 15 11.8656 15 8C15 4.13438 11.8656 1 8 1ZM7.5 4.625C7.5 4.55625 7.55625 4.5 7.625 4.5H8.375C8.44375 4.5 8.5 4.55625 8.5 4.625V8.875C8.5 8.94375 8.44375 9 8.375 9H7.625C7.55625 9 7.5 8.94375 7.5 8.875V4.625ZM8 11.5C7.80374 11.496 7.61687 11.4152 7.47948 11.275C7.3421 11.1348 7.26515 10.9463 7.26515 10.75C7.26515 10.5537 7.3421 10.3652 7.47948 10.225C7.61687 10.0848 7.80374 10.004 8 10C8.19626 10.004 8.38313 10.0848 8.52052 10.225C8.6579 10.3652 8.73485 10.5537 8.73485 10.75C8.73485 10.9463 8.6579 11.1348 8.52052 11.275C8.38313 11.4152 8.19626 11.496 8 11.5Z\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const ErrorSvg = (props: any) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#FF4D4F\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M11.1618 4.83688C11.3896 5.06469 11.3896 5.43406 11.1618 5.66187L5.66187 11.1618C5.43406 11.3896 5.06469 11.3896 4.83688 11.1618C4.60906 10.934 4.60906 10.5646 4.83688 10.3368L10.3368 4.83688C10.5646 4.60906 10.934 4.60906 11.1618 4.83688Z\" fill=\"white\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M4.83688 4.83688C5.06469 4.60906 5.43406 4.60906 5.66187 4.83688L11.1618 10.3368C11.3896 10.5646 11.3896 10.934 11.1618 11.1618C10.934 11.3896 10.5646 11.3896 10.3368 11.1618L4.83688 5.66187C4.60906 5.43406 4.60906 5.06469 4.83688 4.83688Z\" fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const SuccessSvg = (props: any) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#73D13D\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M12.0209 5.31295C12.2161 5.50821 12.2161 5.8248 12.0209 6.02006L7.35418 10.6867C7.15892 10.882 6.84238 10.882 6.6471 10.6867L3.98043 8.02004C3.78517 7.82477 3.78517 7.50824 3.98043 7.31297C4.17569 7.1177 4.49228 7.1177 4.68754 7.31297L7.00065 9.62604L11.3138 5.31295C11.5091 5.11769 11.8256 5.11769 12.0209 5.31295Z\" fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};","import React, {FC} from 'react';\r\nimport {Alert, CircularProgress} from \"@mui/material\";\r\nimport {InfoSvg, WarningSvg, ErrorSvg, SuccessSvg} from './Alert.svg';\r\n\r\ntype AlertType = {\r\n  iconType?: 'info' | 'warning' | 'error' | 'loading' | 'success',\r\n  text: string,\r\n\r\n  padding?: string,\r\n  boxShadow?: string,\r\n  width?: string\r\n}\r\n\r\nconst CustomAlert: FC<AlertType> = (\r\n  {\r\n    iconType,\r\n\r\n    text,\r\n    padding,\r\n    boxShadow,\r\n    width,\r\n  }\r\n) => {\r\n  const getIcon = () => {\r\n    if (iconType === 'info') {\r\n      return {\r\n        icon: <InfoSvg/>,\r\n        color: '#0388D1'\r\n      }\r\n    } else if (iconType === 'warning') {\r\n      return {\r\n        icon: <WarningSvg fill={'#fff'}/>,\r\n        color: '#F57C00'\r\n      }\r\n    } else if (iconType === 'error') {\r\n      return {\r\n        icon: <ErrorSvg/>,\r\n        color: '#D32F2F'\r\n      }\r\n    } else if (iconType === 'loading') {\r\n      return {\r\n        icon: <CircularProgress style={{width: '16px', height: '16px'}}/>,\r\n        color: '#fff'\r\n      }\r\n    } else if (iconType === 'success') {\r\n      return {\r\n        icon: <SuccessSvg/>,\r\n        color: '#389E0D'\r\n      }\r\n    } else {\r\n      return {\r\n        icon: <div></div>,\r\n        color: '#EBEFF4'\r\n      }\r\n    }\r\n  };\r\n  const alertObject = getIcon();\r\n  return (\r\n    <Alert\r\n      icon={alertObject.icon}\r\n      sx={{\r\n        padding: padding ? padding : '0 10px',\r\n        width: width ? width : 'auto',\r\n        fontSize: '15px',\r\n        backgroundColor: alertObject.color,\r\n        color: iconType ? \"#fff\" : \"#000\",\r\n        boxShadow: boxShadow ? boxShadow : 'none',\r\n        '& .MuiAlert-icon': {\r\n          paddingTop: '10px !important'\r\n        }\r\n      }}\r\n    >\r\n      {text}\r\n    </Alert>\r\n  );\r\n}\r\n\r\nexport default CustomAlert;","import {makeStyles} from \"@mui/styles\";\r\nimport {Theme} from \"@mui/material\";\r\n\r\ntype SelectCustomPropsType = {\r\n  width?: string,\r\n  height?: string\r\n}\r\nexport const useMuiCustomSelectStyles = makeStyles<Theme, SelectCustomPropsType>((theme: Theme) => ({\r\n  selectBox: {\r\n    display: 'flex !important',\r\n    alignItems: 'center',\r\n    cursor: 'pointer',\r\n    width: '100%'\r\n  },\r\n  selectMenuListInput: {\r\n    width: \"228px\",\r\n    margin: '16px 24px',\r\n    outline: 'none',\r\n    backgroundColor: '#F8FAFC',\r\n    border: '1px solid #E3E8EF',\r\n    borderRadius: '5px',\r\n    padding: '10px 30px 10px 12px',\r\n    color: '#738094',\r\n    fontSize: '14px',\r\n    position: 'relative'\r\n  },\r\n  selectMenuListInputIcon: {\r\n    position: 'absolute',\r\n    left: '262px',\r\n    top: '23px',\r\n    color: '#738094',\r\n    width: '11px'\r\n  },\r\n  selectOption: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: '5px 24px'\r\n  },\r\n  selectArrow: {\r\n    marginRight: '10px'\r\n  },\r\n  selectArrowOnArrow: {\r\n    marginBottom: '5px'\r\n  },\r\n  selectCheckBox: {\r\n    '&.MuiCheckbox-root': {\r\n      backgroundColor: '#E3E8EF !important'\r\n    }\r\n  },\r\n  selectTag: {\r\n    height: '22px !important',\r\n    cursor: 'pointer !important',\r\n    fontFamily: 'Inter, sans-serif !important',\r\n    border: '2px solid #E9ECEF !important',\r\n    borderRadius: '5px !important',\r\n    margin: '2.5px !important',\r\n    padding: '0 5px',\r\n    backgroundColor: '#E9ECEF !important',\r\n    color: `#000000 !important`,\r\n    fontSize: '12px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  selectSelectBox: {\r\n    position: 'relative',\r\n    minWidth: props => props.width ? props.width : 'auto'\r\n  },\r\n  selectPlaceholder: {\r\n    position: 'absolute',\r\n    left: '11px !important',\r\n    top: '9px !important'\r\n  }\r\n}));\r\n\r\nexport function selectCustomStylesCreator(props: { menuIsOpen: boolean, height?: string }) {\r\n  return {\r\n    menu: (provided: any) => ({\r\n      ...provided,\r\n      width: '322px',\r\n      height: '400px !important',\r\n      overflow: 'hidden',\r\n      overflowY: 'auto',\r\n      zIndex: '1000',\r\n      '&::-webkit-scrollbar': {\r\n        width: '4px',\r\n        backgroundColor: '#f1f1f1',\r\n        outline: 'none',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: '#A3AEBE',\r\n        height: '50px',\r\n        borderRadius: '10px'\r\n      },\r\n      '&::-webkit-scrollbar-thumb:hover': {\r\n        background: '#9298A1'\r\n      }\r\n    }),\r\n    option: (provided: any, state: any) => ({\r\n      cursor: 'pointer',\r\n      padding: '10px 24px',\r\n      fontFamily: 'Inter, sans-serif',\r\n      fontSize: '14px',\r\n      backgroundColor: '#ffffff',\r\n      color: '#000',\r\n      \"&:hover\": {\r\n        backgroundColor: '#F8FAFC',\r\n        color: '#722ED1'\r\n      }\r\n    }),\r\n    control: (provided: any, state: any) => ({\r\n      ...provided,\r\n      cursor: 'pointer',\r\n      border: '1px solid #E3E8EF',\r\n      boxShadow: 'none',\r\n      borderColor: props.menuIsOpen ? '#722ED1 !important' : '#E3E8EF !important',\r\n      \"&:hover\": {\r\n        borderColor: '#E3E8EF'\r\n      },\r\n      minHeight: props.height ? props.height : '38px',\r\n      minWidth: '70px',\r\n      borderRadius: '5px',\r\n      backgroundColor: '#F8FAFC'\r\n    }),\r\n    dropdownIndicator: (provided: any) => ({\r\n      ...provided,\r\n      color: '#738094',\r\n      '&:hover': {\r\n        color: '#738094'\r\n      }\r\n    }),\r\n    placeholder: (provided: any) => ({\r\n      ...provided,\r\n      fontSize: '14px',\r\n      color: '#738094',\r\n      fontFamily: 'Inter, sans-serif'\r\n    }),\r\n    indicatorsContainer: (provided: any) => ({\r\n      ...provided,\r\n      '& svg path:hover': {\r\n        fill: 'hsl(0, 0%, 80%)'\r\n      },\r\n      padding: '0'\r\n    }),\r\n    multiValue: (provided: any) => ({\r\n      ...provided,\r\n      height: '24px !important',\r\n      cursor: 'pointer !important',\r\n      fontFamily: 'Inter, sans-serif !important',\r\n      border: '2px solid #E9ECEF !important',\r\n      borderRadius: '5px !important',\r\n      margin: '2.5px !important',\r\n      backgroundColor: '#E9ECEF !important',\r\n      color: `#000000 !important`,\r\n    }),\r\n    multiValueRemove: (provided: any) => ({\r\n      ...provided,\r\n      backgroundColor: '#E9ECEF !important',\r\n    }),\r\n    valueContainer: (provided: any) => ({\r\n      ...provided,\r\n      display: 'flex',\r\n      paddingRight: '20px',\r\n    })\r\n  };\r\n}\r\n\r\n","import {memo} from \"react\";\r\nimport {components} from \"react-select\";\r\nimport cn from \"classnames\";\r\nimport Checkbox from \"../../Checkbox\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport * as React from \"react\";\r\nimport {CrossWithoutBg, OnBottomArrow, OnTopArrow} from \"../../Search/SearchSelect\";\r\nimport {useMuiCustomSelectStyles} from './CustomSelect.jss';\r\n\r\nexport const CustomMultiValueLabel = memo((props: any) => {\r\n  return (\r\n    <components.MultiValueLabel {...props} />\r\n  )\r\n});\r\n\r\nexport const CustomMultiValueRemove = memo((props: any) => {\r\n  return (\r\n    <components.MultiValueRemove {...props}>\r\n      <CrossWithoutBg fill={'000'}/>\r\n    </components.MultiValueRemove>\r\n  )\r\n});\r\n\r\nexport const LimitedChipsContainer = ({children, hasValue, ...props}: any) => {\r\n  const classes = useMuiCustomSelectStyles({});\r\n  if (!hasValue) {\r\n    return (\r\n      <components.ValueContainer {...props}>\r\n        {children}\r\n      </components.ValueContainer>\r\n    );\r\n  }\r\n  let CHIPS_LIMIT = 3;\r\n  const [chips, otherChildren] = children;\r\n  if (chips.length > CHIPS_LIMIT) {\r\n    CHIPS_LIMIT = 1;\r\n  }\r\n  const overflowCounter = chips.slice(CHIPS_LIMIT).length;\r\n  const displayChips = chips.slice(overflowCounter, overflowCounter + CHIPS_LIMIT);\r\n  return (\r\n    <components.ValueContainer {...props}>\r\n      {displayChips}\r\n      {overflowCounter > 0 &&\r\n      <div className={classes.selectTag}>\r\n        +{overflowCounter}\r\n      </div>}\r\n    </components.ValueContainer>\r\n  );\r\n};\r\n\r\nexport const CustomInd = memo((props: any) => {\r\n  const classes = useMuiCustomSelectStyles({});\r\n  if (props.menuIsOpen) {\r\n    return <components.DropdownIndicator {...props}>\r\n      <div className={cn(classes.selectArrowOnArrow, classes.selectArrow)}>\r\n        <OnTopArrow/>\r\n      </div>\r\n    </components.DropdownIndicator>\r\n  }\r\n  return <OnBottomArrow className={classes.selectArrow}/>\r\n});\r\n\r\nexport const CustomOption = memo((props: any) => {\r\n  const classes = useMuiCustomSelectStyles({});\r\n  if (props.children.length > 0) {\r\n    return <div>\r\n      <components.Option {...props} className={classes.selectOption}>\r\n        {props.children}\r\n        {/*<Checkbox*/}\r\n        {/*  disableRipple*/}\r\n        {/*  checked={props.activeCriteria.values.indexOf(props.children) >= 0}*/}\r\n        {/*/>*/}\r\n      </components.Option>\r\n    </div>\r\n  }\r\n  return null;\r\n})\r\n\r\n\r\nexport const CustomMenuList = memo(({selectProps, ...props}: any) => {\r\n  const {onInputChange, inputValue, onMenuInputFocus} = selectProps;\r\n  const classes = useMuiCustomSelectStyles({})\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <input\r\n          className={classes.selectMenuListInput}\r\n          autoCorrect=\"off\"\r\n          autoComplete=\"off\"\r\n          spellCheck=\"false\"\r\n          type=\"text\"\r\n          value={inputValue}\r\n          onChange={(e) =>\r\n            onInputChange(e.currentTarget.value, {\r\n              action: \"input-change\"\r\n            })\r\n          }\r\n          onMouseDown={(e) => {\r\n            e.stopPropagation();\r\n            // @ts-ignore\r\n            e.target.focus();\r\n          }}\r\n          onTouchEnd={(e) => {\r\n            e.stopPropagation();\r\n            // @ts-ignore\r\n            e.target.focus();\r\n          }}\r\n          onFocus={onMenuInputFocus}\r\n          placeholder=\"Поиск\"\r\n        />\r\n        <SearchIcon className={classes.selectMenuListInputIcon}/>\r\n      </div>\r\n      <div style={{height: '400px !important'}}>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n","import React, {FC, useEffect, useState} from 'react';\r\nimport {selectCustomStylesCreator, useMuiCustomSelectStyles} from \"./CustomSelect.jss\";\r\nimport CreatableSelect from \"react-select/creatable\";\r\nimport Select from \"react-select\";\r\nimport {Typography} from \"@mui/material\";\r\nimport {\r\n  CustomInd,\r\n  CustomMenuList,\r\n  CustomMultiValueLabel,\r\n  CustomMultiValueRemove,\r\n  CustomOption,\r\n  LimitedChipsContainer\r\n} from './CustomSelect.components';\r\n\r\nconst CrossSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#738094\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M11.1618 4.83785C11.3896 5.06567 11.3896 5.43503 11.1618 5.66285L5.66187 11.1628C5.43406 11.3906 5.06469 11.3906 4.83688 11.1628C4.60906 10.935 4.60906 10.5656 4.83688 10.3378L10.3368 4.83785C10.5646 4.61004 10.934 4.61004 11.1618 4.83785Z\"\r\n            fill=\"white\"/>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n            d=\"M4.83688 4.83785C5.06469 4.61004 5.43406 4.61004 5.66187 4.83785L11.1618 10.3378C11.3896 10.5656 11.3896 10.935 11.1618 11.1628C10.934 11.3906 10.5646 11.3906 10.3368 11.1628L4.83688 5.66285C4.60906 5.43503 4.60906 5.06567 4.83688 4.83785Z\"\r\n            fill=\"white\"/>\r\n    </svg>\r\n  );\r\n};\r\n\r\ntype OptionType = {\r\n  label: string,\r\n  value: any\r\n};\r\n\r\ntype CustomSelect = {\r\n  // значение\r\n  value: OptionType[] | any,\r\n  // все предлогаемые значения\r\n  options: OptionType[],\r\n  // тип селекта\r\n  selectType: string,\r\n  // поле по умолчанию?\r\n  isDefaultField: boolean,\r\n\r\n  // при изменении значений селекта\r\n  valueHandler: (event: any) => void,\r\n  // удаление всего поля\r\n  removeSelectHandler?: (event: any) => void,\r\n\r\n  // иконка удаления (по дефолту крестик с бэкграундом)\r\n  deleteIcon?: React.ReactElement,\r\n\r\n  // стили\r\n  width?: string,\r\n  height?: string\r\n}\r\n\r\nconst CustomSelect: FC<CustomSelect> = (\r\n  {\r\n    value,\r\n    options,\r\n    selectType,\r\n\r\n    valueHandler,\r\n    isDefaultField,\r\n    deleteIcon,\r\n    removeSelectHandler,\r\n    width,\r\n    height\r\n  }\r\n) => {\r\n  // styles\r\n  const classes = useMuiCustomSelectStyles({width: width});\r\n\r\n\r\n  // logic block\r\n  // LOGIC BLOCK\r\n  // диспатч\r\n  // открыте и закрытие менюшки.\r\n  const [menuIsOpen, setMenuIsOpen] = useState<boolean>(false);\r\n\r\n  // костылечек для загрытия селектов\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", () => setMenuIsOpen(false));\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.selectBox}>\r\n      {selectType === \"multiString\" ?\r\n        <div className={classes.selectSelectBox} onClick={() => setMenuIsOpen(true)}>\r\n          <CreatableSelect\r\n            closeMenuOnSelect={false}\r\n            isMulti\r\n            createOptionPosition={'first'}\r\n            styles={selectCustomStylesCreator({menuIsOpen: menuIsOpen, height: height})}\r\n            formatCreateLabel={(str) => str}\r\n            value={value}\r\n            onChange={valueHandler}\r\n            tabIndex={0}\r\n            isValidNewOption={(str) => true}\r\n            options={options}\r\n            hideSelectedOptions={false}\r\n            components={{\r\n              MenuList: CustomMenuList,\r\n              Option: CustomOption,\r\n              // @ts-ignore\r\n              DropdownIndicator: CustomInd,\r\n              IndicatorSeparator: () => null,\r\n              MultiValueLabel: CustomMultiValueLabel,\r\n              MultiValueRemove: CustomMultiValueRemove,\r\n            }}\r\n            placeholder={'Все'}\r\n            menuIsOpen={menuIsOpen}\r\n\r\n          />\r\n        </div> :\r\n        <div className={classes.selectSelectBox} onClick={() => setMenuIsOpen(true)}>\r\n          <Select\r\n            openMenuOnFocus={true}\r\n            menuIsOpen={menuIsOpen}\r\n            className={classes.selectItem}\r\n            name=\"color\"\r\n            placeholder={'Все'}\r\n            components={{\r\n              MenuList: CustomMenuList,\r\n              Option: CustomOption,\r\n              DropdownIndicator: CustomInd,\r\n              IndicatorSeparator: () => null,\r\n              MultiValueLabel: CustomMultiValueLabel,\r\n              MultiValueRemove: CustomMultiValueRemove,\r\n              ValueContainer: LimitedChipsContainer,\r\n            }}\r\n            onChange={valueHandler}\r\n            isClearable={true}\r\n            closeMenuOnSelect={false}\r\n            styles={selectCustomStylesCreator({menuIsOpen: menuIsOpen})}\r\n            isMulti\r\n            isSearchable={false}\r\n            value={value}\r\n            options={options}\r\n            hideSelectedOptions={false}\r\n          />\r\n          {value.length < 1 &&\r\n          <Typography className={classes.selectPlaceholder}>Все</Typography>\r\n          }\r\n        </div>\r\n      }\r\n      {!isDefaultField\r\n        ?\r\n        <div onClick={removeSelectHandler}>\r\n          {deleteIcon ?\r\n            deleteIcon :\r\n            <CrossSvg style={{cursor: 'pointer', marginLeft: '8px'}}/>\r\n          }\r\n        </div>\r\n        : null\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomSelect;\r\n","import React from \"react\";\r\n\r\nexport const TrashSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M6.9375 2.25C6.9375 1.93934 7.18934 1.6875 7.5 1.6875H10.5C10.8106 1.6875 11.0625 1.93934 11.0625 2.25V2.8125H14.25C14.5606 2.8125 14.8125 3.06434 14.8125 3.375C14.8125 3.68566 14.5606 3.9375 14.25 3.9375H3.75C3.43934 3.9375 3.1875 3.68566 3.1875 3.375C3.1875 3.06434 3.43934 2.8125 3.75 2.8125H6.9375V2.25Z\"\r\n        fill=\"#F5222D\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.68118 5.95858C4.70227 5.76868 4.8628 5.625 5.05388 5.625H12.9487C13.1397 5.625 13.3003 5.76868 13.3213 5.95858L13.4714 7.3096C13.742 9.74483 13.742 12.2026 13.4714 14.6378L13.4566 14.7708C13.3581 15.6577 12.6707 16.3649 11.787 16.4887C9.93883 16.7474 8.06368 16.7474 6.21556 16.4887C5.33178 16.3649 4.64439 15.6577 4.54584 14.7708L4.53106 14.6378C4.26048 12.2026 4.26048 9.74483 4.53106 7.3096L4.68118 5.95858ZM8.06375 8.55C8.06375 8.23935 7.8119 7.9875 7.50125 7.9875C7.19059 7.9875 6.93875 8.23935 6.93875 8.55V13.8C6.93875 14.1107 7.19059 14.3625 7.50125 14.3625C7.8119 14.3625 8.06375 14.1107 8.06375 13.8V8.55ZM11.0638 8.55C11.0638 8.23935 10.8119 7.9875 10.5013 7.9875C10.1906 7.9875 9.93875 8.23935 9.93875 8.55V13.8C9.93875 14.1107 10.1906 14.3625 10.5013 14.3625C10.8119 14.3625 11.0638 14.1107 11.0638 13.8V8.55Z\"\r\n        fill=\"#FF4D4F\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const PlusSvg = (props: any) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M8.00034 2.66602C8.38454 2.66602 8.69599 2.97747 8.69599 3.36167V12.637C8.69599 13.0212 8.38454 13.3327 8.00034 13.3327C7.61614 13.3327 7.30469 13.0212 7.30469 12.637V3.36167C7.30469 2.97747 7.61614 2.66602 8.00034 2.66602Z\"\r\n        fill=\"#73D13D\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M2.66602 8.00034C2.66602 7.61614 2.97747 7.30469 3.36167 7.30469H12.637C13.0212 7.30469 13.3327 7.61614 13.3327 8.00034C13.3327 8.38454 13.0212 8.69599 12.637 8.69599H3.36167C2.97747 8.69599 2.66602 8.38454 2.66602 8.00034Z\"\r\n        fill=\"#73D13D\" />\r\n    </svg>\r\n  )\r\n};","import React, { useEffect, useState, FC, useContext } from 'react';\r\nimport { IconButton, InputBase, Typography } from \"@mui/material\";\r\nimport { BlockBox } from \"../../../../components/common\";\r\nimport Field from \"../../../../components/common/FIeld\";\r\nimport TextSelect from \"../../../../components/common/Selects/TextSelect/TextSelect\";\r\nimport { useTagDetailsStyles } from './TagDetails.jss';\r\nimport { useAppSelector } from \"../../../../hooks/redux\";\r\nimport {\r\n  getAllGlobalTagFilters,\r\n  getTagGroups,\r\n  getTags,\r\n  getTag,\r\n  tagsActions,\r\n  tagsSlice,\r\n  updateTag, deleteTag\r\n} from \"../../../../store/tags/tags.slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Alert from \"../../../../components/common/Alert/Alert\";\r\nimport CustomSelect from \"../../../../components/common/Selects/CustomSelect/CustomSelect\";\r\nimport ContainedSelect from \"../../../../components/common/Selects/ContainedSelect\";\r\nimport CustomCheckbox from \"../../../../components/common/Checkbox\";\r\nimport { useFormik } from \"formik\";\r\nimport Checkbox from \"../../../../components/common/Checkbox\";\r\nimport { PlusSvg, TrashSvg } from \"./TagDetails.svg\";\r\nimport Preloader from '../../../../assets/loading.svg';\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { translate } from \"../../../../localizations\";\r\nimport { RootState } from \"../../../../store/store\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport noResultsPng from \"../../../../assets/images/no-results.png\";\r\nimport CustomControlSelect from \"../../../../components/common/Selects/CustomControlSelect\";\r\nimport { GroupType } from \"../../../../store/dicts/dicts.types\";\r\nimport Switch from \"../../../../components/common/Switch\";\r\nimport ModalWindow from \"../../../../components/common/ModalWindowBox\";\r\nimport { TagGroupType, TagType } from \"../../../../store/tags/tags.types\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {langSlice} from \"../../../../store/lang/lang.slice\";\r\n\r\nexport const AddButton: FC<{ onClick?: () => void }> = ({ onClick, children }) => {\r\n  const classes = useTagDetailsStyles();\r\n  return (\r\n    <div onClick={onClick} style={{ display: 'flex', alignItems: 'center', marginTop: '20px', cursor: 'pointer' }}>\r\n      <PlusSvg style={{ marginRight: '10px' }} />\r\n      <Typography className={classes.typographyTitleMiniThree}>{children}</Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TagDetails: FC = () => {\r\n  const classes = useTagDetailsStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentTag = useAppSelector(state => state.tags.currentTag);\r\n  const allGlobalFilterCriterias = useAppSelector(state => state.tags.allGlobalFilterCriterias);\r\n  const activeGlobalFilterCriterias = useAppSelector(state => state.tags.activeGlobalFilterCriterias);\r\n  const defaultGlobalFilterCriterias = useAppSelector(state => state.tags.defaultGlobalFilterCriterias);\r\n  const activeFragments = useAppSelector(state => state.tags.activeFragments);\r\n  const activeSetTags = useAppSelector(state => state.tags.activeSetTags);\r\n  const currentGroup = useAppSelector(state => state.tags.currentTagGroup);\r\n\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    dispatch(getAllGlobalTagFilters());\r\n  }, []);\r\n\r\n\r\n  // text select\r\n  const handleGlobalFilterSelectClick = () => {\r\n    let state = allGlobalFilterCriterias;\r\n    let localCriterias = []\r\n    if (state && currentTag) {\r\n      const defAcCriterias = [...activeGlobalFilterCriterias, ...currentTag.globalFilter]\r\n      for (let i = 0; i < state.length; i++) {\r\n        if (!defAcCriterias.find((item) => {\r\n          if (state) {\r\n            return item.key === state[i].key\r\n          }\r\n        })) {\r\n          localCriterias.push({ value: state[i], label: state[i].title })\r\n        }\r\n      }\r\n      return localCriterias;\r\n    }\r\n    return [];\r\n  }\r\n  const globalFilterOptions = handleGlobalFilterSelectClick();\r\n\r\n\r\n  // global filter select\r\n  // изменение значения селекта.\r\n  const globalFilterValueHandler = (event: any, isDefault: boolean, criteriaFull: any) => {\r\n    const eventConverter = () => {\r\n      let result = [];\r\n      for (let i = 0; i < event.length; i++) {\r\n        result.push(event[i].value);\r\n      }\r\n      return result;\r\n    };\r\n    const eventConverterResult = eventConverter();\r\n    dispatch(tagsSlice.actions.setActiveGlobalFilterCriteriaValues({\r\n      ...criteriaFull,\r\n      values: [...eventConverterResult]\r\n    }));\r\n  };\r\n  // удаление поле.\r\n  const removeGlobalFilterField = (event: any, criteriaFull: any) => {\r\n    dispatch(tagsSlice.actions.removeActiveGlobalFilterCriteria(criteriaFull));\r\n  };\r\n\r\n\r\n  const selectConverter = (values: any, defaultValues: any = []) => {\r\n    if (values) {\r\n      let local: { value: any, label: string }[] = [];\r\n      for (let i = 0; i < values.length; i++) {\r\n        // @ts-ignore\r\n        if (!defaultValues.find(item => item === values[i])) {\r\n          local.push({ value: values[i], label: values[i] });\r\n        }\r\n      }\r\n      return local;\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const createSelectOptions = () => {\r\n    let result = [];\r\n    if (currentTag) {\r\n      for (let i = 0; i < currentTag.allowedActions.length; i++) {\r\n        // закинуть translate\r\n        const action = currentTag.allowedActions[i];\r\n        if (action === 'clone') {\r\n          result.push({ value: action, label: translate(\"cloneButton_dictDetailSelect\", language) });\r\n        } else if (action === 'delete') {\r\n          result.push({ value: action, label: translate(\"deleteButton_dictDetailSelect\", language) });\r\n        } else if (action === 'make_global') {\r\n          result.push({ value: action, label: translate(\"makeGlobal_dictDetailSelect\", language) });\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  const addRuleSelectConverter = (values: any) => {\r\n    if (values) {\r\n      let local: { value: any, label: string }[] = [];\r\n      for (let i = 0; i < values.length; i++) {\r\n        if (values[i].key === 'dicts' || values[i].key === 'phrases') {\r\n          continue\r\n        }\r\n        if (!values[i].visible) {\r\n          local.push({ value: values[i], label: values[i].title });\r\n        }\r\n      }\r\n      return local;\r\n    }\r\n    return [];\r\n  };\r\n\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      // название, группа, приоритет.\r\n      name: '',\r\n      group: '',\r\n      priority: '' as string | number\r\n    },\r\n    onSubmit: async (values) => {\r\n    }\r\n  });\r\n\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n\r\n\r\n  const [render, setRender] = useState(false);\r\n  useEffect(() => {\r\n    if (currentTag && currentGroup) {\r\n      formik.values.name = currentTag.title;\r\n      formik.values.group = currentTag.group ? currentTag.group : currentGroup.group\r\n      formik.values.priority = currentTag.calculatedRulePriority;\r\n    }\r\n    setRender(!render);\r\n  }, [currentTag]);\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n\r\n  // ${language}/${userId}/\r\n\r\n  async function onClickSaveButton() {\r\n    setLoading(true);\r\n\r\n    // global filters convert\r\n    const globalFiltersForRequest = [];\r\n    for (let i = 0; i < activeGlobalFilterCriterias.length; i++) {\r\n      globalFiltersForRequest.push({\r\n        key: activeGlobalFilterCriterias[i].key,\r\n        values: activeGlobalFilterCriterias[i].values\r\n      })\r\n    }\r\n\r\n    // бяка а не код\r\n    // fragments convert\r\n    let fragmentsForRequest: any = [];\r\n    for (let i = 0; i < activeFragments.length; i++) {\r\n      fragmentsForRequest.push({});\r\n      const fragment = activeFragments[i];\r\n      for (let ii = 0; ii < fragment.length; ii++) {\r\n        if (fragment[ii].key === 'phrasesAndDicts') {\r\n          fragmentsForRequest[i][fragment[ii].key] = [];\r\n          if (fragment[ii].value) {\r\n            for (let iii = 0; iii < fragment[ii].value.length; iii++) {\r\n              let array: any = cloneDeep(fragmentsForRequest[i][fragment[ii].key]);\r\n              array.push(fragment[ii].value[iii].value);\r\n              fragmentsForRequest[i][fragment[ii].key] = array;\r\n            }\r\n          } else {\r\n            debugger\r\n          }\r\n        } else {\r\n          fragmentsForRequest[i][fragment[ii].key] = fragment[ii].value.value;\r\n        }\r\n      }\r\n    }\r\n    // set tags\r\n    // пока не нужна конвертация. пока.\r\n    await dispatch(updateTag({\r\n      ...currentTag,\r\n      title: formik.values.name,\r\n      group: formik.values.group,\r\n      rulePriority: formik.values.priority,\r\n      globalFilter: globalFiltersForRequest,\r\n      fragmentRules: fragmentsForRequest,\r\n      setTags: activeSetTags\r\n    }));\r\n\r\n    setLoading(false);\r\n    dispatch(langSlice.actions.setSnackbar({\r\n      type: 'success',\r\n      value: true,\r\n      time: 2000,\r\n      text: 'Тег обнавлен'\r\n    }))\r\n  }\r\n\r\n  const [deleteMWIsOpen, setDeleteMWIsOpen] = useState(false);\r\n  const [buttonLoading, setButtonLoading] = useState(false);\r\n\r\n  function handleDeleteMWOpen() {\r\n    setDeleteMWIsOpen(true);\r\n  }\r\n\r\n  function handleDeleteMWClose() {\r\n    setDeleteMWIsOpen(false);\r\n  }\r\n\r\n\r\n  if (!currentTag) {\r\n    return (\r\n      <BlockBox padding={'0'} height={'100%'}>\r\n        <div style={{ position: 'relative', height: '100%' }}>\r\n          {currentTag === null && (\r\n            <div style={{ position: 'absolute', top: '30%', left: '32%' }}>\r\n              <img src={Preloader} alt=\"\" />\r\n            </div>\r\n          )}\r\n          {currentTag === false && (\r\n            <div style={{ textAlign: 'center', paddingTop: '150px' }}>\r\n              <img src={noResultsPng} alt=\"\" />\r\n            </div>\r\n          )}\r\n          {currentTag === undefined && (\r\n            <div></div>\r\n          )}\r\n        </div>\r\n      </BlockBox>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <BlockBox padding={'0'} height={'auto'}>\r\n      <div className={classes.tdWrapper}>\r\n\r\n        {/* Шапка */}\r\n        <div>\r\n          <div className={classes.tdNameAdnPriority}>\r\n            {/* Название тега */}\r\n            <Field\r\n              margin={'0 5% 15px 0'}\r\n              label={\"Название тега\"}\r\n              width={\"100%\"}\r\n            >\r\n              <InputBase\r\n                value={formik.values.name}\r\n                onChange={formik.handleChange}\r\n                name={\"name\"}\r\n\r\n                className={classes.tdTagNameInput}\r\n                type=\"text\"\r\n              />\r\n            </Field>\r\n            {/* Приоритет */}\r\n            <Field\r\n              label={\"Приоритет\"}\r\n              width={'11%'}\r\n              padding={\"3px 0 3px 0\"}\r\n            >\r\n              <InputBase\r\n                value={formik.values.priority}\r\n                onChange={formik.handleChange}\r\n                name={\"priority\"}\r\n\r\n                className={classes.tdPriorityInput}\r\n                type=\"number\"\r\n              />\r\n            </Field>\r\n          </div>\r\n          {/* Название группы */}\r\n          <Field\r\n            label={\"Название группы тега\"}\r\n            margin={'0 0 15px 0'}\r\n            width={\"84%\"}\r\n          >\r\n            <InputBase\r\n              value={formik.values.group}\r\n              onChange={formik.handleChange}\r\n              name={\"group\"}\r\n\r\n              className={classes.tdTagNameInput}\r\n              type=\"text\"\r\n            />\r\n          </Field>\r\n        </div>\r\n\r\n        {/* Глобальные фильтры */}\r\n        <div style={{ width: '100%', margin: '30px 0' }}>\r\n          <Typography className={classes.typographyTitle}>Глобальные настройки тега</Typography>\r\n          <div>\r\n            <div>\r\n              <div>\r\n                {defaultGlobalFilterCriterias.length > 0 &&\r\n                  defaultGlobalFilterCriterias.map((currentCriteria) => {\r\n                    const isDefault = true;\r\n                    const criteriaFull = allGlobalFilterCriterias.find((fullCriteria) => {\r\n                      return currentCriteria.key === fullCriteria.key;\r\n                    });\r\n                    if (criteriaFull) {\r\n                      return (\r\n                        <div>\r\n                          <Typography className={classes.typographyTitleMini}>{criteriaFull.title}</Typography>\r\n                          <div style={{ display: 'flex' }}>\r\n                            <CustomSelect\r\n                              value={selectConverter(currentCriteria.values)}\r\n                              options={selectConverter(criteriaFull.values, currentCriteria.values)}\r\n                              selectType={criteriaFull.selectType}\r\n\r\n                              valueHandler={(event) => globalFilterValueHandler(event, isDefault, criteriaFull)}\r\n\r\n                              isDefaultField={isDefault}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    }\r\n                  })}\r\n              </div>\r\n              <div>\r\n                {activeGlobalFilterCriterias.map((currentCriteria) => {\r\n                  const isDefault = false;\r\n                  const criteriaFull = allGlobalFilterCriterias.find((fullCriteria) => {\r\n                    return currentCriteria.key === fullCriteria.key;\r\n                  });\r\n                  if (criteriaFull) {\r\n                    return (\r\n                      <div>\r\n                        <Typography className={classes.typographyTitleMini}>{currentCriteria.title}</Typography>\r\n\r\n                        <CustomSelect\r\n                          value={selectConverter(currentCriteria.values)}\r\n                          options={selectConverter(criteriaFull.values, currentCriteria.values)}\r\n                          selectType={criteriaFull.selectType}\r\n\r\n                          valueHandler={(event) => globalFilterValueHandler(event, isDefault, criteriaFull)}\r\n                          removeSelectHandler={(event: any) => removeGlobalFilterField(event, criteriaFull)}\r\n\r\n                          deleteIcon={<TrashSvg style={{ cursor: 'pointer', marginLeft: '8px' }} />}\r\n\r\n                          isDefaultField={isDefault}\r\n\r\n                          width={'60%'}\r\n                        />\r\n\r\n                      </div>\r\n                    )\r\n                  }\r\n                })}\r\n                {activeGlobalFilterCriterias.length < 1 && defaultGlobalFilterCriterias.length < 1 &&\r\n                  <Alert\r\n                    width={'84%'}\r\n                    text={'У этого тега нет глобальных фильтров'}\r\n                  />\r\n                }\r\n                <div style={{ marginTop: '19px' }}>\r\n                  <TextSelect\r\n                    value={null}\r\n                    handleValueChange={(event: any) => {\r\n                      dispatch(tagsSlice.actions.setActiveGlobalFilterCriteria({ ...event.value, values: [] }));\r\n                    }}\r\n                    options={globalFilterOptions}\r\n                    iconPosition={'left'}\r\n                    height={'300px'}\r\n                    icon={<PlusSvg style={{ marginRight: '10px' }} />}\r\n                    customControl={\r\n                      <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                        <Typography className={classes.typographyTitleMiniTwo}>Добавить фильтр</Typography>\r\n                      </div>\r\n                    }\r\n                    menuPosition={'left'}\r\n                    name={'tagsGlobalSelect'}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Фрагменты */}\r\n        <div>\r\n          <Typography className={classes.typographyTitle}>Правило на фрагменты</Typography>\r\n          <div>\r\n            <div>\r\n              <div>\r\n                {activeFragments.length > 0 ?\r\n                  <>\r\n                    {activeFragments.map((displayFragment) => {\r\n                      const arrayIndex = activeFragments.indexOf(displayFragment);\r\n                      return (\r\n                        <div\r\n                          style={{ width: '100%', display: 'flex', borderBottom: '1px solid #E3E8EF', margin: '10px 0' }}>\r\n                          <div style={{ width: '84%' }}>\r\n                            {displayFragment.map((fragmentField) => {\r\n                              const fragmentFieldIndex = displayFragment.indexOf(fragmentField);\r\n                              if (fragmentField.visible) {\r\n                                return (\r\n                                  <div style={{ width: '100%', marginBottom: '15px' }}>\r\n                                    {\r\n                                      (fragmentField.selectType === 'multiValue' &&\r\n                                        <div style={{ width: '100%' }}>\r\n                                          <Typography\r\n                                            className={classes.typographyTitleMiniTwo}>{fragmentField.title}</Typography>\r\n                                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                            <ContainedSelect\r\n                                              width={'100%'}\r\n                                              height={'35px'}\r\n                                              onSelectChange={(event: any) => {\r\n                                                dispatch(tagsSlice.actions.setFragmentFieldValue({\r\n                                                  arrayIndex: arrayIndex,\r\n                                                  fieldIndex: fragmentFieldIndex,\r\n                                                  value: event\r\n                                                }));\r\n                                              }}\r\n                                              // @ts-ignore\r\n                                              options={fragmentField.options}\r\n                                              value={fragmentField.value}\r\n                                            />\r\n                                          </div>\r\n\r\n                                        </div>\r\n                                      ) ||\r\n                                      (fragmentField.selectType === 'multiString' &&\r\n                                        <div style={{ width: '100%' }}>\r\n                                          <Typography\r\n                                            className={classes.typographyTitleMiniTwo}>{fragmentField.title}</Typography>\r\n                                          <CustomSelect\r\n                                            value={fragmentField.value}\r\n                                            width={\"100%\"} height={\"35px\"}\r\n                                            // @ts-ignore\r\n                                            options={fragmentField.options}\r\n                                            selectType={fragmentField.selectType}\r\n                                            isDefaultField={false}\r\n                                            valueHandler={(event: any) => {\r\n                                              dispatch(tagsSlice.actions.setFragmentFieldValue({\r\n                                                arrayIndex: arrayIndex,\r\n                                                fieldIndex: fragmentFieldIndex,\r\n                                                value: event\r\n                                              }));\r\n                                            }}\r\n                                            removeSelectHandler={(event: any) => {\r\n                                              dispatch(tagsSlice.actions.setFragmentField({\r\n                                                index: arrayIndex,\r\n                                                value: fragmentField,\r\n                                                visible: false\r\n                                              }))\r\n                                            }}\r\n                                            deleteIcon={<></>}\r\n                                          />\r\n                                        </div>\r\n                                      ) ||\r\n                                      (fragmentField.selectType === 'checkbox' &&\r\n                                        <div style={{\r\n                                          width: '100%',\r\n                                          marginTop: '10px'\r\n                                        }}>\r\n                                          <div style={{ display: 'flex' }}>\r\n                                            <CustomCheckbox\r\n                                              style={{ marginRight: '10px' }}\r\n                                              onClick={(event) => {\r\n                                                dispatch(tagsSlice.actions.setFragmentFieldValue({\r\n                                                  arrayIndex: arrayIndex,\r\n                                                  fieldIndex: fragmentFieldIndex,\r\n                                                  // @ts-ignore\r\n                                                  value: { value: event.target.checked, label: 'check' }\r\n                                                }));\r\n                                              }}\r\n                                              checked={fragmentField.value.value}\r\n                                            />\r\n                                            <Typography\r\n                                              className={classes.typographyTitleMiniThree}\r\n                                            >\r\n                                              {fragmentField.title}\r\n                                            </Typography>\r\n                                          </div>\r\n                                        </div>\r\n                                      ) ||\r\n                                      (fragmentField.selectType === 'input' &&\r\n                                        <div style={{ display: 'flex', alignItems: 'center', width: '100%' }}>\r\n                                          <Field\r\n                                            label={fragmentField.title}\r\n                                            width={\"100%\"}\r\n                                          >\r\n                                            <InputBase\r\n                                              onChange={(event: any) => {\r\n                                                dispatch(tagsSlice.actions.setFragmentFieldValue({\r\n                                                  arrayIndex: arrayIndex,\r\n                                                  fieldIndex: fragmentFieldIndex,\r\n                                                  value: { value: event.target.value, label: event.target.value }\r\n                                                }));\r\n                                              }}\r\n                                              className={classes.tdTagNameInput}\r\n                                              type=\"text\"\r\n                                              value={fragmentField.value.value}\r\n                                            />\r\n                                          </Field>\r\n                                        </div>\r\n                                      )\r\n                                    }\r\n                                  </div>\r\n                                )\r\n                              }\r\n                            })}\r\n                            <TextSelect\r\n                              value={null}\r\n                              handleValueChange={(event: any) => {\r\n                                dispatch(tagsSlice.actions.setFragmentField({\r\n                                  index: activeFragments.indexOf(displayFragment),\r\n                                  value: event.value,\r\n                                  visible: true\r\n                                }));\r\n                              }}\r\n                              options={addRuleSelectConverter(displayFragment)}\r\n                              iconPosition={'left'}\r\n                              height={'300px'}\r\n                              icon={<PlusSvg\r\n                                style={{ marginRight: '10px', width: '12px', height: '12px', marginTop: '-3px' }} />}\r\n                              customControl={\r\n                                <div style={{ display: 'flex', alignItems: 'center', margin: '5px 0 10px 0' }}>\r\n                                  <Typography className={classes.typographyTitleMini}>\r\n                                    Дополнительное условие\r\n                                  </Typography>\r\n                                </div>\r\n                              }\r\n                              menuPosition={'left'}\r\n                              name={'tagsGlobalSelect'}\r\n                            />\r\n                          </div>\r\n                          <IconButton style={{ cursor: 'pointer', height: '100%', marginLeft: '7%' }}>\r\n                            <TrashSvg\r\n                              style={{ width: '25px', height: '25px' }}\r\n                              onClick={() => {\r\n                                dispatch(tagsSlice.actions.removeFragment(arrayIndex));\r\n                              }}\r\n                            />\r\n                          </IconButton>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </>\r\n                  :\r\n                  <Alert\r\n                    width={'84%'}\r\n                    text={'У этого тега нет фрагментов'}\r\n                  />\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <AddButton\r\n              onClick={() => {\r\n                if (currentTag) {\r\n                  dispatch(tagsSlice.actions.setFragment(null))\r\n                }\r\n              }}\r\n            >\r\n              Добавить фрагмент\r\n            </AddButton>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Внутренние теги*/}\r\n        <div style={{ margin: '30px 0' }}>\r\n          <Typography className={classes.typographyTitle}>Теги</Typography>\r\n          <div>\r\n            <div>\r\n              {activeSetTags.length > 0 ? activeSetTags.map(tag => {\r\n                const setTagIndex = activeSetTags.indexOf(tag);\r\n                return (\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    padding: '10px 0 20px 0',\r\n                    borderBottom: '1px solid #E3E8EF'\r\n                  }}>\r\n                    <div style={{ width: '84%' }}>\r\n                      <div style={{ display: 'flex' }}>\r\n                        <Field\r\n                          label={'Название тега'}\r\n                          width={\"47.5%\"}\r\n                          margin={\"0 5% 0 0\"}\r\n                        >\r\n                          <InputBase\r\n                            onChange={(event: any) => {\r\n                              dispatch(tagsSlice.actions.setSetTagFieldValue({\r\n                                tagIndex: setTagIndex,\r\n                                fieldKey: event.target.name,\r\n                                value: event.target.value\r\n                              }));\r\n                            }}\r\n                            name={'name'}\r\n                            value={tag.name}\r\n                            className={classes.tdTagNameInput}\r\n                            type=\"text\"\r\n                          />\r\n                        </Field>\r\n                        <Field\r\n                          label={'Значение тега'}\r\n                          width={\"47.5%\"}\r\n                        >\r\n                          <InputBase\r\n                            onChange={(event: any) => {\r\n                              dispatch(tagsSlice.actions.setSetTagFieldValue({\r\n                                tagIndex: setTagIndex,\r\n                                fieldKey: event.target.name,\r\n                                value: event.target.value\r\n                              }));\r\n                            }}\r\n                            name={'value'}\r\n\r\n                            value={tag.value}\r\n                            className={classes.tdTagNameInput}\r\n                            type=\"text\"\r\n                          />\r\n                        </Field>\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', marginTop: '15px' }}>\r\n                        <Checkbox\r\n                          onClick={(event: any) => {\r\n                            dispatch(tagsSlice.actions.setSetTagFieldValue({\r\n                              tagIndex: setTagIndex,\r\n                              fieldKey: event.target.name,\r\n                              value: event.target.checked\r\n                            }));\r\n                          }}\r\n                          checked={tag.visible}\r\n                          name={'visible'}\r\n                          style={{ marginRight: '10px' }}\r\n                        />\r\n                        <Typography className={classes.typographyTitleMini}>Скрыть</Typography>\r\n                      </div>\r\n                    </div>\r\n                    <IconButton style={{ cursor: 'pointer', height: '100%', marginLeft: '7%' }}>\r\n                      <TrashSvg\r\n                        style={{ width: '25px', height: '25px' }}\r\n                        onClick={() => {\r\n                          dispatch(tagsSlice.actions.removeSetTag(setTagIndex));\r\n                        }}\r\n                      />\r\n                    </IconButton>\r\n                  </div>\r\n                )\r\n              }) :\r\n                <Alert\r\n                  width={'84%'}\r\n                  text={'У этого тега нет привязанных тегов'}\r\n                />\r\n              }\r\n            </div>\r\n            <AddButton\r\n              onClick={() => {\r\n                if (currentTag) {\r\n                  dispatch(tagsSlice.actions.setSetTag(null))\r\n                }\r\n              }}\r\n            >\r\n              Добавить тег\r\n            </AddButton>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        {/* Активности */}\r\n        <div>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n\r\n            {/* Активация и деактивация тега */}\r\n            {currentTag && currentTag.allowedActions.includes(\"enable\") && currentTag.allowedActions.includes(\"disable\") && (\r\n              <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                <Switch\r\n                  onChecked={async (e) => {\r\n                    if (currentGroup) {\r\n                      dispatch(langSlice.actions.setSnackbar({type: 'loading', value: true, text: 'Загрузка...', time: null }))\r\n\r\n                      await dispatch(tagsActions({\r\n                        tagId: currentTag.id,\r\n                        action: currentTag.enabled ? 'disable' : 'enable'\r\n                      }));\r\n                      const groupsData = await dispatch(getTagGroups());\r\n                      // @ts-ignore\r\n                      const groups: TagGroupType[] = groupsData.payload;\r\n                      if (currentGroup.count < 1) {\r\n                        dispatch(tagsSlice.actions.setCurrentTagGroup(groups[0]));\r\n                        const dictsData = await dispatch(getTags({ group: groups[0].group }));\r\n                        // @ts-ignore\r\n                        const tags: DictType[] = dictsData.payload;\r\n                        await dispatch(getTag(tags[0].id));\r\n                      } else {\r\n                        const dictsData = await dispatch(getTags({ group: currentGroup.group }));\r\n                        // @ts-ignore\r\n                        const tags: DictType[] = dictsData.payload;\r\n                        await dispatch(getTag(currentTag.id))\r\n                        dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${currentTag.id}`))\r\n                        history.location.pathname = '/';\r\n                        history.replace(`${language}/${userId}/markuprules/tags?group=${currentGroup.group}&id=${currentTag.id}`)\r\n                      }\r\n\r\n                      dispatch(langSlice.actions.setSnackbar({\r\n                        type: 'success',\r\n                        value: true,\r\n                        text: `Словарь ${currentTag.enabled ? 'выключен' : 'включён'}`,\r\n                        time: 1000\r\n                      }))\r\n                    }\r\n                  }}\r\n                  checked={currentTag.enabled}\r\n                  disabled={false}\r\n                />\r\n                <Typography style={{ fontWeight: '700', marginLeft: '10px' }}>\r\n                  {currentTag.enabled ? 'Вкл' : 'Выкл'}\r\n                </Typography>\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <LoadingButton\r\n                type={\"submit\"}\r\n                style={{ marginRight: '24px' }}\r\n                variant={\"contained\"}\r\n                loading={loading}\r\n                onClick={onClickSaveButton}\r\n              >\r\n                {translate(\"saveButton_dictDetail\", language)}\r\n              </LoadingButton>\r\n              <div style={{ width: '40px', height: '40px' }}>\r\n                <CustomControlSelect\r\n                  disabled={false}\r\n                  optionsPosition={\"top\"}\r\n                  options={createSelectOptions()}\r\n                  svg={'horizontal'}\r\n                  handleSelectChange={async (e) => {\r\n                    if (e.value === 'delete') {\r\n                      handleDeleteMWOpen();\r\n                    } else if (e.value === 'clone' && currentGroup) {\r\n                      dispatch(langSlice.actions.setSnackbar({\r\n                        type: 'loading', value: true, text: 'Загрузка...', time: null\r\n                      }))\r\n                      await dispatch(tagsActions({\r\n                        tagId: currentTag.id,\r\n                        action: 'clone'\r\n                      }));\r\n\r\n                      const groupsData = await dispatch(getTagGroups());\r\n                      // @ts-ignore\r\n                      const groups: GroupType[] = groupsData.payload;\r\n                      dispatch(tagsSlice.actions.setCurrentTagGroup(groups[0]))\r\n                      if (currentGroup.count < 2) {\r\n                        const tagsData = await dispatch(getTags({ group: groups[0].group }))\r\n                        // @ts-ignore\r\n                        const tags: TagType[] = tagsData.payload;\r\n                        await dispatch(getTag(tags[0].id))\r\n\r\n                        dispatch(tagsSlice.actions.setSearchParams(`?group=${groups[0].group}&id=${tags[0].id}`));\r\n\r\n                        history.location.pathname = `/`;\r\n                        history.replace(`${language}/${userId}/markuprules/tags?group=${groups[0].group}&id=${tags[0].id}`);\r\n                      } else {\r\n                        const tagsData = await dispatch(getTags({ group: currentGroup.group }))\r\n                        // @ts-ignore\r\n                        const tags: TagType[] = tagsData.payload;\r\n                        await dispatch(getTag(tags[0].id))\r\n\r\n                        dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${tags[0].id}`));\r\n\r\n                        history.location.pathname = `/`;\r\n                        history.replace(`${language}/${userId}/markuprules/tags?group=${currentGroup.group}&id=${tags[0].id}`);\r\n                      }\r\n\r\n                      dispatch(langSlice.actions.setSnackbar({\r\n                        type: 'loading', value: false, text: 'Загрузка...', time: null\r\n                      }))\r\n                      dispatch(langSlice.actions.setSnackbar({\r\n                        type: 'success', value: true, text: 'Тег склонирован', time: 2000\r\n                      }))\r\n                    }\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <ModalWindow\r\n          isMWOpen={deleteMWIsOpen}\r\n          handleMWClose={handleDeleteMWClose}\r\n          text={\"Вы правда хотите удалить этот тег?\"}\r\n        >\r\n          <div>\r\n            <LoadingButton\r\n              style={{ marginRight: '15px' }}\r\n              loading={buttonLoading}\r\n              variant=\"contained\"\r\n              color=\"error\"\r\n              onClick={async () => {\r\n                if (currentGroup) {\r\n                  setButtonLoading(true);\r\n                  await dispatch(deleteTag(currentTag.id));\r\n\r\n                  const groupsData = await dispatch(getTagGroups());\r\n\r\n                  if (currentGroup.count < 2) {\r\n                    // @ts-ignore\r\n                    const groups: GroupType[] = groupsData.payload;\r\n                    dispatch(tagsSlice.actions.setCurrentTagGroup(groups[0]));\r\n                    const tagsData = await dispatch(getTags({ group: groups[0].group }));\r\n                    // @ts-ignore\r\n                    const tags: TagType[] = tagsData.payload;\r\n                    await dispatch(getTag(tags[0].id));\r\n\r\n                    dispatch(tagsSlice.actions.setSearchParams(`?group=${groups[0].group}&id=${tags[0].id}`))\r\n                    history.location.pathname = '/';\r\n                    history.replace(`${language}/${userId}/markuprules/tags?group=${groups[0].group}&id=${tags[0].id}`)\r\n                  } else {\r\n                    const tagsDicts = await dispatch(getTags({ group: currentGroup.group }));\r\n                    // @ts-ignore\r\n                    const tags: TagType[] = tagsDicts.payload;\r\n                    await dispatch(getTag(tags[0].id));\r\n\r\n                    dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${tags[0].id}`))\r\n                    history.location.pathname = '/';\r\n                    history.replace(`${language}/${userId}/markuprules/tags?group=${currentGroup.group}&id=${tags[0].id}`);\r\n                  }\r\n                  handleDeleteMWClose();\r\n                  // setDeleteDictMWIsOpen(false);\r\n\r\n                  dispatch(langSlice.actions.setSnackbar({\r\n                    type: \"success\", text: 'Словарь удален', value: true, time: 2000\r\n                  }))\r\n                }\r\n                setButtonLoading(false);\r\n              }}\r\n            >\r\n              {translate(\"deleteButton\", language)}\r\n            </LoadingButton>\r\n            <LoadingButton\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n            >\r\n              {translate(\"cancelButton\", language)}\r\n            </LoadingButton>\r\n          </div>\r\n        </ModalWindow>\r\n\r\n      </div>\r\n    </BlockBox>\r\n  )\r\n};\r\n\r\nexport default TagDetails;\r\n","import { makeStyles } from \"@mui/styles\";\r\n\r\nexport const useTagsStyles = makeStyles(({\r\n  // dp - dicts page\r\n  tagsContainer: {\r\n    width: '100%',\r\n    height: '810px',\r\n    margin: '40px 10px',\r\n    display: 'flex'\r\n  },\r\n\r\n  // left block\r\n  dpLeftBlock: {\r\n    width: '58%',\r\n    marginRight: '2%',\r\n    display: 'flex',\r\n  },\r\n  dpLeftBlockGroups: {\r\n    width: '50%',\r\n    backgroundColor: '#fff',\r\n    borderTopLeftRadius: \"10px\",\r\n    borderBottomLeftRadius: \"10px\"\r\n  },\r\n\r\n  dpLeftBlockDicts: {\r\n    paddingTop: '26px',\r\n    overflow: 'hidden',\r\n    width: '50%',\r\n    backgroundColor: '#F8FAFC',\r\n    borderTopRightRadius: \"10px\",\r\n    borderBottomRightRadius: \"10px\",\r\n  },\r\n\r\n  dpBothBox: {\r\n    marginTop: '24px',\r\n    height: '700px',\r\n    overflow: 'hidden',\r\n    overflowY: 'auto',\r\n    borderRadius: '5px',\r\n\r\n    '&::-webkit-scrollbar': {\r\n      paddingTop: '4px',\r\n      width: '4px',\r\n      outline: 'none',\r\n      background: '#CDD5DF'\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      background: '#A3AEBE',\r\n      height: '50px',\r\n    },\r\n    '&::-webkit-scrollbar-thumb:hover': {\r\n      background: '#9298A1'\r\n    }\r\n  },\r\n\r\n  // right block\r\n  dpRightBlock: {\r\n    width: '40%',\r\n  },\r\n}));\r\n","import { makeStyles } from \"@mui/styles\";\r\nimport { Theme } from \"@mui/material\";\r\n\r\ntype TagGroupStylesType = {\r\n  isActive: boolean\r\n}\r\n\r\nexport const useTagGroupStyles = makeStyles<Theme, TagGroupStylesType>((theme: Theme) => ({\r\n  groupItem: {\r\n    minHeight: '56px',\r\n    cursor: \"pointer\",\r\n    padding: '24px',\r\n    margin: '0 24px 24px 24px',\r\n    border: '2px solid #fff',\r\n    borderColor: props => props.isActive ? '#AD80E6' : '#ffffff',\r\n    boxShadow: '0px 0px 4px rgba(98, 98, 98, 0.22)',\r\n    borderRadius: '10px',\r\n    transition: '0.1s',\r\n    '&:hover': {\r\n      boxShadow: '0px 0px 4px rgba(98, 98, 98, 0.4)',\r\n    }\r\n  },\r\n  groupTopBlock: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '10px'\r\n  },\r\n  groupTopBlockText: {\r\n    fontWeight: '700 !important',\r\n    color: '#738094 !important'\r\n  },\r\n\r\n  groupBottomBlock: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center'\r\n  },\r\n  groupBottomBlockText: {\r\n    color: '#000 !important'\r\n  },\r\n  groupBottomBlockRight: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center'\r\n  },\r\n  groupBottomBlockSvg: {\r\n    marginRight: '10px'\r\n  }\r\n}));","import React from \"react\";\r\n\r\nexport const PurpleCircleSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <circle cx=\"8\" cy=\"8\" r=\"7.5\" fill=\"white\" stroke=\"#9254DE\" />\r\n      <circle cx=\"8\" cy=\"8\" r=\"4\" fill=\"#9254DE\" />\r\n    </svg>\r\n  );\r\n};\r\n","import React, { FC, memo } from \"react\";\r\nimport { Skeleton, Typography } from \"@mui/material\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useTagGroupStyles } from \"./TagGroup.jss\";\r\nimport { TagDetailedType, TagGroupType, TagType } from \"../../../../../store/tags/tags.types\";\r\nimport { PurpleCircleSvg } from \"./TagGroup.svg\";\r\nimport { createNullArray, getTag, getTags, tagsSlice } from \"../../../../../store/tags/tags.slice\";\r\nimport { useAppSelector } from \"../../../../../hooks/redux\";\r\nimport { RootState } from \"../../../../../store/store\";\r\n\r\ntype TagGroupPropsType = {\r\n  group: TagGroupType | null,\r\n  isActive: boolean\r\n};\r\n\r\nconst TagGroup: FC<TagGroupPropsType> = memo(({ group, isActive }) => {\r\n  const classes = useTagGroupStyles({ isActive });\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n  // ${language}/${userId}/\r\n\r\n  const onTagGroupClick = async () => {\r\n    if (group) {\r\n      dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n      dispatch(tagsSlice.actions.setTags(createNullArray(20)));\r\n      dispatch(tagsSlice.actions.setCurrentTag(null));\r\n      dispatch(tagsSlice.actions.setActiveGlobalFilterCriterias([]));\r\n      dispatch(tagsSlice.actions.removeFragments(null));\r\n      await dispatch(tagsSlice.actions.removeSetTags(null));\r\n      dispatch(tagsSlice.actions.setCurrentTagGroup(group));\r\n\r\n      const tagsData = await dispatch(getTags({ group: group.group }));\r\n      // @ts-ignore\r\n      const tags: TagType[] = tagsData.payload;\r\n      if (tags.length > 0) {\r\n        const dataTag = await dispatch(getTag(tags[0].id));\r\n        // @ts-ignore\r\n        const tag: TagDetailedType = dataTag.payload;\r\n        dispatch(tagsSlice.actions.setSearchParams(`?group=${group.group}&id=${tag.id}`));\r\n        history.location.pathname = `/`;\r\n        history.replace(`${language}/${userId}/markuprules/tags?group=${group.group}&id=${tag.id}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.groupItem} onClick={onTagGroupClick}>\r\n\r\n      <div className={classes.groupTopBlock}>\r\n        {group\r\n          ? <Typography className={classes.groupTopBlockText}>{group.group}</Typography>\r\n          : <Skeleton variant=\"text\" width={250} height={20} />\r\n        }\r\n        {isActive && <PurpleCircleSvg />}\r\n      </div>\r\n\r\n      <div className={classes.groupBottomBlock}>\r\n        {group\r\n          ? <Typography className={classes.groupBottomBlockText}>{group.count} тегов</Typography>\r\n          : <Skeleton variant=\"text\" width={80} height={20} />\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TagGroup;\r\n","import React, { FC } from 'react';\r\nimport { useAppSelector } from \"../../../../hooks/redux\";\r\nimport TagGroup from \"./TagGroup/TagGroup\";\r\n\r\n\r\nconst TagGroups: FC = () => {\r\n  const tagGroups = useAppSelector(state => state.tags.tagGroups);\r\n  const currentGroup = useAppSelector(state => state.tags.currentTagGroup);\r\n\r\n  return (\r\n    <div style={{ padding: '5px 0' }}>\r\n      {tagGroups.map((group) => {\r\n        return (\r\n          <TagGroup\r\n            group={group}\r\n            isActive={Boolean(currentGroup && group && group.group === currentGroup.group)}\r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagGroups;\r\n","import { makeStyles } from \"@mui/styles\";\r\nimport { Theme } from \"@mui/material\";\r\nimport { TagType } from \"../../../../../store/tags/tags.types\";\r\n\r\ntype TagItemStylesType = {\r\n  isActive: boolean,\r\n  tag: TagType | null\r\n}\r\n\r\nexport const useTagItemStyles = makeStyles<Theme, TagItemStylesType>((theme: Theme) => ({\r\n  itemBox: {\r\n    cursor: 'pointer',\r\n    minHeight: '31px',\r\n\r\n    padding: '9px 24px',\r\n    transition: '0.1s',\r\n    backgroundColor: props => props.isActive ? '#F9F0FF' : '#F8FAFC',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    borderRight: '4px solid #FFFFFF',\r\n    borderColor: props => props.isActive ? '#9254DE' : '#F8FAFC',\r\n    '&:hover': {\r\n      borderColor: props => props.isActive ? '#722ED1' : '#F9F0FF',\r\n      backgroundColor: '#F9F0FF'\r\n    },\r\n    '&:hover div': {\r\n      color: \"#722ED1\",\r\n    }\r\n  },\r\n  item: {\r\n    fontWeight: '700',\r\n    color: props => props.isActive ? '#722ED1' : '#2F3747',\r\n    fontSize: '13px',\r\n    fontFamily: 'Inter, sans-serif',\r\n  },\r\n  rule: {\r\n    fontWeight: '700',\r\n    color: props => props.isActive ? '#722ED1' : '#2F3747',\r\n    marginTop: '5px',\r\n    fontSize: '10px',\r\n    fontFamily: 'Inter, sans-serif',\r\n    '&:hover': {\r\n      color: '#002766 !important'\r\n    }\r\n  }\r\n}));","import React, { FC, memo } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Skeleton, Typography } from \"@mui/material\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useTagItemStyles } from \"./TagItem.jss\";\r\nimport { TagType } from \"../../../../../store/tags/tags.types\";\r\nimport { InfoCircle, InfoCircleActive } from \"../../../MarkupRules\";\r\nimport { getTag, tagsSlice } from \"../../../../../store/tags/tags.slice\";\r\nimport { useAppSelector } from \"../../../../../hooks/redux\";\r\nimport { searchStringParserInObj } from \"../../TagPage\";\r\nimport { RootState } from \"../../../../../store/store\";\r\n\r\ntype TagItemPropsType = {\r\n  tag: TagType | null,\r\n  isActive: boolean\r\n};\r\n\r\nconst TagItem: FC<TagItemPropsType> = memo(({ tag, isActive }) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const classes = useTagItemStyles({ tag, isActive });\r\n  const currentGroup = useAppSelector(state => state.tags.currentTagGroup);\r\n\r\n\r\n  const search = useAppSelector(state => state.tags.searchParams);\r\n  const searchParamsObject = searchStringParserInObj(search);\r\n\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n  // ${language}/${userId}/\r\n\r\n\r\n  async function onTagItemClick() {\r\n    if (!isActive && tag && currentGroup) {\r\n      dispatch(tagsSlice.actions.setCurrentTag(null));\r\n      dispatch(tagsSlice.actions.setActiveGlobalFilterCriterias([]));\r\n      dispatch(tagsSlice.actions.removeFragments(null));\r\n      dispatch(tagsSlice.actions.removeSetTags(null));\r\n      await dispatch(getTag(tag.id));\r\n\r\n      if (searchParamsObject.search) {\r\n        dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${tag.id}&search=${searchParamsObject.search}`));\r\n        history.location.pathname = `/`;\r\n        history.replace(`${language}/${userId}/markuprules/tags?group=${currentGroup.group}&id=${tag.id}&search=${searchParamsObject.search}`);\r\n      } else {\r\n        dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${tag.id}`));\r\n        history.location.pathname = `/`;\r\n        history.replace(`${language}/${userId}/markuprules/tags?group=${currentGroup.group}&id=${tag.id}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.itemBox} onClick={onTagItemClick}>\r\n      <div style={{ minWidth: '130px' }}>\r\n        <div className={classes.item}>\r\n          {tag\r\n            ? <>{tag.title}</>\r\n            : <Skeleton variant=\"text\" width={130} height={15} />\r\n          }\r\n        </div>\r\n      </div>\r\n      <div style={{ display: 'flex', alignItems: 'center' }}>\r\n        {isActive ? <InfoCircleActive style={{ marginLeft: '30px' }} /> : <InfoCircle style={{ marginLeft: '30px' }} />}\r\n      </div>\r\n    </div>\r\n  )\r\n});\r\n\r\nexport default TagItem;\r\n","import React, { FC } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../../../hooks/redux\";\r\nimport { RootState } from \"../../../../store/store\";\r\nimport { translate } from \"../../../../localizations\";\r\nimport TagItem from \"./TagItem/TagItem\";\r\n\r\nconst TagItems: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  const tags = useAppSelector(state => state.tags.tags);\r\n  const currentTag = useAppSelector(state => state.tags.currentTag);\r\n\r\n  return (\r\n    <div style={{ padding: '5px 0' }}>\r\n      {tags && tags.length > 0\r\n        ?\r\n        tags.map((tag) => {\r\n          return (\r\n            <TagItem\r\n              tag={tag}\r\n              isActive={Boolean(currentTag && tag && currentTag.id === tag.id)}\r\n            />\r\n          )\r\n        })\r\n        :\r\n        <div\r\n          style={{\r\n            fontFamily: 'Inter, sans-serif',\r\n            fontWeight: '700',\r\n            fontSize: '16px',\r\n            marginLeft: '24.5px',\r\n\r\n            color: '#738094'\r\n          }}\r\n        >\r\n          {translate('nothingFound_dicts', language)}\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagItems;\r\n","import React, { Dispatch, FC, useState } from 'react';\r\nimport { IconButton, InputBase, Typography } from \"@mui/material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport ModalWindow from \"../../../../components/common/ModalWindowBox\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { translate } from \"../../../../localizations\";\r\nimport { useFormik } from \"formik\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport ContainedSelect from \"../../../../components/common/Selects/ContainedSelect\";\r\nimport { useAppSelector } from \"../../../../hooks/redux\";\r\nimport { RootState } from \"../../../../store/store\";\r\nimport { DirectionOptions, getTag, getTagGroups, getTags, postTag, tagsSlice } from \"../../../../store/tags/tags.slice\";\r\nimport Field from \"../../../../components/common/FIeld\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Snackbar, { SnackbarType } from \"../../../../components/common/Snackbar\";\r\nimport { dictsSlice, getDict, getDicts, getGroups } from \"../../../../store/dicts/dicts.slice\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { searchStringParserInObj } from \"../TagPage\";\r\n\r\n\r\ntype PostModalWindowType = {\r\n  isOpen: boolean,\r\n  handleMWClose: () => void,\r\n  setSnackbar: any\r\n}\r\n\r\nconst PostModalWindow: FC<PostModalWindowType> = ({ isOpen, handleMWClose, setSnackbar }) => {\r\n  const useStyles = makeStyles(({\r\n    MWTitle: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      marginBottom: '25px'\r\n    },\r\n    MWTitleText: {\r\n      fontWeight: '700 !important'\r\n    },\r\n    MWButtons: {\r\n      marginTop: '15px',\r\n      textAlign: 'right'\r\n    },\r\n    MWInput: {\r\n      width: '100%',\r\n      height: '20px',\r\n      '&:input': {\r\n        padding: '0'\r\n      }\r\n    },\r\n    MWTextTitle: {\r\n      cursor: 'default',\r\n      color: '#738094 !important',\r\n      fontWeight: '700 !important',\r\n      fontSize: '13px !important',\r\n      margin: '5px 0 !important'\r\n    }\r\n  }));\r\n\r\n  const classes = useStyles();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n  const allDicts = useAppSelector(state => state.tags.allGlobalFilterCriterias).find(item => item.key === 'client_text');\r\n  const userId = useAppSelector(state => state.users.currentUser?.id);\r\n\r\n  function dictsConverter() {\r\n    if (allDicts) {\r\n      const result: { value: string, label: string }[] = []\r\n      for (let i = 0; i < allDicts.values.length; i++) {\r\n        result.push({ label: allDicts.values[i], value: allDicts.values[i] });\r\n      }\r\n      return result;\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  const convertedDicts = dictsConverter();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // костыльный костыль\r\n  const [render, setRender] = useState<string>('');\r\n  const search = useAppSelector(state => state.tags.searchParams);\r\n  const searchParamsObject = searchStringParserInObj(search);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      howSaid: DirectionOptions[0],\r\n      dict: convertedDicts[0],\r\n      group: ''\r\n    },\r\n    onSubmit: async () => {\r\n      setLoading(true);\r\n      const postTagData = await dispatch(postTag({\r\n        owner: userId,\r\n        title: formik.values.dict.value.slice(9),\r\n        group: formik.values.group,\r\n        rulePriority: 0,\r\n        calculatedRulePriority: 0,\r\n        enabled: true,\r\n        globalFilter: [],\r\n        fragmentRules: [{\r\n          phrasesAndDicts: [],\r\n          phrases: [],\r\n          dicts: [],\r\n          direction: formik.values.howSaid.value,\r\n          fromStart: false,\r\n          silentBefore: '',\r\n          silentAfter: '',\r\n          interruptTime: ''\r\n        }],\r\n        setTags: []\r\n      }));\r\n      // @ts-ignore\r\n      const tagId = postTagData.payload;\r\n\r\n      const groupsData = await dispatch(getTagGroups());\r\n      // @ts-ignore\r\n      const group = groupsData.payload.filter((item) => item.group === formik.values.group)[0];\r\n      dispatch(tagsSlice.actions.setCurrentTagGroup(group))\r\n      await dispatch(getTags({ group: formik.values.group }));\r\n      await dispatch(getTag(tagId));\r\n\r\n      handleMWClose();\r\n      setLoading(false);\r\n\r\n      setSnackbar({ type: 'success', value: true, time: 2000, text: 'Тег добавлен' });\r\n\r\n      dispatch(tagsSlice.actions.setSearchParams(`?group=${group.group}&id=${tagId}`));\r\n      history.location.pathname = `/`;\r\n      history.replace(`${language}/${userId}/markuprules/tags?group=${group.group}&id=${tagId}`);\r\n      dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n    }\r\n  })\r\n  return (\r\n    <ModalWindow\r\n      isMWOpen={isOpen} handleMWClose={handleMWClose}\r\n      text={\"Введите базовые данные тега\"}\r\n      width={'400px'}\r\n    >\r\n      <form onSubmit={formik.handleSubmit}>\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <Typography className={classes.MWTextTitle}>\r\n            Кто сказал\r\n          </Typography>\r\n          <ContainedSelect\r\n            width={'100%'}\r\n            onSelectChange={(e: any) => {\r\n              formik.values.howSaid = e;\r\n              setRender(e.value);\r\n            }}\r\n            options={DirectionOptions}\r\n            value={formik.values.howSaid}\r\n          />\r\n        </div>\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <Typography className={classes.MWTextTitle}>\r\n            Название словаря\r\n          </Typography>\r\n          <ContainedSelect\r\n            width={'100%'}\r\n            onSelectChange={(e: any) => {\r\n              formik.values.dict = e;\r\n              setRender(e.value);\r\n            }}\r\n            options={convertedDicts}\r\n            value={formik.values.dict}\r\n          />\r\n        </div>\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <Field\r\n            margin={'0 0 15px 0'}\r\n            label={\"Название группы\"}\r\n            width={\"100%\"}\r\n          >\r\n            <InputBase\r\n              name={\"group\"}\r\n              type=\"text\"\r\n              value={formik.values.group}\r\n              onChange={formik.handleChange}\r\n            />\r\n          </Field>\r\n        </div>\r\n\r\n        <div className={classes.MWButtons}>\r\n          <LoadingButton\r\n            loading={loading}\r\n            style={{ marginRight: '15px' }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n          >\r\n            {translate(\"sendButton\", language)}\r\n          </LoadingButton>\r\n          <LoadingButton\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleMWClose}\r\n          >\r\n            {translate(\"cancelButton\", language)}\r\n          </LoadingButton>\r\n        </div>\r\n      </form>\r\n\r\n    </ModalWindow>\r\n  );\r\n};\r\n\r\nexport default PostModalWindow;","import React, { useEffect, useState } from 'react';\r\nimport { MarkupRulesButtons, SearchInput } from \"../MarkupRules\";\r\nimport TagDetails from \"./TagDetails/TagDetails\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createNullArray, getTag, getTagGroups, getTags, tagsSlice } from \"../../../store/tags/tags.slice\";\r\nimport { TagGroupType, TagType } from \"../../../store/tags/tags.types\";\r\nimport { useTagsStyles } from './TagPage.jss';\r\nimport TagGroups from \"./TagGroups/TagGroups\";\r\nimport TagItems from \"./TagItems/TagItems\";\r\nimport { useAppSelector } from \"../../../hooks/redux\";\r\nimport PostModalWindow from \"./TagDetails/PostModalWindow\";\r\nimport Snackbar, { SnackbarType } from \"../../../components/common/Snackbar\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport { createQueryString } from \"../Dicts/Dicts\";\r\nimport { langSlice } from \"../../../store/lang/lang.slice\";\r\n\r\nexport function searchStringParserInObj(initialString: string) {\r\n  const searchString = initialString.slice(1);\r\n  const searchStringArray = searchString.split(\"&\");\r\n\r\n  let output: any = {};\r\n  for (let i = 0; i < searchStringArray.length; i++) {\r\n    const query = queryString.parse(searchStringArray[i]);\r\n    output = { ...output, ...query }\r\n  }\r\n  return output;\r\n}\r\n\r\n\r\nconst TagPage = () => {\r\n  const classes = useTagsStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentGroup = useAppSelector(state => state.tags.currentTagGroup);\r\n  const currentTag = useAppSelector(state => state.tags.currentTag);\r\n  const search = useAppSelector(state => state.tags.searchParams);\r\n\r\n\r\n  // логика открытия модально окна (MW - Modal Window).\r\n  const [addDictMWIsOpen, setAddDictMWIsOpen] = useState<boolean>(false);\r\n  const handleMWOpen = () => {\r\n    setAddDictMWIsOpen(true);\r\n  };\r\n  const handleMWClose = () => {\r\n    setAddDictMWIsOpen(false);\r\n  };\r\n\r\n\r\n  // запросы сразу после отрисовки компонента.\r\n  const getStartTagsData = async () => {\r\n    const searchParams = createQueryString(queryString.parse(search));\r\n    // группы.\r\n    const groupsData = await dispatch(getTagGroups())\r\n    // @ts-ignore\r\n    const groups: TagGroupType[] = groupsData.payload;\r\n\r\n    if (searchParams.length < 2) {\r\n      // устанавливаю первую группу как текущую.\r\n      const currentGroup = groups[0];\r\n      dispatch(tagsSlice.actions.setCurrentTagGroup(currentGroup));\r\n\r\n      // запрашиваю теги текущей группы.\r\n      const tagsData = await dispatch(getTags({ group: currentGroup.group }));\r\n      // @ts-ignore\r\n      const tags: TagType[] = tagsData.payload;\r\n\r\n      if (!currentTag) {\r\n        // устанавливаю первый тег как текущий.\r\n        await dispatch(getTag(tags[0].id));\r\n      }\r\n      dispatch(tagsSlice.actions.setSearchParams(`?group=${currentGroup.group}&id=${tags[0].id}`));\r\n      history.location.pathname = '/';\r\n      history.replace(`${language}/${userId}/markuprules/tags?group=${groups[0].group}&id=${tags[0].id}`)\r\n    } else {\r\n      queryByParameters(search);\r\n      history.location.pathname = '/';\r\n      let newSearch = search;\r\n      if (search[0] !== '?') {\r\n        newSearch = `?${search}`;\r\n      }\r\n      history.replace(`${language}/${userId}/markuprules/tags${newSearch}`);\r\n    }\r\n  }\r\n\r\n  const [snackbar, setSnackbar] = useState<SnackbarType>({\r\n    type: 'success',\r\n    text: '',\r\n    value: false,\r\n    time: null\r\n  });\r\n\r\n\r\n  const history = useHistory();\r\n\r\n  const { path } = JSON.parse(localStorage.getItem('path') || '{}');\r\n  let pathArray = [];\r\n  if (path) {\r\n    pathArray = path.split(\"/\");\r\n  }\r\n  const language = pathArray[1];\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n  // ${language}/${userId}/\r\n\r\n  async function queryByParameters(search: string) {\r\n\r\n    const groupsData = await dispatch(getTagGroups());\r\n    // @ts-ignore\r\n    const groups: TagGroupType[] = groupsData.payload;\r\n\r\n    const searchParamsObject = searchStringParserInObj(search);\r\n\r\n    const currentGroupLocal = groups.find(item => {\r\n      if (item) {\r\n        return item.group === searchParamsObject.group\r\n      }\r\n    });\r\n    if (currentGroupLocal && currentGroup && currentGroupLocal.group !== currentGroup.group) {\r\n      dispatch(tagsSlice.actions.setTags(createNullArray(10)));\r\n    }\r\n    dispatch(tagsSlice.actions.setCurrentTag(null));\r\n\r\n    let tags = null;\r\n\r\n    if (currentGroupLocal && searchParamsObject.search) {\r\n      dispatch(tagsSlice.actions.setCurrentTagGroup(currentGroupLocal));\r\n      const tagsData = await dispatch(getTags({ group: currentGroupLocal.group, filter: searchParamsObject.search }));\r\n      // @ts-ignore\r\n      tags = tagsData.payload;\r\n    }\r\n    if (currentGroupLocal && !searchParamsObject.search) {\r\n      dispatch(tagsSlice.actions.setCurrentTagGroup(currentGroupLocal));\r\n      dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n      const tagsData = await dispatch(getTags({ group: currentGroupLocal.group }));\r\n      // @ts-ignore\r\n      tags = tagsData.payload;\r\n    }\r\n    if (tags) {\r\n      if (tags.find((item: any) => item.id === searchParamsObject.id)) {\r\n        await dispatch(getTag(searchParamsObject.id));\r\n      } else {\r\n        dispatch(tagsSlice.actions.setCurrentTag(false));\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return history.listen((location) => {\r\n      const currentSearch = createQueryString(queryString.parse(location.search));\r\n      let oldSearchConverted = createQueryString(queryString.parse(search));\r\n      if (oldSearchConverted[0] !== '?') {\r\n        oldSearchConverted = `?${search}`\r\n      }\r\n      debugger\r\n      if (currentSearch !== oldSearchConverted) {\r\n        queryByParameters(location.search);\r\n      }\r\n    });\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    getStartTagsData().then();\r\n    dispatch(langSlice.actions.setLoading(false));\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className={classes.tagsContainer}>\r\n      <div className={classes.dpLeftBlock}>\r\n        <div className={classes.dpLeftBlockGroups}>\r\n          {/* local url handler */}\r\n          <MarkupRulesButtons />\r\n\r\n          {/* groups */}\r\n          <div className={classes.dpBothBox}>\r\n            <TagGroups />\r\n          </div>\r\n        </div>\r\n\r\n        {/* tags */}\r\n        <div className={classes.dpLeftBlockDicts}>\r\n          <SearchInput\r\n            onSubmit={async (values) => {\r\n              const searchObj = searchStringParserInObj(history.location.search);\r\n              dispatch(tagsSlice.actions.setTags(createNullArray(20)));\r\n              dispatch(tagsSlice.actions.setCurrentTag(null));\r\n              const tagsData = await dispatch(getTags({ group: searchObj.group, filter: values.search }));\r\n              // @ts-ignore\r\n              const tags: TagType[] = tagsData.payload;\r\n              if (tags.length < 1) {\r\n                await dispatch(tagsSlice.actions.setCurrentTag(false));\r\n              } else {\r\n                await dispatch(getTag(tags[0].id));\r\n              }\r\n            }}\r\n            handleMWOpen={() => {\r\n              setAddDictMWIsOpen(true);\r\n            }}\r\n          />\r\n          <div className={classes.dpBothBox}>\r\n            <TagItems />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* detail */}\r\n      <div className={classes.dpRightBlock}>\r\n        <TagDetails />\r\n      </div>\r\n\r\n      <PostModalWindow\r\n        setSnackbar={setSnackbar}\r\n        isOpen={addDictMWIsOpen}\r\n        handleMWClose={handleMWClose}\r\n      />\r\n\r\n      {snackbar.value &&\r\n        <Snackbar\r\n          type={snackbar.type}\r\n          open={snackbar.value}\r\n          onClose={() => {\r\n            setSnackbar({ ...snackbar, value: false })\r\n          }}\r\n          text={snackbar.text}\r\n          time={snackbar.time}\r\n        />\r\n      }\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagPage;","import React from 'react';\r\nimport { Typography } from \"@mui/material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { BlockBox } from \"../../../components/common\";\r\n\r\nconst ChecklistsDetail = () => {\r\n  const useStyles = makeStyles(({\r\n  }));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <BlockBox padding={'0 15px'} width={'100%'}>\r\n\r\n      <Typography\r\n        style={{ textAlign: 'center', color: 'rgba(0, 0, 0, 0.2)', paddingTop: '300px' }}\r\n        variant=\"h3\"\r\n      >\r\n        in this place will be checklists details\r\n      </Typography>\r\n\r\n    </BlockBox>\r\n  );\r\n};\r\n\r\nexport default ChecklistsDetail;","import React, { useState } from 'react';\r\nimport { MarkupRulesButtons, SearchInput } from \"../MarkupRules\";\r\nimport ModalWindow from \"../../../components/common/ModalWindowBox\";\r\nimport { Input } from \"../../../components/common\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport ChecklistsDetail from './ChecklistsDetail';\r\n\r\nconst ChecklistsPage = () => {\r\n  const useStyles = makeStyles(({\r\n    checklistsContainer: {\r\n      width: '100%',\r\n      height: '810px',\r\n      margin: '40px 10px',\r\n      display: 'flex'\r\n    },\r\n    checklistsLeftBlock: {\r\n      width: '29%',\r\n      marginRight: '2%',\r\n      backgroundColor: '#fff',\r\n      borderRadius: '10px',\r\n      height: '100%'\r\n    },\r\n    checklistsRightBlock: {\r\n      width: '40%',\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  const [addDictMWIsOpen, setAddDictMWIsOpen] = useState<boolean>(false);\r\n  const handleMWOpen = () => {\r\n    setAddDictMWIsOpen(true);\r\n  };\r\n  const handleMWClose = () => {\r\n    setAddDictMWIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.checklistsContainer}>\r\n      <div className={classes.checklistsLeftBlock}>\r\n        {/* local url handler */}\r\n        <MarkupRulesButtons />\r\n        <div style={{ marginTop: '25px' }}>\r\n          <SearchInput\r\n            onSubmit={(values) => { }}\r\n            handleMWOpen={handleMWOpen}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* detail */}\r\n      <div className={classes.checklistsRightBlock}>\r\n        <ChecklistsDetail />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChecklistsPage;","import React, { FC, memo, useEffect } from 'react';\r\nimport { CircularProgress, IconButton } from \"@mui/material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Header, Input } from \"../../components/common\";\r\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\r\nimport ToggleButton from \"@mui/material/ToggleButton\";\r\nimport Plus from \"../../components/common/Buttons/Plus\";\r\nimport { dictsSlice, getDict, getDicts } from \"../../store/dicts/dicts.slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { useFormik } from \"formik\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MarkupRulesPagesType } from \"../../store/dicts/dicts.types\";\r\nimport { useStyles } from \"../../App\";\r\nimport DictsPage from \"./Dicts/Dicts\";\r\nimport TagPage, { searchStringParserInObj } from \"./Tags/TagPage\";\r\nimport ChecklistsPage from \"./Checklists/Checklists\";\r\nimport { RootState } from \"../../store/store\";\r\nimport { translate } from '../../localizations';\r\nimport { tagsSlice } from \"../../store/tags/tags.slice\";\r\nimport { langSlice } from \"../../store/lang/lang.slice\";\r\n\r\n// CUSTOM COMMON COMPONENTS\r\ntype SearchInputType = {\r\n  onSubmit: (values: any) => void,\r\n  handleMWOpen: () => void\r\n};\r\n\r\nexport const SearchInput: FC<SearchInputType> = ({ onSubmit, handleMWOpen }) => {\r\n  // привет, предупреждаю после просмотра этого куска кода может пойти кровь из глаз.\r\n  // как-нибудь порефакторю.\r\n\r\n  const searchTagsParams = useAppSelector(state => state.tags.searchParams);\r\n  const searchDictsParams = useAppSelector(state => state.dicts.search);\r\n  const search = useAppSelector(state => state.tags.searchInput);\r\n\r\n  const { path } = JSON.parse(localStorage.getItem('path') || '{}');\r\n  const pathArray = path.split(\"/\");\r\n  const isDtOrTg = pathArray[4];\r\n\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const searchInHistory = searchStringParserInObj(history.location.search).search;\r\n\r\n\r\n  useEffect(() => {\r\n    if (searchInHistory) {\r\n      if (isDtOrTg === \"dictionaries\") {\r\n        const searchObj = searchStringParserInObj(history.location.search);\r\n        if (searchObj.search) {\r\n          dispatch(dictsSlice.actions.setSearch(`?group=${searchObj.group}&id=${searchObj.id}&search=${searchObj.search}`));\r\n          dispatch(tagsSlice.actions.setSearchInput(searchObj.search));\r\n          debugger\r\n        } else if (searchStringParserInObj(searchDictsParams).search) {\r\n          debugger\r\n          dispatch(dictsSlice.actions.setSearch(`?group=${searchObj.group}&id=${searchObj.id}`));\r\n          dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n          onSubmit({ search: \"\" });\r\n        }\r\n      } else if (isDtOrTg === \"tags\") {\r\n        const searchObj = searchStringParserInObj(history.location.search);\r\n        if (searchObj.search) {\r\n          dispatch(tagsSlice.actions.setSearchParams(`?group=${searchObj.group}&id=${searchObj.id}&search=${searchObj.search}`));\r\n          dispatch(tagsSlice.actions.setSearchInput(searchObj.search));\r\n          // onSubmit({search: searchObj.search});\r\n        } else {\r\n          dispatch(tagsSlice.actions.setSearchParams(`?group=${searchObj.group}&id=${searchObj.id}`));\r\n          dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n          onSubmit({ search: \"\" });\r\n        }\r\n      }\r\n    }\r\n\r\n  }, [searchInHistory]);\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      search: ''\r\n    },\r\n    onSubmit: async (values) => {\r\n      onSubmit({ search: search })\r\n      if (search) {\r\n        if (isDtOrTg === \"dictionaries\") {\r\n          const searchObj = searchStringParserInObj(history.location.search);\r\n          if (searchObj.search) {\r\n            dispatch(dictsSlice.actions.setSearch(`?group=${searchObj.group}&id=${searchObj.id}&search=${search}`));\r\n            history.location.pathname = '/';\r\n            history.replace(`${language}/${userId}/markuprules/dictionaries?group=${searchObj.group}&id=${searchObj.id}&search=${search}`)\r\n          } else {\r\n            let newSearchDictsParams = searchDictsParams;\r\n            if (newSearchDictsParams[0] != \"?\") {\r\n              newSearchDictsParams = `?${newSearchDictsParams}`\r\n            }\r\n            dispatch(dictsSlice.actions.setSearch(`${newSearchDictsParams}&search=${search}`));\r\n            history.location.pathname = '/';\r\n            history.replace(`${language}/${userId}/markuprules/dictionaries${newSearchDictsParams}&search=${search}`);\r\n          }\r\n        } else if (isDtOrTg === \"tags\") {\r\n          const searchObj = searchStringParserInObj(history.location.search);\r\n          if (searchObj.search) {\r\n            dispatch(tagsSlice.actions.setSearchParams(`?group=${searchObj.group}&id=${searchObj.id}&search=${search}`));\r\n            history.location.pathname = '/';\r\n            history.replace(`${language}/${userId}/markuprules/tags?group=${searchObj.group}&id=${searchObj.id}&search=${search}`)\r\n          } else {\r\n            let newSearchTagsParams = searchTagsParams;\r\n            if (newSearchTagsParams[0] != \"?\") {\r\n              newSearchTagsParams = `?${newSearchTagsParams}`\r\n            }\r\n            dispatch(tagsSlice.actions.setSearchParams(`${newSearchTagsParams}&search=${search}`));\r\n            history.location.pathname = '/';\r\n            history.replace(`${language}/${userId}/markuprules/tags${newSearchTagsParams}&search=${search}`)\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        if (isDtOrTg === \"dictionaries\") {\r\n          const searchObj = searchStringParserInObj(history.location.search);\r\n          dispatch(tagsSlice.actions.setSearchParams(`?group=${searchObj.group}&id=${searchObj.id}`));\r\n          history.location.pathname = '/';\r\n          history.replace(`${language}/${userId}/markuprules/dictionaries?group=${searchObj.group}&id=${searchObj.id}`)\r\n        } else if (isDtOrTg === \"tags\") {\r\n          const searchObj = searchStringParserInObj(history.location.search);\r\n          dispatch(tagsSlice.actions.setSearchParams(`?group=${searchObj.group}&id=${searchObj.id}`));\r\n          history.location.pathname = '/';\r\n          history.replace(`${language}/${userId}/markuprules/tags?group=${searchObj.group}&id=${searchObj.id}`);\r\n        }\r\n      }\r\n    },\r\n  });\r\n  const useStyles = makeStyles(({\r\n    searchInputBox: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      margin: '0 24px',\r\n    },\r\n    searchInputInputBox: {\r\n      position: 'relative',\r\n      width: '100%',\r\n    },\r\n    searchInputSvgBox: {\r\n      textAlign: 'center',\r\n      paddingTop: '9px',\r\n      position: 'absolute',\r\n      top: '-7.5px',\r\n      right: '-1px',\r\n      width: '32px',\r\n      height: 'calc(100% - 9px)'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n  return (\r\n    <div className={classes.searchInputBox}>\r\n      <form onSubmit={formik.handleSubmit} style={{ width: '100%' }}>\r\n        <div className={classes.searchInputInputBox}>\r\n          <Input\r\n            handleChange={(e) => {\r\n              dispatch(tagsSlice.actions.setSearchInput(e.target.value));\r\n            }}\r\n            value={search}\r\n            name={'search'}\r\n            type={'text'}\r\n            height={'35px'}\r\n            bcColor={'#F8FAFC'}\r\n            border={'1px solid #E3E8EF'}\r\n            label={translate('searchInputText_dicts', language)}\r\n          />\r\n          <div className={classes.searchInputSvgBox}>\r\n            <IconButton type={\"submit\"}>\r\n              <SearchSvg />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <Plus margin={'0 0 0 16px'} handleClick={handleMWOpen} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const MarkupRulesButtons = () => {\r\n  const useStyles = makeStyles(({\r\n    buttonsBox: {\r\n      margin: '24px 24px 0 24px',\r\n      boxShadow: 'none !important',\r\n    },\r\n    button: {\r\n      border: 'none !important',\r\n      transition: '0.4s !important',\r\n      outline: 'none !important',\r\n      height: '40px',\r\n      fontSize: '14px !important',\r\n      // @ts-ignore\r\n      textTransform: 'none !important',\r\n      color: '#738094 !important',\r\n      backgroundColor: '#EEF2F6 !important',\r\n      '&.Mui-selected, &:active': {\r\n        backgroundColor: '#D6D9DF !important',\r\n        color: '#000 !important'\r\n      },\r\n      '&.Mui-disabled': {\r\n        cursor: 'pointer'\r\n      }\r\n    }\r\n  }));\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n  const { language } = useAppSelector((state: RootState) => state.lang);\r\n\r\n\r\n  // LOGIC BLOCK\r\n  const activePage = useAppSelector(state => state.dicts.activePage);\r\n  // логика перехода между локальными страницами.\r\n  const handleChange = (\r\n    event: React.MouseEvent<HTMLElement>,\r\n    page: MarkupRulesPagesType,\r\n  ) => {\r\n    dispatch(dictsSlice.actions.setActivePage(page));\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(langSlice.actions.setLoading(false));\r\n  }, []);\r\n\r\n  const userIdData = useAppSelector(state => state.users.currentUser?.id);\r\n  const userId = userIdData ? userIdData : \"_\";\r\n\r\n  return (\r\n    <ToggleButtonGroup\r\n      className={classes.buttonsBox}\r\n      value={activePage}\r\n      exclusive\r\n      onChange={handleChange}\r\n    >\r\n      <ToggleButton\r\n        disabled={\"dictionaries\" === activePage}\r\n        className={classes.button} value=\"dictionaries\"\r\n        onClick={() => {\r\n          dispatch(langSlice.actions.setLoading(true));\r\n          dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n          history.location.search = \"\";\r\n          history.location.pathname = '/'\r\n          history.replace(`${language}/${userId}/markuprules/dictionaries`)\r\n        }}\r\n      >\r\n        {translate('buttonDictsName_dicts', language)}\r\n      </ToggleButton>\r\n\r\n      <ToggleButton\r\n        className={classes.button} value=\"tags\"\r\n        onClick={() => {\r\n          dispatch(langSlice.actions.setLoading(true));\r\n          dispatch(tagsSlice.actions.setSearchInput(\"\"));\r\n          history.location.search = \"\";\r\n          history.location.pathname = '/'\r\n          history.replace(`${language}/${userId}/markuprules/tags`)\r\n        }}\r\n      >\r\n        {translate('buttonTagsName_dicts', language)}\r\n      </ToggleButton>\r\n\r\n      {/*<ToggleButton*/}\r\n      {/*  className={classes.button} disabled={\"checklists\" === activePage} value=\"checklists\"*/}\r\n      {/*  onClick={() => {*/}\r\n      {/*    history.location.pathname = '/'*/}\r\n      {/*    history.replace('markuprules/checklists')*/}\r\n      {/*  }}*/}\r\n      {/*>*/}\r\n      {/*  {translate('buttonChecklistsName_dicts', language)}*/}\r\n      {/*</ToggleButton>*/}\r\n    </ToggleButtonGroup>\r\n  );\r\n};\r\n\r\n// SVG BLOCK\r\nexport const SearchSvg = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M9.59029 10.2973C7.82342 11.7125 5.23712 11.6011 3.59927 9.9632C1.84191 8.20587 1.84191 5.35663 3.59927 3.59927C5.35663 1.84191 8.20589 1.84191 9.96322 3.59927C11.6011 5.23712 11.7125 7.8234 10.2974 9.59027L13.7344 13.0273C13.9297 13.2226 13.9297 13.5392 13.7344 13.7345C13.5392 13.9297 13.2226 13.9297 13.0274 13.7345L9.59029 10.2973ZM4.30638 9.25614C2.93954 7.88927 2.93954 5.67321 4.30638 4.30638C5.67321 2.93954 7.88929 2.93954 9.25616 4.30638C10.622 5.67221 10.623 7.886 9.25916 9.25314C9.25809 9.25414 9.25709 9.25507 9.25609 9.25614C9.25509 9.25714 9.25409 9.25814 9.25309 9.25914C7.88602 10.6229 5.67221 10.6219 4.30638 9.25614Z\"\r\n        fill=\"#738094\" />\r\n    </svg>\r\n  );\r\n};\r\nexport const InfoCircleActive = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M3.25 12C3.25 7.16751 7.16751 3.25 12 3.25C16.8325 3.25 20.75 7.16751 20.75 12C20.75 16.8325 16.8325 20.75 12 20.75C7.16751 20.75 3.25 16.8325 3.25 12ZM13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8ZM12 10.75C12.4142 10.75 12.75 11.0858 12.75 11.5V16.5C12.75 16.9142 12.4142 17.25 12 17.25C11.5858 17.25 11.25 16.9142 11.25 16.5V11.5C11.25 11.0858 11.5858 10.75 12 10.75Z\"\r\n        fill=\"#9254DE\" />\r\n    </svg>\r\n  );\r\n};\r\nexport const InfoCircle = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path\r\n        d=\"M11.916 2.66602C6.80787 2.66602 2.66602 6.80787 2.66602 11.916C2.66602 17.0242 6.80787 21.166 11.916 21.166C17.0242 21.166 21.166 17.0242 21.166 11.916C21.166 6.80787 17.0242 2.66602 11.916 2.66602ZM11.916 19.5968C7.67506 19.5968 4.23521 16.157 4.23521 11.916C4.23521 7.67506 7.67506 4.23521 11.916 4.23521C16.157 4.23521 19.5968 7.67506 19.5968 11.916C19.5968 16.157 16.157 19.5968 11.916 19.5968Z\"\r\n        fill=\"#738094\" />\r\n      <path\r\n        d=\"M10.666 7.85649C10.666 8.17223 10.7914 8.47503 11.0147 8.69829C11.238 8.92154 11.5408 9.04697 11.8565 9.04697C12.1722 9.04697 12.475 8.92154 12.6983 8.69829C12.9215 8.47503 13.047 8.17223 13.047 7.85649C13.047 7.54076 12.9215 7.23796 12.6983 7.0147C12.475 6.79144 12.1722 6.66602 11.8565 6.66602C11.5408 6.66602 11.238 6.79144 11.0147 7.0147C10.7914 7.23796 10.666 7.54076 10.666 7.85649ZM12.6501 11.4279C12.6501 10.9896 12.2948 10.6343 11.8565 10.6343C11.4182 10.6343 11.0628 10.9896 11.0628 11.4279C11.0628 11.7747 11.0628 12.1148 11.0628 12.166V16.1921C11.0628 16.2446 11.0628 16.6143 11.0628 16.9835C11.0628 17.4218 11.4182 17.7771 11.8565 17.7771C12.2948 17.7771 12.6501 17.4218 12.6501 16.9835C12.6501 16.6143 12.6501 16.2446 12.6501 16.1921V12.166C12.6501 12.1148 12.6501 11.7747 12.6501 11.4279Z\"\r\n        fill=\"#738094\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst MarkupRules = memo(() => {\r\n  const history = useHistory();\r\n  const path = history.location.pathname.split('/');\r\n  const pathActivePage = path[4];\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    document.title = \"Правила разметки | IMOT.io\";\r\n    if (pathActivePage) {\r\n      dispatch(dictsSlice.actions.setActivePage(pathActivePage));\r\n    } else {\r\n      dispatch(dictsSlice.actions.setActivePage('dictionaries'));\r\n    }\r\n  }, []);\r\n\r\n  const appClasses = useStyles();\r\n  // для перерисовки\r\n  const activePage = useAppSelector(state => state.dicts.activePage);\r\n  return (\r\n    <div>\r\n      {(activePage === 'dictionaries' || activePage === 'tags' || activePage === 'checklists')\r\n        ?\r\n        <div>\r\n          <div className={appClasses.container}>\r\n            {activePage === 'dictionaries' && <DictsPage />}\r\n            {activePage === 'tags' && <TagPage />}\r\n            {activePage === 'checklists' && <ChecklistsPage />}\r\n          </div>\r\n        </div>\r\n        :\r\n        <div>\r\n          <div style={{\r\n            fontWeight: '700',\r\n            marginTop: '400px',\r\n            textAlign: 'center',\r\n            fontSize: '45px',\r\n            fontFamily: 'sans-serif'\r\n          }}>\r\n            404\r\n          </div>\r\n        </div>\r\n\r\n      }\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default MarkupRules;\r\n","import React, { useState, useEffect } from 'react';\r\nimport IconButton from \"../../components/common/IconButton\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { BlockBox } from \"../../components/common\";\r\nimport { Alert, Button, Typography } from \"@mui/material\";\r\nimport ContainedSelect from \"../../components/common/Selects/ContainedSelect\";\r\nimport Snackbar from \"../../components/common/Snackbar\";\r\n\r\nconst DownloadSvg = () => {\r\n  return (\r\n    <svg width=\"56\" height=\"56\" viewBox=\"0 0 56 56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M11.666 37.916C12.6325 37.916 13.416 38.6995 13.416 39.666V44.3327C13.416 44.6549 13.6772 44.916 13.9993 44.916H41.9994C42.3216 44.916 42.5827 44.6549 42.5827 44.3327V39.666C42.5827 38.6995 43.3662 37.916 44.3327 37.916C45.2992 37.916 46.0827 38.6995 46.0827 39.666V44.3327C46.0827 46.5878 44.2545 48.416 41.9994 48.416H13.9993C11.7442 48.416 9.91602 46.5878 9.91602 44.3327V39.666C9.91602 38.6995 10.6995 37.916 11.666 37.916Z\"\r\n        fill=\"#738094\" />\r\n      <path\r\n        d=\"M25.0552 8.75C23.8552 8.75 22.8539 9.66728 22.7491 10.8629C22.3906 14.9526 22.3274 19.0624 22.5597 23.1603C21.9834 23.1921 21.4073 23.2291 20.8315 23.271L17.356 23.5244C16.016 23.622 15.2669 25.1162 15.9903 26.2484C18.4684 30.1266 21.6615 33.498 25.3994 36.1832L26.7917 37.1835C27.5139 37.7022 28.4866 37.7022 29.2088 37.1835L30.6011 36.1832C34.3391 33.498 37.532 30.1266 40.0103 26.2484C40.7336 25.1162 39.9846 23.622 38.6446 23.5244L35.1691 23.271C34.5932 23.2291 34.0171 23.1921 33.4408 23.1603C33.6732 19.0624 33.6099 14.9526 33.2515 10.8629C33.1465 9.66728 32.1453 8.75 30.9453 8.75H25.0552Z\"\r\n        fill=\"#738094\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst ErrorSvg = () => {\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"8\" fill=\"#FF4D4F\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M11.1618 4.83737C11.3896 5.06518 11.3896 5.43455 11.1618 5.66236L5.66187 11.1623C5.43406 11.3901 5.06469 11.3901 4.83688 11.1623C4.60906 10.9345 4.60906 10.5651 4.83688 10.3373L10.3368 4.83737C10.5646 4.60955 10.934 4.60955 11.1618 4.83737Z\"\r\n        fill=\"white\" />\r\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n        d=\"M4.83688 4.83737C5.06469 4.60955 5.43406 4.60955 5.66187 4.83737L11.1618 10.3373C11.3896 10.5651 11.3896 10.9345 11.1618 11.1623C10.934 11.3901 10.5646 11.3901 10.3368 11.1623L4.83688 5.66236C4.60906 5.43455 4.60906 5.06518 4.83688 4.83737Z\"\r\n        fill=\"white\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\nconst LoadCall = () => {\r\n  const useStyles = makeStyles(({\r\n    loadCallInner: {\r\n      padding: '40px 20px',\r\n      margin: '0 auto',\r\n    },\r\n    loadCallTitle: {\r\n      textAlign: 'center',\r\n      margin: '24px 0 30px 0 !important',\r\n      fontSize: '18px !important',\r\n      color: '#2F3747 !important',\r\n      fontWeight: '700 !important',\r\n      cursor: 'default'\r\n    },\r\n    loadCallSelectLabel: {\r\n      cursor: 'default',\r\n      marginBottom: '5px !important',\r\n      color: '#738094 !important',\r\n      fontWeight: '500 !important',\r\n    },\r\n    loadCallButton: {\r\n      width: '100% !important',\r\n      // @ts-ignore\r\n      textTransform: 'none !important'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n\r\n\r\n  const employeeSelectTestOptions = [\r\n    { value: 'Слева', label: 'Слева' },\r\n    { value: 'В центре', label: 'В центре' },\r\n    { value: 'Справа', label: 'Справа' }\r\n  ];\r\n  const [employeeSelectTestValues, setEmployeeSelectTestValues] = useState(employeeSelectTestOptions[0]);\r\n\r\n  const metaSelectTestOptions = [\r\n    { value: 'Не вытаскивать', label: 'Не вытаскивать' },\r\n    { value: 'Вытаскивать', label: 'Вытаскивать' }\r\n  ];\r\n  const [metaSelectTestValues, setMetaSelectTestValues] = useState(metaSelectTestOptions[0]);\r\n\r\n  const [snackbarIsOpen, setSnackbarIsOpen] = useState(false);\r\n  const handleOpen = () => {\r\n    setSnackbarIsOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setSnackbarIsOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.title = \"Загрузить звонок | IMOT.io\";\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <BlockBox margin={'60px auto 110px auto'} width={'540px'}>\r\n      <div className={classes.loadCallInner}>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <IconButton\r\n            borderRadius={'10px'}\r\n            icon={<DownloadSvg />}\r\n            backgroundColor={'#E3E8EF'}\r\n            onClick={() => null}\r\n            margin={'0'}\r\n            width={'96px'}\r\n            height={'96px'}\r\n          />\r\n        </div>\r\n        <Typography className={classes.loadCallTitle}>Загрузите аудио в формате MP3 или WAV</Typography>\r\n        <div style={{ width: '320px', margin: '0 auto' }}>\r\n          <div style={{ marginBottom: '30px' }}>\r\n            <Typography className={classes.loadCallSelectLabel}>Позиция сотрудника</Typography>\r\n            <ContainedSelect\r\n              width={'320px'}\r\n              justify={'center'}\r\n              onSelectChange={(event) => setEmployeeSelectTestValues(event)}\r\n              options={employeeSelectTestOptions}\r\n              value={employeeSelectTestValues}\r\n            />\r\n          </div>\r\n          <div style={{ marginBottom: '30px' }}>\r\n            <Typography className={classes.loadCallSelectLabel}>Позиция сотрудника</Typography>\r\n            <ContainedSelect\r\n              width={'320px'}\r\n              justify={'center'}\r\n              onSelectChange={(event) => setMetaSelectTestValues(event)}\r\n              options={metaSelectTestOptions}\r\n              value={metaSelectTestValues}\r\n            />\r\n          </div>\r\n          <Button onClick={handleOpen} variant={\"contained\"} className={classes.loadCallButton}>Загрузить аудио</Button>\r\n        </div>\r\n      </div>\r\n      <Snackbar\r\n        type={'error'}\r\n        open={snackbarIsOpen}\r\n        onClose={handleClose}\r\n        text={'Эта функция пока не работает'}\r\n        time={2000}\r\n      />\r\n    </BlockBox>\r\n  );\r\n};\r\n\r\nexport default LoadCall;\r\n","import React, { FC, useState, useEffect } from 'react';\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { BlockBox } from \"../../components/common\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst MenuItem: FC<{ isActive: boolean, text: string, handleClick: () => void }> = ({ isActive, text, handleClick }) => {\r\n  const useMenuItemStyles = makeStyles(({\r\n    menuItem: {\r\n      cursor: 'pointer',\r\n      borderLeft: '2px solid #EEF2F6',\r\n      borderColor: isActive ? '#9254DE' : '#EEF2F6',\r\n      padding: '9px 16px'\r\n    },\r\n    menuItemText: {\r\n      color: isActive ? '#9254DE !important' : '#738094 !important',\r\n      fontWeight: '700 !important'\r\n    }\r\n  }));\r\n  const classes = useMenuItemStyles();\r\n  return (\r\n    <div className={classes.menuItem} onClick={handleClick}>\r\n      <Typography className={classes.menuItemText}>{text}</Typography>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Settings = () => {\r\n  const useSettingsStyles = makeStyles(({\r\n    settingsBox: {\r\n      width: '100%',\r\n      height: '810px',\r\n      display: 'flex',\r\n      margin: '40px 0'\r\n    },\r\n    settingsMenu: {\r\n      width: '350px',\r\n      marginRight: '20px',\r\n      height: '100%',\r\n    },\r\n    settingsMenuTitle: {\r\n      fontWeight: '700 !important',\r\n      color: '#738094 !important',\r\n      marginBottom: '24px !important'\r\n    },\r\n\r\n    settingsBodyInner: {}\r\n  }));\r\n  const classes = useSettingsStyles();\r\n\r\n  const [settingsPageChanger, setSettingsPageChanger] = useState<'menu' | 'body'>('menu');\r\n\r\n  useEffect(() => {\r\n    document.title = \"Настройки | IMOT.io\";\r\n  }, [])\r\n\r\n  return (\r\n    <div className={classes.settingsBox}>\r\n      <div className={classes.settingsMenu}>\r\n        <Typography variant={'h5'} className={classes.settingsMenuTitle}>Настройки</Typography>\r\n        <MenuItem\r\n          text={\"Профиль\"}\r\n          isActive={settingsPageChanger === 'menu'}\r\n          handleClick={() => {\r\n            setSettingsPageChanger('menu')\r\n          }}\r\n        />\r\n        <MenuItem\r\n          text={\"Действия со звонком\"}\r\n          isActive={settingsPageChanger === 'body'}\r\n          handleClick={() => {\r\n            setSettingsPageChanger('body')\r\n          }}\r\n        />\r\n      </div>\r\n      <BlockBox width={'450px'} padding={'24px'}>\r\n        <div className={classes.settingsBodyInner}>\r\n          {settingsPageChanger === 'menu' &&\r\n            <div>\r\n              <div>\r\n                <Typography style={{ textAlign: 'center', color: 'rgba(0, 0, 0, 0.2)' }} variant=\"h4\">Профиль пользователя</Typography>\r\n                <Typography style={{ textAlign: 'center', color: '#722ED1', fontSize: '10px' }} variant=\"h2\">\r\n                  in developing\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          }\r\n          {settingsPageChanger === 'body' &&\r\n            <div>\r\n              <Typography style={{ textAlign: 'center', color: 'rgba(0, 0, 0, 0.2)' }} variant=\"h4\">Действия со звонком</Typography>\r\n              <Typography style={{ textAlign: 'center', color: '#722ED1', fontSize: '10px' }} variant=\"h2\">\r\n                in developing\r\n              </Typography>\r\n            </div>\r\n          }\r\n        </div>\r\n      </BlockBox>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Alert, CircularProgress, Typography } from \"@mui/material\";\r\n\r\nimport { useAppSelector } from \"../../hooks/redux\";\r\nimport { callsSlice, getCallAudio, getCallInfo, getCallStt } from \"../../store/calls/calls.slice\";\r\nimport Call from \"./Call\";\r\nimport Preloader from '../../assets/loading.svg';\r\n\r\nconst CallPage = () => {\r\n\r\n  const useStyles = makeStyles(({\r\n    callPageBox: {\r\n      boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\"\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const searchParams = useAppSelector(state => state.calls.callPageSearchParams);\r\n\r\n  useEffect(() => {\r\n    const searchParamsObject = queryString.parse(history.location.search);\r\n    if (searchParamsObject.call && searchParamsObject.token) {\r\n      dispatch(callsSlice.actions.setCallPageSearchParams(history.location.search));\r\n    }\r\n  }, [history]);\r\n\r\n  async function fetchCallInfoData() {\r\n    const searchParamsObject = queryString.parse(history.location.search);\r\n    const id = searchParamsObject.id;\r\n    const token = searchParamsObject.token;\r\n    if (id && token) {\r\n      const callInfoData = await dispatch(getCallInfo({ id, token }));\r\n      const callAudioData = await dispatch(getCallAudio({ id, token }));\r\n      const callSttData = await dispatch(getCallStt({ id, token }));\r\n\r\n      // @ts-ignore\r\n      const callInfo = callInfoData.payload;\r\n\r\n      if (callInfo) {\r\n        dispatch(callsSlice.actions.setCurrentCall({\r\n          // @ts-ignore\r\n          id: id,\r\n          info: callInfo,\r\n          // @ts-ignore\r\n          stt: callSttData.payload,\r\n          // @ts-ignore\r\n          audio: callAudioData.payload\r\n        }));\r\n      } else {\r\n        dispatch(callsSlice.actions.setCurrentCall(false));\r\n      }\r\n    } else {\r\n      dispatch(callsSlice.actions.setCurrentCall(false));\r\n    }\r\n  }\r\n\r\n  // добавление параметров поиска\r\n  useEffect(() => {\r\n    fetchCallInfoData().then();\r\n  }, [searchParams]);\r\n\r\n  useEffect(() => {\r\n    document.title = \"Звонок | IMOT.io\";\r\n    return () => {\r\n      dispatch(callsSlice.actions.setCallPageSearchParams(\"\"));\r\n      dispatch(callsSlice.actions.setCurrentCall(null));\r\n    }\r\n  }, []);\r\n\r\n  const currentCall = useAppSelector(state => state.calls.currentCall);\r\n  const currentUser = useAppSelector(state => state.users.currentUser);\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n  const { language } = useAppSelector(state => state.lang);\r\n\r\n  return (\r\n    <div style={{ marginTop: '40px' }}>\r\n      {currentCall && (\r\n        <div className={classes.callPageBox}>\r\n          <Call\r\n            callInfo={currentCall.info}\r\n            callAudio={currentCall.audio}\r\n            callStt={currentCall.stt}\r\n            bundleIndex={null}\r\n            expanded={true}\r\n            handleExpandedChange={() => {\r\n            }}\r\n            solo={true}\r\n          />\r\n        </div>\r\n      )}\r\n      {currentCall === null && (\r\n        <div style={{ position: 'absolute', top: '35%', left: 'calc(50% - 50px)' }}>\r\n          <CircularProgress style={{ width: '100px', height: '100px' }} />\r\n        </div>\r\n      )}\r\n      {currentCall === false && (\r\n        <div style={{ width: '400px' }}>\r\n          <Alert severity=\"error\">Введены неверные параметры</Alert>\r\n          {isAuth ? (\r\n            <Link style={{ fontSize: '11px', marginLeft: '20px' }} to={`/${language}/${currentUser ? currentUser.id : \"_\"}/calls`}>\r\n              На главную страницу →\r\n            </Link>\r\n          ) : (\r\n            <Link style={{ fontSize: '11px', marginLeft: '20px' }} to={`/${language}/auth`}>\r\n              Открыть полную версию приложения →\r\n            </Link>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallPage;","import React, {useEffect, memo} from 'react';\r\n\r\nimport {Redirect, Route, Switch, Link, useHistory} from 'react-router-dom';\r\nimport {makeStyles} from '@mui/styles';\r\nimport {Typography} from '@mui/material';\r\nimport {useDispatch} from \"react-redux\";\r\nimport \"rsuite/dist/rsuite.min.css\";\r\n\r\nimport {\r\n  Auth,\r\n  Calls,\r\n  Reports,\r\n  MarkupRules,\r\n  LoadCall,\r\n  Settings\r\n} from './pages';\r\nimport {Header} from './components/common';\r\nimport {useAppSelector} from \"./hooks/redux\";\r\nimport {authSlice} from \"./store/auth/auth.slice\";\r\nimport {dictsSlice} from \"./store/dicts/dicts.slice\";\r\nimport {tagsSlice} from \"./store/tags/tags.slice\";\r\nimport {getLang, langSlice} from \"./store/lang/lang.slice\";\r\nimport CallPage from \"./pages/Calls/CallPage\";\r\nimport {callsSlice} from \"./store/calls/calls.slice\";\r\nimport Snackbar from \"./components/common/Snackbar\";\r\nimport {getChildUser, getChildUsers, getMe} from \"./store/users/users.slice\";\r\n\r\n\r\nexport const useStyles = makeStyles(({\r\n  wrapper: {\r\n    width: 'auto',\r\n  },\r\n  container: {\r\n    maxWidth: '1655px',\r\n    margin: '0 auto',\r\n    padding: '0 15px'\r\n  }\r\n}));\r\n\r\n\r\nconst App = memo(() => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const isAuth = useAppSelector(state => state.auth.isAuth);\r\n  // const {language} = useAppSelector(state => state.lang);\r\n  const snackbar = useAppSelector(state => state.lang.snackbar)\r\n\r\n  const {path} = JSON.parse(localStorage.getItem('path') || '{}');\r\n  let pathArray: string[] = [];\r\n  if (path) {\r\n    pathArray = path.split(\"/\");\r\n  }\r\n  const isDtOrTg = pathArray[4];\r\n\r\n\r\n  const searchDictsParams = useAppSelector(state => state.dicts.search);\r\n  const searchTagsParams = useAppSelector(state => state.tags.searchParams);\r\n  const searchCallParams = useAppSelector(state => state.calls.callPageSearchParams);\r\n  // костыль параметров поиска\r\n  let newSearch = history.location.search;\r\n  if (newSearch[0] !== '?') {\r\n    newSearch = `?${history.location.search}`\r\n  }\r\n  if (!searchDictsParams && isDtOrTg === \"dictionaries\") {\r\n    dispatch(dictsSlice.actions.setSearch(newSearch));\r\n  }\r\n  if (searchTagsParams && isDtOrTg === \"tags\") {\r\n    dispatch(tagsSlice.actions.setSearchParams(newSearch));\r\n  }\r\n  if (!searchCallParams && pathArray[2] === \"call\") {\r\n    dispatch(callsSlice.actions.setCallPageSearchParams(newSearch));\r\n  }\r\n\r\n  useEffect(() => {\r\n    const {token} = JSON.parse(localStorage.getItem('token') || '{}');\r\n    if (token) {\r\n      dispatch(authSlice.actions.setAuth(true))\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    history.listen((location) => {\r\n      localStorage.setItem('path', JSON.stringify({\r\n        path: location.pathname\r\n      }));\r\n    })\r\n  }, [history]);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.wrapper}>\r\n        {isAuth ? (\r\n          <Switch>\r\n            {/* Звонки */}\r\n            <Route path=\"/:lang/:userId/calls\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <Calls/>\r\n              </div>\r\n            </Route>\r\n            {/* Звонок */}\r\n            <Route path=\"/:lang/call\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <CallPage/>\r\n              </div>\r\n            </Route>\r\n            {/* Отсчеты */}\r\n            <Route path=\"/:lang/:userId/reports\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <Reports/>\r\n              </div>\r\n            </Route>\r\n\r\n            {/* Правила разметки */}\r\n            <Route path=\"/:lang/:userId/markuprules\">\r\n              <Header/>\r\n              <MarkupRules/>\r\n            </Route>\r\n\r\n            {/* Загрузить звонок */}\r\n            <Route path=\"/:lang/:userId/upload\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <LoadCall/>\r\n              </div>\r\n            </Route>\r\n\r\n            {/* Оповещение */}\r\n            <Route path=\"/:lang/:userId/alert\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <div className={classes.container}>\r\n                  <Typography style={{textAlign: 'center', color: 'rgba(0, 0, 0, 0.2)'}} variant=\"h2\">\r\n                    Alert\r\n                  </Typography>\r\n                  <Typography style={{textAlign: 'center', color: '#722ED1', fontSize: '10px'}} variant=\"h2\">\r\n                    in developing\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n            </Route>\r\n\r\n            {/* Настройки */}\r\n            <Route path=\"/:lang/:userId/settings\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <Settings/>\r\n              </div>\r\n            </Route>\r\n\r\n            {/*<Route exact path={`/${language}/auth`}>*/}\r\n            {/*  <Redirect to={path ? `${path}` : `/${language}/${currentUser ? currentUser.id : \"_\"}/calls`}/>*/}\r\n            {/*</Route>*/}\r\n            {/*<Route exact path=\"/\">*/}\r\n            {/*  <Redirect to={`/${language}/${currentUser ? currentUser.id : \"_\"}/calls`}/>*/}\r\n            {/*</Route>*/}\r\n            {/*<Route exact path=\"*\">*/}\r\n            {/*  <div style={{textAlign: \"center\", marginTop: \"250px\"}}>*/}\r\n            {/*    <h1 style={{fontSize: '80px', marginBottom: '30px'}}>404</h1>*/}\r\n            {/*    <Link style={{fontSize: '18px'}} to={`/${language}/${currentUser ? currentUser.id : \"_\"}/calls`}>*/}\r\n            {/*      На главную страницу →*/}\r\n            {/*    </Link>*/}\r\n            {/*  </div>*/}\r\n            {/*</Route>*/}\r\n\r\n          </Switch>\r\n        ) : (\r\n          <Switch>\r\n            {/* Авторизация */}\r\n            <Route exact path=\"/:lang/auth\">\r\n              <Auth/>\r\n            </Route>\r\n\r\n            {/* Звонок */}\r\n            <Route path=\"/:lang/call\">\r\n              <Header/>\r\n              <div className={classes.container}>\r\n                <CallPage/>\r\n              </div>\r\n            </Route>\r\n\r\n            <Route path=\"*\">\r\n              <CallPage/>\r\n            </Route>\r\n\r\n          </Switch>\r\n        )}\r\n      </div>\r\n\r\n       {/* Снаскбар */}\r\n      <div>\r\n        {snackbar.value && (\r\n          <Snackbar\r\n            type={snackbar.type}\r\n            open={snackbar.value}\r\n            onClose={() => {\r\n              dispatch(langSlice.actions.setSnackbar({value: false, type: 'success', time: null, text: ''}));\r\n            }}\r\n            text={snackbar.text}\r\n            time={snackbar.time}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default App\r\n","import {createTheme} from '@mui/material/styles';\r\n\r\nconst theme = createTheme({\r\n\r\n  typography: {\r\n    body1: {\r\n      fontFamily: \"Inter, sans-serif\",\r\n      fontSize: 14,\r\n    },\r\n    allVariants: {\r\n      fontFamily: \"Inter, sans-serif\",\r\n      'color': '#738094',\r\n    },\r\n    fontFamily: [\r\n      'Inter'\r\n    ].join(','),\r\n    'fontWeightLight': 300,\r\n    'fontWeightRegular': 400,\r\n    'fontWeightMedium': 500,\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#722ED1',\r\n      contrastText: '#FFFFFF'\r\n    },\r\n    secondary: {\r\n      main: \"#EFDBFF\",\r\n    },\r\n  }\r\n});\r\n\r\nexport default theme;","import {configureStore, combineReducers} from '@reduxjs/toolkit';\r\n\r\nimport {authSlice} from \"./auth/auth.slice\";\r\nimport {callsSlice} from \"./calls/calls.slice\";\r\nimport {searchSlice} from \"./search/search.slice\";\r\nimport {templateSlice} from \"./search/template.slice\";\r\nimport {dictsSlice} from \"./dicts/dicts.slice\";\r\nimport {usersSlice} from \"./users/users.slice\";\r\nimport {langSlice} from \"./lang/lang.slice\";\r\nimport {tagsSlice} from './tags/tags.slice';\r\nimport {reportsSlice} from './reports/reports.slice';\r\nimport {errorSlice} from \"./error/error.slice\";\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  lang: langSlice.reducer,\r\n  auth: authSlice.reducer,\r\n  users: usersSlice.reducer,\r\n  calls: callsSlice.reducer,\r\n  search: searchSlice.reducer,\r\n  template: templateSlice.reducer,\r\n  dicts: dictsSlice.reducer,\r\n  tags: tagsSlice.reducer,\r\n  reports: reportsSlice.reducer,\r\n  error: errorSlice.reducer\r\n})\r\n\r\nexport const setupStore = () => {\r\n  return configureStore({\r\n    reducer: rootReducer,\r\n    middleware: getDefaultMiddleware =>\r\n      getDefaultMiddleware({\r\n        serializableCheck: false,\r\n      }),\r\n  });\r\n};\r\n\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type AppStore = ReturnType<typeof setupStore>;\r\nexport type AppDispatch = AppStore['dispatch'];\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {HashRouter} from \"react-router-dom\";\r\nimport {ThemeProvider} from \"@mui/material/styles\";\r\nimport {StylesProvider} from '@material-ui/styles';\r\n\r\nimport App from './App';\r\nimport './index.css';\r\nimport theme from \"./theme\";\r\nimport {setupStore} from \"./store/store\";\r\nimport {Provider} from \"react-redux\";\r\n\r\nconst store = setupStore();\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __store__: any\r\n  }\r\n}\r\n// ЭТО ДЕМО\r\nwindow.__store__ = store;\r\n\r\n      ReactDOM.render(\r\n        <React.StrictMode>\r\n          <StylesProvider injectFirst>\r\n            <ThemeProvider theme={theme}>\r\n              <Provider store={store}>\r\n                <HashRouter>\r\n                  <App/>\r\n                </HashRouter>\r\n              </Provider>\r\n            </ThemeProvider>\r\n          </StylesProvider>\r\n        </React.StrictMode>, document.getElementById('root')\r\n      );\r\n"],"sourceRoot":""}